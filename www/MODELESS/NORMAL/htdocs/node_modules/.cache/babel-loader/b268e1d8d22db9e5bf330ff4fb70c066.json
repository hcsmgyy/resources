{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/thread-loader/dist/cjs.js!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/UpgradeAdvanced.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/UpgradeAdvanced.vue","mtime":1600155105014},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/thread-loader/dist/cjs.js","mtime":1600155105122},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js","mtime":1600155105338},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7Ci8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCB7IHNob3dSZXF1ZXN0U3VjY2VzcywgZGVlcENsb25lLCBnZXRJbmRleEJ5S2V5LCBnZXRJdGVtQnlLZXksIGNoZWNrUmFuZ2VPZk51bWJlciwgbm90Q29udGFpbkludmFsaWQsIGlzSG91ciwgaXNNaW51dGVPclNlYywgY2hlY2tGaWxlU2l6ZSB9IGZyb20gIkAvanMvY29tbW9uLmpzIjsKaW1wb3J0IHsgY2hlY2tGaWxlRm9ybWF0LCBzaG93RXJyb3JJbmZvIH0gZnJvbSAnLi4vanMvY29tbW9uJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvbW1vblBhZ2U6IENvbW1vblBhZ2UKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VkQ2ZnRGF0YToge30sCiAgICAgIHN1Ym1pdENmZ0RhdGE6IHt9LAogICAgICBzdWJtaXREYXRhOiB7fSwKICAgICAgYXBpRGF0YToge30sCiAgICAgIGRhdGE6IHsKICAgICAgICBnZXREYXRhU3VjY2VzczogZmFsc2UKICAgICAgfSwKICAgICAgc3RhdGVEYXRhOiB7fSwKICAgICAgaW50ZXJPYmo6IE9iamVjdCwKICAgICAgZGhjcE9wdGlvbkl0ZW1zOiBbewogICAgICAgICJrZXkiOiAxLAogICAgICAgICJsYWJlbCI6IHRoaXMuJHQoIkN1c3RvbU9wdGlvbiIpCiAgICAgIH0sIHsKICAgICAgICAia2V5IjogMiwKICAgICAgICAibGFiZWwiOiB0aGlzLiR0KCJPcHRpb240MyIpCiAgICAgIH0sIHsKICAgICAgICAia2V5IjogNCwKICAgICAgICAibGFiZWwiOiB0aGlzLiR0KCJPcHRpb242NiIpCiAgICAgIH1dLAogICAgICBzY2hlZHVsZVdlZWtJdGVtczogW10sCiAgICAgIHNjaGVkdWxlU29tZURheUl0ZW1zOiBbXSwKICAgICAgc29tZURheU9mV2VlazogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgZ2V0RGF0YSh0aGlzKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2U6IGZ1bmN0aW9uIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2UoZXZlbnQpIHsKICAgICAgLy9ESENQIE9wdGlvbiBFbmFibGUKICAgICAgaWYgKGV2ZW50Lml0ZW1LZXkgPT0gIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkVuYWJsZSIpIHsKICAgICAgICB2YXIgaXRlbSA9IGdldEl0ZW1CeUtleSh0aGlzLmRhdGEsICJkaGNwT3B0aW9uIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkVuYWJsZSIpOwogICAgICAgIGl0ZW0udmFsdWUgPSBldmVudC5uZXdWYWw7CiAgICAgICAgdGhpcy5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGdldERoY3BPcHRpb25WYWx1ZShldmVudC5uZXdWYWwpOwogICAgICB9IC8vTW9kZQogICAgICBlbHNlIGlmIChldmVudC5pdGVtS2V5ID09ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5NT0RFLk1vZGUiKSB7CiAgICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOwogICAgICAgICAgb25DaGVja1NjaGVkdWxlQXZhaWwodGhpcyk7CiAgICAgICAgfSAvL1NvbWVEYXkKICAgICAgICBlbHNlIGlmIChldmVudC5pdGVtS2V5ID09ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5EYXlPZldlZWsiKSB7CiAgICAgICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7CgogICAgICAgICAgICB2YXIgX2l0ZW0gPSBnZXRJdGVtQnlLZXkodGhpcy5kYXRhLCAiYXV0b21hdGljQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuU29tZURheU9mV2VlayIpOwoKICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbCA9PSA4KSB7CiAgICAgICAgICAgICAgX2l0ZW0uaXNTaG93ID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfaXRlbS5pc1Nob3cgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5pdGVtS2V5ID09ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Tb21lRGF5T2ZXZWVrIikgewogICAgICAgICAgICB2YXIgX2l0ZW0yID0gZ2V0SXRlbUJ5S2V5KHRoaXMuZGF0YSwgImF1dG9tYXRpY0F1dG9wIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiKTsKCiAgICAgICAgICAgIF9pdGVtMi52YWx1ZSA9IGV2ZW50Lm5ld1ZhbDsKICAgICAgICAgICAgdmFyIHNvbWVEYXlWYWx1ZSA9ICIiOwoKICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBldmVudC5uZXdWYWwpIHsKICAgICAgICAgICAgICBzb21lRGF5VmFsdWUgPSBzb21lRGF5VmFsdWUgKyBldmVudC5uZXdWYWxbaV0gKyAiLCI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBzb21lRGF5VmFsdWUuc3Vic3RyaW5nKDAsIHNvbWVEYXlWYWx1ZS5sZW5ndGggLSAxKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXRlbUtleSA9PSAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX01PREUuTW9kZSIpIHsKICAgICAgICAgICAgdGhpcy5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGV2ZW50Lm5ld1ZhbDsKICAgICAgICAgICAgb25DaGVja1JlYm9vdFNjaGVkdWxlQXZhaWwodGhpcyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOwogICAgICAgICAgfQogICAgfQogIH0KfTsKdmFyIE5vdEdldFJlc3BvbnNlID0gMDsKdmFyIE5vdEdldFJlc3BvbnNlTnVtID0gMDsKdmFyIElzQWxyZWFkeVJlYm9vdCA9IDA7CgpmdW5jdGlvbiBnZXREaGNwT3B0aW9uVmFsdWUodmFsdWUpIHsKICB2YXIgYm94ZXMgPSAwOwoKICBmb3IgKHZhciBpbmRleCBpbiB2YWx1ZSkgewogICAgYm94ZXMgPSBib3hlcyB8IHZhbHVlW2luZGV4XTsKICB9CgogIHJldHVybiBib3hlczsKfQoKZnVuY3Rpb24gZ2V0RGF0YSh2bSkgewogIHZtLiRheGlvcy5nZXQoImFwaS91cGdyYWRlQWR2YW5jZWQvaW5mbyIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAvLyB2bS5nZXREYXRhU3VjY2VzcyA9IHRydWU7CiAgICB2bS5hcGlEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgIHZtLmNoYW5nZWRDZmdEYXRhID0gZGVlcENsb25lKHJlc3BvbnNlLmRhdGEuY29uZmlnRGF0YSk7CiAgICB2bS5zdGF0ZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7IC8vc2NoZWR1bGVXZWVrSXRlbXPotYvlgLwKCiAgICB2bS5zY2hlZHVsZVdlZWtJdGVtcyA9IFtdOwogICAgdmFyIHdlZWtJdGVtID0gewogICAgICAia2V5IjogIjAiLAogICAgICAibGFiZWwiOiB2bS4kdCgiRXZlcnlEYXkiKQogICAgfTsKICAgIHZtLnNjaGVkdWxlV2Vla0l0ZW1zLnB1c2god2Vla0l0ZW0pOwogICAgdm0uc2NoZWR1bGVXZWVrSXRlbXMgPSBnZXRXZWVrSXRlbXModm0uc2NoZWR1bGVXZWVrSXRlbXMsIHZtLiR0KCJBbGxXZWVrRGF5cyIpKTsKICAgIHdlZWtJdGVtID0gewogICAgICAia2V5IjogIjgiLAogICAgICAibGFiZWwiOiB2bS4kdCgiU29tZURheSIpCiAgICB9OwogICAgdm0uc2NoZWR1bGVXZWVrSXRlbXMucHVzaCh3ZWVrSXRlbSk7IC8vc2NoZWR1bGVTb21kYXlJdGVtc+i1i+WAvAoKICAgIHZtLnNjaGVkdWxlU29tZURheUl0ZW1zID0gW107CiAgICB2bS5zY2hlZHVsZVNvbWVEYXlJdGVtcyA9IGdldFdlZWtJdGVtcyh2bS5zY2hlZHVsZVNvbWVEYXlJdGVtcywgdm0uJHQoIkFsbFdlZWtEYXlzIikpOyAvL3NvbWVEYXlPZldlZWvotYvlgLwKCiAgICB2bS5zb21lRGF5T2ZXZWVrID0gdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiXS5zcGxpdCgiLCIpOwogICAgY3JlYXRlUGFnZURhdGEodm0pOwogICAgdm0uZGF0YS5nZXREYXRhU3VjY2VzcyA9IHRydWU7IC8vZGhjcE9wdGlvbgoKICAgIHZhciBpdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJkaGNwT3B0aW9uIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkVuYWJsZSIpOwogICAgaXRlbS52YWx1ZSA9IFtdOwogICAgdmFyIGRoY3BPcHRpb25FbmFibGUgPSB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uRW5hYmxlIl07CgogICAgZm9yICh2YXIgaW5kZXggaW4gdm0uZGhjcE9wdGlvbkl0ZW1zKSB7CiAgICAgIGlmICh2bS5kaGNwT3B0aW9uSXRlbXNbaW5kZXhdLmtleSAmIGRoY3BPcHRpb25FbmFibGUpIHsKICAgICAgICBpdGVtLnZhbHVlLnB1c2godm0uZGhjcE9wdGlvbkl0ZW1zW2luZGV4XS5rZXkpOwogICAgICB9CiAgICB9CgogICAgSXNBbHJlYWR5UmVib290ID0gMDsgLy8gQXV0b21hdGljIEF1dG9wCgogICAgb25DaGVja1NjaGVkdWxlQXZhaWwodm0pOwogICAgb25DaGVja1JlYm9vdFNjaGVkdWxlQXZhaWwodm0pOwogICAgZ2V0QWN1dG9QU3RhdHVzKHZtKTsKICB9KTsKfQoKZnVuY3Rpb24gc3VibWl0RGF0YSh2bSkgewogIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IHRydWU7CiAgdmFyIHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAidXBncmFkZUFkdmFuY2VkIiwKICAgIGFjdGlvbjogInNldCIsCiAgICBjb25maWdEYXRhOiB2bS5zdWJtaXRDZmdEYXRhLAogICAgZGF0YTogdm0uc3VibWl0RGF0YQogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtKTsKICAgIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogIH0pOwogIHZtLnN1Ym1pdERhdGEgPSB7fTsKfQoKZnVuY3Rpb24gZ2V0Q29tbWl0RGF0YSh2bSkgewogIHZtLnN1Ym1pdENmZ0RhdGEgPSB7fTsKCiAgZm9yICh2YXIgY2hhbmdlZEtleSBpbiB2bS5jaGFuZ2VkQ2ZnRGF0YSkgewogICAgaWYgKHZtLmFwaURhdGEuY29uZmlnRGF0YVtjaGFuZ2VkS2V5XSAhPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XSkgewogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV07CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBnZXRXZWVrSXRlbXMoaXRlbXMsIHZhbHVlKSB7CiAgdmFyIERheU9mV2VlayA9IHZhbHVlLnNwbGl0KCImIik7CgogIGZvciAodmFyIGkgPSAxOyBpIDwgNzsgaSsrKSB7CiAgICB2YXIgX3dlZWtJdGVtID0gewogICAgICAia2V5IjogaS50b1N0cmluZygpLAogICAgICAibGFiZWwiOiBEYXlPZldlZWtbaV0KICAgIH07CiAgICBpdGVtcy5wdXNoKF93ZWVrSXRlbSk7CiAgfQoKICB2YXIgd2Vla0l0ZW0gPSB7CiAgICAia2V5IjogIjciLAogICAgImxhYmVsIjogRGF5T2ZXZWVrWzBdCiAgfTsKICBpdGVtcy5wdXNoKHdlZWtJdGVtKTsKICByZXR1cm4gaXRlbXM7Cn0gLy8gQVVUT1BfU1RBVEVfU1VDQ0VTUyA9IDAsCi8vIEFVVE9QX1NUQVRFX0ZBSUxFRCwgMQovLyBBVVRPUF9TVEFURV9DSEVDS19ST01fRkFJTEVELCAyCi8vIEFVVE9QX1NUQVRFX1VQR1JBRElORywgMwovLyBUSU1FT1VUIDQKLy8gRklOSVNIRUQgNQovLyBUQUxLSU5HIC0xCi8vIFdBSVRJTkcgLTIKCgpmdW5jdGlvbiBnZXRBY3V0b1BTdGF0dXModm0pIHsKICBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIi0xIikgewogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHJlc2V0VG9Ob3JtYWxQYWdlKHZtKTsKICAgIH0sIDY1MDApOwogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjAiKSB7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgcmVzZXRUb05vcm1hbFBhZ2Uodm0pOwogICAgfSwgNjUwMCk7CiAgfSBlbHNlIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiMSIpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICByZXNldFRvTm9ybWFsUGFnZSh2bSk7CiAgICB9LCA2NTAwKTsKICB9IGVsc2UgaWYgKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICIzIikgewogICAgcmVTdGFydENoZWNrQXV0b1Aodm0pOwogICAgdm0uaW50ZXJPYmogPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgIExvbmdDaGVja1N0YXR1cyh2bSk7CiAgICB9LCA0MDAwKTsKICB9IGVsc2UgaWYgKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICItMiIpIHsKICAgIHJlU3RhcnRDaGVja0F1dG9QKHZtKTsKICAgIHZtLmludGVyT2JqID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICBMb25nQ2hlY2tTdGF0dXModm0pOwogICAgfSwgNDAwMCk7CiAgfSBlbHNlIHsKICAgIHJlc2V0VG9Ob3JtYWxQYWdlKHZtKTsKICB9Cn0KCmZ1bmN0aW9uIExvbmdDaGVja1N0YXR1cyh2bSkgewogIGlmICgxID09IE5vdEdldFJlc3BvbnNlKSB7CiAgICB7CiAgICAgIHN0YXR1c0NoZWNrKHZtKTsKICAgICAgTm90R2V0UmVzcG9uc2VOdW0gPSAwOwogICAgICBOb3RHZXRSZXNwb25zZSA9IDA7CiAgICB9CiAgfSBlbHNlIHsKICAgIE5vdEdldFJlc3BvbnNlTnVtKys7CgogICAgaWYgKE5vdEdldFJlc3BvbnNlTnVtID49IDMpIHsKICAgICAgTm90R2V0UmVzcG9uc2UgPSAxOwogICAgfQogIH0KfQoKZnVuY3Rpb24gcmVzZXROb3RHZXRSZXNwb25zZSh2bSkgewogIGNsZWFySW50ZXJ2YWwodm0uaW50ZXJPYmopOwogIHZtLmludGVyT2JqID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgTG9uZ0NoZWNrU3RhdHVzKHZtKTsKICB9LCA0MDAwKTsKICBOb3RHZXRSZXNwb25zZSA9IDA7CiAgTm90R2V0UmVzcG9uc2VOdW0gPSAwOwp9CgpmdW5jdGlvbiByZVN0YXJ0Q2hlY2tBdXRvUCh2bSkgewogIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgc3RhdHVzQ2hlY2sodm0pOwogIH0sIDMwMDApOwp9CgpmdW5jdGlvbiBzdGF0dXNDaGVjayh2bSkgewogIGdldFN0YXR1ZURhdGEodm0pOwp9CgpmdW5jdGlvbiBvblN0c0FjdE9mQXV0b1Aodm0pIHsKICBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjIiKSB7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgZ2V0RGF0YSh2bSk7CiAgICB9LCA2NTAwKTsKICB9IGVsc2UgaWYgKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICIxIikgewogICAgY2xlYXJJbnRlcnZhbCh2bS5pbnRlck9iaik7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgZ2V0RGF0YSh2bSk7CiAgICB9LCA2NTAwKTsKICAgIHJldHVybiAiTm90R29PbiI7CiAgfSBlbHNlIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiMyIpIHt9IGVsc2UgaWYgKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICItMiIpIHt9IGVsc2UgaWYgKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICI0IikgewogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGdldERhdGEodm0pOwogICAgfSwgNjUwMCk7CiAgICByZXR1cm4gIk5vdEdvT24iOwogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjUiKSB7CiAgICBpZiAoIjEiID09IElzQWxyZWFkeVJlYm9vdCkgewogICAgICByZXR1cm4gIk5vdEdvT24iOwogICAgfQoKICAgIElzQWxyZWFkeVJlYm9vdCA9ICIxIjsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBnZXREYXRhKHZtKTsKICAgIH0sIDcwMDApOwogIH0KfQoKZnVuY3Rpb24gZ2V0U3RhdHVlRGF0YSh2bSkgewogIHZtLmRhdGEuZ2V0RGF0YVN1Y2Nlc3MgPSBmYWxzZTsKICB2bS4kYXhpb3MuZ2V0KCJhcGkvdXBncmFkZUFkdmFuY2VkL2luZm8/QXV0b3BOb3c9MSIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICB2bS5zdGF0ZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICByZXNldE5vdEdldFJlc3BvbnNlKHZtKTsKICAgIHZhciB0aGlzUmVzID0gb25TdHNBY3RPZkF1dG9QKHZtKTsKCiAgICBpZiAoIk5vdEdvT24iID09IHRoaXNSZXMpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHJlU3RhcnRDaGVja0F1dG9QKHZtKTsKICB9KTsKfQoKZnVuY3Rpb24gcmVzZXRUb05vcm1hbFBhZ2Uodm0pIHsKICBjbGVhckludGVydmFsKHZtLmludGVyT2JqKTsKfQoKZnVuY3Rpb24gb25BdXRvUENvbmZpcm0odm0pIHsKICBnZXRDb21taXREYXRhKHZtKTsKCiAgaWYgKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5NT0RFLk1vZGUiXSA9PSAwKSB7CiAgICBhbGVydCh2bS4kdCgiQVVUT1BEaXNhYmxlZFdhcm5pbmciKSk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoIWNoZWNrQ29tbWl0RGF0YSh2bSkpIHsKICAgIHJldHVybjsKICB9CgogIGlmIChjb25maXJtKHZtLiR0KCJTYXZlQW5kQXV0b1BDb25maXJtIikpKSB7CiAgICB2bS5zdWJtaXREYXRhID0gewogICAgICAiQVVUT1BOb3ciOiAiMSIKICAgIH07CiAgICBzdWJtaXREYXRhKHZtKTsKICAgIHZtLmRhdGEuZ2V0RGF0YVN1Y2Nlc3MgPSBmYWxzZTsKICAgIHZtLiRheGlvcy5nZXQoImFwaS91cGdyYWRlQWR2YW5jZWQvaW5mbz9BdXRvcE5vdz0xIikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgdm0uc3RhdGVEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICBnZXRBY3V0b1BTdGF0dXModm0pOwogICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBvbkNoZWNrU2NoZWR1bGVBdmFpbCh2bSkgewogIHZhciBzdHMgPSB0cnVlOwogIHZhciBpdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhdXRvbWF0aWNBdXRvcCIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Tb21lRGF5T2ZXZWVrIik7CgogIGlmICh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIl0gPT0gMiB8fCB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIl0gPT0gMykgewogICAgc3RzID0gZmFsc2U7CgogICAgaWYgKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5EYXlPZldlZWsiXSA9PSA4KSB7CiAgICAgIGl0ZW0uaXNTaG93ID0gdHJ1ZTsKICAgIH0KICB9IGVsc2UgewogICAgaXRlbS5pc1Nob3cgPSBmYWxzZTsKICB9CgogIHZhciBpdGVtMSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYXV0b21hdGljQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuRGF5T2ZXZWVrIik7CiAgdmFyIGl0ZW0yID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhdXRvbWF0aWNBdXRvcCIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiKTsKICB2YXIgaXRlbTMgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImF1dG9tYXRpY0F1dG9wIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLk1pbnV0ZU9mSG91ciIpOwogIGl0ZW0xLmRpc2FibGVkID0gc3RzOwogIGl0ZW0yLmRpc2FibGVkID0gc3RzOwogIGl0ZW0zLmRpc2FibGVkID0gc3RzOwp9CgpmdW5jdGlvbiBvbkNoZWNrUmVib290U2NoZWR1bGVBdmFpbCh2bSkgewogIHZhciBzdHMgPSB0cnVlOwoKICBpZiAodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9NT0RFLk1vZGUiXSA9PSAxKSB7CiAgICBzdHMgPSBmYWxzZTsKICB9CgogIHZhciBpdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJyZWJvb3RTY2hlZHVsZSIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfU0NIRURVTEUuRGF5T2ZXZWVrIik7CiAgaXRlbS5kaXNhYmxlZCA9IHN0czsKICBpdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJyZWJvb3RTY2hlZHVsZSIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfU0NIRURVTEUuSG91ck9mRGF5Iik7CiAgaXRlbS5kaXNhYmxlZCA9IHN0czsKfQoKZnVuY3Rpb24gX29uRXhwb3J0KHZtLCB0eXBlKSB7CiAgdmFyIHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAidXBncmFkZUFkdmFuY2VkIiwKICAgIGFjdGlvbjogImV4cG9ydCIsCiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IHR5cGUKICAgIH0KICB9OwogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSwgdm0uJHQoIkV4cG9ydFN1Y2Nlc3MiKSk7CiAgICB2YXIgYWRkcmVzcyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5hZGRyZXNzOwogICAgd2luZG93Lm9wZW4oYWRkcmVzcyk7CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uQ2xlYXJNRDUodm0pIHsKICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICB0YXJnZXQ6ICJ1cGdyYWRlQWR2YW5jZWQiLAogICAgYWN0aW9uOiAic2V0IiwKICAgIGRhdGE6IHsKICAgICAgIkNsZWFyTUQ1IjogIjEiCiAgICB9CiAgfTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJDbGVhclN1Y2Nlc3MiKSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uSW1wb3J0KHZtKSB7CiAgdmFyIGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgIm90aGVycyIsICJpbXBvcnRDb25maWdGaWxlIik7CiAgdmFyIGZpbGVOYW1lID0gaXRlbS52YWx1ZS5maWxlTmFtZTsKICB2YXIgZmlsZVVwTGltaXQgPSAxMDI0OyAvLzFNQiAKCiAgdmFyIGZpbGVMb3dlckxpbWl0ID0gMDsKCiAgaWYgKGZpbGVOYW1lID09ICIiIHx8IGZpbGVOYW1lID09IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKSkgewogICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkZpbGVFbXB0eVdhcm5pbmciKSk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoZmlsZU5hbWUubGVuZ3RoID49IDEyNykgewogICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIldhcm5pbmdGaWxlTmFtZVRvb0xvbmciKSk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoIShjaGVja0ZpbGVGb3JtYXQoZmlsZU5hbWUsICIuVEdaIiwgNCkgfHwgY2hlY2tGaWxlRm9ybWF0KGZpbGVOYW1lLCAiLkNPTkYiLCA1KSB8fCBjaGVja0ZpbGVGb3JtYXQoZmlsZU5hbWUsICIuQ0ZHIiwgNCkpKSB7CiAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiRmlsZUZvcm1hdFdhcm5pbmciKSk7CiAgICByZXR1cm47CiAgfQoKICB2YXIgRmlsZVNpemVGbGFnID0gY2hlY2tGaWxlU2l6ZShpdGVtLnZhbHVlLmZpbGVEYXRhLCBmaWxlVXBMaW1pdCwgZmlsZUxvd2VyTGltaXQpOwoKICBpZiAoRmlsZVNpemVGbGFnID09ICItMSIpIHsKICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJGaWxlTm90RXhpc3RXYXJuaW5nIikpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKEZpbGVTaXplRmxhZyA9PSAiLTIiKSB7CiAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiVXBsb2FkaW5nRmlsZVRvb0xhcmdlV2FybmluZyIpKTsKICAgIHJldHVybjsKICB9CgogIGlmIChGaWxlU2l6ZUZsYWcgPT0gIi0zIikgewogICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkZpbGVGb3JtYXRXYXJuaW5nIikpOwogICAgcmV0dXJuOwogIH0gLy/kuIrkvKAKCgogIGl0ZW0ubG9hZGluZyA9IHRydWU7CiAgdmFyIHVwRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogIHVwRGF0YS5hcHBlbmQoImZpbGUiLCBpdGVtLnZhbHVlLmZpbGVEYXRhKTsKICBheGlvcy5wb3N0KCJhcGkvdXBncmFkZUFkdmFuY2VkL3VwbG9hZCIsIHVwRGF0YSwgewogICAgaGVhZGVyczogewogICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiCiAgICB9CiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICBpZiAocmVzLmRhdGEucmV0Y29kZSA9PSAtMSkgewogICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiQ29uZmlnVXBsb2FkRmFpbGVkIikpOwogICAgfSBlbHNlIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IC0yKSB7CiAgICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJDb25maWduc3RhbGxGYWlsZWQiKSk7CiAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gMCkgewogICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJDb25maWdJbnN0YWxsU3VjY2VzcyIpKTsKICAgICAgaXRlbS52YWx1ZS5maWxlTmFtZSA9IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKTsKICAgICAgaXRlbS52YWx1ZS5maWxlRGF0YSA9IHt9OwogICAgfQoKICAgIGl0ZW0ubG9hZGluZyA9IGZhbHNlOwogIH0pOwogIHJldHVybjsKfQoKZnVuY3Rpb24gY2hlY2tDb21taXREYXRhKHZtKSB7CiAgdmFyIHN1Y2Nlc3MgPSB0cnVlOyAvL0RIQ1BDdXN0b21PcHRpb27moKHpqowKCiAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdKSB7CiAgICBpZiAoIWNoZWNrUmFuZ2VPZk51bWJlcih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdLCAxMjgsIDI1NCkgJiYgdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uQ3VzdG9tSWQiXSAhPSAiIikgewogICAgICB2YXIgaXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiZGhjcE9wdGlvbiIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCIpOwogICAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9IC8vU2VydmVyVXNlck5hbWXmoKHpqowKCgogIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSJdKSB7CiAgICBpZiAoIW5vdENvbnRhaW5JbnZhbGlkKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuVXNlck5hbWUiXSkpIHsKICAgICAgdmFyIF9pdGVtMyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAibWFudWFsQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSIpOwoKICAgICAgX2l0ZW0zLmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9IC8vU2VydmVyUGFzc3dvcmTmoKHpqowKCgogIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Qd2QiXSkgewogICAgaWYgKCFub3RDb250YWluSW52YWxpZCh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlB3ZCJdKSkgewogICAgICB2YXIgX2l0ZW00ID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJtYW51YWxBdXRvcCIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlB3ZCIpOwoKICAgICAgX2l0ZW00LmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9IC8vU2VydmVyQ29tbW9uQUVTS2V55qCh6aqMCgoKICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiJdKSB7CiAgICBpZiAoIW5vdENvbnRhaW5JbnZhbGlkKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiJdKSkgewogICAgICB2YXIgX2l0ZW01ID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJtYW51YWxBdXRvcCIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTYiKTsKCiAgICAgIF9pdGVtNS5pc1dhcm4gPSB0cnVlOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfSAvL1NlcnZlck1BQ0FFU0tleeagoemqjAoKCiAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTZNYWMiXSkgewogICAgaWYgKCFub3RDb250YWluSW52YWxpZCh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTZNYWMiXSkpIHsKICAgICAgdmFyIF9pdGVtNiA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAibWFudWFsQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2TWFjIik7CgogICAgICBfaXRlbTYuaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0gLy9ob3Vy5ZKMbWludXRl5qCh6aqMCgoKICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkhvdXJPZkRheSJdKSB7CiAgICBpZiAoIWlzSG91cih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiXSkgfHwgMCA9PSB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiXS5sZW5ndGgpIHsKICAgICAgdmFyIF9pdGVtNyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYXV0b21hdGljQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuSG91ck9mRGF5Iik7CgogICAgICBfaXRlbTcuaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KCiAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiXSkgewogICAgaWYgKCFpc01pbnV0ZU9yU2VjKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLk1pbnV0ZU9mSG91ciJdKSB8fCAwID09IHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLk1pbnV0ZU9mSG91ciJdLmxlbmd0aCkgewogICAgICB2YXIgX2l0ZW04ID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhdXRvbWF0aWNBdXRvcCIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiKTsKCiAgICAgIF9pdGVtOC5pc1dhcm4gPSB0cnVlOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfQoKICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiXSkgewogICAgaWYgKCFpc0hvdXIodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSJdKSB8fCAwID09IHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiXS5sZW5ndGgpIHsKICAgICAgdmFyIF9pdGVtOSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAicmVib290U2NoZWR1bGUiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSIpOwoKICAgICAgX2l0ZW05LmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CgogIHJldHVybiBzdWNjZXNzOwp9CgpmdW5jdGlvbiBjcmVhdGVQYWdlRGF0YSh2bSkgewogIHZtLmRhdGEgPSB7CiAgICAvLyBnZXREYXRhU3VjY2VzczogdHJ1ZSwKICAgIGJyZWFkQ3J1bWI6IHsKICAgICAgZmlyc3RUaXRsZTogdm0uJHQoIlVwZ3JhZGUiKSwKICAgICAgc2Vjb25kVGl0bGU6IHZtLiR0KCJBZHZhbmNlIikKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIGdldENvbW1pdERhdGEodm0pOwoKICAgICAgaWYgKCFjaGVja0NvbW1pdERhdGEodm0pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzdWJtaXREYXRhKHZtKTsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7CiAgICAgIGdldERhdGEodm0pOwogICAgfSwKICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgY2FuY2VsTG9hZGluZzogZmFsc2UsCiAgICBjb250ZW50czogW10KICB9OwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVQbnBPcHRpb25Db250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZURoY3BPcHRpb25Db250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZU1hbnVhbEF1dG9wQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVBdXRvbWF0aWNBdXRvcENvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlUmVib290U2NoZWR1bGVDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZU90aGVyc0NvbnRlbnQodm0pKTsKfQoKZnVuY3Rpb24gY3JlYXRlUG5wT3B0aW9uQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAicG5wT3B0aW9uIiwKICAgIHRpdGxlOiB2bS4kdCgiUE5QT3B0aW9uIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiUE5QT3B0aW9uIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJQTlBDb25maWciKSwKICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uUE5QLkVuYWJsZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlBOUC5FbmFibGUiXQogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVEaGNwT3B0aW9uQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAiZGhjcE9wdGlvbiIsCiAgICB0aXRsZTogdm0uJHQoIkRIQ1BPcHRpb24iKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJESENQT3B0aW9uIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJDdXN0b21PcHRpb24iKSwKICAgICAgdHlwZTogImlucHV0IiwKICAgICAgc2hvd0hpbnQ6IHRydWUsCiAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiKDEyOH4yNTQpIiksCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlBsZWFzZUNoZWNrQWxhcm1TdWJtaXREYXRhIiksCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkN1c3RvbUlkIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uQ3VzdG9tSWQiXQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIk9wdGlvbkVuYWJsZSIpLAogICAgICB0eXBlOiAibXVsdGlwbGUtY2hlY2tib3giLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5FbmFibGUiLAogICAgICB2YWx1ZTogW10sCiAgICAgIGNoZWNrYm94SXRlbXM6IHZtLmRoY3BPcHRpb25JdGVtcwogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVNYW51YWxBdXRvcENvbnRlbnQodm0pIHsKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogIm1hbnVhbEF1dG9wIiwKICAgIHRpdGxlOiB2bS4kdCgiTWFudWFsQXV0b3AiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJNYW51YWxBdXRvcCIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiVVJMIiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIG1heExlbmd0aDogMTI3LAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlVybCIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuVXJsIl0KICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJVc2VyTmFtZSIpLAogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja0FsYXJtU3VibWl0RGF0YSIpLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlVzZXJOYW1lIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSJdCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiUGFzc3dvcmRMYWJlbCIpLAogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBpbnB1dFR5cGU6ICJwYXNzd29yZCIsCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlBsZWFzZUNoZWNrQWxhcm1TdWJtaXREYXRhIiksCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuUHdkIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Qd2QiXQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkNvbW1vbkFFU0tleSIpLAogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBpbnB1dFR5cGU6ICJwYXNzd29yZCIsCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlBsZWFzZUNoZWNrQWxhcm1TdWJtaXREYXRhIiksCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiJdCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiTUFDQUVTS2V5IiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGlucHV0VHlwZTogInBhc3N3b3JkIiwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgd2FybkxhYmVsOiB2bS4kdCgiUGxlYXNlQ2hlY2tBbGFybVN1Ym1pdERhdGEiKSwKICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2TWFjIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2TWFjIl0KICAgIH0sIHsKICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgIGtleTogIkF1dG9QQ29uZmlybUJ0biIsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgb25BdXRvUENvbmZpcm0odm0pOwogICAgICB9LAogICAgICBpc1Nob3dQb3BvdmVyOiBmYWxzZSwKICAgICAgYnV0dG9uTmFtZTogdm0uJHQoIkF1dG9QTm93IikKICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlQXV0b21hdGljQXV0b3BDb250ZW50KHZtKSB7CiAgdmFyIGNvbnRlbnQgPSB7CiAgICBrZXk6ICJhdXRvbWF0aWNBdXRvcCIsCiAgICB0aXRsZTogdm0uJHQoIkF1dG9tYXRpY0F1dG9wIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b21hdGljQXV0b3AiKSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIk1vZGUiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLk1PREUuTW9kZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLk1PREUuTW9kZSJdLAogICAgICBzZWxlY3RJdGVtczogW3sKICAgICAgICAia2V5IjogMCwKICAgICAgICAibGFiZWwiOiB2bS4kdCgiRGlzYWJsZWQiKQogICAgICB9LCB7CiAgICAgICAgImtleSI6IDEsCiAgICAgICAgImxhYmVsIjogdm0uJHQoIlBvd2VyT24iKQogICAgICB9LCB7CiAgICAgICAgImtleSI6IDIsCiAgICAgICAgImxhYmVsIjogdm0uJHQoIlJlcGVhdGVkbHkiKQogICAgICB9LCB7CiAgICAgICAgImtleSI6IDMsCiAgICAgICAgImxhYmVsIjogdm0uJHQoIlBvd2VyT24iKSArIHZtLiR0KCJSZXBlYXRlZGx5IikKICAgICAgfSwgewogICAgICAgICJrZXkiOiA0LAogICAgICAgICJsYWJlbCI6IHZtLiR0KCJSZXBlYXRlZGx5QnlIb3VyIikKICAgICAgfV0KICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJTY2hlZHVsZSIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5EYXlPZldlZWsiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5EYXlPZldlZWsiXSwKICAgICAgc2VsZWN0SXRlbXM6IHZtLnNjaGVkdWxlV2Vla0l0ZW1zCiAgICB9LCB7CiAgICAgIHR5cGU6ICJtdWx0aXBsZS1jaGVja2JveCIsCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiLAogICAgICBpc1Nob3c6IGZhbHNlLAogICAgICBpc1Nob3dQb3BvdmVyOiBmYWxzZSwKICAgICAgdmFsdWU6IHZtLnNvbWVEYXlPZldlZWssCiAgICAgIGNoZWNrYm94SXRlbXM6IHZtLnNjaGVkdWxlU29tZURheUl0ZW1zCiAgICB9LCB7CiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIjAtMjMiKSwKICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCIoMH4yM0hvdXIpIiksCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkhvdXJPZkRheSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkhvdXJPZkRheSJdCiAgICB9LCB7CiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiKDB+NTlNaW4pIiksCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIjAtNTkiKSwKICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuTWludXRlT2ZIb3VyIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuTWludXRlT2ZIb3VyIl0KICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJFeHBvcnRBdXRvcFRlbXBsYXRlIiksCiAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICBrZXk6ICJFeHBvcnRBdXRvcEJ0biIsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgX29uRXhwb3J0KHZtLCAidGVtcGxhdGUiKTsKICAgICAgfSwKICAgICAgaXNTaG93UG9wb3ZlcjogdHJ1ZSwKICAgICAgYnV0dG9uTmFtZTogdm0uJHQoIkV4cG9ydCIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiQ2xlYXJNRDUiKSwKICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgIGtleTogIkNsZWFyTUQ1QnRuIiwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICBvbkNsZWFyTUQ1KHZtKTsKICAgICAgfSwKICAgICAgaXNTaG93UG9wb3ZlcjogdHJ1ZSwKICAgICAgYnV0dG9uTmFtZTogdm0uJHQoIkNsZWFyIikKICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlUmVib290U2NoZWR1bGVDb250ZW50KHZtKSB7CiAgdmFyIGNvbnRlbnQgPSB7CiAgICBrZXk6ICJyZWJvb3RTY2hlZHVsZSIsCiAgICB0aXRsZTogdm0uJHQoIlJlYm9vdFNjaGVkdWxlIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiUmVib290U2NoZWR1bGUiKSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIlN3aXRjaCIpLAogICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfTU9ERS5Nb2RlIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX01PREUuTW9kZSJdCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiU2NoZWR1bGUiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkRheU9mV2VlayIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5EYXlPZldlZWsiXSwKICAgICAgc2VsZWN0SXRlbXM6IHZtLnNjaGVkdWxlV2Vla0l0ZW1zCiAgICB9LCB7CiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIjAtMjMiKSwKICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCIoMH4yM0hvdXIpIiksCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfU0NIRURVTEUuSG91ck9mRGF5Il0KICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlT3RoZXJzQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAib3RoZXJzIiwKICAgIHRpdGxlOiB2bS4kdCgiT3RoZXJzIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiT3RoZXJzIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJDb25maWdGaWxlIiksCiAgICAgIHR5cGU6ICJmaWxlLWlucHV0IiwKICAgICAga2V5OiAiaW1wb3J0Q29uZmlnRmlsZSIsCiAgICAgIGFjY2VwdEZpbGVUeXBlOiAiLnRneiwuY29uZiwuY2ZnIiwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHZhbHVlOiB7CiAgICAgICAgZmlsZURhdGE6IHt9LAogICAgICAgIGZpbGVOYW1lOiB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikKICAgICAgfSwKICAgICAgbW9kYWxUaXRsZTogdm0uJHQoIkF1dG9wRmlsZUhpbnQiKSwKICAgICAgaW1wb3J0QnRuTmFtZTogdm0uJHQoIkltcG9ydCIpLAogICAgICBleHBvcnRCdG5OYW1lOiB2bS4kdCgiRXhwb3J0IiksCiAgICAgIG1vZGFsQ29uZmlybU5hbWU6IHZtLiR0KCJJbnN0YWxsIiksCiAgICAgIHVwbG9hZEZ1bmN0aW9uOiBmdW5jdGlvbiB1cGxvYWRGdW5jdGlvbigpIHsKICAgICAgICBvbkltcG9ydCh2bSk7CiAgICAgIH0sCiAgICAgIGlzU2hvd0V4cG9ydDogdHJ1ZSwKICAgICAgb25FeHBvcnQ6IGZ1bmN0aW9uIG9uRXhwb3J0KCkgewogICAgICAgIF9vbkV4cG9ydCh2bSwgImNvbmZpZyIpOwogICAgICB9LAogICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCIoIiArICJFbmNyeXB0ZWQiICsgIikiKQogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9"},null]}