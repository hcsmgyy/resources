{"remainingRequest":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\thread-loader\\dist\\cjs.js!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\ContactsLocalContacts.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\ContactsLocalContacts.vue","mtime":1626853078192},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1624613273395},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1624613260275},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCB7IHNob3dSZXF1ZXN0U3VjY2VzcywgZGVlcENsb25lLCBnZXRJdGVtQnlLZXksIGdldEluZGV4QnlLZXksIGlzQVZhbGlkRGlhbGVkTnVtYmVyLCBzaG93RXJyb3JJbmZvIH0gZnJvbSAiQC9qcy9jb21tb24uanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ29tbW9uUGFnZTogQ29tbW9uUGFnZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaFZhbHVlOiAiIiwKICAgICAgY2hhbmdlZENmZ0RhdGE6IHt9LAogICAgICBzdWJtaXRDZmdEYXRhOiB7fSwKICAgICAgYXBpRGF0YToge30sCiAgICAgIGRhdGE6IHsKICAgICAgICBnZXREYXRhU3VjY2VzczogZmFsc2UKICAgICAgfSwKICAgICAgY3VycmVudENvbnRhY3RMaXN0OiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBnZXREYXRhKHRoaXMpOwogIH0sCiAgbWV0aG9kczogewogICAgb25Db21tb25QYWdlRGF0YUNoYW5nZTogZnVuY3Rpb24gb25Db21tb25QYWdlRGF0YUNoYW5nZShldmVudCkgewogICAgICBzZXRDaGFuZ2VkRGF0YSh0aGlzLCBldmVudCk7CiAgICB9CiAgfQp9OwoKZnVuY3Rpb24gc2V0Q2hhbmdlZERhdGEodm0sIGV2ZW50KSB7CiAgaWYgKGV2ZW50LmNvbnRlbnRLZXkgPT0gImNvbnRhY3RzTGlzdCIgJiYgZXZlbnQuaXRlbUtleSA9PSAiY29udGFjdExpc3RTZWxlY3QiKSB7CiAgICBnZXRDb250YWN0c1RhYmxlRGF0YSh2bSwgMSk7CiAgfQp9CgpmdW5jdGlvbiBzdWJtaXREYXRhKHZtKSB7CiAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICB0YXJnZXQ6ICJwaG9uZUxvY2FsQ29udGFjdCIsCiAgICBhY3Rpb246ICJzZXQiLAogICAgY29uZmlnRGF0YTogdm0uc3VibWl0Q2ZnRGF0YQogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiByZXNwb25zZSkgewogICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOwogICAgfQoKICAgIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogIH0pOwp9CgpmdW5jdGlvbiBnZXREYXRhKHZtKSB7CiAgdm0uJGF4aW9zLmdldCgiYXBpL3Bob25lTG9jYWxDb250YWN0L2luZm8iKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgdm0uZ2V0RGF0YVN1Y2Nlc3MgPSB0cnVlOwogICAgdm0uYXBpRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YSA9IGRlZXBDbG9uZShyZXNwb25zZS5kYXRhLmNvbmZpZ0RhdGEpOwogICAgY3JlYXRlUGFnZURhdGEodm0pOwogICAgdmFyIGNvbnRhY3RMaXN0VmFsdWUgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNvbnRhY3RzTGlzdCIsICJjb250YWN0TGlzdFNlbGVjdCIpLnZhbHVlOwoKICAgIGlmIChjb250YWN0TGlzdFZhbHVlID09ICJBbGxDb250YWN0cyIpIHsKICAgICAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjb250YWN0c0xpc3QiLCAiY29udGFjdExpc3RUYWJsZSIpLnRhYmxlRm9vdGVyRGF0YS5tb3ZlVG9WYWx1ZSA9ICIwIjsKICAgIH0gZWxzZSB7CiAgICAgIGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0VGFibGUiKS50YWJsZUZvb3RlckRhdGEubW92ZVRvVmFsdWUgPSAiMSI7CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldENvbW1pdERhdGEodm0pIHsKICB2bS5zdWJtaXRDZmdEYXRhID0ge307CgogIGZvciAodmFyIGNoYW5nZWRLZXkgaW4gdm0uY2hhbmdlZENmZ0RhdGEpIHsKICAgIGlmICh2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbY2hhbmdlZEtleV0gIT0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV0pIHsKICAgICAgdm0uc3VibWl0Q2ZnRGF0YVtjaGFuZ2VkS2V5XSA9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldOwogICAgfQogIH0KfQoKZnVuY3Rpb24gY3JlYXRlUGFnZURhdGEodm0pIHsKICB2bS5kYXRhID0gewogICAgZ2V0RGF0YVN1Y2Nlc3M6IHRydWUsCiAgICBicmVhZENydW1iOiB7CiAgICAgIGZpcnN0VGl0bGU6IHZtLiR0KCJDb250YWN0cyIpLAogICAgICBzZWNvbmRUaXRsZTogdm0uJHQoIkxvY2FsQ29udGFjdHMiKQogICAgfSwKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgZ2V0Q29tbWl0RGF0YSh2bSk7CiAgICAgIHN1Ym1pdERhdGEodm0pOwogICAgfSwKICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHsKICAgICAgdm0uZGF0YS5jYW5jZWxMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0RGF0YSh2bSk7CiAgICB9LAogICAgc3VibWl0TG9hZGluZzogZmFsc2UsCiAgICBjYW5jZWxMb2FkaW5nOiBmYWxzZSwKICAgIGNvbnRlbnRzOiBbXQogIH07CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZUNvbnRhY3RMaXN0Q29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVEaWFsTnVtYmVyQ29udGVudCh2bSkpOwogIGdldENvbnRhY3RzVGFibGVEYXRhKHZtLCAxKTsKfQoKZnVuY3Rpb24gY3JlYXRlRGlhbE51bWJlckNvbnRlbnQodm0pIHsKICB2YXIgYWNjb3VudEl0ZW1zID0gW3sKICAgIGtleTogMCwKICAgIGxhYmVsOiB2bS4kdCgiQXV0byIpCiAgfV07CgogIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLmFjY291bnRMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgaXRlbSA9IHsKICAgICAga2V5OiB2bS5hcGlEYXRhLmRhdGEuYWNjb3VudExpc3RbaV0uaW5kZXgsCiAgICAgIGxhYmVsOiB2bS4kdCgiTGluZSIpICsgdm0uYXBpRGF0YS5kYXRhLmFjY291bnRMaXN0W2ldLmluZGV4ICsgIjogIiArIHZtLmFwaURhdGEuZGF0YS5hY2NvdW50TGlzdFtpXS5uYW1lCiAgICB9OwogICAgYWNjb3VudEl0ZW1zLnB1c2goaXRlbSk7CiAgfQoKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogImRpYWxOdW1iZXIiLAogICAgdGl0bGU6IHZtLiR0KCJEaWFsTnVtYmVyIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiRGlhbE51bWJlckRlc2MiKSwKICAgIGl0ZW1zOiBbewogICAgICB0eXBlOiAiZGlhbElucHV0IiwKICAgICAga2V5OiAiZGlhbElucHV0IiwKICAgICAgc2VsZWN0SXRlbXM6IGFjY291bnRJdGVtcywKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJEaWFsTnVtYmVyRGVzYyIpCiAgICB9XQogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUNvbnRhY3RMaXN0Q29udGVudCh2bSkgewogIC8v5re75Yqg5qGGCiAgdmFyIGFkZE1vZGFsRGF0YSA9IHsKICAgIHRpdGxlOiB2bS4kdCgiQWRkQ29udGFjdCIpLAogICAga2V5OiAtMSwKICAgIGNhbmNlbEJ0bkxhYmVsOiB2bS4kdCgiQ2FuY2VsIiksCiAgICBzdWJtaXRCdG5MYWJlbDogdm0uJHQoIlN1Ym1pdCIpLAogICAgdmlzaWJsZTogZmFsc2UsCiAgICBzaG93Rm9vdGVyOiB0cnVlLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiTmFtZSIpLAogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBrZXk6ICJuYW1lIiwKICAgICAgdmFsdWU6ICIiLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICB3YXJuTGFiZWw6IHZtLiR0KCJDb250YWN0TmFtZU5vRW1wdHkiKSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJDb250YWN0TmFtZURlc2MiKQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIk51bWJlckxhYmVsIiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGtleTogIm51bWJlciIsCiAgICAgIHZhbHVlOiAiIiwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgd2FybkxhYmVsOiB2bS4kdCgiUGxlYXNlQ2hlY2tTdWJtaXREYXRhIiksCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQ29udGFjdE51bWJlckRlc2MiKQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkdyb3VwIiksCiAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICBrZXk6ICJncm91cCIsCiAgICAgIHZhbHVlOiAiIiwKICAgICAgZGVmYXVsdFZhbHVlOiAwLAogICAgICBzZWxlY3RJdGVtczogW3sKICAgICAgICBrZXk6IDAsCiAgICAgICAgbGFiZWw6IHZtLiR0KCJEZWZhdWx0IikKICAgICAgfSwgewogICAgICAgIGtleTogMSwKICAgICAgICBsYWJlbDogdm0uJHQoIkJsYWNrTGlzdCIpCiAgICAgIH1dLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkNvbnRhY3RHcm91cERlc2MiKQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkRpYWxBY2NvdW50IiksCiAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICBrZXk6ICJhY2NvdW50IiwKICAgICAgdmFsdWU6ICIiLAogICAgICBkZWZhdWx0VmFsdWU6IDAsCiAgICAgIHNlbGVjdEl0ZW1zOiBbewogICAgICAgIGtleTogMCwKICAgICAgICBsYWJlbDogdm0uJHQoIkFjY291bnQiKSArIDEKICAgICAgfSwgewogICAgICAgIGtleTogMSwKICAgICAgICBsYWJlbDogdm0uJHQoIkFjY291bnQiKSArIDIKICAgICAgfV0sCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiRGlhbEFjY291bnREZXNjIikKICAgIH1dLAogICAgb25Db25maXJtOiBmdW5jdGlvbiBvbkNvbmZpcm0oKSB7CiAgICAgIG9uQ2hhbmdlQ29udGFjdCh2bSk7CiAgICB9CiAgfTsgLy/lr7zlhaXmoYYKCiAgdmFyIGltcG9ydE1vZGFsRGF0YSA9IHsKICAgIHRpdGxlOiAiICIsCiAgICBjYW5jZWxCdG5MYWJlbDogdm0uJHQoIkNhbmNlbCIpLAogICAgc3VibWl0QnRuTGFiZWw6IHZtLiR0KCJJbXBvcnQiKSwKICAgIHNob3dGb290ZXI6IHRydWUsCiAgICB2aXNpYmxlOiBmYWxzZSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIkZpbGVMYWJlbCIpICsgIiAoLnhtbC8uY3N2KSIsCiAgICAgIHR5cGU6ICJmaWxlLWlucHV0IiwKICAgICAga2V5OiAiaW1wb3J0IiwKICAgICAgYWNjZXB0RmlsZVR5cGU6ICIueG1sLC5jc3YiLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdmFsdWU6IHsKICAgICAgICBmaWxlRGF0YToge30sCiAgICAgICAgZmlsZU5hbWU6IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKQogICAgICB9LAogICAgICBpbXBvcnRCdG5OYW1lOiB2bS4kdCgiUmVzZXQiKQogICAgfV0sCiAgICBvbkNvbmZpcm06IGZ1bmN0aW9uIG9uQ29uZmlybSgpIHsKICAgICAgb25JbXBvcnQodm0pOwogICAgfSwKICAgIGNvbmZpcm1Mb2FkaW5nOiBmYWxzZQogIH07IC8vdGFibGUgaGVhZAoKICB2YXIgdGFibGVIZWFkRGF0YSA9IHsKICAgIGFkZE1vZGFsRGF0YTogYWRkTW9kYWxEYXRhLAogICAgaW1wb3J0TW9kYWxEYXRhOiBpbXBvcnRNb2RhbERhdGEsCiAgICBleHBvcnRJdGVtczogW3sKICAgICAga2V5OiAieG1sIiwKICAgICAgbGFiZWw6ICJ4bWwiCiAgICB9LCB7CiAgICAgIGtleTogImNzdiIsCiAgICAgIGxhYmVsOiAiY3N2IgogICAgfV0sCiAgICBvbkV4cG9ydDogZnVuY3Rpb24gb25FeHBvcnQodHlwZSkgewogICAgICBfb25FeHBvcnQodm0sIHR5cGUpOwogICAgfQogIH07IC8vdGFibGUgZm9vdGVyCgogIHZhciB0YWJsZUZvb3RlckRhdGEgPSB7CiAgICBvbkRlbGV0ZTogZnVuY3Rpb24gb25EZWxldGUoKSB7CiAgICAgIG9uRGVsZXRlQ29udGFjdCh2bSwgInNlbGVjdCIpOwogICAgfSwKICAgIG9uRGVsZXRlQWxsOiBmdW5jdGlvbiBvbkRlbGV0ZUFsbCgpIHsKICAgICAgb25EZWxldGVDb250YWN0KHZtLCAiYWxsIik7CiAgICB9LAogICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiBvblBhZ2VDaGFuZ2UocGFnZSkgewogICAgICBnZXRDb250YWN0c1RhYmxlRGF0YSh2bSwgcGFnZSk7CiAgICB9LAogICAgbW92ZUNoYW5nZTogZnVuY3Rpb24gbW92ZUNoYW5nZSgpIHsKICAgICAgbW92ZUNvbnRhY3RHcm91cCh2bSk7CiAgICB9LAogICAgc3VtOiAwLAogICAgcGFnZU51bWJlcjogNSwKICAgIGN1clBhZ2U6IDAsCiAgICBkZWxldGVEaXNhYmxlZDogdHJ1ZSwKICAgIGRlbGV0ZUFsbERpc2FibGVkOiBmYWxzZSwKICAgIGlzU2hvd01vdmU6IHRydWUsCiAgICBtb3ZlVG9WYWx1ZTogIjAiCiAgfTsgLy9jb250ZW50CgogIHZhciBjb250ZW50ID0gewogICAga2V5OiAiY29udGFjdHNMaXN0IiwKICAgIHRpdGxlOiB2bS4kdCgiQ29udGFjdHNMaXN0U2V0dGluZyIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkNvbnRhY3RMaXN0U2V0dGluZ0Rlc2MiKSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIkNvbnRhY3RzTGlzdCIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAga2V5OiAiY29udGFjdExpc3RTZWxlY3QiLAogICAgICB2YWx1ZTogIkFsbENvbnRhY3RzIiwKICAgICAgc2VsZWN0SXRlbXM6IFt7CiAgICAgICAga2V5OiAiQWxsQ29udGFjdHMiLAogICAgICAgIGxhYmVsOiB2bS4kdCgiQWxsQ29udGFjdHMiKQogICAgICB9LCB7CiAgICAgICAga2V5OiAiQmxhY2tMaXN0IiwKICAgICAgICBsYWJlbDogdm0uJHQoIkJsYWNrTGlzdCIpCiAgICAgIH1dLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkNvbnRhY3RMaXN0RGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiU2VhcmNoIiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGtleTogInNlYXJjaCIsCiAgICAgIHZhbHVlOiAiIiwKICAgICAgc2hvd0J0bjogdHJ1ZSwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgd2FybkxhYmVsOiB2bS4kdCgiQ29uU2VhcmNoUHJvbXB0IiksCiAgICAgIG9uU2VhcmNoOiBmdW5jdGlvbiBvblNlYXJjaCh2YWx1ZSkgewogICAgICAgIG9uQ29udGFjdFNlYXJjaCh2bSwgdmFsdWUpOwogICAgICB9LAogICAgICBvblJlc2V0OiBmdW5jdGlvbiBvblJlc2V0KCkgewogICAgICAgIG9uQ29udGFjdFNlYXJjaFJlc2V0KHZtKTsKICAgICAgfSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJDb250YWN0U2VhcmNoRGVzYyIpCiAgICB9LCB7CiAgICAgIHR5cGU6ICJ0YWJsZSIsCiAgICAgIGtleTogImNvbnRhY3RMaXN0VGFibGUiLAogICAgICBzaG93SGVhZDogdHJ1ZSwKICAgICAgc2hvd0Zvb3RlcjogdHJ1ZSwKICAgICAgc2hvd1Jvd1NlbGVjdGlvbjogdHJ1ZSwKICAgICAgc2VsZWN0ZWRSb3dLZXlzOiBbXSwKICAgICAgdGFibGVIZWFkRGF0YTogdGFibGVIZWFkRGF0YSwKICAgICAgdGFibGVGb290ZXJEYXRhOiB0YWJsZUZvb3RlckRhdGEsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHRhYmxlQ29sdW1uczogW3sKICAgICAgICB0eXBlOiAibGFiZWwiLAogICAgICAgIHRpdGxlOiB2bS4kdCgiSW5kZXgiKSwKICAgICAgICBkYXRhSW5kZXg6ICJpbmRleCIsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogImluZGV4IgogICAgICAgIH0sCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHdpZHRoOiAiMTAlIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgICB0aXRsZTogdm0uJHQoIk5hbWUiKSwKICAgICAgICBkYXRhSW5kZXg6ICJuYW1lIiwKICAgICAgICBzY29wZWRTbG90czogewogICAgICAgICAgY3VzdG9tUmVuZGVyOiAibmFtZSIKICAgICAgICB9LAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogIjMwJSIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICJsYWJlbCIsCiAgICAgICAgdGl0bGU6IHZtLiR0KCJOdW1iZXJMYWJlbCIpLAogICAgICAgIGRhdGFJbmRleDogIm51bWJlciIsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogIm51bWJlciIKICAgICAgICB9LAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogIjMwJSIKICAgICAgfSwgLy8gewogICAgICAvLyAgIHR5cGU6ICJsYWJlbCIsCiAgICAgIC8vICAgdGl0bGU6IHZtLiR0KCJHcm91cCIpLAogICAgICAvLyAgIGRhdGFJbmRleDogImdyb3VwIiwKICAgICAgLy8gICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJncm91cCIgfSwKICAgICAgLy8gICBhbGlnbjogImNlbnRlciIsCiAgICAgIC8vICAgd2lkdGg6ICIyMCUiLAogICAgICAvLyB9LAogICAgICB7CiAgICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgICB0aXRsZTogdm0uJHQoIkFjY291bnQiKSwKICAgICAgICBkYXRhSW5kZXg6ICJhY2NvdW50IiwKICAgICAgICBzY29wZWRTbG90czogewogICAgICAgICAgY3VzdG9tUmVuZGVyOiAiYWNjb3VudCIKICAgICAgICB9LAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogIjIwJSIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICJlZGl0IiwKICAgICAgICB0aXRsZTogdm0uJHQoIkVkaXRMYWJlbCIpLAogICAgICAgIGRhdGFJbmRleDogImVkaXQiLAogICAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgICBjdXN0b21SZW5kZXI6ICJlZGl0IgogICAgICAgIH0sCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHdpZHRoOiAiMTAlIiwKICAgICAgICBvbkVkaXQ6IGZ1bmN0aW9uIG9uRWRpdChpbmRleCwga2V5KSB7CiAgICAgICAgICBvblNldEVkaXRWYWx1ZShpbmRleCwga2V5LCB2bSk7CiAgICAgICAgfQogICAgICB9XQogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBnZXRDb250YWN0c1RhYmxlRGF0YSh2bSwgcGFnZSkgewogIHZhciBncm91cCA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0U2VsZWN0IikudmFsdWU7CiAgdm0uJGF4aW9zLmdldCgiYXBpL3Bob25lTG9jYWxDb250YWN0L2dldD9wYWdlPSIgKyBwYWdlICsgIiZncm91cD0iICsgZ3JvdXAgKyAiJnNlYXJjaD0iICsgdm0uc2VhcmNoVmFsdWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICB2YXIgdGFibGVEYXRhID0gW107CiAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgIHZtLmN1cnJlbnRDb250YWN0TGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5jb250YWN0TGlzdDsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuY29udGFjdExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGl0ZW0gPSB7CiAgICAgICAga2V5OiBkYXRhLmNvbnRhY3RMaXN0W2ldLmlkLAogICAgICAgIGluZGV4OiBpICsgMSwKICAgICAgICBuYW1lOiBkYXRhLmNvbnRhY3RMaXN0W2ldLm5hbWUsCiAgICAgICAgbnVtYmVyOiBkYXRhLmNvbnRhY3RMaXN0W2ldLm51bWJlciwKICAgICAgICBncm91cDogZGF0YS5jb250YWN0TGlzdFtpXS5ncm91cCA9PSAiQmxvY2tMaXN0IiA/IDEgOiAwLAogICAgICAgIGFjY291bnQ6IHZtLiR0KCJBY2NvdW50IikgKyAoZGF0YS5jb250YWN0TGlzdFtpXS5hY2NvdW50ICsgMSksCiAgICAgICAgZWRpdDogaQogICAgICB9OwogICAgICB0YWJsZURhdGEucHVzaChpdGVtKTsKICAgIH0KCiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNvbnRhY3RzTGlzdCIsICJjb250YWN0TGlzdFRhYmxlIikudGFibGVEYXRhID0gdGFibGVEYXRhOwogICAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjb250YWN0c0xpc3QiLCAiY29udGFjdExpc3RUYWJsZSIpLnRhYmxlRm9vdGVyRGF0YS5zdW0gPSBkYXRhLnN1bTsKICAgIGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0VGFibGUiKS50YWJsZUZvb3RlckRhdGEucGFnZU51bWJlciA9IGRhdGEucGFnZU51bTsKICAgIGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0VGFibGUiKS50YWJsZUZvb3RlckRhdGEuY3VyUGFnZSA9IHBhZ2U7CiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNvbnRhY3RzTGlzdCIsICJjb250YWN0TGlzdFRhYmxlIikuc2VsZWN0ZWRSb3dLZXlzID0gW107CgogICAgaWYgKGdyb3VwID09ICJBbGxDb250YWN0cyIpIHsKICAgICAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjb250YWN0c0xpc3QiLCAiY29udGFjdExpc3RUYWJsZSIpLnRhYmxlRm9vdGVyRGF0YS5tb3ZlVG9WYWx1ZSA9ICIwIjsKICAgIH0gZWxzZSB7CiAgICAgIGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0VGFibGUiKS50YWJsZUZvb3RlckRhdGEubW92ZVRvVmFsdWUgPSAiMSI7CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uQ2hhbmdlQ29udGFjdCh2bSkgewogIHZhciBhZGRNb2RhbERhdGEgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNvbnRhY3RzTGlzdCIsICJjb250YWN0TGlzdFRhYmxlIikudGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGE7CiAgdmFyIG5hbWUgPSBhZGRNb2RhbERhdGEuaXRlbXNbZ2V0SW5kZXhCeUtleShhZGRNb2RhbERhdGEuaXRlbXMsICJuYW1lIildOwogIHZhciBudW1iZXIgPSBhZGRNb2RhbERhdGEuaXRlbXNbZ2V0SW5kZXhCeUtleShhZGRNb2RhbERhdGEuaXRlbXMsICJudW1iZXIiKV07CiAgdmFyIGdyb3VwID0gYWRkTW9kYWxEYXRhLml0ZW1zW2dldEluZGV4QnlLZXkoYWRkTW9kYWxEYXRhLml0ZW1zLCAiZ3JvdXAiKV07CiAgdmFyIGFjY291bnQgPSBhZGRNb2RhbERhdGEuaXRlbXNbZ2V0SW5kZXhCeUtleShhZGRNb2RhbERhdGEuaXRlbXMsICJhY2NvdW50IildOwogIHZhciBpZCA9IGFkZE1vZGFsRGF0YS5rZXk7CiAgdmFyIGVyckZsYWcgPSBmYWxzZTsKCiAgaWYgKG5hbWUudmFsdWUgPT0gIiIgJiYgZ3JvdXAudmFsdWUgPT0gMCkgewogICAgbmFtZS5pc1dhcm4gPSB0cnVlOwogICAgbmFtZS53YXJuTGFiZWwgPSB2bS4kdCgiTmFtZUVtcHR5V2FybmluZyIpOwogICAgZXJyRmxhZyA9IHRydWU7CiAgfQoKICBpZiAoIWlzQVZhbGlkRGlhbGVkTnVtYmVyKG51bWJlci52YWx1ZSkpIHsKICAgIG51bWJlci5pc1dhcm4gPSB0cnVlOwogICAgZXJyRmxhZyA9IHRydWU7CiAgfQoKICBpZiAoZXJyRmxhZykgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIG9yaUdyb3VwID0gMDsKCiAgaWYgKGlkID49IDApIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uY3VycmVudENvbnRhY3RMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmICh2bS5jdXJyZW50Q29udGFjdExpc3RbaV0uaWQgPT0gaWQpIHsKICAgICAgICBvcmlHcm91cCA9IHZtLmN1cnJlbnRDb250YWN0TGlzdFtpXS5ncm91cCA9PSAiQmxvY2tMaXN0IiA/IDEgOiAwOwogICAgICB9CiAgICB9CiAgfQoKICBpZiAob3JpR3JvdXAgIT0gZ3JvdXAudmFsdWUgJiYgaWQgPj0gMCkgewogICAgaWYgKG9yaUdyb3VwID09IDApIHsKICAgICAgaWYgKCFjb25maXJtKHZtLiR0KCJNb3ZlVG9CTENvbmZpcm0iKSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICghY29uZmlybSh2bS4kdCgiTW92ZUZyQkxDb25maXJtIikpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAgfQoKICB2YXIgZGF0YSA9IHsKICAgIG5hbWU6IG5hbWUudmFsdWUsCiAgICBudW1iZXI6IG51bWJlci52YWx1ZSwKICAgIGdyb3VwOiBncm91cC52YWx1ZSwKICAgIG9yaUdyb3VwOiBvcmlHcm91cCwKICAgIGFjY291bnQ6IGFjY291bnQudmFsdWUsCiAgICBpZDogaWQKICB9OwogIHZhciBhY3Rpb24gPSBpZCA+PSAwID8gImVkaXQiIDogImFkZCI7CiAgdmFyIHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVMb2NhbENvbnRhY3QiLAogICAgYWN0aW9uOiBhY3Rpb24sCiAgICBkYXRhOiBkYXRhCiAgfTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICB2YXIgcmV0ID0gcmVzcG9uc2UuZGF0YS5yZXRjb2RlOwoKICAgIGlmIChyZXQgPT0gMCkgewogICAgICBuYW1lLnZhbHVlID0gIiI7CiAgICAgIG51bWJlci52YWx1ZSA9ICIiOwogICAgICBncm91cC52YWx1ZSA9IDA7CiAgICAgIGFjY291bnQudmFsdWUgPSAwOwogICAgICB2YXIgcGFnZSA9IDA7CiAgICAgIHZhciB0YWJsZUl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNvbnRhY3RzTGlzdCIsICJjb250YWN0TGlzdFRhYmxlIik7CgogICAgICBpZiAoYWN0aW9uID09ICJhZGQiKSB7CiAgICAgICAgLy/pobXpnaLmlbDmja7lj5jljJYKICAgICAgICBwYWdlID0gTWF0aC5jZWlsKCh0YWJsZUl0ZW0udGFibGVGb290ZXJEYXRhLnN1bSArIDEpIC8gdGFibGVJdGVtLnRhYmxlRm9vdGVyRGF0YS5wYWdlTnVtYmVyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYWdlID0gdGFibGVJdGVtLnRhYmxlRm9vdGVyRGF0YS5jdXJQYWdlOwogICAgICB9CgogICAgICBnZXRDb250YWN0c1RhYmxlRGF0YSh2bSwgcGFnZSk7IC8v5YWz6Zet56qX5Y+j5bm25bGV56S65oiQ5YqfCgogICAgICBhZGRNb2RhbERhdGEudmlzaWJsZSA9IGZhbHNlOwogICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOwogICAgfSBlbHNlIGlmIChyZXQgPT0gNykgewogICAgICBuYW1lLmlzV2FybiA9IHRydWU7CiAgICAgIG5hbWUud2FybkxhYmVsID0gdm0uJHQoIlNhbWVOYW1lV2FybmluZyIpOwogICAgfSBlbHNlIGlmIChyZXQgPT0gMTcpIHsKICAgICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIlRvb01hbnlDb250YWN0c1dhcm5pbmciKSk7CiAgICB9IGVsc2UgaWYgKHJldCA9PSAxOCkgewogICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiVG9vTWFueUJMV2FybmluZyIpKTsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gb25TZXRFZGl0VmFsdWUoaW5kZXgsIGtleSwgdm0pIHsKICB2YXIgdGFibGVJdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjb250YWN0c0xpc3QiLCAiY29udGFjdExpc3RUYWJsZSIpOwogIHRhYmxlSXRlbS50YWJsZUhlYWREYXRhLmFkZE1vZGFsRGF0YS5pdGVtc1tnZXRJbmRleEJ5S2V5KHRhYmxlSXRlbS50YWJsZUhlYWREYXRhLmFkZE1vZGFsRGF0YS5pdGVtcywgIm51bWJlciIpXS52YWx1ZSA9IHRhYmxlSXRlbS50YWJsZURhdGFbaW5kZXhdLm51bWJlcjsKICB0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXNbZ2V0SW5kZXhCeUtleSh0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXMsICJuYW1lIildLnZhbHVlID0gdGFibGVJdGVtLnRhYmxlRGF0YVtpbmRleF0ubmFtZTsKICB0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXNbZ2V0SW5kZXhCeUtleSh0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXMsICJhY2NvdW50IildLnZhbHVlID0gdGFibGVJdGVtLnRhYmxlRGF0YVtpbmRleF0uYWNjb3VudDsKICB0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXNbZ2V0SW5kZXhCeUtleSh0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXMsICJncm91cCIpXS52YWx1ZSA9IHRhYmxlSXRlbS50YWJsZURhdGFbaW5kZXhdLmdyb3VwOwp9CgpmdW5jdGlvbiBtb3ZlQ29udGFjdEdyb3VwKHZtKSB7CiAgdmFyIHNlbGVjdGVkUm93S2V5cyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0VGFibGUiKS5zZWxlY3RlZFJvd0tleXM7CiAgdmFyIG9yaUNvbnRhY3RHcm91cCA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0U2VsZWN0IikudmFsdWU7CgogIGlmIChzZWxlY3RlZFJvd0tleXMgPT0gIiIpIHsKICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJWYWx1ZU11c3RTZWxlY3RlZFdhcm5pbmciKSk7CiAgICByZXR1cm47CiAgfQoKICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICB0YXJnZXQ6ICJwaG9uZUxvY2FsQ29udGFjdCIsCiAgICBhY3Rpb246ICJlZGl0IiwKICAgIGRhdGE6IHsKICAgICAgbW92ZVRvOiAxLAogICAgICBpZHM6IHNlbGVjdGVkUm93S2V5cywKICAgICAgb3JpR3JvdXA6IG9yaUNvbnRhY3RHcm91cAogICAgfQogIH07CgogIGlmIChvcmlDb250YWN0R3JvdXAgPT0gIkFsbENvbnRhY3RzIikgewogICAgaWYgKCFjb25maXJtKHZtLiR0KCJNb3ZlVG9CTENvbmZpcm0iKSkpIHsKICAgICAgcmV0dXJuOwogICAgfQogIH0gZWxzZSB7CiAgICBpZiAoIWNvbmZpcm0odm0uJHQoIk1vdmVGckJMQ29uZmlybSIpKSkgewogICAgICByZXR1cm47CiAgICB9CiAgfQoKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICB2YXIgdGFibGVGb290ZXJEYXRhID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjb250YWN0c0xpc3QiLCAiY29udGFjdExpc3RUYWJsZSIpLnRhYmxlRm9vdGVyRGF0YTsKICAgIGdldENvbnRhY3RzVGFibGVEYXRhKHZtLCB0YWJsZUZvb3RlckRhdGEuY3VyUGFnZSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uRGVsZXRlQ29udGFjdCh2bSwgdHlwZSkgewogIHZhciBncm91cCA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0U2VsZWN0IikudmFsdWU7CgogIGlmICghY29uZmlybSh0eXBlID09ICJhbGwiID8gdm0uJHQoIkRlbGV0ZUFsbENvbmZpcm0iKSA6IHZtLiR0KCJEZWxldGVTZWxlY3RlZENvbmZpcm0iKSkpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBzZWxlY3RlZFJvd0tleXMgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNvbnRhY3RzTGlzdCIsICJjb250YWN0TGlzdFRhYmxlIikuc2VsZWN0ZWRSb3dLZXlzOwogIHZhciByZXF1ZXN0RGF0YSA9IHsKICAgIHRhcmdldDogInBob25lTG9jYWxDb250YWN0IiwKICAgIGFjdGlvbjogImRlbCIsCiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IHR5cGUsCiAgICAgIGlkczogc2VsZWN0ZWRSb3dLZXlzLAogICAgICBncm91cDogZ3JvdXAKICAgIH0KICB9OwogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSwgdm0uJHQoIkhpbnREZWxldGVTdWNjZXNzIikpOwogICAgdmFyIHRhYmxlRm9vdGVyRGF0YSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0VGFibGUiKS50YWJsZUZvb3RlckRhdGE7CgogICAgaWYgKHR5cGUgIT0gImFsbCIpIHsKICAgICAgdmFyIHN1bVBhZ2UgPSBNYXRoLmNlaWwoKHRhYmxlRm9vdGVyRGF0YS5zdW0gLSBzZWxlY3RlZFJvd0tleXMubGVuZ3RoKSAvIHRhYmxlRm9vdGVyRGF0YS5wYWdlTnVtYmVyKTsKICAgICAgc3VtUGFnZSA9IHN1bVBhZ2UgPT0gMCA/IDEgOiBzdW1QYWdlOwogICAgICB2YXIgcGFnZSA9IHRhYmxlRm9vdGVyRGF0YS5jdXJQYWdlID49IHN1bVBhZ2UgPyBzdW1QYWdlIDogdGFibGVGb290ZXJEYXRhLmN1clBhZ2U7CiAgICAgIGdldENvbnRhY3RzVGFibGVEYXRhKHZtLCBwYWdlKTsKICAgIH0gZWxzZSB7CiAgICAgIGdldENvbnRhY3RzVGFibGVEYXRhKHZtLCAxKTsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gX29uRXhwb3J0KHZtLCB0eXBlKSB7CiAgdmFyIHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVMb2NhbENvbnRhY3QiLAogICAgYWN0aW9uOiAiZXhwb3J0IiwKICAgIGRhdGE6IHsKICAgICAgdHlwZTogdHlwZQogICAgfQogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtLCB2bS4kdCgiRXhwb3J0U3VjY2VzcyIpKTsKICAgIHZhciBhZGRyZXNzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmFkZHJlc3M7CiAgICB3aW5kb3cub3BlbihhZGRyZXNzKTsKICB9KTsKfQoKZnVuY3Rpb24gb25JbXBvcnQodm0pIHsKICB2YXIgbW9kYWwgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNvbnRhY3RzTGlzdCIsICJjb250YWN0TGlzdFRhYmxlIikudGFibGVIZWFkRGF0YS5pbXBvcnRNb2RhbERhdGE7CiAgdmFyIGl0ZW0gPSBtb2RhbC5pdGVtc1tnZXRJbmRleEJ5S2V5KG1vZGFsLml0ZW1zLCAiaW1wb3J0IildOwogIHZhciBmaWxlTmFtZSA9IGl0ZW0udmFsdWUuZmlsZU5hbWU7CgogIGlmIChmaWxlTmFtZSA9PSAiIiB8fCBmaWxlTmFtZSA9PSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikpIHsKICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJGaWxlRW1wdHlXYXJuaW5nIikpOwogICAgcmV0dXJuOwogIH0KCiAgbW9kYWwuY29uZmlybUxvYWRpbmcgPSB0cnVlOwogIHZhciB1cERhdGEgPSBuZXcgRm9ybURhdGEoKTsKICB1cERhdGEuYXBwZW5kKCJmaWxlIiwgaXRlbS52YWx1ZS5maWxlRGF0YSk7CiAgYXhpb3MucG9zdCgiYXBpL3Bob25lTG9jYWxDb250YWN0L2ltcG9ydCIsIHVwRGF0YSwgewogICAgaGVhZGVyczogewogICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiCiAgICB9CiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICBpZiAocmVzLmRhdGEucmV0Y29kZSA9PSAtMikgewogICAgICBzaG93V2FybmluZ0luZm8odm0sIHZtLiR0KCJUb29NYW55R3JvdXBzV2FybmluZyIpKTsKICAgICAgaXRlbS52YWx1ZS5maWxlTmFtZSA9IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKTsKICAgICAgaXRlbS52YWx1ZS5maWxlRGF0YSA9IHt9OwogICAgICBtb2RhbC52aXNpYmxlID0gZmFsc2U7CiAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gMCkgewogICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJDb250YWN0SW1wb3J0U3VjY2VzcyIpKTsKICAgICAgaXRlbS52YWx1ZS5maWxlTmFtZSA9IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKTsKICAgICAgaXRlbS52YWx1ZS5maWxlRGF0YSA9IHt9OwogICAgICBtb2RhbC52aXNpYmxlID0gZmFsc2U7CiAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gLTEpIHsKICAgICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkZpbGVGb3JtYXRXYXJuaW5nIikpOwogICAgfSBlbHNlIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IDE3KSB7CiAgICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJUb29NYW55Q29udGFjdHNXYXJuaW5nIikpOwogICAgfSBlbHNlIHsKICAgICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkNvbnRhY3RJbXBvcnRGYWlsIikpOwogICAgfQoKICAgIG1vZGFsLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2U7CiAgICB2YXIgcGFnZSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY29udGFjdHNMaXN0IiwgImNvbnRhY3RMaXN0VGFibGUiKS50YWJsZUZvb3RlckRhdGEuY3VyUGFnZTsKICAgIGdldENvbnRhY3RzVGFibGVEYXRhKHZtLCBwYWdlKTsKICB9KTsKfQoKZnVuY3Rpb24gb25Db250YWN0U2VhcmNoKHZtLCB2YWx1ZSkgewogIGlmICh2YWx1ZSA9PSAiIikgewogICAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjb250YWN0c0xpc3QiLCAic2VhcmNoIikuaXNXYXJuID0gdHJ1ZTsKICAgIHJldHVybjsKICB9IC8vIGxldCBncm91cFNlbGVjdEl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgLy8gICB2bS5kYXRhLAogIC8vICAgImNvbnRhY3RzTGlzdCIsCiAgLy8gICAiY29udGFjdExpc3RTZWxlY3QiCiAgLy8gKTsKICAvLyBncm91cFNlbGVjdEl0ZW0uc2VsZWN0SXRlbXMgPSBbCiAgLy8gICB7IGtleTogIkFsbENvbnRhY3RzIiwgbGFiZWw6IHZtLiR0KCJBbGxDb250YWN0cyIpIH0sCiAgLy8gICB7IGtleTogIkJsYWNrTGlzdCIsIGxhYmVsOiB2bS4kdCgiQmxhY2tMaXN0IikgfSwKICAvLyBdOwogIC8vIGdyb3VwU2VsZWN0SXRlbS52YWx1ZSA9ICJBbGxDb250YWN0cyI7CgoKICB2bS5zZWFyY2hWYWx1ZSA9IHZhbHVlOwogIGdldENvbnRhY3RzVGFibGVEYXRhKHZtLCAxKTsKfQoKZnVuY3Rpb24gb25Db250YWN0U2VhcmNoUmVzZXQodm0pIHsKICB2YXIgZ3JvdXBTZWxlY3RJdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjb250YWN0c0xpc3QiLCAiY29udGFjdExpc3RTZWxlY3QiKTsKICBncm91cFNlbGVjdEl0ZW0uc2VsZWN0SXRlbXMgPSBbewogICAga2V5OiAiQWxsQ29udGFjdHMiLAogICAgbGFiZWw6IHZtLiR0KCJBbGxDb250YWN0cyIpCiAgfSwgewogICAga2V5OiAiQmxhY2tMaXN0IiwKICAgIGxhYmVsOiB2bS4kdCgiQmxhY2tMaXN0IikKICB9XTsKICBncm91cFNlbGVjdEl0ZW0udmFsdWUgPSAiQWxsQ29udGFjdHMiOwogIHZtLnNlYXJjaFZhbHVlID0gIiI7CiAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjb250YWN0c0xpc3QiLCAic2VhcmNoIikudmFsdWUgPSAiIjsKICBnZXRDb250YWN0c1RhYmxlRGF0YSh2bSwgMSk7Cn0="},null]}