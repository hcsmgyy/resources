{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/thread-loader/dist/cjs.js!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/AccountAdvanced.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/AccountAdvanced.vue","mtime":1600155105014},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/thread-loader/dist/cjs.js","mtime":1600155105122},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js","mtime":1600155105338},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCB7IHNob3dSZXF1ZXN0U3VjY2VzcywgZGVlcENsb25lLCBnZXRJbmRleEJ5S2V5LCBpc1BvcnQsIGNoZWNrUmFuZ2VPZk51bWJlciwgbm90Q29udGFpbkludmFsaWQsIGlzUG9ydFVzZWQgfSBmcm9tICJAL2pzL2NvbW1vbi5qcyI7CmltcG9ydCB7IGdldEl0ZW1CeUtleSB9IGZyb20gJy4uL2pzL2NvbW1vbic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDb21tb25QYWdlOiBDb21tb25QYWdlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhbmdlZENmZ0RhdGE6IHt9LAogICAgICBzdWJtaXRDZmdEYXRhOiB7fSwKICAgICAgYXBpRGF0YToge30sCiAgICAgIGRhdGE6IHsKICAgICAgICBnZXREYXRhU3VjY2VzczogZmFsc2UKICAgICAgfSwKICAgICAgQ3VycmVudEFjY291bnQ6IDEsCiAgICAgIGF1ZGlvQ29kZWNzSXRlbXM6IFtdLAogICAgICBhdWRpb0NvZGVjc1RhcmdldEl0ZW1zOiBbXSwKICAgICAgdmlkZW9Db2RlY3NJdGVtczogW10sCiAgICAgIHZpZGVvQ29kZWNzVGFyZ2V0SXRlbXM6IFtdLAogICAgICBjb2RlQml0UmF0ZUl0ZW1zMTogW3sKICAgICAgICBrZXk6ICc2NCcsCiAgICAgICAgbGFiZWw6ICc2NCcKICAgICAgfSwgewogICAgICAgIGtleTogJzEyOCcsCiAgICAgICAgbGFiZWw6ICcxMjgnCiAgICAgIH1dLAogICAgICBjb2RlQml0UmF0ZUl0ZW1zMjogW3sKICAgICAgICBrZXk6ICcxMjgnLAogICAgICAgIGxhYmVsOiAnMTI4JwogICAgICB9LCB7CiAgICAgICAga2V5OiAnMjU2JywKICAgICAgICBsYWJlbDogJzI1NicKICAgICAgfSwgewogICAgICAgIGtleTogJzMyMCcsCiAgICAgICAgbGFiZWw6ICczMjAnCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICc1MTInLAogICAgICAgIGxhYmVsOiAnNTEyJwogICAgICB9XSwKICAgICAgY29kZUJpdFJhdGVJdGVtczM6IFt7CiAgICAgICAga2V5OiAnNTEyJywKICAgICAgICBsYWJlbDogJzUxMicKICAgICAgfSwgewogICAgICAgIGtleTogJzc2OCcsCiAgICAgICAgbGFiZWw6ICc3NjgnCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICcxMDI0JywKICAgICAgICBsYWJlbDogJzEwMjQnCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICcxNTM2JywKICAgICAgICBsYWJlbDogJzE1MzYnCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICcyMDQ4JywKICAgICAgICBsYWJlbDogJzIwNDgnCiAgICAgIH1dLAogICAgICBjb2RlUGF5TG9hZEl0ZW1zMTogW10sCiAgICAgIGNvZGVQYXlMb2FkSXRlbXMyOiBbXSwKICAgICAgYXVkaW9Db2RlY3NFbmFibGVJdGVtczogW10sCiAgICAgIGF1ZGlvQ29kZWNzRGlzYWJsZUl0ZW1zOiBbXSwKICAgICAgdmlkZW9Db2RlY3NFbmFibGVJdGVtczogW10sCiAgICAgIHZpZGVvQ29kZWNzRGlzYWJsZUl0ZW1zOiBbXSwKICAgICAgT1BVU0VuYWJsZTogIiIsCiAgICAgIE9QVVNEaXNhYmxlOiAiIiwKICAgICAgdXNlZFBvcnRJdGVtczogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgZm9yICh2YXIgaSA9IDkwOyBpIDwgMTIwOyBpKyspIHsKICAgICAgdmFyIGl0ZW0xID0gewogICAgICAgICJrZXkiOiBpIC0gODksCiAgICAgICAgImxhYmVsIjogaQogICAgICB9OwogICAgICB2YXIgaXRlbTIgPSB7CiAgICAgICAgImtleSI6IGkgLSA5MCwKICAgICAgICAibGFiZWwiOiBpCiAgICAgIH07CiAgICAgIHRoaXMuY29kZVBheUxvYWRJdGVtczEucHVzaChpdGVtMSk7CiAgICAgIHRoaXMuY29kZVBheUxvYWRJdGVtczIucHVzaChpdGVtMik7CiAgICB9CgogICAgZ2V0RGF0YSh0aGlzLCB0aGlzLkN1cnJlbnRBY2NvdW50KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2U6IGZ1bmN0aW9uIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2UoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50Lml0ZW1LZXkgPT0gImN1cnJlbnRBY2NvdW50IikgewogICAgICAgIHRoaXMuQ3VycmVudEFjY291bnQgPSBldmVudC5uZXdWYWw7CiAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXRlbUtleSA9PSAiYXVkaW9Db2RlY3NJdGVtcyIpIHsKICAgICAgICB0aGlzLmF1ZGlvQ29kZWNzVGFyZ2V0SXRlbXMgPSBldmVudC5uZXdWYWw7CiAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXRlbUtleSA9PSAidmlkZW9Db2RlY3NJdGVtcyIpIHsKICAgICAgICB0aGlzLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMgPSBldmVudC5uZXdWYWw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGV2ZW50Lm5ld1ZhbDsKICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIEN1cnJlbnRBY2NvdW50OiBmdW5jdGlvbiBDdXJyZW50QWNjb3VudChuZXdWYWwsIG9sZFZhbCkgewogICAgICBnZXREYXRhKHRoaXMsIG5ld1ZhbCk7CiAgICB9LAogICAgY2hhbmdlZENmZ0RhdGE6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihuZXdWYWwsIG9sZFZhbCkgewogICAgICAgIC8v55uR5ZCsQ29kZeWPmOWMluagvOW8jwogICAgICAgIENoYW5nZUNvZGVjUmVzb2x1dGlvbk9wdGlvbih0aGlzLCAidmlkZW9Db2RlYyIsICJDb25maWcuQWNjb3VudCIgKyB0aGlzLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAxLk1heEJSIiwgbmV3VmFsWydDb25maWcuQWNjb3VudCcgKyB0aGlzLkN1cnJlbnRBY2NvdW50ICsgJy5WaWRlbzAxLlByb2ZpbGVMZXZlbCddKTsKICAgICAgICBDaGFuZ2VDb2RlY1Jlc29sdXRpb25PcHRpb24odGhpcywgInZpZGVvQ29kZWMiLCAiQ29uZmlnLkFjY291bnQiICsgdGhpcy5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMC5NYXhCUiIsIG5ld1ZhbFsnQ29uZmlnLkFjY291bnQnICsgdGhpcy5DdXJyZW50QWNjb3VudCArICcuVmlkZW8wMC5Qcm9maWxlTGV2ZWwnXSk7CiAgICAgICAgQ2hhbmdlQ29kZWNSZXNvbHV0aW9uT3B0aW9uKHRoaXMsICJ2aWRlb0NvZGVjIiwgIkNvbmZpZy5BY2NvdW50IiArIHRoaXMuQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDMuTWF4QlIiLCBuZXdWYWxbJ0NvbmZpZy5BY2NvdW50JyArIHRoaXMuQ3VycmVudEFjY291bnQgKyAnLlZpZGVvMDMuUHJvZmlsZUxldmVsJ10pOyAvL+ebkeWQrE1XSSBTdWJzY3JpYmUgUGVyaW9kCgogICAgICAgIHZhciBjb250ZW50S2V5SW5kZXggPSBnZXRJbmRleEJ5S2V5KHRoaXMuZGF0YS5jb250ZW50cywgInN1YnNjcmliZSIpOwogICAgICAgIHZhciBpdGVtS2V5SW5kZXggPSBnZXRJbmRleEJ5S2V5KHRoaXMuZGF0YS5jb250ZW50c1tjb250ZW50S2V5SW5kZXhdLml0ZW1zLCAiQ29uZmlnLkFjY291bnQiICsgdGhpcy5DdXJyZW50QWNjb3VudCArICIuU1VCU0NSSUJFLlN1YnNjcmliZU1XSUV4cGlyZSIpOwoKICAgICAgICBpZiAobmV3VmFsWydDb25maWcuQWNjb3VudCcgKyB0aGlzLkN1cnJlbnRBY2NvdW50ICsgJy5TVUJTQ1JJQkUuU3Vic3JpYmVNV0knXSA9PSAwKSB7CiAgICAgICAgICB0aGlzLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbaXRlbUtleUluZGV4XS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgIH0gLy/nm5HlkKxEVE1GIFR5cGUKCgogICAgICAgIGNvbnRlbnRLZXlJbmRleCA9IGdldEluZGV4QnlLZXkodGhpcy5kYXRhLmNvbnRlbnRzLCAiZHRtZiIpOwogICAgICAgIGl0ZW1LZXlJbmRleCA9IGdldEluZGV4QnlLZXkodGhpcy5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXMsICJDb25maWcuQWNjb3VudCIgKyB0aGlzLkN1cnJlbnRBY2NvdW50ICsgIi5EVE1GLkluZm9UeXBlIik7CgogICAgICAgIGlmIChuZXdWYWxbJ0NvbmZpZy5BY2NvdW50JyArIHRoaXMuQ3VycmVudEFjY291bnQgKyAnLkRUTUYuVHlwZSddID49IDMpIHsKICAgICAgICAgIHRoaXMuZGF0YS5jb250ZW50c1tjb250ZW50S2V5SW5kZXhdLml0ZW1zW2l0ZW1LZXlJbmRleF0uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbaXRlbUtleUluZGV4XS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfQp9OwoKZnVuY3Rpb24gZ2V0RGF0YSh2bSwgYWNjb3VudElkKSB7CiAgdm0uJGF4aW9zLmdldCgiYXBpL2FjY291bnRBZHZhbmNlZC9pbmZvP2FjY291bnRJZD0iICsgYWNjb3VudElkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgdm0uZ2V0RGF0YVN1Y2Nlc3MgPSB0cnVlOwogICAgdm0uYXBpRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YSA9IGRlZXBDbG9uZShyZXNwb25zZS5kYXRhLmNvbmZpZ0RhdGEpOwogICAgdm0uQWNjb3VudEl0ZW1zID0gW107CgogICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gdm0uYXBpRGF0YS5kYXRhLkFjY291bnQuQWNjb3VudE51bWJlcjsgaSsrKSB7CiAgICAgIHZhciBpdGVtID0gewogICAgICAgICJrZXkiOiBpLAogICAgICAgICJsYWJlbCI6ICJBY2NvdW50IiArIGkKICAgICAgfTsKICAgICAgdm0uQWNjb3VudEl0ZW1zLnB1c2goaXRlbSk7CiAgICB9CgogICAgdm0uYXVkaW9Db2RlY3NJdGVtcyA9IFtdOwogICAgdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtcyA9IFtdOwogICAgdmFyIGNvdW50ID0gMDsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmFwaURhdGEuZGF0YS5BdWRpb0NvZGVjcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAodm0uYXBpRGF0YS5kYXRhLkF1ZGlvQ29kZWNzW2ldLkF1ZGlvQ29kZXNFbmFibGUpIHsKICAgICAgICBpZiAodm0uYXBpRGF0YS5kYXRhLkF1ZGlvQ29kZWNzW2ldLkF1ZGlvQ29kZXNFbmFibGUgIT0gIk9QVVMiKSB7CiAgICAgICAgICB2YXIgYXVkaW9JdGVtID0gewogICAgICAgICAgICAia2V5IjogY291bnQudG9TdHJpbmcoKSwKICAgICAgICAgICAgInRpdGxlIjogdm0uYXBpRGF0YS5kYXRhLkF1ZGlvQ29kZWNzW2ldLkF1ZGlvQ29kZXNFbmFibGUKICAgICAgICAgIH07CiAgICAgICAgICB2bS5hdWRpb0NvZGVjc0l0ZW1zLnB1c2goYXVkaW9JdGVtKTsKICAgICAgICAgIHZtLmF1ZGlvQ29kZWNzVGFyZ2V0SXRlbXMucHVzaChpLnRvU3RyaW5nKCkpOwogICAgICAgICAgY291bnQrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdm0uT1BVU0VuYWJsZSA9ICJPUFVTIjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodm0uYXBpRGF0YS5kYXRhLkF1ZGlvQ29kZWNzW2ldLkF1ZGlvQ29kZXNEaXNhYmxlICE9ICJPUFVTIikgewogICAgICAgIHZhciBfYXVkaW9JdGVtID0gewogICAgICAgICAgImtleSI6IGNvdW50LnRvU3RyaW5nKCksCiAgICAgICAgICAidGl0bGUiOiB2bS5hcGlEYXRhLmRhdGEuQXVkaW9Db2RlY3NbaV0uQXVkaW9Db2Rlc0Rpc2FibGUKICAgICAgICB9OwogICAgICAgIHZtLmF1ZGlvQ29kZWNzSXRlbXMucHVzaChfYXVkaW9JdGVtKTsKICAgICAgICBjb3VudCsrOwogICAgICB9IGVsc2UgewogICAgICAgIHZtLk9QVVNEaXNhYmxlID0gIk9QVVMiOwogICAgICB9CiAgICB9CgogICAgdm0udmlkZW9Db2RlY3NJdGVtcyA9IFtdOwogICAgdm0udmlkZW9Db2RlY3NUYXJnZXRJdGVtcyA9IFtdOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLlZpZGVvQ29kZWNzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmICh2bS5hcGlEYXRhLmRhdGEuVmlkZW9Db2RlY3NbaV0uVmlkZW9Db2Rlc0VuYWJsZSkgewogICAgICAgIHZhciB2aWRlb0l0ZW0gPSB7CiAgICAgICAgICAia2V5IjogaS50b1N0cmluZygpLAogICAgICAgICAgInRpdGxlIjogdm0uYXBpRGF0YS5kYXRhLlZpZGVvQ29kZWNzW2ldLlZpZGVvQ29kZXNFbmFibGUKICAgICAgICB9OwogICAgICAgIHZtLnZpZGVvQ29kZWNzSXRlbXMucHVzaCh2aWRlb0l0ZW0pOwogICAgICAgIHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMucHVzaChpLnRvU3RyaW5nKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBfdmlkZW9JdGVtID0gewogICAgICAgICAgImtleSI6IGkudG9TdHJpbmcoKSwKICAgICAgICAgICJ0aXRsZSI6IHZtLmFwaURhdGEuZGF0YS5WaWRlb0NvZGVjc1tpXS5WaWRlb0NvZGVzRGlzYWJsZQogICAgICAgIH07CiAgICAgICAgdm0udmlkZW9Db2RlY3NJdGVtcy5wdXNoKF92aWRlb0l0ZW0pOwogICAgICB9CiAgICB9IC8vcG9ydOerr+WPowoKCiAgICB2bS51c2VkUG9ydEl0ZW1zID0gW107CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5hcGlEYXRhLmRhdGEuc2lwUG9ydHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIF9pdGVtID0gewogICAgICAgICJtaW4iOiB2bS5hcGlEYXRhLmRhdGEuc2lwUG9ydHNbaV0ubWluLAogICAgICAgICJtYXgiOiB2bS5hcGlEYXRhLmRhdGEuc2lwUG9ydHNbaV0ubWF4CiAgICAgIH07CiAgICAgIHZtLnVzZWRQb3J0SXRlbXMucHVzaChfaXRlbSk7CiAgICB9CgogICAgY3JlYXRlUGFnZURhdGEodm0pOwogIH0pOwp9CgpmdW5jdGlvbiBDaGFuZ2VDb2RlY1Jlc29sdXRpb25PcHRpb24odm0sIGNvbnRlbnRLZXksIGl0ZW1LZXksIGluZGV4KSB7CiAgdmFyIGNvbnRlbnRLZXlJbmRleCA9IGdldEluZGV4QnlLZXkodm0uZGF0YS5jb250ZW50cywgY29udGVudEtleSk7CiAgdmFyIGl0ZW1LZXlJbmRleCA9IGdldEluZGV4QnlLZXkodm0uZGF0YS5jb250ZW50c1tjb250ZW50S2V5SW5kZXhdLml0ZW1zLCBpdGVtS2V5KTsKCiAgaWYgKGluZGV4ID09IDApIHsKICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLnNlbGVjdEl0ZW1zID0gdm0uY29kZUJpdFJhdGVJdGVtczE7CiAgfSBlbHNlIGlmIChpbmRleCA9PSAxKSB7CiAgICB2bS5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbaXRlbUtleUluZGV4XS5zZWxlY3RJdGVtcyA9IHZtLmNvZGVCaXRSYXRlSXRlbXMyOwogIH0gZWxzZSB7CiAgICB2bS5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbaXRlbUtleUluZGV4XS5zZWxlY3RJdGVtcyA9IHZtLmNvZGVCaXRSYXRlSXRlbXMzOwogIH0KfQoKZnVuY3Rpb24gc3VibWl0RGF0YSh2bSkgewogIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IHRydWU7CiAgdmFyIHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAiYWNjb3VudEFkdmFuY2VkIiwKICAgIGFjdGlvbjogInNldCIsCiAgICBjb25maWdEYXRhOiB2bS5zdWJtaXRDZmdEYXRhLAogICAgZGF0YTogewogICAgICAiQXVkaW9Db2RlY3NFbmFibGUiOiB2bS5hdWRpb0NvZGVjc0VuYWJsZUl0ZW1zLAogICAgICAiQXVkaW9Db2RlY3NEaXNhYmxlIjogdm0uYXVkaW9Db2RlY3NEaXNhYmxlSXRlbXMsCiAgICAgICJWaWRlb0NvZGVjc0VuYWJsZSI6IHZtLnZpZGVvQ29kZWNzRW5hYmxlSXRlbXMsCiAgICAgICJWaWRlb0NvZGVjc0Rpc2FibGUiOiB2bS52aWRlb0NvZGVjc0Rpc2FibGVJdGVtcwogICAgfQogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtKTsKICAgIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogIH0pOwp9CgpmdW5jdGlvbiBnZXRDb21taXREYXRhKHZtKSB7CiAgdm0uc3VibWl0Q2ZnRGF0YSA9IHt9OwoKICBmb3IgKHZhciBjaGFuZ2VkS2V5IGluIHZtLmNoYW5nZWRDZmdEYXRhKSB7CiAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhW2NoYW5nZWRLZXldICE9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldKSB7CiAgICAgIHZtLnN1Ym1pdENmZ0RhdGFbY2hhbmdlZEtleV0gPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XTsKICAgIH0KICB9CgogIHN1Ym1pdENvZGVjc0l0ZW0odm0pOwp9CgpmdW5jdGlvbiBzdWJtaXRDb2RlY3NJdGVtKHZtKSB7CiAgdm0uYXVkaW9Db2RlY3NFbmFibGVJdGVtcyA9IFtdOwogIHZtLmF1ZGlvQ29kZWNzRGlzYWJsZUl0ZW1zID0gW107CiAgdm0udmlkZW9Db2RlY3NFbmFibGVJdGVtcyA9IFtdOwogIHZtLnZpZGVvQ29kZWNzRGlzYWJsZUl0ZW1zID0gW107IC8vYXVkaW8KCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5hdWRpb0NvZGVjc1RhcmdldEl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZW5hYmxlSXRlbSA9IHZtLmF1ZGlvQ29kZWNzSXRlbXNbdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtc1tpXV0udGl0bGU7CiAgICB2bS5hdWRpb0NvZGVjc0VuYWJsZUl0ZW1zLnB1c2goZW5hYmxlSXRlbSk7CiAgfQoKICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmF1ZGlvQ29kZWNzSXRlbXMubGVuZ3RoOyBpKyspIHsKICAgIGlmICghdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtcy5pbmNsdWRlcyh2bS5hdWRpb0NvZGVjc0l0ZW1zW2ldLmtleSkpIHsKICAgICAgdmFyIGRpc2FibGVJdGVtID0gdm0uYXVkaW9Db2RlY3NJdGVtc1tpXS50aXRsZTsKICAgICAgdm0uYXVkaW9Db2RlY3NEaXNhYmxlSXRlbXMucHVzaChkaXNhYmxlSXRlbSk7CiAgICB9CiAgfQoKICBpZiAodm0uT1BVU0VuYWJsZSAhPSAiIikgewogICAgdm0uYXVkaW9Db2RlY3NFbmFibGVJdGVtcy5wdXNoKHZtLk9QVVNFbmFibGUpOwogIH0gZWxzZSB7CiAgICB2bS5hdWRpb0NvZGVjc0Rpc2FibGVJdGVtcy5wdXNoKHZtLk9QVVNEaXNhYmxlKTsKICB9IC8vdmlkZW8KCgogIGZvciAodmFyIGkgPSAwOyBpIDwgdm0udmlkZW9Db2RlY3NUYXJnZXRJdGVtcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGVuYWJsZUl0ZW0gPSB2bS52aWRlb0NvZGVjc0l0ZW1zW3ZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXNbaV1dLnRpdGxlOwogICAgdm0udmlkZW9Db2RlY3NFbmFibGVJdGVtcy5wdXNoKGVuYWJsZUl0ZW0pOwogIH0KCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS52aWRlb0NvZGVjc0l0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAoIXZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMuaW5jbHVkZXModm0udmlkZW9Db2RlY3NJdGVtc1tpXS5rZXkpKSB7CiAgICAgIHZhciBkaXNhYmxlSXRlbSA9IHZtLnZpZGVvQ29kZWNzSXRlbXNbaV0udGl0bGU7CiAgICAgIHZtLnZpZGVvQ29kZWNzRGlzYWJsZUl0ZW1zLnB1c2goZGlzYWJsZUl0ZW0pOwogICAgfQogIH0KfQoKZnVuY3Rpb24gY3JlYXRlUGFnZURhdGEodm0pIHsKICB2bS5kYXRhID0gewogICAgZ2V0RGF0YVN1Y2Nlc3M6IHRydWUsCiAgICBicmVhZENydW1iOiB7CiAgICAgIGZpcnN0VGl0bGU6IHZtLiR0KCJBY2NvdW50IiksCiAgICAgIHNlY29uZFRpdGxlOiB2bS4kdCgiQWR2YW5jZSIpCiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICBnZXRDb21taXREYXRhKHZtKTsKCiAgICAgIGlmICghY2hlY2tDb21taXREYXRhKHZtKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc3VibWl0RGF0YSh2bSk7CiAgICB9LAogICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkgewogICAgICB2bS5kYXRhLmNhbmNlbExvYWRpbmcgPSB0cnVlOwogICAgICBnZXREYXRhKHZtLCB2bS5DdXJyZW50QWNjb3VudCk7CiAgICB9LAogICAgc3VibWl0TG9hZGluZzogZmFsc2UsCiAgICBjYW5jZWxMb2FkaW5nOiBmYWxzZSwKICAgIGNvbnRlbnRzOiBbXQogIH07CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVNpcEFjY291bnRDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZUF1ZGlvQ29kZWNzQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVWaWRlb0NvZGVjc0NvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlVmlkZW9Db2RlY0NvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlU3Vic2NyaWJlQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVEdG1mQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVDYWxsQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVFbmNyeXB0aW9uQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVOYXRDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVVzZXJBZ2VudENvbnRlbnQodm0pKTsKfQoKZnVuY3Rpb24gY3JlYXRlU2lwQWNjb3VudENvbnRlbnQodm0pIHsKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogInNpcEFjY291bnQiLAogICAgdGl0bGU6IHZtLiR0KCJTSVBBY2NvdW50IiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiU0lQQWNjb3VudCIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiQWNjb3VudCIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAga2V5OiAiY3VycmVudEFjY291bnQiLAogICAgICB2YWx1ZTogdm0uQ3VycmVudEFjY291bnQsCiAgICAgIHNlbGVjdEl0ZW1zOiB2bS5BY2NvdW50SXRlbXMKICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlQXVkaW9Db2RlY3NDb250ZW50KHZtKSB7CiAgdmFyIGNvbnRlbnQgPSB7CiAgICBrZXk6ICJhdWRpb0NvZGVjcyIsCiAgICB0aXRsZTogdm0uJHQoIkNvZGVjcyIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIiIpLAogICAgaXRlbXM6IFt7CiAgICAgIHR5cGU6ICJ0cmFuc2ZlciIsCiAgICAgIHNvdXJjZVRpdGxlOiB2bS4kdCgiRGlzYWJsZWRWaWRlb0NvZGVjcyIpLAogICAgICB0YXJnZXRUaXRsZTogdm0uJHQoIkVuYWJsZWRWaWRlb0NvZGVjcyIpLAogICAgICBrZXk6ICJhdWRpb0NvZGVjc0l0ZW1zIiwKICAgICAgbW9ja0l0ZW1zOiB2bS5hdWRpb0NvZGVjc0l0ZW1zLAogICAgICB2YWx1ZTogdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtcywKICAgICAgc2VsZWN0ZWRLZXlzOiBbXQogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVWaWRlb0NvZGVjc0NvbnRlbnQodm0pIHsKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogInZpZGVvQ29kZWNzIiwKICAgIHRpdGxlOiB2bS4kdCgiVmlkZW9Db2RlY3MiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCIiKSwKICAgIGl0ZW1zOiBbewogICAgICB0eXBlOiAidHJhbnNmZXIiLAogICAgICBzb3VyY2VUaXRsZTogdm0uJHQoIkRpc2FibGVkVmlkZW9Db2RlY3MiKSwKICAgICAgdGFyZ2V0VGl0bGU6IHZtLiR0KCJFbmFibGVkVmlkZW9Db2RlY3MiKSwKICAgICAga2V5OiAidmlkZW9Db2RlY3NJdGVtcyIsCiAgICAgIG1vY2tJdGVtczogdm0udmlkZW9Db2RlY3NJdGVtcywKICAgICAgdmFsdWU6IHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMsCiAgICAgIHNlbGVjdGVkS2V5czogW10KICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlVmlkZW9Db2RlY0NvbnRlbnQodm0pIHsKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogInZpZGVvQ29kZWMiLAogICAgdGl0bGU6IHZtLiR0KCJWaWRlb0NvZGVjIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJOYW1lIiksCiAgICAgIHR5cGU6ICJsYWJlbCIsCiAgICAgIGtleTogIkgyNjMiLAogICAgICB2YWx1ZTogIkgyNjMiCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiUmVzb2x1dGlvbiIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDEuUHJvZmlsZUxldmVsIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDEuUHJvZmlsZUxldmVsIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiBbewogICAgICAgIGtleTogMCwKICAgICAgICBsYWJlbDogJ1FDSUYnCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDEsCiAgICAgICAgbGFiZWw6ICdDSUYnCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDMsCiAgICAgICAgbGFiZWw6ICc0Q0lGJwogICAgICB9XQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkJpdHJhdGVMYWJlbCIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDEuTWF4QlIiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMS5NYXhCUiJdLAogICAgICBzZWxlY3RJdGVtczogW10KICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJQYXlsb2FkIiksCiAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMS5QYXlsb2FkIiwKICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAxLlBheWxvYWQiXSwKICAgICAgc2VsZWN0SXRlbXM6IHZtLmNvZGVQYXlMb2FkSXRlbXMxCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiTmFtZSIpLAogICAgICB0eXBlOiAibGFiZWwiLAogICAgICBrZXk6ICJIMjY0IiwKICAgICAgdmFsdWU6ICJIMjY0IgogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIlJlc29sdXRpb24iKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAwLlByb2ZpbGVMZXZlbCIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAwLlByb2ZpbGVMZXZlbCJdLAogICAgICBzZWxlY3RJdGVtczogW3sKICAgICAgICBrZXk6IDAsCiAgICAgICAgbGFiZWw6ICdRQ0lGJwogICAgICB9LCB7CiAgICAgICAga2V5OiAxLAogICAgICAgIGxhYmVsOiAnQ0lGJwogICAgICB9LCB7CiAgICAgICAga2V5OiAzLAogICAgICAgIGxhYmVsOiAnNENJRicKICAgICAgfV0KICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJCaXRyYXRlTGFiZWwiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAwLk1heEJSIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDAuTWF4QlIiXSwKICAgICAgc2VsZWN0SXRlbXM6IFtdCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiUGF5bG9hZCIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDAuUGF5bG9hZCIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAwLlBheWxvYWQiXSwKICAgICAgc2VsZWN0SXRlbXM6IHZtLmNvZGVQYXlMb2FkSXRlbXMyCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiTmFtZSIpLAogICAgICB0eXBlOiAibGFiZWwiLAogICAgICBrZXk6ICJWUDgiLAogICAgICB2YWx1ZTogIlZQOCIKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJSZXNvbHV0aW9uIiksCiAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMy5Qcm9maWxlTGV2ZWwiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMy5Qcm9maWxlTGV2ZWwiXSwKICAgICAgc2VsZWN0SXRlbXM6IFt7CiAgICAgICAga2V5OiAwLAogICAgICAgIGxhYmVsOiAnUUNJRicKICAgICAgfSwgewogICAgICAgIGtleTogMSwKICAgICAgICBsYWJlbDogJ0NJRicKICAgICAgfSwgewogICAgICAgIGtleTogMywKICAgICAgICBsYWJlbDogJzRDSUYnCiAgICAgIH1dCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiQml0cmF0ZUxhYmVsIiksCiAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMy5NYXhCUiIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAzLk1heEJSIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiBbXQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIlBheWxvYWQiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGRpc2FibGVkOiB0cnVlLAogICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMy5QYXlsb2FkIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDMuUGF5bG9hZCJdLAogICAgICBzZWxlY3RJdGVtczogdm0uY29kZVBheUxvYWRJdGVtczIKICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAic3Vic2NyaWJlIiwKICAgIHRpdGxlOiB2bS4kdCgiU3Vic2NyaWJlIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJNV0lTdWJzY3JpYmUiKSwKICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNVQlNDUklCRS5TdWJzcmliZU1XSSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TVUJTQ1JJQkUuU3Vic3JpYmVNV0kiXQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIk1XSVN1YnNjcmliZVBlcmlvZCIpLAogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCIoMTIwfjY1NTM1U2VjKSIpLAogICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU1VCU0NSSUJFLlN1YnNjcmliZU1XSUV4cGlyZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TVUJTQ1JJQkUuU3Vic2NyaWJlTVdJRXhwaXJlIl0KICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJWb2ljZU1haWxOdW1iZXIiKSwKICAgICAgdHlwZTogImlucHV0IiwKICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZPSUNFTVNHLk51bWJlciIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WT0lDRU1TRy5OdW1iZXIiXQogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVEdG1mQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAiZHRtZiIsCiAgICB0aXRsZTogdm0uJHQoIkRUTUYiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCIiKSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIlR5cGUiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5EVE1GLlR5cGUiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuRFRNRi5UeXBlIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiBbewogICAgICAgIGtleTogMSwKICAgICAgICBsYWJlbDogIkluYmFuZCIKICAgICAgfSwgewogICAgICAgIGtleTogMiwKICAgICAgICBsYWJlbDogIlJGQzI4MzMiCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDMsCiAgICAgICAgbGFiZWw6ICJJbmZvIgogICAgICB9LCB7CiAgICAgICAga2V5OiA0LAogICAgICAgIGxhYmVsOiAiSW5mbytJbmJhbmQiCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDUsCiAgICAgICAgbGFiZWw6ICJJbmZvK1JGQzI4MzMiCiAgICAgIH1dCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiSG93VG9JbmZvRFRNRiIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkRUTUYuSW5mb1R5cGUiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuRFRNRi5JbmZvVHlwZSJdLAogICAgICBzZWxlY3RJdGVtczogW3sKICAgICAgICBrZXk6IDAsCiAgICAgICAgbGFiZWw6ICJEaXNhYmxlZCIKICAgICAgfSwgewogICAgICAgIGtleTogMSwKICAgICAgICBsYWJlbDogIkRUTUYiCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDIsCiAgICAgICAgbGFiZWw6ICJEVE1GLVJlbGF5IgogICAgICB9LCB7CiAgICAgICAga2V5OiAzLAogICAgICAgIGxhYmVsOiAiVGVsZXBob25lLUV2ZW50IgogICAgICB9XQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkRUTUZQYXlsb2FkIiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICBoaW50Q29udGVudDogdm0uJHQoIig5Nn4xMjcpIiksCiAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5EVE1GLlBheWxvYWQiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuRFRNRi5QYXlsb2FkIl0KICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlQ2FsbENvbnRlbnQodm0pIHsKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogImNhbGwiLAogICAgdGl0bGU6IHZtLiR0KCJDYWxsIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJNYXhMb2NhbFNJUFBvcnQiKSwKICAgICAgdHlwZTogImlucHV0IiwKICAgICAgc2hvd0hpbnQ6IHRydWUsCiAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiKDEwMjR+NjU1MzUpIiksCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIHdhcm5MYWJlbDogIiIsCiAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCJdCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiTWluTG9jYWxTSVBQb3J0IiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICB3YXJuTGFiZWw6ICIiLAogICAgICBoaW50Q29udGVudDogdm0uJHQoIigxMDI0fjY1NTM1KSIpLAogICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iXQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIlBUaW1lIikgKyAiKG1zKSIsCiAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuQ0FMTC5QdGltZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5DQUxMLlB0aW1lIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiBbewogICAgICAgIGtleTogMCwKICAgICAgICBsYWJlbDogIkRpc2FibGVkIgogICAgICB9LCB7CiAgICAgICAga2V5OiAxMCwKICAgICAgICBsYWJlbDogMTAKICAgICAgfSwgewogICAgICAgIGtleTogMjAsCiAgICAgICAgbGFiZWw6IDIwCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDMwLAogICAgICAgIGxhYmVsOiAzMAogICAgICB9LCB7CiAgICAgICAga2V5OiA0MCwKICAgICAgICBsYWJlbDogNDAKICAgICAgfSwgewogICAgICAgIGtleTogNTAsCiAgICAgICAgbGFiZWw6IDUwCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDYwLAogICAgICAgIGxhYmVsOiA2MAogICAgICB9XQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkF1dG9BbnN3ZXIiKSwKICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkFVVE9fQU5TV0VSLkVuYWJsZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5BVVRPX0FOU1dFUi5FbmFibGUiXQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIlByZXZlbnRTSVBIYWNraW5nIiksCiAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5DQUxMLlByZXZlbnRTSVBIYWNraW5nIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkNBTEwuUHJldmVudFNJUEhhY2tpbmciXQogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVFbmNyeXB0aW9uQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAiZW5jcnlwdGlvbiIsCiAgICB0aXRsZTogdm0uJHQoIkVuY3J5cHRpb24iKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCIiKSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIlZvaWNlRW5jcnkiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5FTkNSWVBUSU9OLlNSVFBFbmNyeXB0aW9uIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkVOQ1JZUFRJT04uU1JUUEVuY3J5cHRpb24iXSwKICAgICAgc2VsZWN0SXRlbXM6IFt7CiAgICAgICAga2V5OiAwLAogICAgICAgIGxhYmVsOiB2bS4kdCgiRGlzYWJsZWQiKQogICAgICB9LCB7CiAgICAgICAga2V5OiAxLAogICAgICAgIGxhYmVsOiB2bS4kdCgiU1JUUENvbXB1bHNvcnkiKQogICAgICB9LCB7CiAgICAgICAga2V5OiAyLAogICAgICAgIGxhYmVsOiB2bS4kdCgiU1JUUE9wdGlvbmFsIikKICAgICAgfSwgewogICAgICAgIGtleTogMywKICAgICAgICBsYWJlbDogdm0uJHQoIlpSVFBPcHRpb25hbCIpCiAgICAgIH1dCiAgICB9XQogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZU5hdENvbnRlbnQodm0pIHsKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogIm5hdCIsCiAgICB0aXRsZTogdm0uJHQoIk5BVCIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIiIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiVURQS2VlcEFsaXZlTXNnIiksCiAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5OQVQuVWRwS2VlcEVuYWJsZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5OQVQuVWRwS2VlcEVuYWJsZSJdCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiVURQQWxpdmVNc2dJbnRlcnZhbCIpLAogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCIoNX42MFNlYykiKSwKICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLk5BVC5VZHBLZWVwSW50ZXJ2YWwiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuTkFULlVkcEtlZXBJbnRlcnZhbCJdCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiUlBvcnRFbmFibGVkIiksCiAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5OQVQuUnBvcnQiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuTkFULlJwb3J0Il0KICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlVXNlckFnZW50Q29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAidXNlckFnZW50IiwKICAgIHRpdGxlOiB2bS4kdCgiVXNlckFnZW50IiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJVc2VyQWdlbnQiKSwKICAgICAgdHlwZTogImlucHV0IiwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkdFTkVSQUwuVXNlckFnZW50IiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkdFTkVSQUwuVXNlckFnZW50Il0KICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY2hlY2tDb21taXREYXRhKHZtKSB7CiAgdmFyIHN1Y2Nlc3MgPSB0cnVlOyAvL2F1ZGlvQ29kZWNzCgogIGlmICh2bS5hdWRpb0NvZGVjc1RhcmdldEl0ZW1zLmxlbmd0aCA9PSAwKSB7CiAgICBhbGVydCh2bS4kdCgiRW5hYmxlZENvZGVjRW1wdHlXYXJuaW5nIikpOwogICAgc3VjY2VzcyA9IGZhbHNlOwogIH0gLy92aWRlb0NvZGVjcwoKCiAgaWYgKHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMubGVuZ3RoID09IDApIHsKICAgIGFsZXJ0KHZtLiR0KCJFbmFibGVkQ29kZWNFbXB0eVdhcm5pbmciKSk7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfSAvL01heExvY2FsU0lQUG9ydAoKCiAgaWYgKCFpc1BvcnQoTnVtYmVyKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNYXgiXSkpIHx8IE51bWJlcih2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWF4Il0pIDwgMTAyNCkgewogICAgdmFyIGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNhbGwiLCAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWF4Iik7CiAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICBpdGVtLndhcm5MYWJlbCA9IHZtLiR0KCJpcyBub3QgUG9ydCIpOwogICAgc3VjY2VzcyA9IGZhbHNlOwogIH0gLy9NaW5Mb2NhbFNJUFBvcnQKCgogIGlmICghaXNQb3J0KE51bWJlcih2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWluIl0pKSB8fCBOdW1iZXIodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1pbiJdKSA8IDEwMjQpIHsKICAgIHZhciBfaXRlbTIgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNhbGwiLCAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWluIik7CgogICAgX2l0ZW0yLmlzV2FybiA9IHRydWU7CiAgICBfaXRlbTIud2FybkxhYmVsID0gdm0uJHQoImlzIG5vdCBQb3J0Iik7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfSAvL01pbkxvY2FsU0lQUG9ydCA+IE1heExvY2FsU0lQUG9ydCAKCgogIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWF4Il0gfHwgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1pbiJdKSB7CiAgICBpZiAoTnVtYmVyKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNYXgiXSkgLSBOdW1iZXIodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1pbiJdKSA8IDApIHsKICAgICAgdmFyIGl0ZW0xID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjYWxsIiwgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCIpOwogICAgICBpdGVtMS5pc1dhcm4gPSB0cnVlOwogICAgICBpdGVtMS53YXJuTGFiZWwgPSB2bS4kdCgiYWFhIik7CiAgICAgIHZhciBpdGVtMiA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY2FsbCIsICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iKTsKICAgICAgaXRlbTIuaXNXYXJuID0gdHJ1ZTsKICAgICAgaXRlbTIud2FybkxhYmVsID0gdm0uJHQoIiIpOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CgogICAgaWYgKHRydWUgPT0gaXNQb3J0VXNlZCh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWluIl0sIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNYXgiXSwgdm0udXNlZFBvcnRJdGVtcykpIHsKICAgICAgdmFyIF9pdGVtMyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY2FsbCIsICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNYXgiKTsKCiAgICAgIF9pdGVtMy5pc1dhcm4gPSB0cnVlOwogICAgICBfaXRlbTMud2FybkxhYmVsID0gdm0uJHQoIldhcm5pbmdJbnZhbGlkTG9jYWxTSVBQb3J0U2V0dGluZyIpOwoKICAgICAgdmFyIF9pdGVtNCA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY2FsbCIsICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iKTsKCiAgICAgIF9pdGVtNC5pc1dhcm4gPSB0cnVlOwogICAgICBfaXRlbTQud2FybkxhYmVsID0gdm0uJHQoIiIpOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfQoKICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5EVE1GLlBheWxvYWQiXSkgewogICAgaWYgKCFjaGVja1JhbmdlT2ZOdW1iZXIodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkRUTUYuUGF5bG9hZCJdLCA5NiwgMTI3KSkgewogICAgICB2YXIgX2l0ZW01ID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJkdG1mIiwgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5EVE1GLlBheWxvYWQiKTsKCiAgICAgIF9pdGVtNS5pc1dhcm4gPSB0cnVlOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfQoKICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TVUJTQ1JJQkUuU3Vic2NyaWJlTVdJRXhwaXJlIl0pIHsKICAgIGlmICghY2hlY2tSYW5nZU9mTnVtYmVyKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TVUJTQ1JJQkUuU3Vic2NyaWJlTVdJRXhwaXJlIl0sIDEyMCwgNjU1MzUpKSB7CiAgICAgIHZhciBfaXRlbTYgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgInN1YnNjcmliZSIsICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU1VCU0NSSUJFLlN1YnNjcmliZU1XSUV4cGlyZSIpOwoKICAgICAgX2l0ZW02LmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CgogIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLk5BVC5VZHBLZWVwSW50ZXJ2YWwiXSkgewogICAgaWYgKCFjaGVja1JhbmdlT2ZOdW1iZXIodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLk5BVC5VZHBLZWVwSW50ZXJ2YWwiXSwgNSwgNjApKSB7CiAgICAgIHZhciBfaXRlbTcgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgIm5hdCIsICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuTkFULlVkcEtlZXBJbnRlcnZhbCIpOwoKICAgICAgX2l0ZW03LmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CgogIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkdFTkVSQUwuVXNlckFnZW50Il0pIHsKICAgIGlmICghbm90Q29udGFpbkludmFsaWQodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkdFTkVSQUwuVXNlckFnZW50Il0pKSB7CiAgICAgIHZhciBfaXRlbTggPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgInVzZXJBZ2VudCIsICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuR0VORVJBTC5Vc2VyQWdlbnQiKTsKCiAgICAgIF9pdGVtOC5pc1dhcm4gPSB0cnVlOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfQoKICByZXR1cm4gc3VjY2VzczsKfQ=="},null]}