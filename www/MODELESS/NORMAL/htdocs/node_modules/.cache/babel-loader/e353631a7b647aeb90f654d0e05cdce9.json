{"remainingRequest":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js!E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\components\\TableFileInput.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\components\\TableFileInput.vue","mtime":1624613275272},{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632654448000},{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1632654448000},{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632654448000},{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZGVlcENsb25lLCBjaGVja0ZpbGVGb3JtYXQsIHNob3dFcnJvckluZm8gfSBmcm9tICJAL2pzL2NvbW1vbi5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgYWNjZXB0RmlsZVR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIGJ0bk5hbWU6IFN0cmluZywKICAgIHZhbHVlOiBPYmplY3QsCiAgICB1cGxvYWQ6IEZ1bmN0aW9uLAogICAgaW5kZXg6IE51bWJlciwKICAgIGlzU2hvdzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgbWF4U2l6ZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IC0xCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBiZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZVVwbG9hZChpbmZvKSB7CiAgICAgIC8vY2hlY2sgZm9ybWF0CiAgICAgIHZhciBhY2NlcHRUeXBlcyA9IHRoaXMuYWNjZXB0RmlsZVR5cGUuc3BsaXQoIiwiKTsKICAgICAgdmFyIGNoZWNrU3VjY2VzcyA9IGZhbHNlOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY2NlcHRUeXBlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChjaGVja0ZpbGVGb3JtYXQoaW5mby5uYW1lLCBhY2NlcHRUeXBlc1tpXSwgYWNjZXB0VHlwZXNbaV0ubGVuZ3RoKSkgewogICAgICAgICAgY2hlY2tTdWNjZXNzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghY2hlY2tTdWNjZXNzKSB7CiAgICAgICAgc2hvd0Vycm9ySW5mbyh0aGlzLCB0aGlzLiR0KCJGaWxlRm9ybWF0V2FybmluZyIpKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy9jaGVjayBmaWxlIHNpemUKCgogICAgICBpZiAodGhpcy5tYXhTaXplID4gMCAmJiBpbmZvLnNpemUgPiB0aGlzLm1heFNpemUpIHsKICAgICAgICBzaG93RXJyb3JJbmZvKHRoaXMsIHRoaXMuJHQoIlVwbG9hZGluZ0ZpbGVUb29MYXJnZVdhcm5pbmciKSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vY2hlY2sgZmlsZSBuYW1lCgoKICAgICAgaWYgKGluZm8ubmFtZS5sZW5ndGggPiAxMjcpIHsKICAgICAgICBzaG93RXJyb3JJbmZvKHRoaXMsIHRoaXMuJHQoIldhcm5pbmdGaWxlTmFtZVRvb0xvbmciKSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB2YXIgb2xkVmFsdWUgPSBkZWVwQ2xvbmUodGhpcy52YWx1ZSk7CiAgICAgIHRoaXMudmFsdWUuZmlsZURhdGEgPSBpbmZvOwogICAgICB0aGlzLnZhbHVlLmZpbGVOYW1lID0gaW5mby5uYW1lOwogICAgICB0aGlzLm9uQ2hhbmdlKG9sZFZhbHVlKTsKICAgICAgdGhpcy51cGxvYWQoaW5mbywgdGhpcy5pbmRleCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2Uob2xkVmFsKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIG5ld1ZhbDogewogICAgICAgICAgZmlsZU5hbWU6IHRoaXMudmFsdWUuZmlsZU5hbWUsCiAgICAgICAgICBmaWxlRGF0YTogdGhpcy52YWx1ZS5maWxlRGF0YQogICAgICAgIH0sCiAgICAgICAgb2xkVmFsOiBvbGRWYWwKICAgICAgfTsKICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlIiwgZGF0YSk7CiAgICB9LAogICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkgewogICAgICB2YXIgb2xkVmFsdWUgPSBkZWVwQ2xvbmUodGhpcy52YWx1ZSk7CiAgICAgIHRoaXMudmFsdWUuZmlsZU5hbWUgPSB0aGlzLiR0KCJVcGdyYWRlRmlsZVBhdGgiKSwgdGhpcy52YWx1ZS5maWxlRGF0YSA9IHt9OwogICAgICB0aGlzLm9uQ2hhbmdlKG9sZFZhbHVlKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["TableFileInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,SAAA,SAAA,EAAA,eAAA,EAAA,aAAA,QAAA,gBAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,cAAA,EAAA;AAAA,MAAA,IAAA,EAAA,MAAA;AAAA,MAAA,OAAA,EAAA;AAAA,KADA;AAEA,IAAA,OAAA,EAAA,MAFA;AAGA,IAAA,KAAA,EAAA,MAHA;AAIA,IAAA,MAAA,EAAA,QAJA;AAKA,IAAA,KAAA,EAAA,MALA;AAMA,IAAA,MAAA,EAAA;AAAA,MAAA,IAAA,EAAA,OAAA;AAAA,MAAA,OAAA,EAAA;AAAA,KANA;AAOA,IAAA,OAAA,EAAA;AAAA,MAAA,IAAA,EAAA,MAAA;AAAA,MAAA,OAAA,EAAA,CAAA;AAAA;AAPA,GADA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,YAAA,EAAA,sBAAA,IAAA,EAAA;AACA;AACA,UAAA,WAAA,GAAA,KAAA,cAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,UAAA,YAAA,GAAA,KAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,WAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,eAAA,CAAA,IAAA,CAAA,IAAA,EAAA,WAAA,CAAA,CAAA,CAAA,EAAA,WAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAA,EAAA;AACA,UAAA,YAAA,GAAA,IAAA;AACA;AACA;;AACA,UAAA,CAAA,YAAA,EAAA;AACA,QAAA,aAAA,CAAA,IAAA,EAAA,KAAA,EAAA,CAAA,mBAAA,CAAA,CAAA;AACA,eAAA,KAAA;AACA,OAZA,CAaA;;;AACA,UAAA,KAAA,OAAA,GAAA,CAAA,IAAA,IAAA,CAAA,IAAA,GAAA,KAAA,OAAA,EAAA;AACA,QAAA,aAAA,CAAA,IAAA,EAAA,KAAA,EAAA,CAAA,8BAAA,CAAA,CAAA;AACA,eAAA,KAAA;AACA,OAjBA,CAkBA;;;AACA,UAAA,IAAA,CAAA,IAAA,CAAA,MAAA,GAAA,GAAA,EAAA;AACA,QAAA,aAAA,CAAA,IAAA,EAAA,KAAA,EAAA,CAAA,wBAAA,CAAA,CAAA;AACA,eAAA,KAAA;AACA;;AAEA,UAAA,QAAA,GAAA,SAAA,CAAA,KAAA,KAAA,CAAA;AACA,WAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,QAAA,GAAA,IAAA,CAAA,IAAA;AACA,WAAA,QAAA,CAAA,QAAA;AACA,WAAA,MAAA,CAAA,IAAA,EAAA,KAAA,KAAA;AACA,aAAA,KAAA;AACA,KA/BA;AAgCA,IAAA,QAAA,EAAA,kBAAA,MAAA,EAAA;AACA,UAAA,IAAA,GAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,QAAA,EAAA,KAAA,KAAA,CAAA,QADA;AAEA,UAAA,QAAA,EAAA,KAAA,KAAA,CAAA;AAFA,SADA;AAKA,QAAA,MAAA,EAAA;AALA,OAAA;AAOA,WAAA,KAAA,CAAA,QAAA,EAAA,IAAA;AACA,KAzCA;AA0CA,IAAA,QAAA,EAAA,oBAAA;AACA,UAAA,QAAA,GAAA,SAAA,CAAA,KAAA,KAAA,CAAA;AACA,WAAA,KAAA,CAAA,QAAA,GAAA,KAAA,EAAA,CAAA,iBAAA,CAAA,EACA,KAAA,KAAA,CAAA,QAAA,GAAA,EADA;AAEA,WAAA,QAAA,CAAA,QAAA;AACA;AA/CA;AAVA,CAAA","sourcesContent":["<template>\r\n  <div class=\"ak-table-file-input-div\" v-if=\"isShow\">\r\n    <div :style=\"{display:'flex'}\">\r\n      <div class=\"ak-table-file-input-file-name\">\r\n        <label>{{value.fileName}}</label>\r\n        <a-upload\r\n          name=\"file\"\r\n          :showUploadList=\"false\"\r\n          :accept=\"acceptFileType\"\r\n          :beforeUpload=\"beforeUpload\"\r\n          :style=\"{float:'right'}\"\r\n        >\r\n          <a-button type=\"file\" class=\"ak-table-file-input-file-button\">{{$t('UpgradeFile')}}</a-button>\r\n        </a-upload>\r\n      </div>\r\n      <a-button type=\"danger\" class=\"ak-table-file-input-btn\" @click=\"onCancel\">\r\n        <MyIcon type=\"icondelete\" :style=\"{fontSize:'16px',paddingRight:'6px'}\"></MyIcon>\r\n        {{ btnName }}\r\n      </a-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { deepClone, checkFileFormat, showErrorInfo } from \"@/js/common.js\";\r\nexport default {\r\n  props: {\r\n    acceptFileType: { type: String, default: \"\" },\r\n    btnName: String,\r\n    value: Object,\r\n    upload: Function,\r\n    index: Number,\r\n    isShow: { type: Boolean, default: true },\r\n    maxSize: { type: Number, default: -1 },\r\n  },\r\n  methods: {\r\n    beforeUpload: function (info) {\r\n      //check format\r\n      let acceptTypes = this.acceptFileType.split(\",\");\r\n      let checkSuccess = false;\r\n      for (let i = 0; i < acceptTypes.length; i++) {\r\n        if (checkFileFormat(info.name, acceptTypes[i], acceptTypes[i].length)) {\r\n          checkSuccess = true;\r\n        }\r\n      }\r\n      if (!checkSuccess) {\r\n        showErrorInfo(this, this.$t(\"FileFormatWarning\"));\r\n        return false;\r\n      }\r\n      //check file size\r\n      if (this.maxSize > 0 && info.size > this.maxSize) {\r\n        showErrorInfo(this, this.$t(\"UploadingFileTooLargeWarning\"));\r\n        return false;\r\n      }\r\n      //check file name\r\n      if (info.name.length > 127) {\r\n        showErrorInfo(this, this.$t(\"WarningFileNameTooLong\"));\r\n        return false;\r\n      }\r\n\r\n      let oldValue = deepClone(this.value);\r\n      this.value.fileData = info;\r\n      this.value.fileName = info.name;\r\n      this.onChange(oldValue);\r\n      this.upload(info, this.index);\r\n      return false;\r\n    },\r\n    onChange: function (oldVal) {\r\n      let data = {\r\n        newVal: {\r\n          fileName: this.value.fileName,\r\n          fileData: this.value.fileData,\r\n        },\r\n        oldVal: oldVal,\r\n      };\r\n      this.$emit(\"change\", data);\r\n    },\r\n    onCancel: function () {\r\n      let oldValue = deepClone(this.value);\r\n      this.value.fileName = this.$t(\"UpgradeFilePath\"),\r\n      this.value.fileData = {};\r\n      this.onChange(oldValue);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n.ak-table-file-input-div {\r\n  font-size: 16px;\r\n}\r\n\r\n.ak-table-file-input-file-name {\r\n  width: 320px;\r\n  border: 1px solid rgba(201, 201, 201, 1);\r\n  border-radius: 3px;\r\n  height: 32px;\r\n  background: #ffffff;\r\n  color: #999999;\r\n  font-size: 16px;\r\n  padding-left: 16px;\r\n  font-weight: 400;\r\n  text-align: left;\r\n  line-height: 1.9;\r\n}\r\n\r\n.ak-table-file-input-file-name > label {\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  max-width: 190px;\r\n  display: inline-block;\r\n  white-space: nowrap;\r\n}\r\n\r\n.ak-table-file-input-file-button {\r\n  float: right;\r\n  width: 110px;\r\n  border-radius: 3px;\r\n  border: none;\r\n  background: #0087f7;\r\n  font-size: 16px;\r\n  color: #ffffff;\r\n  height: 30px !important;\r\n}\r\n\r\n/deep/.ant-btn:hover,\r\n.ant-btn:focus,\r\n.ant-btn:active,\r\n.ant-btn.active {\r\n  background: #0087f7;\r\n  color: #ffffff;\r\n}\r\n\r\n.ak-table-file-input-btn {\r\n  flex: 1;\r\n  margin-left: 30px;\r\n  min-width: 120px;\r\n  max-width: 120px;\r\n  background: rgba(255, 243, 243, 1);\r\n  border: 1px solid rgba(255, 99, 101, 1);\r\n  border-radius: 5px;\r\n  color: #f55b5f;\r\n  font-size: 16px;\r\n}\r\n\r\n/deep/.ant-btn-danger:hover,\r\n/deep/.ant-btn-danger:focus {\r\n  background: rgba(255, 243, 243, 1);\r\n  border: 1px solid rgba(255, 99, 101, 1);\r\n  border-radius: 5px;\r\n  color: #f55b5f;\r\n}\r\n\r\n.ant-btn-danger[disabled] > i {\r\n  color: rgba(0, 0, 0, 0.25);\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}