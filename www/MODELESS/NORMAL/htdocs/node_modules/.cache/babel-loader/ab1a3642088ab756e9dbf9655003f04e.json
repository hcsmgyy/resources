{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/thread-loader/dist/cjs.js!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/PhoneDisplaySetting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/PhoneDisplaySetting.vue","mtime":1600155105014},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/thread-loader/dist/cjs.js","mtime":1600155105122},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js","mtime":1600155105338},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KaW1wb3J0IENvbW1vblBhZ2UgZnJvbSAiQC9jb21wb25lbnRzL0NvbW1vblBhZ2UudnVlIjsKaW1wb3J0IHsgc2hvd1JlcXVlc3RTdWNjZXNzLCBkZWVwQ2xvbmUsIGNoZWNrRmlsZUZvcm1hdCwgc2hvd0Vycm9ySW5mbywgZ2V0SXRlbUJ5S2V5IH0gZnJvbSAiQC9qcy9jb21tb24uanMiOwppbXBvcnQgeyBnZXRPcHRpb25zQnlMYWJlbCB9IGZyb20gIkAvanMvY29tbW9uS2V5cy5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDb21tb25QYWdlOiBDb21tb25QYWdlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgd2FsbHBhcGVyRmlsZUl0ZW1zOiBbXSwKICAgICAgc2NyZWVuU2F2ZXJUeXBlSXRlbXM6IFtdLAogICAgICBzY3JlZW5TYXZlclBpY3R1cmVJdGVtczogW10sCiAgICAgIHNjcmVlblNhdmVyVmlkZW9JdGVtczogW10sCiAgICAgIHR5cGVJdGVtczogW10sCiAgICAgIGFwcFNlbGVjdEl0ZW1zOiBbXSwKICAgICAgY2hhbmdlZENmZ0RhdGE6IHt9LAogICAgICBzdWJtaXRDZmdEYXRhOiB7fSwKICAgICAgYXBpRGF0YToge30sCiAgICAgIGRhdGE6IHsKICAgICAgICBnZXREYXRhU3VjY2VzczogZmFsc2UKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBnZXREYXRhKHRoaXMpOwogIH0sCiAgbWV0aG9kczogewogICAgb25Db21tb25QYWdlRGF0YUNoYW5nZTogZnVuY3Rpb24gb25Db21tb25QYWdlRGF0YUNoYW5nZShldmVudCkgewogICAgICBzZXRDaGFuZ2VkRGF0YSh0aGlzLCBldmVudCk7IC8v55WM6Z2i5Y+Y5YyWCgogICAgICBoYW5kbGVyUGFnZUNoYW5nZWQodGhpcywgZXZlbnQpOwogICAgfQogIH0KfTsKCmZ1bmN0aW9uIHNldENoYW5nZWREYXRhKHZtLCBldmVudCkgewogIGlmIChldmVudC5jb250ZW50S2V5ID09ICJob21lcGFnZSIgJiYgZXZlbnQuaXRlbUtleSA9PSAiaG9tZXBhZ2UiKSB7CiAgICB2YXIgX3RhYmxlRGF0YSA9IGV2ZW50Lm5ld1ZhbDsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90YWJsZURhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLkRpc3BsYXlUeXBlIl0gPSBfdGFibGVEYXRhW2ldLnR5cGUudmFsdWU7CiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5MQUJFTCJdID0gX3RhYmxlRGF0YVtpXS5sYWJlbC52YWx1ZTsKICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLlZhbHVlIl0gPSBfdGFibGVEYXRhW2ldLnZhbHVlLnZhbHVlOwoKICAgICAgaWYgKGV2ZW50Lm5ld1ZhbFtpXS5pY29uLmZpbGVOYW1lICE9IGV2ZW50Lm9sZFZhbFtpXS5pY29uLmZpbGVOYW1lKSB7CiAgICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLklDT04iXSA9IF90YWJsZURhdGFbaV0uaWNvbi5maWxlTmFtZSA9PSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikgPyAiIiA6IF90YWJsZURhdGFbaV0uaWNvbi5maWxlTmFtZTsKICAgICAgfQogICAgfQogIH0gZWxzZSBpZiAoZXZlbnQuY29udGVudEtleSA9PSAibW9yZXBhZ2UiICYmIGV2ZW50Lml0ZW1LZXkgPT0gIm1vcmVwYWdlIikgewogICAgdmFyIF90YWJsZURhdGEyID0gZXZlbnQubmV3VmFsOwoKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBfdGFibGVEYXRhMi5sZW5ndGg7IF9pKyspIHsKICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChfaSArIDEpICsgIi5EaXNwbGF5VHlwZSJdID0gX3RhYmxlRGF0YTJbX2ldLnR5cGUudmFsdWU7CiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoX2kgKyAxKSArICIuTEFCRUwiXSA9IF90YWJsZURhdGEyW19pXS5sYWJlbC52YWx1ZTsKICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChfaSArIDEpICsgIi5WYWx1ZSJdID0gX3RhYmxlRGF0YTJbX2ldLnZhbHVlLnZhbHVlOwoKICAgICAgaWYgKGV2ZW50Lm5ld1ZhbFtfaV0uaWNvbi5maWxlTmFtZSAhPSBldmVudC5vbGRWYWxbX2ldLmljb24uZmlsZU5hbWUpIHsKICAgICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKF9pICsgMSkgKyAiLklDT04iXSA9IF90YWJsZURhdGEyW19pXS5pY29uLmZpbGVOYW1lID09IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKSA/ICIiIDogX3RhYmxlRGF0YTJbX2ldLmljb24uZmlsZU5hbWU7CiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgdm0uY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7CiAgfQp9CgpmdW5jdGlvbiBoYW5kbGVyUGFnZUNoYW5nZWQodm0sIGV2ZW50KSB7CiAgLy9ob21lcGFnZQogIHZhciBob21lcGFnZUl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImhvbWVwYWdlIiwgImhvbWVwYWdlIik7CiAgdmFyIGhvbWVwYWdlVGFibGVEYXRhID0gaG9tZXBhZ2VJdGVtLnRhYmxlRGF0YTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBob21lcGFnZVRhYmxlRGF0YS5sZW5ndGg7IGkrKykgewogICAgLy90eXBl5piv5ZCm55u45ZCMCiAgICBob21lcGFnZVRhYmxlRGF0YVtpXS50eXBlLmlzV2FybiA9IGZhbHNlOwoKICAgIGZvciAodmFyIGogPSAwOyBqIDwgaG9tZXBhZ2VUYWJsZURhdGEubGVuZ3RoOyBqKyspIHsKICAgICAgaWYgKGkgIT0gaiAmJiBob21lcGFnZVRhYmxlRGF0YVtqXS50eXBlLnZhbHVlID09IGhvbWVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUgJiYgaG9tZXBhZ2VUYWJsZURhdGFbal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkN1c3RvbSBBUEsiLCB2bSkgJiYgaG9tZXBhZ2VUYWJsZURhdGFbal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkJyb3dzZXIiLCB2bSkgJiYgaG9tZXBhZ2VUYWJsZURhdGFbal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIk4vQSIsIHZtKSkgewogICAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLnR5cGUuaXNXYXJuID0gdHJ1ZTsKICAgICAgICBob21lcGFnZVRhYmxlRGF0YVtqXS50eXBlLmlzV2FybiA9IHRydWU7CiAgICAgIH0KICAgIH0gLy9pY29u5pi+56S65LiO5ZCmCgoKICAgIGlmIChob21lcGFnZVRhYmxlRGF0YVtpXS50eXBlLnZhbHVlID09IGdldEFyZWFUeXBlQnlMYWJlbCgiRE5EIiwgdm0pKSB7CiAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLmljb24uaXNTaG93ID0gZmFsc2U7CiAgICB9IGVsc2UgewogICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS5pY29uLmlzU2hvdyA9IHRydWU7CiAgICB9IC8vbGFiZWzmmK/lkKbnpoHnlKgKCgogICAgaWYgKGhvbWVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJETkQiLCB2bSkgfHwgaG9tZXBhZ2VUYWJsZURhdGFbaV0udHlwZS52YWx1ZSA9PSBnZXRBcmVhVHlwZUJ5TGFiZWwoIlVubG9jayIsIHZtKSkgewogICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS5sYWJlbC5kaXNhYmxlZCA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS5sYWJlbC5kaXNhYmxlZCA9IGZhbHNlOwogICAgfSAvL3ZhbHVl5piv5ZCm56aB55SoCgoKICAgIGlmIChob21lcGFnZVRhYmxlRGF0YVtpXS50eXBlLnZhbHVlID09IGdldEFyZWFUeXBlQnlMYWJlbCgiQ3VzdG9tIEFQSyIsIHZtKSB8fCBob21lcGFnZVRhYmxlRGF0YVtpXS50eXBlLnZhbHVlID09IGdldEFyZWFUeXBlQnlMYWJlbCgiQnJvd3NlciIsIHZtKSkgewogICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS5kaXNhYmxlZCA9IGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0udmFsdWUuZGlzYWJsZWQgPSB0cnVlOwogICAgfSAvL3ZhbHVl5YC855qEaW5wdXTlkoxzZWxlY3TmoYblj5jmjaIKCgogICAgaWYgKGhvbWVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJDdXN0b20gQVBLIiwgdm0pKSB7CiAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLnZhbHVlLml0ZW1UeXBlID0gInNlbGVjdCI7CiAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLnZhbHVlLmRpc2FibGVkID0gZmFsc2U7CiAgICB9IGVsc2UgewogICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS5pdGVtVHlwZSA9ICJpbnB1dCI7CiAgICB9IC8vdHlwZeWPmOWMluaXtmxhYmVs5YC85pu05paw77yMdmFsdWXlgLzmm7TmlrAKCgogICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBldmVudCAmJiBldmVudC5pdGVtS2V5ID09ICJob21lcGFnZSIgJiYgZXZlbnQuY29udGVudEtleSA9PSAiaG9tZXBhZ2UiKSB7CiAgICAgIGlmIChldmVudC5uZXdWYWxbaV0udHlwZS52YWx1ZSAhPSBldmVudC5vbGRWYWxbaV0udHlwZS52YWx1ZSkgewogICAgICAgIGlmICh2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLkxBQkVMIl0gIT0gIiIgJiYgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5EaXNwbGF5VHlwZSJdID09IGV2ZW50Lm5ld1ZhbFtpXS50eXBlLnZhbHVlKSB7CiAgICAgICAgICB0YWJsZURhdGFbaV0ubGFiZWwudmFsdWUgPSB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLkxBQkVMIl07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLmxhYmVsLnZhbHVlID0gZ2V0T3B0aW9uc0J5TGFiZWwodm0sIGdldEFyZWFUeXBlQnlLZXkoaG9tZXBhZ2VUYWJsZURhdGFbaV0udHlwZS52YWx1ZSwgdm0pKTsKICAgICAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5MQUJFTCJdID0gaG9tZXBhZ2VUYWJsZURhdGFbaV0ubGFiZWwudmFsdWU7CiAgICAgICAgfQoKICAgICAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5EaXNwbGF5VHlwZSJdID09IGV2ZW50Lm5ld1ZhbFtpXS50eXBlLnZhbHVlKSB7CiAgICAgICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS52YWx1ZSA9IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMUFSRUEiICsgKGkgKyAxKSArICIuVmFsdWUiXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0udmFsdWUudmFsdWUgPSAiIjsKICAgICAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5WYWx1ZSJdID0gIiI7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSAvL21vcmVwYWdlCgoKICB2YXIgbW9yZXBhZ2VJdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJtb3JlcGFnZSIsICJtb3JlcGFnZSIpOwogIHZhciBtb3JlcGFnZVRhYmxlRGF0YSA9IG1vcmVwYWdlSXRlbS50YWJsZURhdGE7CgogIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IG1vcmVwYWdlVGFibGVEYXRhLmxlbmd0aDsgX2kyKyspIHsKICAgIC8vdHlwZeaYr+WQpuebuOWQjAogICAgbW9yZXBhZ2VUYWJsZURhdGFbX2kyXS50eXBlLmlzV2FybiA9IGZhbHNlOwoKICAgIGZvciAodmFyIF9qID0gMDsgX2ogPCBtb3JlcGFnZVRhYmxlRGF0YS5sZW5ndGg7IF9qKyspIHsKICAgICAgaWYgKF9pMiAhPSBfaiAmJiBtb3JlcGFnZVRhYmxlRGF0YVtfal0udHlwZS52YWx1ZSA9PSBtb3JlcGFnZVRhYmxlRGF0YVtfaTJdLnR5cGUudmFsdWUgJiYgbW9yZXBhZ2VUYWJsZURhdGFbX2pdLnR5cGUudmFsdWUgIT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJDdXN0b20gQVBLIiwgdm0pICYmIG1vcmVwYWdlVGFibGVEYXRhW19qXS50eXBlLnZhbHVlICE9IGdldEFyZWFUeXBlQnlMYWJlbCgiQnJvd3NlciIsIHZtKSAmJiBtb3JlcGFnZVRhYmxlRGF0YVtfal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIk4vQSIsIHZtKSkgewogICAgICAgIG1vcmVwYWdlVGFibGVEYXRhW19pMl0udHlwZS5pc1dhcm4gPSB0cnVlOwogICAgICAgIG1vcmVwYWdlVGFibGVEYXRhW19qXS50eXBlLmlzV2FybiA9IHRydWU7CiAgICAgIH0KICAgIH0gLy9pY29u5pi+56S65LiO5ZCmCgoKICAgIGlmIChtb3JlcGFnZVRhYmxlRGF0YVtfaTJdLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJETkQiLCB2bSkpIHsKICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbX2kyXS5pY29uLmlzU2hvdyA9IGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbX2kyXS5pY29uLmlzU2hvdyA9IHRydWU7CiAgICB9IC8vbGFiZWzmmK/lkKbnpoHnlKgKCgogICAgaWYgKG1vcmVwYWdlVGFibGVEYXRhW19pMl0udHlwZS52YWx1ZSA9PSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkRORCIsIHZtKSB8fCBtb3JlcGFnZVRhYmxlRGF0YVtfaTJdLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJVbmxvY2siLCB2bSkpIHsKICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbX2kyXS5sYWJlbC5kaXNhYmxlZCA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBtb3JlcGFnZVRhYmxlRGF0YVtfaTJdLmxhYmVsLmRpc2FibGVkID0gZmFsc2U7CiAgICB9IC8vdmFsdWXmmK/lkKbnpoHnlKgKCgogICAgaWYgKG1vcmVwYWdlVGFibGVEYXRhW19pMl0udHlwZS52YWx1ZSA9PSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkN1c3RvbSBBUEsiLCB2bSkgfHwgbW9yZXBhZ2VUYWJsZURhdGFbX2kyXS50eXBlLnZhbHVlID09IGdldEFyZWFUeXBlQnlMYWJlbCgiQnJvd3NlciIsIHZtKSkgewogICAgICBtb3JlcGFnZVRhYmxlRGF0YVtfaTJdLnZhbHVlLmRpc2FibGVkID0gZmFsc2U7CiAgICB9IGVsc2UgewogICAgICBtb3JlcGFnZVRhYmxlRGF0YVtfaTJdLnZhbHVlLmRpc2FibGVkID0gdHJ1ZTsKICAgIH0gLy92YWx1ZeWAvOeahGlucHV05ZKMc2VsZWN05qGG5Y+Y5o2iCgoKICAgIGlmIChtb3JlcGFnZVRhYmxlRGF0YVtfaTJdLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJDdXN0b20gQVBLIiwgdm0pKSB7CiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW19pMl0udmFsdWUuaXRlbVR5cGUgPSAic2VsZWN0IjsKICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbX2kyXS52YWx1ZS5kaXNhYmxlZCA9IGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbX2kyXS52YWx1ZS5pdGVtVHlwZSA9ICJpbnB1dCI7CiAgICB9IC8vdHlwZeWPmOWMluaXtmxhYmVs5YC85pu05paw77yMdmFsdWXlgLzmm7TmlrAKCgogICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBldmVudCAmJiBldmVudC5pdGVtS2V5ID09ICJtb3JlcGFnZSIgJiYgZXZlbnQuY29udGVudEtleSA9PSAibW9yZXBhZ2UiKSB7CiAgICAgIGlmIChldmVudC5uZXdWYWxbX2kyXS50eXBlLnZhbHVlICE9IGV2ZW50Lm9sZFZhbFtfaTJdLnR5cGUudmFsdWUpIHsKICAgICAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoX2kyICsgMSkgKyAiLkxBQkVMIl0gIT0gIiIgJiYgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoX2kyICsgMSkgKyAiLkRpc3BsYXlUeXBlIl0gPT0gZXZlbnQubmV3VmFsW19pMl0udHlwZS52YWx1ZSkgewogICAgICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbX2kyXS5sYWJlbC52YWx1ZSA9IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKF9pMiArIDEpICsgIi5MQUJFTCJdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtb3JlcGFnZVRhYmxlRGF0YVtfaTJdLmxhYmVsLnZhbHVlID0gZ2V0T3B0aW9uc0J5TGFiZWwodm0sIGdldEFyZWFUeXBlQnlLZXkobW9yZXBhZ2VUYWJsZURhdGFbX2kyXS50eXBlLnZhbHVlLCB2bSkpOwogICAgICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChfaTIgKyAxKSArICIuTEFCRUwiXSA9IG1vcmVwYWdlVGFibGVEYXRhW19pMl0ubGFiZWwudmFsdWU7CiAgICAgICAgfQoKICAgICAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoX2kyICsgMSkgKyAiLkRpc3BsYXlUeXBlIl0gPT0gZXZlbnQubmV3VmFsW19pMl0udHlwZS52YWx1ZSkgewogICAgICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbX2kyXS52YWx1ZS52YWx1ZSA9IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKF9pMiArIDEpICsgIi5WYWx1ZSJdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtb3JlcGFnZVRhYmxlRGF0YVtfaTJdLnZhbHVlLnZhbHVlID0gIiI7CiAgICAgICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKF9pMiArIDEpICsgIi5WYWx1ZSJdID0gIiI7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBnZXRBcmVhVHlwZUJ5TGFiZWwobGFiZWwsIHZtKSB7CiAgdmFyIHR5cGVzID0gdm0uYXBpRGF0YS5kYXRhLlBhZ2UxRGlzcGxheVR5cGVzOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAodHlwZXNbaV0ubGFiZWwgPT0gbGFiZWwpIHsKICAgICAgcmV0dXJuIHR5cGVzW2ldLmtleTsKICAgIH0KICB9CgogIHJldHVybiAtMTsKfQoKZnVuY3Rpb24gZ2V0QXJlYVR5cGVCeUtleShrZXksIHZtKSB7CiAgdmFyIHR5cGVzID0gdm0uYXBpRGF0YS5kYXRhLlBhZ2UxRGlzcGxheVR5cGVzOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAodHlwZXNbaV0ua2V5ID09IGtleSkgewogICAgICByZXR1cm4gdHlwZXNbaV0ubGFiZWw7CiAgICB9CiAgfQoKICByZXR1cm4gLTE7Cn0KCmZ1bmN0aW9uIHN1Ym1pdERhdGEodm0pIHsKICB2bS5kYXRhLnN1Ym1pdExvYWRpbmcgPSB0cnVlOwogIHZhciByZXF1ZXN0RGF0YSA9IHsKICAgIHRhcmdldDogInBob25lRGlzcGxheVNldHRpbmciLAogICAgYWN0aW9uOiAic2V0IiwKICAgIGNvbmZpZ0RhdGE6IHZtLnN1Ym1pdENmZ0RhdGEKICB9OwogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSk7CiAgICB2bS5kYXRhLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICB9KTsKfQoKZnVuY3Rpb24gZ2V0RGF0YSh2bSkgewogIHZtLiRheGlvcy5nZXQoImFwaS9waG9uZURpc3BsYXlTZXR0aW5nL2luZm8iKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgdm0uZ2V0RGF0YVN1Y2Nlc3MgPSB0cnVlOwogICAgdm0uYXBpRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YSA9IGRlZXBDbG9uZShyZXNwb25zZS5kYXRhLmNvbmZpZ0RhdGEpOwogICAgY3JlYXRlUGFnZURhdGEodm0pOwogICAgaGFuZGxlclBhZ2VDaGFuZ2VkKHZtKTsKICB9KTsKfQoKZnVuY3Rpb24gZ2V0Q29tbWl0RGF0YSh2bSkgewogIHZtLnN1Ym1pdENmZ0RhdGEgPSB7fTsKCiAgZm9yICh2YXIgY2hhbmdlZEtleSBpbiB2bS5jaGFuZ2VkQ2ZnRGF0YSkgewogICAgaWYgKHZtLmFwaURhdGEuY29uZmlnRGF0YVtjaGFuZ2VkS2V5XSAhPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XSkgewogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV07CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBjaGVja0NvbW1pdERhdGEodm0pIHsKICByZXR1cm4gY2hlY2tIb21lcGFnZURhdGEodm0pICYmIGNoZWNrTW9yZXBhZ2VEYXRhKHZtKTsKfQoKZnVuY3Rpb24gY2hlY2tNb3JlcGFnZURhdGEodm0pIHsKICB2YXIgc3VjY2VzcyA9IHRydWU7CiAgdmFyIGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgIm1vcmVwYWdlIiwgIm1vcmVwYWdlIik7CiAgdmFyIHRhYmxlRGF0YSA9IGl0ZW0udGFibGVEYXRhOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYmxlRGF0YS5sZW5ndGg7IGkrKykgewogICAgLy90eXBl5piv5ZCm55u45ZCMCiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRhYmxlRGF0YS5sZW5ndGg7IGorKykgewogICAgICBpZiAoaSAhPSBqICYmIHRhYmxlRGF0YVtqXS50eXBlLnZhbHVlID09IHRhYmxlRGF0YVtpXS50eXBlLnZhbHVlICYmIHRhYmxlRGF0YVtqXS50eXBlLnZhbHVlICE9IGdldEFyZWFUeXBlQnlMYWJlbCgiQ3VzdG9tIEFQSyIsIHZtKSAmJiB0YWJsZURhdGFbal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkJyb3dzZXIiLCB2bSkgJiYgdGFibGVEYXRhW2pdLnR5cGUudmFsdWUgIT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJOL0EiLCB2bSkpIHsKICAgICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiBzdWNjZXNzOwp9CgpmdW5jdGlvbiBjaGVja0hvbWVwYWdlRGF0YSh2bSkgewogIHZhciBzdWNjZXNzID0gdHJ1ZTsKICB2YXIgaXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiaG9tZXBhZ2UiLCAiaG9tZXBhZ2UiKTsKICB2YXIgdGFibGVEYXRhID0gaXRlbS50YWJsZURhdGE7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgdGFibGVEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAvL3R5cGXmmK/lkKbnm7jlkIwKICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGFibGVEYXRhLmxlbmd0aDsgaisrKSB7CiAgICAgIGlmIChpICE9IGogJiYgdGFibGVEYXRhW2pdLnR5cGUudmFsdWUgPT0gdGFibGVEYXRhW2ldLnR5cGUudmFsdWUgJiYgdGFibGVEYXRhW2pdLnR5cGUudmFsdWUgIT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJDdXN0b20gQVBLIiwgdm0pICYmIHRhYmxlRGF0YVtqXS50eXBlLnZhbHVlICE9IGdldEFyZWFUeXBlQnlMYWJlbCgiQnJvd3NlciIsIHZtKSAmJiB0YWJsZURhdGFbal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIk4vQSIsIHZtKSkgewogICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHN1Y2Nlc3M7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVNlbGVjdEl0ZW1zKHZtKSB7CiAgLy9hcGtsaXN0CiAgdm0uYXBwU2VsZWN0SXRlbXMgPSBbXTsKICB2YXIgYXBwSXRlbXMgPSB2bS5hcGlEYXRhLmRhdGEuYXBrTGlzdC5zcGxpdCgiJiIpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGFwcEl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAoYXBwSXRlbXNbaV0ubGVuZ3RoID09IDApIHsKICAgICAgY29udGludWU7CiAgICB9CgogICAgdmFyIGFyciA9IGFwcEl0ZW1zW2ldLnNwbGl0KCI9Iik7CiAgICB2YXIgc2VsZWN0SXRlbSA9IHsKICAgICAga2V5OiBhcnJbMV0sCiAgICAgIGxhYmVsOiBhcnJbMF0KICAgIH07CiAgICB2bS5hcHBTZWxlY3RJdGVtcy5wdXNoKHNlbGVjdEl0ZW0pOwogIH0gLy9wYWdlIHR5cGUgc2VsZWN0IGl0ZW1zCgoKICB2bS50eXBlSXRlbXMgPSBbXTsKICB2YXIgdHlwZXMgPSB2bS5hcGlEYXRhLmRhdGEuUGFnZTFEaXNwbGF5VHlwZXM7CgogIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IHR5cGVzLmxlbmd0aDsgX2kzKyspIHsKICAgIHZhciBpdGVtID0gewogICAgICBrZXk6IHR5cGVzW19pM10ua2V5LAogICAgICBsYWJlbDogZ2V0T3B0aW9uc0J5TGFiZWwodm0sIHR5cGVzW19pM10ubGFiZWwpCiAgICB9OwogICAgdm0udHlwZUl0ZW1zLnB1c2goaXRlbSk7CiAgfSAvL3NjcmVlbiBwaWN0dXJlCgoKICB2bS5zY3JlZW5TYXZlclZpZGVvSXRlbXMgPSBbXTsKICB2bS5zY3JlZW5TYXZlclBpY3R1cmVJdGVtcyA9IFtdOwogIHZhciBzY3JlZW5TYXZlciA9IHZtLmFwaURhdGEuZGF0YS5zY3JlZW5TYXZlckZpbGVzLnNwbGl0KCJcbiIpOwoKICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCBzY3JlZW5TYXZlci5sZW5ndGg7IF9pNCsrKSB7CiAgICBpZiAoc2NyZWVuU2F2ZXJbX2k0XSAhPSAiIikgewogICAgICB2YXIgX2l0ZW0gPSB7CiAgICAgICAga2V5OiBzY3JlZW5TYXZlcltfaTRdLAogICAgICAgIGxhYmVsOiBzY3JlZW5TYXZlcltfaTRdCiAgICAgIH07CgogICAgICBpZiAoY2hlY2tGaWxlRm9ybWF0KHNjcmVlblNhdmVyW19pNF0sICIuSlBHIiwgNCkgfHwgY2hlY2tGaWxlRm9ybWF0KHNjcmVlblNhdmVyW19pNF0sICIuSlBFRyIsIDUpIHx8IGNoZWNrRmlsZUZvcm1hdChzY3JlZW5TYXZlcltfaTRdLCAiLlBORyIsIDQpKSB7CiAgICAgICAgdm0uc2NyZWVuU2F2ZXJQaWN0dXJlSXRlbXMucHVzaChfaXRlbSk7CiAgICAgIH0gZWxzZSBpZiAoY2hlY2tGaWxlRm9ybWF0KHNjcmVlblNhdmVyW19pNF0sICIuTVA0IiwgNCkgfHwgY2hlY2tGaWxlRm9ybWF0KHNjcmVlblNhdmVyW19pNF0sICIuV01WIiwgNCkgfHwgY2hlY2tGaWxlRm9ybWF0KHNjcmVlblNhdmVyW19pNF0sICIuQVZJIiwgNCkpIHsKICAgICAgICB2bS5zY3JlZW5TYXZlclZpZGVvSXRlbXMucHVzaChfaXRlbSk7CiAgICAgIH0KICAgIH0KICB9IC8vc2NyZWVuIHNhdmVyIHR5cGVzCgoKICB2bS5zY3JlZW5TYXZlclR5cGVJdGVtcyA9IFtdOwoKICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuQ09OTkVDVC5TZXJ2ZXJNb2RlIl0gPT0gMSkgewogICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7CiAgICAgIGtleTogMCwKICAgICAgbGFiZWw6IHZtLiR0KCJTRE1DIikKICAgIH0pOwogICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7CiAgICAgIGtleTogMSwKICAgICAgbGFiZWw6IHZtLiR0KCJMb2NhbFBpY3R1cmVzIikKICAgIH0pOwogICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7CiAgICAgIGtleTogMiwKICAgICAgbGFiZWw6IHZtLiR0KCJTRE1DTG9jYWxQaWN0dXJlcyIpCiAgICB9KTsKICB9IGVsc2UgewogICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7CiAgICAgIGtleTogMSwKICAgICAgbGFiZWw6IHZtLiR0KCJMb2NhbFBpY3R1cmVzIikKICAgIH0pOwogIH0KCiAgaWYgKHZtLmFwaURhdGEuZGF0YS5oYXNBa0ZhY2UgIT0gIiIpIHsKICAgIGlmICh2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5DT05ORUNULlNlcnZlck1vZGUiXSA9PSAxKSB7CiAgICAgIHZtLnNjcmVlblNhdmVyVHlwZUl0ZW1zLnB1c2goewogICAgICAgIGtleTogMywKICAgICAgICBsYWJlbDogdm0uJHQoIlNETUNWaWRlb3MiKQogICAgICB9KTsKICAgICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7CiAgICAgICAga2V5OiA1LAogICAgICAgIGxhYmVsOiB2bS4kdCgiU0RNQ0xvY2FsVmlkZW9zIikKICAgICAgfSk7CiAgICB9CgogICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7CiAgICAgIGtleTogNCwKICAgICAgbGFiZWw6IHZtLiR0KCJMb2NhbFZpZGVvcyIpCiAgICB9KTsKICB9IC8vd2FsbHBhcGVyIGZpbGVzCgoKICB2bS53YWxscGFwZXJGaWxlSXRlbXMgPSBbXTsKICB2YXIgZGVmYXVsdFdhbGxwYXBlciA9IHsKICAgIGtleTogIiIsCiAgICBsYWJlbDogIkRlZmF1bHQiCiAgfTsKICB2bS53YWxscGFwZXJGaWxlSXRlbXMucHVzaChkZWZhdWx0V2FsbHBhcGVyKTsKICB2YXIgd2FsbHBlcGVyRmlsZXMgPSB2bS5hcGlEYXRhLmRhdGEud2FsbHBhcGVyRmlsZXMuc3BsaXQoIlxuIik7CgogIGZvciAodmFyIF9pNSA9IDA7IF9pNSA8IHdhbGxwZXBlckZpbGVzLmxlbmd0aDsgX2k1KyspIHsKICAgIGlmICh3YWxscGVwZXJGaWxlc1tfaTVdICE9ICIiKSB7CiAgICAgIHZhciBfaXRlbTIgPSB7CiAgICAgICAga2V5OiB2bS5hcGlEYXRhLmRhdGEud2FsbHBhcGVyUGF0aCArIHdhbGxwZXBlckZpbGVzW19pNV0sCiAgICAgICAgbGFiZWw6IHdhbGxwZXBlckZpbGVzW19pNV0KICAgICAgfTsKICAgICAgdm0ud2FsbHBhcGVyRmlsZUl0ZW1zLnB1c2goX2l0ZW0yKTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGNyZWF0ZVBhZ2VEYXRhKHZtKSB7CiAgdm0uZGF0YSA9IHsKICAgIGdldERhdGFTdWNjZXNzOiB0cnVlLAogICAgYnJlYWRDcnVtYjogewogICAgICBmaXJzdFRpdGxlOiB2bS4kdCgiUGhvbmUiKSwKICAgICAgc2Vjb25kVGl0bGU6IHZtLiR0KCJEaXNwbGF5U2V0dGluZyIpCiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICBpZiAoIWNoZWNrQ29tbWl0RGF0YSh2bSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGdldENvbW1pdERhdGEodm0pOwogICAgICBzdWJtaXREYXRhKHZtKTsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7CiAgICAgIGdldERhdGEodm0pOwogICAgfSwKICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgY2FuY2VsTG9hZGluZzogZmFsc2UsCiAgICBjb250ZW50czogW10KICB9OwogIGNyZWF0ZVNlbGVjdEl0ZW1zKHZtKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlSG9tZXBhZ2VDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZU1vcmVwYWdlQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVTY3JlZW5TYXZlckNvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlV2FsbHBhcGFlckNvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlQm9vdExvZ29Db250ZW50KHZtKSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUJvb3RMb2dvQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAiYm9vdExvZ28iLAogICAgdGl0bGU6IHZtLiR0KCJCb290TG9nbyIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkJvb3RMb2dvIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJCb290TG9nbyIpLAogICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsCiAgICAgIGtleTogImJvb3RMb2dvVXBsb2FkIiwKICAgICAgYWNjZXB0RmlsZVR5cGU6ICIuemlwLC5wbmciLAogICAgICBtb2RhbFRpdGxlOiB2bS4kdCgiQm9vdExvZ29Gb3JtYXQxMjgwIiksCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB2YWx1ZTogewogICAgICAgIGZpbGVEYXRhOiB7fSwKICAgICAgICBmaWxlTmFtZTogdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpCiAgICAgIH0sCiAgICAgIGltcG9ydEJ0bk5hbWU6IHZtLiR0KCJJbXBvcnQiKSwKICAgICAgbW9kYWxDb25maXJtTmFtZTogdm0uJHQoIlVwbG9hZCIpLAogICAgICBpbWdSZXNvbHV0aW9uV2lkdGg6IDEyODAsCiAgICAgIGltZ1Jlc29sdXRpb25IZWlnaHQ6IDgwMCwKICAgICAgdXBsb2FkRnVuY3Rpb246IGZ1bmN0aW9uIHVwbG9hZEZ1bmN0aW9uKCkgewogICAgICAgIHVwbG9hZEZpbGUodm0sICJib290TG9nbyIsICJib290TG9nb1VwbG9hZCIpOwogICAgICB9LAogICAgICBpc1Nob3dFeHBvcnQ6IHRydWUsCiAgICAgIGV4cG9ydEJ0bk5hbWU6IHZtLiR0KCJSZXNldCIpLAogICAgICBvbkV4cG9ydDogZnVuY3Rpb24gb25FeHBvcnQoKSB7CiAgICAgICAgb25EZWxGaWxlKHZtLCAiIiwgImJvb3RMb2dvIiwgImJvb3RMb2dvVXBsb2FkIik7CiAgICAgIH0KICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlV2FsbHBhcGFlckNvbnRlbnQodm0pIHsKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogIndhbGxwYXBlciIsCiAgICB0aXRsZTogdm0uJHQoIldhbGxwYXBlciIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIldhbGxwYXBlciIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiV2FsbHBhcGVyIiksCiAgICAgIHR5cGU6ICJmaWxlLWlucHV0IiwKICAgICAga2V5OiAid2FsbHBhcGVyVXBsb2FkIiwKICAgICAgYWNjZXB0RmlsZVR5cGU6ICIuanBnLC5qcGVnLC5wbmciLAogICAgICBtb2RhbFRpdGxlOiB2bS4kdCgiV2FsbHBhcGVyRm9ybWF0MTI4MCIpLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdmFsdWU6IHsKICAgICAgICBmaWxlRGF0YToge30sCiAgICAgICAgZmlsZU5hbWU6IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKQogICAgICB9LAogICAgICBpbXBvcnRCdG5OYW1lOiB2bS4kdCgiSW1wb3J0IiksCiAgICAgIG1vZGFsQ29uZmlybU5hbWU6IHZtLiR0KCJVcGxvYWQiKSwKICAgICAgaW1nUmVzb2x1dGlvbldpZHRoOiAxMjgwLAogICAgICBpbWdSZXNvbHV0aW9uSGVpZ2h0OiA4MDAsCiAgICAgIHVwbG9hZEZ1bmN0aW9uOiBmdW5jdGlvbiB1cGxvYWRGdW5jdGlvbigpIHsKICAgICAgICB1cGxvYWRGaWxlKHZtLCAid2FsbHBhcGVyIiwgIndhbGxwYXBlclVwbG9hZCIpOwogICAgICB9CiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiV2FsbHBhcGVyRmlsZXMiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5TZXR0aW5ncy5MT0dPLldhbGxwYXBlciIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5MT0dPLldhbGxwYXBlciJdLAogICAgICBzZWxlY3RJdGVtczogdm0ud2FsbHBhcGVyRmlsZUl0ZW1zLAogICAgICBzaG93QnRuOiB0cnVlLAogICAgICBvbkRlbDogZnVuY3Rpb24gb25EZWwodmFsdWUpIHsKICAgICAgICBvbkRlbEZpbGUodm0sIHZhbHVlLCAid2FsbHBhcGVyIiwgIndhbGxwYXBlckRlbCIpOwogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZGVsRGlzYWJsZWQ6IGZhbHNlCiAgICB9XQogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVNjcmVlblNhdmVyQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAic2NyZWVuU2F2ZXIiLAogICAgdGl0bGU6IHZtLiR0KCJTY3JlZW5TYXZlclNldHRpbmciKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJTY3JlZW5TYXZlclNldHRpbmciKSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIlNjcmVlblNhdmVyUGljdHVyZXMiKSwKICAgICAgdHlwZTogImZpbGUtaW5wdXQiLAogICAgICBrZXk6ICJzY3JlZW5TYXZlclBpY3R1cmUiLAogICAgICBhY2NlcHRGaWxlVHlwZTogIi5qcGcsLnBuZywuanBlZyIsCiAgICAgIG1vZGFsVGl0bGU6IHZtLiR0KCJTY3JlZW5TYXZlckZvcm1hdCIpLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdmFsdWU6IHsKICAgICAgICBmaWxlRGF0YToge30sCiAgICAgICAgZmlsZU5hbWU6IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKQogICAgICB9LAogICAgICBpbXBvcnRCdG5OYW1lOiB2bS4kdCgiSW1wb3J0IiksCiAgICAgIG1vZGFsQ29uZmlybU5hbWU6IHZtLiR0KCJVcGxvYWQiKSwKICAgICAgdXBsb2FkRnVuY3Rpb246IGZ1bmN0aW9uIHVwbG9hZEZ1bmN0aW9uKCkgewogICAgICAgIHVwbG9hZEZpbGUodm0sICJzY3JlZW5TYXZlciIsICJzY3JlZW5TYXZlclBpY3R1cmUiKTsKICAgICAgfSwKICAgICAgbWF4U2l6ZTogMiAqIDEwMjQgKiAxMDI0CiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiU2NyZWVuU2F2ZXJWaWRlb3MiKSwKICAgICAgaXNIaWRlOiB2bS5hcGlEYXRhLmRhdGEuaGFzQWtGYWNlID09ICIiLAogICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsCiAgICAgIGtleTogInNjcmVlblNhdmVyVmlkZW8iLAogICAgICBhY2NlcHRGaWxlVHlwZTogIi5tcDQsLndtdiwuYXZpIiwKICAgICAgbW9kYWxUaXRsZTogdm0uJHQoIlNjcmVlblNhdmVyVmlkZW9Gb3JtYXQiKSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHZhbHVlOiB7CiAgICAgICAgZmlsZURhdGE6IHt9LAogICAgICAgIGZpbGVOYW1lOiB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikKICAgICAgfSwKICAgICAgaW1wb3J0QnRuTmFtZTogdm0uJHQoIkltcG9ydCIpLAogICAgICBtb2RhbENvbmZpcm1OYW1lOiB2bS4kdCgiVXBsb2FkIiksCiAgICAgIHVwbG9hZEZ1bmN0aW9uOiBmdW5jdGlvbiB1cGxvYWRGdW5jdGlvbigpIHsKICAgICAgICB1cGxvYWRGaWxlKHZtLCAic2NyZWVuU2F2ZXIiLCAic2NyZWVuU2F2ZXJWaWRlbyIpOwogICAgICB9LAogICAgICBtYXhTaXplOiA1MDAgKiAxMDI0ICogMTAyNAogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIlBpY3R1cmVGaWxlcyIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAga2V5OiAicGljdHVyZUZpbGUiLAogICAgICB2YWx1ZTogdm0uc2NyZWVuU2F2ZXJQaWN0dXJlSXRlbXMubGVuZ3RoID09IDAgPyAiIiA6IHZtLnNjcmVlblNhdmVyUGljdHVyZUl0ZW1zWzBdLmtleSwKICAgICAgc2VsZWN0SXRlbXM6IHZtLnNjcmVlblNhdmVyUGljdHVyZUl0ZW1zLAogICAgICBzaG93QnRuOiB0cnVlLAogICAgICBvbkRlbDogZnVuY3Rpb24gb25EZWwodmFsdWUpIHsKICAgICAgICBvbkRlbEZpbGUodm0sIHZhbHVlLCAic2NyZWVuU2F2ZXIiLCAicGljdHVyZUZpbGUiKTsKICAgICAgfSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJWaWRlb0ZpbGVzIiksCiAgICAgIGlzSGlkZTogdm0uYXBpRGF0YS5kYXRhLmhhc0FrRmFjZSA9PSAiIiwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogInZpZGVvRmlsZSIsCiAgICAgIHZhbHVlOiB2bS5zY3JlZW5TYXZlclZpZGVvSXRlbXMubGVuZ3RoID09IDAgPyAiIiA6IHZtLnNjcmVlblNhdmVyVmlkZW9JdGVtc1swXS5rZXksCiAgICAgIHNlbGVjdEl0ZW1zOiB2bS5zY3JlZW5TYXZlclZpZGVvSXRlbXMsCiAgICAgIHNob3dCdG46IHRydWUsCiAgICAgIG9uRGVsOiBmdW5jdGlvbiBvbkRlbCh2YWx1ZSkgewogICAgICAgIG9uRGVsRmlsZSh2bSwgdmFsdWUsICJzY3JlZW5TYXZlciIsICJ2aWRlb0ZpbGUiKTsKICAgICAgfSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJTY3JlZW5TYXZlclR5cGUiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5TZXR0aW5ncy5TQ1JFRU5TQVZFUi5TY3JlZXNhdmVyVHlwZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5TQ1JFRU5TQVZFUi5TY3JlZXNhdmVyVHlwZSJdLAogICAgICBzZWxlY3RJdGVtczogdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMKICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlTW9yZXBhZ2VDb250ZW50KHZtKSB7CiAgLy90YWJsZSBkYXRhCiAgdmFyIHRhYmxlRGF0YSA9IFtdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmFwaURhdGEuZGF0YS5wYWdlMk51bTsgaSsrKSB7CiAgICB2YXIgaXRlbSA9IHsKICAgICAga2V5OiBpLAogICAgICBhcmVhOiB2bS4kdCgiQXJlYSIpICsgKGkgKyAxKSwKICAgICAgdHlwZTogewogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChpICsgMSkgKyAiLkRpc3BsYXlUeXBlIl0sCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja011bHRpcGxpY2l0eSIpCiAgICAgIH0sCiAgICAgIHZhbHVlOiB7CiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKGkgKyAxKSArICIuVmFsdWUiXSwKICAgICAgICBpc1dhcm46IGZhbHNlLAogICAgICAgIHdhcm5MYWJlbDogIiIsCiAgICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgICAgaXRlbVR5cGU6ICJpbnB1dCIKICAgICAgfSwKICAgICAgbGFiZWw6IHsKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoaSArIDEpICsgIi5MQUJFTCJdLAogICAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgICAgd2FybkxhYmVsOiAiIiwKICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgfSwKICAgICAgaWNvbjogewogICAgICAgIGZpbGVEYXRhOiB7fSwKICAgICAgICBmaWxlTmFtZTogdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpLAogICAgICAgIGlzU2hvdzogdHJ1ZQogICAgICB9CiAgICB9OwogICAgdGFibGVEYXRhLnB1c2goaXRlbSk7CiAgfSAvL2NvbnRlbnQKCgogIHZhciBjb250ZW50ID0gewogICAga2V5OiAibW9yZXBhZ2UiLAogICAgdGl0bGU6IHZtLiR0KCJQYWdlMkRpc3BsYXkiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJQYWdlMkRpc3BsYXkiKSwKICAgIHNob3dFeGFtcGxlOiB0cnVlLAogICAgaW1nTmFtZTogImhvbWVfcGFnZS5qcGciLAogICAgaXRlbXM6IFt7CiAgICAgIHR5cGU6ICJ0YWJsZSIsCiAgICAgIGtleTogIm1vcmVwYWdlIiwKICAgICAgdGFibGVEYXRhOiB0YWJsZURhdGEsCiAgICAgIHRhYmxlQ29sdW1uczogW3sKICAgICAgICB0eXBlOiAibGFiZWwiLAogICAgICAgIHRpdGxlOiB2bS4kdCgiQXJlYSIpLAogICAgICAgIGRhdGFJbmRleDogImFyZWEiLAogICAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgICBjdXN0b21SZW5kZXI6ICJhcmVhIgogICAgICAgIH0sCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHdpZHRoOiAiMTElIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAgdGl0bGU6IHZtLiR0KCJUeXBlIiksCiAgICAgICAgZGF0YUluZGV4OiAidHlwZSIsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogInR5cGUiCiAgICAgICAgfSwKICAgICAgICBzZWxlY3RJdGVtczogdm0udHlwZUl0ZW1zLAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogIjE4JSIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgdGl0bGU6IHZtLiR0KCJWYWx1ZSIpLAogICAgICAgIGRhdGFJbmRleDogInZhbHVlIiwKICAgICAgICBzY29wZWRTbG90czogewogICAgICAgICAgY3VzdG9tUmVuZGVyOiAidmFsdWUiCiAgICAgICAgfSwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgd2lkdGg6ICIxOCUiLAogICAgICAgIG1heExlbmd0aDogMTI3LAogICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5hcHBTZWxlY3RJdGVtcwogICAgICB9LCB7CiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICB0aXRsZTogdm0uJHQoIkxhYmVsIiksCiAgICAgICAgZGF0YUluZGV4OiAibGFiZWwiLAogICAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgICBjdXN0b21SZW5kZXI6ICJsYWJlbCIKICAgICAgICB9LAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogIjE4JSIsCiAgICAgICAgbWF4TGVuZ3RoOiAxMjcKICAgICAgfSwgewogICAgICAgIHR5cGU6ICJmaWxlLWlucHV0IiwKICAgICAgICB0aXRsZTogdm0uJHQoIkljb25MYWJlbCIpICsgIigiICsgdm0uJHQoIk1heEljb25TaXplIikgKyAiOjUwKjUwKSIsCiAgICAgICAgZGF0YUluZGV4OiAiaWNvbiIsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogImljb24iCiAgICAgICAgfSwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgd2lkdGg6ICIzNSUiLAogICAgICAgIGJ0bk5hbWU6IHZtLiR0KCJEZWxldGVMYWJlbCIpLAogICAgICAgIGFjY2VwdEZpbGVUeXBlOiAiLmpwZywucG5nLC5qcGVnIiwKICAgICAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZChmaWxlRGF0YSwgaW5kZXgpIHsKICAgICAgICAgIHJldHVybiB1cGxvYWRJY29uKGZpbGVEYXRhLCBpbmRleCwgdm0pOwogICAgICAgIH0KICAgICAgfV0KICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlSG9tZXBhZ2VDb250ZW50KHZtKSB7CiAgLy9kYXRhCiAgdmFyIHRhYmxlRGF0YSA9IFtdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmFwaURhdGEuZGF0YS5wYWdlMU51bTsgaSsrKSB7CiAgICB2YXIgaXRlbSA9IHsKICAgICAga2V5OiBpLAogICAgICBhcmVhOiB2bS4kdCgiQXJlYSIpICsgKGkgKyAxKSwKICAgICAgdHlwZTogewogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLkRpc3BsYXlUeXBlIl0sCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja011bHRpcGxpY2l0eSIpCiAgICAgIH0sCiAgICAgIHZhbHVlOiB7CiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMUFSRUEiICsgKGkgKyAxKSArICIuVmFsdWUiXSwKICAgICAgICBpc1dhcm46IGZhbHNlLAogICAgICAgIHdhcm5MYWJlbDogIiIsCiAgICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgICAgaXRlbVR5cGU6ICJpbnB1dCIKICAgICAgfSwKICAgICAgbGFiZWw6IHsKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5MQUJFTCJdLAogICAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgICAgd2FybkxhYmVsOiAiIiwKICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgfSwKICAgICAgaWNvbjogewogICAgICAgIGZpbGVEYXRhOiB7fSwKICAgICAgICBmaWxlTmFtZTogdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpLAogICAgICAgIGlzU2hvdzogdHJ1ZQogICAgICB9CiAgICB9OwogICAgdGFibGVEYXRhLnB1c2goaXRlbSk7CiAgfSAvL2NvbnRlbnQKCgogIHZhciBjb250ZW50ID0gewogICAga2V5OiAiaG9tZXBhZ2UiLAogICAgdGl0bGU6IHZtLiR0KCJQYWdlMURpc3BsYXkiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJQYWdlMURpc3BsYXkiKSwKICAgIHNob3dFeGFtcGxlOiB0cnVlLAogICAgaW1nTmFtZTogImhvbWVfcGFnZS5qcGciLAogICAgaXRlbXM6IFt7CiAgICAgIHR5cGU6ICJ0YWJsZSIsCiAgICAgIGtleTogImhvbWVwYWdlIiwKICAgICAgdGFibGVEYXRhOiB0YWJsZURhdGEsCiAgICAgIHRhYmxlQ29sdW1uczogW3sKICAgICAgICB0eXBlOiAibGFiZWwiLAogICAgICAgIHRpdGxlOiB2bS4kdCgiQXJlYSIpLAogICAgICAgIGRhdGFJbmRleDogImFyZWEiLAogICAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgICBjdXN0b21SZW5kZXI6ICJhcmVhIgogICAgICAgIH0sCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHdpZHRoOiAiMTElIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAgdGl0bGU6IHZtLiR0KCJUeXBlIiksCiAgICAgICAgZGF0YUluZGV4OiAidHlwZSIsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogInR5cGUiCiAgICAgICAgfSwKICAgICAgICBzZWxlY3RJdGVtczogdm0udHlwZUl0ZW1zLAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogIjE4JSIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgdGl0bGU6IHZtLiR0KCJWYWx1ZSIpLAogICAgICAgIGRhdGFJbmRleDogInZhbHVlIiwKICAgICAgICBzY29wZWRTbG90czogewogICAgICAgICAgY3VzdG9tUmVuZGVyOiAidmFsdWUiCiAgICAgICAgfSwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgd2lkdGg6ICIxOCUiLAogICAgICAgIG1heExlbmd0aDogMTI3LAogICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5hcHBTZWxlY3RJdGVtcwogICAgICB9LCB7CiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICB0aXRsZTogdm0uJHQoIkxhYmVsIiksCiAgICAgICAgZGF0YUluZGV4OiAibGFiZWwiLAogICAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgICBjdXN0b21SZW5kZXI6ICJsYWJlbCIKICAgICAgICB9LAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogIjE4JSIsCiAgICAgICAgbWF4TGVuZ3RoOiAxMjcKICAgICAgfSwgewogICAgICAgIHR5cGU6ICJmaWxlLWlucHV0IiwKICAgICAgICB0aXRsZTogdm0uJHQoIkljb25MYWJlbCIpICsgIigiICsgdm0uJHQoIk1heEljb25TaXplIikgKyAiOjUwKjUwKSIsCiAgICAgICAgZGF0YUluZGV4OiAiaWNvbiIsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogImljb24iCiAgICAgICAgfSwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgd2lkdGg6ICIzNSUiLAogICAgICAgIGJ0bk5hbWU6IHZtLiR0KCJEZWxldGVMYWJlbCIpLAogICAgICAgIGFjY2VwdEZpbGVUeXBlOiAiLmpwZywucG5nLC5qcGVnIiwKICAgICAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZChmaWxlRGF0YSwgaW5kZXgpIHsKICAgICAgICAgIHJldHVybiB1cGxvYWRJY29uKGZpbGVEYXRhLCBpbmRleCwgdm0pOwogICAgICAgIH0KICAgICAgfV0KICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gdXBsb2FkSWNvbihmaWxlRGF0YSwgaW5kZXgsIHZtKSB7CiAgdmFyIGZpbGVOYW1lID0gZmlsZURhdGEubmFtZTsKCiAgaWYgKGZpbGVOYW1lID09ICIiIHx8IGZpbGVOYW1lID09IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKSkgewogICAgcmV0dXJuOwogIH0gLy/noa7orqTlm77niYfliIbovqjnjocKCgogIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGVEYXRhKTsKCiAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgIGltZy5zcmMgPSByZWFkZXIucmVzdWx0OwoKICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIC8v5YiG6L6o546H6LaF5Ye6CiAgICAgIGlmIChpbWcud2lkdGggPiA1MCB8fCBpbWcuaGVpZ2h0ID4gNTApIHsKICAgICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiSW1hZ2VSZXNvbHV0aW9uRXJyIikpOwogICAgICAgIHZhciBpdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJob21lcGFnZSIsICJob21lcGFnZSIpOwogICAgICAgIGl0ZW0udGFibGVEYXRhW2luZGV4XS5pY29uID0gewogICAgICAgICAgZmlsZURhdGE6IHt9LAogICAgICAgICAgZmlsZU5hbWU6IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKQogICAgICAgIH07CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8v5q2j5bi45LiK5LygCgoKICAgICAgdmFyIHVwRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICB1cERhdGEuYXBwZW5kKCJmaWxlIiwgZmlsZURhdGEpOwogICAgICBheGlvcy5wb3N0KCJhcGkvcGhvbmVEaXNwbGF5U2V0dGluZy91cGxvYWQ/dHlwZT1hcmVhSWNvbiIsIHVwRGF0YSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge30pOwogICAgfTsKCiAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgLy/lm77niYfliqDovb3plJnor68KICAgICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkZpbGVGb3JtYXRXYXJuaW5nIikpOwogICAgICB2YXIgaXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiaG9tZXBhZ2UiLCAiaG9tZXBhZ2UiKTsKICAgICAgaXRlbS50YWJsZURhdGFbaW5kZXhdLmljb24gPSB7CiAgICAgICAgZmlsZURhdGE6IHt9LAogICAgICAgIGZpbGVOYW1lOiB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikKICAgICAgfTsKICAgIH07CiAgfTsKfQoKZnVuY3Rpb24gdXBsb2FkRmlsZSh2bSwgY29udGVudEtleSwgaXRlbUtleSkgewogIHZhciBpdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsIGNvbnRlbnRLZXksIGl0ZW1LZXkpOwogIHZhciBmaWxlTmFtZSA9IGl0ZW0udmFsdWUuZmlsZU5hbWU7CgogIGlmIChmaWxlTmFtZSA9PSAiIiB8fCBmaWxlTmFtZSA9PSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBjb25maXJtVGV4dCA9IHZtLiR0KCJJbXBvcnRXYWxscGFwZXJXYXJuaW5nIik7CgogIGlmIChjb250ZW50S2V5ID09ICJzY3JlZW5TYXZlciIpIHsKICAgIGNvbmZpcm1UZXh0ID0gdm0uJHQoIkltcG9ydFNjcmVlblNhdmVyV2FybmluZyIpOwogIH0gZWxzZSBpZiAoY29udGVudEtleSA9PSAiYm9vdExvZ28iKSB7CiAgICBjb25maXJtVGV4dCA9IHZtLiR0KCJVcGxvYWRMb2dvV2FybmluZyIpOwogIH0KCiAgaWYgKGNvbmZpcm0oY29uZmlybVRleHQpKSB7CiAgICAvL+S4iuS8oAogICAgaXRlbS5sb2FkaW5nID0gdHJ1ZTsKICAgIHZhciB1cERhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgIHVwRGF0YS5hcHBlbmQoImZpbGUiLCBpdGVtLnZhbHVlLmZpbGVEYXRhKTsKICAgIHZhciBhcGlVcmwgPSAiYXBpL3Bob25lRGlzcGxheVNldHRpbmcvdXBsb2FkP3R5cGU9IiArIGl0ZW1LZXk7CgogICAgaWYgKGl0ZW1LZXkgPT0gImJvb3RMb2dvVXBsb2FkIikgewogICAgICBhcGlVcmwgKz0gIiZ3aWR0aD0iICsgaXRlbS52YWx1ZS5maWxlRGF0YS53aWR0aCArICImaGVpZ2h0PSIgKyBpdGVtLnZhbHVlLmZpbGVEYXRhLmhlaWdodDsKICAgIH0KCiAgICBheGlvcy5wb3N0KGFwaVVybCwgdXBEYXRhLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLmRhdGEucmV0Y29kZSA9PSAtMSkgewogICAgICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJGaWxlVXBsb2FkRmFpbGVkV2FybmluZyIpKTsKICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IDApIHsKICAgICAgICBnZXREYXRhKHZtKTsKICAgICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJVcGxvYWRGaWxlRmluaXNoZWQiKSk7CiAgICAgICAgaXRlbS52YWx1ZS5maWxlTmFtZSA9IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKTsKICAgICAgICBpdGVtLnZhbHVlLmZpbGVEYXRhID0ge307CiAgICAgIH0KCiAgICAgIGl0ZW0ubG9hZGluZyA9IGZhbHNlOwogICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBvbkRlbEZpbGUodm0sIHZhbHVlLCBjb250ZW50S2V5LCBpdGVtS2V5KSB7CiAgdmFyIHJlYWxJdGVtS2V5ID0gaXRlbUtleSA9PSAid2FsbHBhcGVyRGVsIiA/ICJDb25maWcuU2V0dGluZ3MuTE9HTy5XYWxscGFwZXIiIDogaXRlbUtleTsKICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICB0YXJnZXQ6ICJwaG9uZURpc3BsYXlTZXR0aW5nIiwKICAgIGFjdGlvbjogImRlbCIsCiAgICBkYXRhOiB7CiAgICAgIGZpbGVOYW1lOiB2YWx1ZSwKICAgICAgdHlwZTogaXRlbUtleQogICAgfQogIH07CgogIGlmIChpdGVtS2V5ID09ICJib290TG9nb1VwbG9hZCIpIHsKICAgIGlmICghY29uZmlybSh2bS4kdCgiRGVsZXRlTG9nb0NvbmZpcm0iKSkpIHsKICAgICAgcmV0dXJuOwogICAgfQogIH0KCiAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsIGNvbnRlbnRLZXksIHJlYWxJdGVtS2V5KS5sb2FkaW5nID0gdHJ1ZTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgY29udGVudEtleSwgcmVhbEl0ZW1LZXkpLmxvYWRpbmcgPSBmYWxzZTsKICAgIGdldERhdGEodm0pOwogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtKTsKICB9KTsKfQ=="},null]}