{"remainingRequest":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\thread-loader\\dist\\cjs.js!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\PhoneCallFeature.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\PhoneCallFeature.vue","mtime":1625715850265},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1624613273395},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1624613260275},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwovLwovLwovLwovLwppbXBvcnQgQ29tbW9uUGFnZSBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uUGFnZS52dWUiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IHNob3dSZXF1ZXN0U3VjY2VzcywgZGVlcENsb25lLCBnZXRFbmFibGVTZWxlY3RJdGVtcywgZ2V0SXRlbUJ5S2V5LCBjaGVja1JhbmdlT2ZOdW1iZXIsIGdldEluZGV4QnlLZXksIHNob3dFcnJvckluZm8sIGNoZWNrRmlsZUZvcm1hdCwgc2hvd1dhcm5pbmdJbmZvIH0gZnJvbSAiQC9qcy9jb21tb24uanMiOwp2YXIgcmV0dXJuQ29kZUl0ZW1zID0gW3sKICBrZXk6IDQwNCwKICBsYWJlbDogIjQwNChOb3QgRm91bmQpIgp9LCB7CiAga2V5OiA0ODAsCiAgbGFiZWw6ICI0ODAoVGVtcG9yYXJpbHkgVW5hdmFpbGFibGUpIgp9LCB7CiAga2V5OiA0ODYsCiAgbGFiZWw6ICI0ODYoQnVzeSBIZXJlKSIKfSwgewogIGtleTogNjAzLAogIGxhYmVsOiAiNjAzKERlY2xpbmUpIgp9XTsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvbW1vblBhZ2U6IENvbW1vblBhZ2UKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VkQ2ZnRGF0YToge30sCiAgICAgIHN1Ym1pdENmZ0RhdGE6IHt9LAogICAgICBhcGlEYXRhOiB7fSwKICAgICAgZGF0YTogewogICAgICAgIGdldERhdGFTdWNjZXNzOiBmYWxzZQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGdldERhdGEodGhpcyk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkNvbW1vblBhZ2VEYXRhQ2hhbmdlOiBmdW5jdGlvbiBvbkNvbW1vblBhZ2VEYXRhQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHNldENoYW5nZWREYXRhKHRoaXMsIGV2ZW50KTsgLy/nlYzpnaLlj5jljJYKCiAgICAgIGhhbmRsZXJQYWdlQ2hhbmdlZCh0aGlzKTsKICAgIH0KICB9Cn07CgpmdW5jdGlvbiBzZXRDaGFuZ2VkRGF0YSh2bSwgZXZlbnQpIHsKICBpZiAoZXZlbnQuaXRlbUtleSA9PSAiQ29uZmlnLkZlYXR1cmVzLkRORC5TdGFydFRpbWUiIHx8IGV2ZW50Lml0ZW1LZXkgPT0gIkNvbmZpZy5GZWF0dXJlcy5ETkQuRW5kVGltZSIpIHsKICAgIHZtLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsLnRvRGF0ZSgpLmdldEhvdXJzKCkgKyAiOiIgKyBldmVudC5uZXdWYWwudG9EYXRlKCkuZ2V0TWludXRlcygpOwogIH0gZWxzZSB7CiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGV2ZW50Lm5ld1ZhbDsKICB9Cn0KCmZ1bmN0aW9uIGhhbmRsZXJQYWdlQ2hhbmdlZCh2bSkgewogIHZhciBzY2hlZHVsZU1vZGVJdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJETkQiLCAiQ29uZmlnLkZlYXR1cmVzLkRORC5TY2hlZHVsZU1vZGUiKTsKICB2YXIgZG5kU3RhcnRUaW1lSXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiRE5EIiwgIkNvbmZpZy5GZWF0dXJlcy5ETkQuU3RhcnRUaW1lIik7CiAgdmFyIGRuZEVuZFRpbWVJdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJETkQiLCAiQ29uZmlnLkZlYXR1cmVzLkRORC5FbmRUaW1lIik7CgogIGlmICh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5XaG9sZURheSJdID09ICIxIikgewogICAgc2NoZWR1bGVNb2RlSXRlbS5kaXNhYmxlZCA9IHRydWU7CiAgICBkbmRTdGFydFRpbWVJdGVtLmRpc2FibGVkID0gdHJ1ZTsKICAgIGRuZEVuZFRpbWVJdGVtLmRpc2FibGVkID0gdHJ1ZTsKICB9IGVsc2UgewogICAgc2NoZWR1bGVNb2RlSXRlbS5kaXNhYmxlZCA9IGZhbHNlOwoKICAgIGlmICh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5TY2hlZHVsZU1vZGUiXSA9PSAiMSIpIHsKICAgICAgZG5kU3RhcnRUaW1lSXRlbS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICBkbmRFbmRUaW1lSXRlbS5kaXNhYmxlZCA9IGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgZG5kU3RhcnRUaW1lSXRlbS5kaXNhYmxlZCA9IHRydWU7CiAgICAgIGRuZEVuZFRpbWVJdGVtLmRpc2FibGVkID0gdHJ1ZTsKICAgIH0KICB9CgogIHZhciBzdGFydFRpbWVNaW4gPSB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5TdGFydFRpbWUiXS5zcGxpdCgiOiIpWzBdICogNjAgKyB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5TdGFydFRpbWUiXS5zcGxpdCgiOiIpWzFdOwogIHZhciBlbmRUaW1lTWluID0gdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5GZWF0dXJlcy5ETkQuRW5kVGltZSJdLnNwbGl0KCI6IilbMF0gKiA2MCArIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRmVhdHVyZXMuRE5ELkVuZFRpbWUiXS5zcGxpdCgiOiIpWzFdOwoKICBpZiAocGFyc2VJbnQoc3RhcnRUaW1lTWluKSA+PSBwYXJzZUludChlbmRUaW1lTWluKSkgewogICAgZG5kRW5kVGltZUl0ZW0uc2hvd0hpbnQgPSB0cnVlOwogIH0gZWxzZSB7CiAgICBkbmRFbmRUaW1lSXRlbS5zaG93SGludCA9IGZhbHNlOwogIH0KfQoKZnVuY3Rpb24gc3VibWl0RGF0YSh2bSkgewogIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IHRydWU7CiAgdmFyIHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVDYWxsRmVhdHVyZSIsCiAgICBhY3Rpb246ICJzZXQiLAogICAgY29uZmlnRGF0YTogdm0uc3VibWl0Q2ZnRGF0YQogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiByZXNwb25zZSkgewogICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOwogICAgfQoKICAgIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogIH0pOwp9CgpmdW5jdGlvbiBnZXREYXRhKHZtKSB7CiAgdm0uJGF4aW9zLmdldCgiYXBpL3Bob25lQ2FsbEZlYXR1cmUvaW5mbyIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICB2bS5nZXREYXRhU3VjY2VzcyA9IHRydWU7CiAgICB2bS5hcGlEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgIHZtLmNoYW5nZWRDZmdEYXRhID0gZGVlcENsb25lKHJlc3BvbnNlLmRhdGEuY29uZmlnRGF0YSk7CiAgICBjcmVhdGVQYWdlRGF0YSh2bSk7CiAgICBoYW5kbGVyUGFnZUNoYW5nZWQodm0pOwogIH0pOwp9CgpmdW5jdGlvbiBnZXRDb21taXREYXRhKHZtKSB7CiAgdm0uc3VibWl0Q2ZnRGF0YSA9IHt9OwoKICBmb3IgKHZhciBjaGFuZ2VkS2V5IGluIHZtLmNoYW5nZWRDZmdEYXRhKSB7CiAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhW2NoYW5nZWRLZXldICE9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldKSB7CiAgICAgIHZtLnN1Ym1pdENmZ0RhdGFbY2hhbmdlZEtleV0gPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGNyZWF0ZVBhZ2VEYXRhKHZtKSB7CiAgdm0uZGF0YSA9IHsKICAgIGdldERhdGFTdWNjZXNzOiB0cnVlLAogICAgYnJlYWRDcnVtYjogewogICAgICBmaXJzdFRpdGxlOiB2bS4kdCgiUGhvbmUiKSwKICAgICAgc2Vjb25kVGl0bGU6IHZtLiR0KCJDYWxsRmVhdHVyZSIpCiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICBpZiAoIWNoZWNrQ29tbWl0RGF0YSh2bSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGdldENvbW1pdERhdGEodm0pOwogICAgICBzdWJtaXREYXRhKHZtKTsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7CiAgICAgIGdldERhdGEodm0pOwogICAgfSwKICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgY2FuY2VsTG9hZGluZzogZmFsc2UsCiAgICBjb250ZW50czogW10KICB9OwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVGb3J3YXJkQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVETkRDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZUF1ZGlvQ2FsbFNldHRpbmdDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZU90aGVyc0NvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlQWxsb3dsaXN0c0NvbnRlbnQodm0pKTsKICBnZXRBbGxvd1RhYmxlRGF0YSh2bSwgMSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUFsbG93bGlzdHNDb250ZW50KHZtKSB7CiAgLy/mt7vliqDmoYYKICB2YXIgYWRkTW9kYWxEYXRhID0gewogICAgdGl0bGU6IHZtLiR0KCJBZGRMYWJlbCIpICsgIiAiICsgdm0uJHQoIkF1dG9BbnN3ZXJXaGl0ZWxpc3QiKSwKICAgIGtleTogLTEsCiAgICBjYW5jZWxCdG5MYWJlbDogdm0uJHQoIkNhbmNlbCIpLAogICAgc3VibWl0QnRuTGFiZWw6IHZtLiR0KCJTdWJtaXQiKSwKICAgIHZpc2libGU6IGZhbHNlLAogICAgc2hvd0Zvb3RlcjogdHJ1ZSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIkRldmljZUxvY2F0aW9uIiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGtleTogImRldmljZUxvY2F0aW9uIiwKICAgICAgdmFsdWU6ICIiLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICB3YXJuTGFiZWw6IHZtLiR0KCJBbGxvd0RldmljZU5vRW1wdHkiKSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBbGxvd0RldmljZUxvY2F0aW9uRGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiRGV2aWNlTnVtYmVyIiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGtleTogImRldmljZU51bWJlciIsCiAgICAgIHZhbHVlOiAiIiwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgd2FybkxhYmVsOiB2bS4kdCgiQWxsb3dJUFNJUE5vRW1wdHkiKSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBbGxvd1NJUERlc2MiKQogICAgfV0sCiAgICBvbkNvbmZpcm06IGZ1bmN0aW9uIG9uQ29uZmlybSgpIHsKICAgICAgb25DaGFuZ2VBbGxvd0xpc3Qodm0pOwogICAgfQogIH07IC8v5a+85YWl5qGGCgogIHZhciBpbXBvcnRNb2RhbERhdGEgPSB7CiAgICB0aXRsZTogIiAiLAogICAgY2FuY2VsQnRuTGFiZWw6IHZtLiR0KCJDYW5jZWwiKSwKICAgIHN1Ym1pdEJ0bkxhYmVsOiB2bS4kdCgiSW1wb3J0IiksCiAgICBzaG93Rm9vdGVyOiB0cnVlLAogICAgdmlzaWJsZTogZmFsc2UsCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJBbGxvd0xpc3RJbXBvcnRIaW50IiksCiAgICAgIHR5cGU6ICJmaWxlLWlucHV0IiwKICAgICAga2V5OiAiaW1wb3J0IiwKICAgICAgYWNjZXB0RmlsZVR5cGU6ICIueG1sLC5jc3YiLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdmFsdWU6IHsKICAgICAgICBmaWxlRGF0YToge30sCiAgICAgICAgZmlsZU5hbWU6IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKQogICAgICB9LAogICAgICBpbXBvcnRCdG5OYW1lOiB2bS4kdCgiUmVzZXQiKQogICAgfV0sCiAgICBvbkNvbmZpcm06IGZ1bmN0aW9uIG9uQ29uZmlybSgpIHsKICAgICAgb25JbXBvcnQodm0pOwogICAgfSwKICAgIGNvbmZpcm1Mb2FkaW5nOiBmYWxzZQogIH07IC8v6KGo5aS05pWw5o2uCgogIHZhciB0YWJsZUhlYWREYXRhID0gewogICAgYWRkTW9kYWxEYXRhOiBhZGRNb2RhbERhdGEsCiAgICBpbXBvcnRNb2RhbERhdGE6IGltcG9ydE1vZGFsRGF0YSwKICAgIGV4cG9ydEl0ZW1zOiBbewogICAgICBrZXk6ICJ4bWwiLAogICAgICBsYWJlbDogInhtbCIKICAgIH0sIHsKICAgICAga2V5OiAiY3N2IiwKICAgICAgbGFiZWw6ICJjc3YiCiAgICB9XSwKICAgIG9uRXhwb3J0OiBmdW5jdGlvbiBvbkV4cG9ydCh0eXBlKSB7CiAgICAgIF9vbkV4cG9ydCh2bSwgdHlwZSk7CiAgICB9CiAgfTsgLy/ooajlsL7mlbDmja4KCiAgdmFyIHRhYmxlRm9vdGVyRGF0YSA9IHsKICAgIG9uRGVsZXRlOiBmdW5jdGlvbiBvbkRlbGV0ZSgpIHsKICAgICAgb25EZWxldGVBbGxvd0xpc3Qodm0sICJzZWxlY3QiKTsKICAgIH0sCiAgICBvbkRlbGV0ZUFsbDogZnVuY3Rpb24gb25EZWxldGVBbGwoKSB7CiAgICAgIG9uRGVsZXRlQWxsb3dMaXN0KHZtLCAiYWxsIik7CiAgICB9LAogICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiBvblBhZ2VDaGFuZ2UocGFnZSkgewogICAgICBnZXRBbGxvd1RhYmxlRGF0YSh2bSwgcGFnZSk7CiAgICB9LAogICAgc3VtOiAwLAogICAgcGFnZU51bWJlcjogMTAsCiAgICBjdXJQYWdlOiAwLAogICAgZGVsZXRlRGlzYWJsZWQ6IHRydWUsCiAgICBkZWxldGVBbGxEaXNhYmxlZDogZmFsc2UKICB9OyAvL+ihqOagvOaVsOaNrgoKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogImFsbG93bGlzdCIsCiAgICB0aXRsZTogdm0uJHQoIkF1dG9BbnN3ZXJXaGl0ZWxpc3QiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJBbGxvd2xpc3REZXNjIiksCiAgICBpdGVtczogW3sKICAgICAgdHlwZTogInRhYmxlIiwKICAgICAga2V5OiAiYWxsb3dsaXN0IiwKICAgICAgc2hvd0hlYWQ6IHRydWUsCiAgICAgIHNob3dGb290ZXI6IHRydWUsCiAgICAgIHNob3dSb3dTZWxlY3Rpb246IHRydWUsCiAgICAgIHNlbGVjdGVkUm93S2V5czogW10sCiAgICAgIHRhYmxlSGVhZERhdGE6IHRhYmxlSGVhZERhdGEsCiAgICAgIHRhYmxlRm9vdGVyRGF0YTogdGFibGVGb290ZXJEYXRhLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB0YWJsZUNvbHVtbnM6IFt7CiAgICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgICB0aXRsZTogdm0uJHQoIkluZGV4IiksCiAgICAgICAgZGF0YUluZGV4OiAiaW5kZXgiLAogICAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgICBjdXN0b21SZW5kZXI6ICJpbmRleCIKICAgICAgICB9LAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogIjEwJSIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICJsYWJlbCIsCiAgICAgICAgdGl0bGU6IHZtLiR0KCJEZXZpY2VMb2NhdGlvbiIpLAogICAgICAgIGRhdGFJbmRleDogImRldmljZUxvY2F0aW9uIiwKICAgICAgICBzY29wZWRTbG90czogewogICAgICAgICAgY3VzdG9tUmVuZGVyOiAiZGV2aWNlTG9jYXRpb24iCiAgICAgICAgfSwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgd2lkdGg6ICI0MCUiCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAibGFiZWwiLAogICAgICAgIHRpdGxlOiB2bS4kdCgiRGV2aWNlTnVtYmVyIiksCiAgICAgICAgZGF0YUluZGV4OiAiZGV2aWNlTnVtYmVyIiwKICAgICAgICBzY29wZWRTbG90czogewogICAgICAgICAgY3VzdG9tUmVuZGVyOiAiZGV2aWNlTnVtYmVyIgogICAgICAgIH0sCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHdpZHRoOiAiNDAlIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogImVkaXQiLAogICAgICAgIHRpdGxlOiB2bS4kdCgiRWRpdExhYmVsIiksCiAgICAgICAgZGF0YUluZGV4OiAiZWRpdCIsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogImVkaXQiCiAgICAgICAgfSwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgd2lkdGg6ICIxMCUiLAogICAgICAgIG9uRWRpdDogZnVuY3Rpb24gb25FZGl0KGluZGV4LCBrZXkpIHsKICAgICAgICAgIHZhciBhbGxvd1RhYmxlSXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYWxsb3dsaXN0IiwgImFsbG93bGlzdCIpOyAvL2xvY2F0aW9uCgogICAgICAgICAgYWxsb3dUYWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXNbZ2V0SW5kZXhCeUtleShhbGxvd1RhYmxlSXRlbS50YWJsZUhlYWREYXRhLmFkZE1vZGFsRGF0YS5pdGVtcywgImRldmljZUxvY2F0aW9uIildLnZhbHVlID0gYWxsb3dUYWJsZUl0ZW0udGFibGVEYXRhW2luZGV4XS5kZXZpY2VMb2NhdGlvbjsgLy9udW1iZXIKCiAgICAgICAgICBhbGxvd1RhYmxlSXRlbS50YWJsZUhlYWREYXRhLmFkZE1vZGFsRGF0YS5pdGVtc1tnZXRJbmRleEJ5S2V5KGFsbG93VGFibGVJdGVtLnRhYmxlSGVhZERhdGEuYWRkTW9kYWxEYXRhLml0ZW1zLCAiZGV2aWNlTnVtYmVyIildLnZhbHVlID0gYWxsb3dUYWJsZUl0ZW0udGFibGVEYXRhW2luZGV4XS5kZXZpY2VOdW1iZXI7CiAgICAgICAgfQogICAgICB9XQogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVPdGhlcnNDb250ZW50KHZtKSB7CiAgdmFyIGNvbnRlbnQgPSB7CiAgICBrZXk6ICJvdGhlcnMiLAogICAgdGl0bGU6IHZtLiR0KCJPdGhlcnMiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJDYWxsRmVhdHVyZU90aGVyc0Rlc2MiKSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIlJldHVybkNvZGVSZWZ1c2UiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5GZWF0dXJlcy5SRUpFQ1QuUmV0dXJuQ29kZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5GZWF0dXJlcy5SRUpFQ1QuUmV0dXJuQ29kZSJdLAogICAgICBzZWxlY3RJdGVtczogcmV0dXJuQ29kZUl0ZW1zLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlJldHVybkNvZGVSZWZ1c2VEZXNjIikKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJBdXRvQW5zd2VyRGVsYXkiKSwKICAgICAgdHlwZTogImlucHV0IiwKICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkFVVE9BTlNXRVIuRGVsYXkiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuQVVUT0FOU1dFUi5EZWxheSJdLAogICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgaGludENvbnRlbnQ6ICIoIDB+MzAiICsgdm0uJHQoIlNlY29uZCIpICsgIiApIiwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgd2FybkxhYmVsOiB2bS4kdCgiQXV0b0Fuc3dlckRlbGF5UmFuZ2VFcnJvciIpLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkF1dG9BbnN3ZXJEZWxheURlc2MiKQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkFuc3dlck1vZGUiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5GZWF0dXJlcy5BTlNXRVJNT0RFLlByaW9yaXR5IiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkFOU1dFUk1PREUuUHJpb3JpdHkiXSwKICAgICAgc2VsZWN0SXRlbXM6IFt7CiAgICAgICAga2V5OiAwLAogICAgICAgIGxhYmVsOiB2bS4kdCgiQXVkaW8iKQogICAgICB9LCB7CiAgICAgICAga2V5OiAxLAogICAgICAgIGxhYmVsOiB2bS4kdCgiVmlkZW8iKQogICAgICB9XSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBbnN3ZXJNb2RlRGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiSGFuZ3VwQnVzeVRvbmUiKSwKICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAga2V5OiAiQ29uZmlnLlNldHRpbmdzLkdFTkVSQUwuSHVuZ1VwQnVzeVRvbmUiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuU2V0dGluZ3MuR0VORVJBTC5IdW5nVXBCdXN5VG9uZSJdLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkJ1c3lUb25lRGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiSW5kb29yQXV0b0Fuc3dlciIpLAogICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICBrZXk6ICJDb25maWcuRmVhdHVyZXMuQVVUT19BTlNXRVIuSW5kb29yVG9JbmRvb3IiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuQVVUT19BTlNXRVIuSW5kb29yVG9JbmRvb3IiXSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJJbmRvb3JBdXRvQW5zd2VyRGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiRGlyZWN0SVBDYWxsIiksCiAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgIGtleTogIkNvbmZpZy5TZXR0aW5ncy5HRU5FUkFMLkRpcmVjdElQIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLlNldHRpbmdzLkdFTkVSQUwuRGlyZWN0SVAiXSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJEaXJlY3RJUENhbGxEZXNjIikKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJEaXJlY3RJUENhbGxQb3J0IiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGtleTogIkNvbmZpZy5TZXR0aW5ncy5HRU5FUkFMLkRpcmVjdElQUG9ydCIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5HRU5FUkFMLkRpcmVjdElQUG9ydCJdLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgaGludENvbnRlbnQ6ICIoIDF+NjU1MzUgKSIsCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiRGlyZWN0SVBDYWxsUG9ydERlc2MiKQogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVBdWRpb0NhbGxTZXR0aW5nQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAiYXVkaW9DYWxsU2V0dGluZyIsCiAgICB0aXRsZTogdm0uJHQoIkF1ZGlvQ2FsbFNldHRpbmciKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJBdWRpb0NhbGxTZXR0aW5nRGVzYyIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiUmVjZWl2ZUxpdmVTdHJlYW0iKSwKICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkFVRElPX0NBTEwuUmVjZWl2ZUxpdmVTdHJlYW0iLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuQVVESU9fQ0FMTC5SZWNlaXZlTGl2ZVN0cmVhbSJdLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlJlY2VpdmVMaXZlRGVzYyIpCiAgICB9XQogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUZvcndhcmRDb250ZW50KHZtKSB7CiAgdmFyIG5vQW5zd2VyUmluZ1RpbWVJdGVtcyA9IFtdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDIxOyBpKyspIHsKICAgIG5vQW5zd2VyUmluZ1RpbWVJdGVtcy5wdXNoKHsKICAgICAga2V5OiBpICogNiwKICAgICAgbGFiZWw6ICIgIiArIGkgKiA2CiAgICB9KTsKICB9CgogIHZhciBjb250ZW50ID0gewogICAga2V5OiAiZm9yd2FyZFRyYW5zZmVyIiwKICAgIHRpdGxlOiB2bS4kdCgiRm9yd2FyZFRyYW5zZmVyIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiQ2FsbEZvd2FyZERlc2MiKSwKICAgIGl0ZW1zOiBbewogICAgICB0aXRsZTogdm0uJHQoIkZvcndhcmRBbHdheXMiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5Gb3J3YXJkLkFMV0FZUy5FbmFibGUiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRm9yd2FyZC5BTFdBWVMuRW5hYmxlIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiBnZXRFbmFibGVTZWxlY3RJdGVtcyh2bSksCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQWx3YXlzVHJhbnNmZXJEZXNjIikKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJBbHdheXNUYXJnZXROdW1iZXIiKSwKICAgICAgdHlwZTogImlucHV0IiwKICAgICAga2V5OiAiQ29uZmlnLkZvcndhcmQuQUxXQVlTLlRhcmdldCIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLkFMV0FZUy5UYXJnZXQiXSwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgd2FybkxhYmVsOiB2bS4kdCgiVGFyZ2V0TnVtYmVyTm9FbXB0eSIpLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkFsd2F5c0Zvck51bWJlckRlc2MiKQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkZvcndhcmRCdXN5IiksCiAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICBrZXk6ICJDb25maWcuRm9yd2FyZC5CVVNZLkVuYWJsZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLkJVU1kuRW5hYmxlIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiBnZXRFbmFibGVTZWxlY3RJdGVtcyh2bSksCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQnVzeVRyYW5zZmVyRGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiQnVzeVRhcmdldE51bWJlciIpLAogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBrZXk6ICJDb25maWcuRm9yd2FyZC5CVVNZLlRhcmdldCIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLkJVU1kuVGFyZ2V0Il0sCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlRhcmdldE51bWJlck5vRW1wdHkiKSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJCdXN5Rm9yTnVtYmVyRGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiRm9yd2FyZE5vQW5zd2VyIiksCiAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICBrZXk6ICJDb25maWcuRm9yd2FyZC5USU1FT1VULkVuYWJsZSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLlRJTUVPVVQuRW5hYmxlIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiBnZXRFbmFibGVTZWxlY3RJdGVtcyh2bSksCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiTm9BbnN3cmVUcmFuc2ZlckRlc2MiKQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIk5vQW5zd2VyVGFyZ2V0TnVtYmVyIiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGtleTogIkNvbmZpZy5Gb3J3YXJkLlRJTUVPVVQuVGFyZ2V0IiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZvcndhcmQuVElNRU9VVC5UYXJnZXQiXSwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgd2FybkxhYmVsOiB2bS4kdCgiVGFyZ2V0TnVtYmVyTm9FbXB0eSIpLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIk5vQW5zd2VyRm9yTnVtYmVyRGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiTm9BbnN3ZXJSaW5nVGltZSIpICsgIiAoIiArIHZtLiR0KCJTZWNvbmQiKSArICIpIiwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGtleTogIkNvbmZpZy5Gb3J3YXJkLlRJTUVPVVQuVGltZW91dCIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLlRJTUVPVVQuVGltZW91dCJdLAogICAgICBzZWxlY3RJdGVtczogbm9BbnN3ZXJSaW5nVGltZUl0ZW1zLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIk5vQW5zd2VyRHVyYXRpb25EZXNjIikKICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlRE5EQ29udGVudCh2bSkgewogIHZhciBkbmRTdGFydFRpbWUgPSBuZXcgRGF0ZSgpOwogIGRuZFN0YXJ0VGltZS5zZXRIb3Vycyh2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5GZWF0dXJlcy5ETkQuU3RhcnRUaW1lIl0uc3BsaXQoIjoiKVswXSk7CiAgZG5kU3RhcnRUaW1lLnNldE1pbnV0ZXModm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuRE5ELlN0YXJ0VGltZSJdLnNwbGl0KCI6IilbMV0pOwogIHZhciBkbmRFbmRUaW1lID0gbmV3IERhdGUoKTsKICBkbmRFbmRUaW1lLnNldEhvdXJzKHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5FbmRUaW1lIl0uc3BsaXQoIjoiKVswXSk7CiAgZG5kRW5kVGltZS5zZXRNaW51dGVzKHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5FbmRUaW1lIl0uc3BsaXQoIjoiKVsxXSk7CiAgdmFyIGNvbnRlbnQgPSB7CiAgICBrZXk6ICJETkQiLAogICAgdGl0bGU6IHZtLiR0KCJETkQiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJETkREZXNjIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJXaG9sZURheSIpLAogICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICBrZXk6ICJDb25maWcuRmVhdHVyZXMuRE5ELldob2xlRGF5IiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5XaG9sZURheSJdLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIldob2xlRGF5RGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiRE5EU2NoZWR1bGUiKSwKICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkRORC5TY2hlZHVsZU1vZGUiLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5GZWF0dXJlcy5ETkQuU2NoZWR1bGVNb2RlIl0sCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiU2NoZWR1bGVEZXNjIikKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJETkRTdGFydFRpbWUiKSwKICAgICAgdHlwZTogInRpbWUiLAogICAgICBrZXk6ICJDb25maWcuRmVhdHVyZXMuRE5ELlN0YXJ0VGltZSIsCiAgICAgIHRpbWVGb3JtYXQ6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLlNldHRpbmdzLkRBVEVUSU1FLlRpbWVGb3JtYXQiXSA9PSAwID8gImg6bW0gYSIgOiAiSEg6bW0iLAogICAgICB1c2UxMkhvdXJzOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5EQVRFVElNRS5UaW1lRm9ybWF0Il0gPT0gMCA/IHRydWUgOiBmYWxzZSwKICAgICAgdmFsdWU6IG1vbWVudChkbmRTdGFydFRpbWUpLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkRORFN0YXJ0VGltZURlc2MiKQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkROREVuZFRpbWUiKSwKICAgICAgdHlwZTogInRpbWUiLAogICAgICBrZXk6ICJDb25maWcuRmVhdHVyZXMuRE5ELkVuZFRpbWUiLAogICAgICB0aW1lRm9ybWF0OiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5EQVRFVElNRS5UaW1lRm9ybWF0Il0gPT0gMCA/ICJoOm1tIGEiIDogIkhIOm1tIiwKICAgICAgdXNlMTJIb3Vyczogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuU2V0dGluZ3MuREFURVRJTUUuVGltZUZvcm1hdCJdID09IDAgPyB0cnVlIDogZmFsc2UsCiAgICAgIHZhbHVlOiBtb21lbnQoZG5kRW5kVGltZSksCiAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICBoaW50Q29udGVudDogdm0uJHQoIk5leHREYXkiKSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJETkRFbmRUaW1lRGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiUmV0dXJuQ29kZURORCIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkRORC5SZXR1cm5Db2RlIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5SZXR1cm5Db2RlIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiByZXR1cm5Db2RlSXRlbXMsCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUmV0dXJuQ29kZURORERlc2MiKQogICAgfV0KICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjaGVja0NvbW1pdERhdGEodm0pIHsKICByZXR1cm4gY2hlY2tGb3J3YXJkRGF0YSh2bSkgJiYgY2hlY2tPdGhlcnNEYXRhKHZtKTsKfQoKZnVuY3Rpb24gY2hlY2tPdGhlcnNEYXRhKHZtKSB7CiAgdmFyIHN1Y2Nlc3MgPSB0cnVlOwoKICBpZiAoIWNoZWNrUmFuZ2VPZk51bWJlcih2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkFVVE9BTlNXRVIuRGVsYXkiXSwgMCwgMzApIHx8ICIiID09IHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRmVhdHVyZXMuQVVUT0FOU1dFUi5EZWxheSJdKSB7CiAgICB2YXIgaXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAib3RoZXJzIiwgIkNvbmZpZy5GZWF0dXJlcy5BVVRPQU5TV0VSLkRlbGF5Iik7CiAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQoKICB2YXIgZGlyZWN0SXBQb3J0aXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAib3RoZXJzIiwgIkNvbmZpZy5TZXR0aW5ncy5HRU5FUkFMLkRpcmVjdElQUG9ydCIpOwoKICBpZiAoIWNoZWNrUmFuZ2VPZk51bWJlcih2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLlNldHRpbmdzLkdFTkVSQUwuRGlyZWN0SVBQb3J0Il0sIDEsIDY1NTM1KSkgewogICAgZGlyZWN0SXBQb3J0aXRlbS5pc1dhcm4gPSB0cnVlOwogICAgZGlyZWN0SXBQb3J0aXRlbS53YXJuTGFiZWwgPSB2bS4kdCgiRGlyZWN0SVBQb3J0UmFuZ2VFcnJvciIpOwogICAgc3VjY2VzcyA9IGZhbHNlOwogIH0KCiAgaWYgKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuU2V0dGluZ3MuR0VORVJBTC5EaXJlY3RJUFBvcnQiXSA9PSAiNTA2MiIgfHwgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5HRU5FUkFMLkRpcmVjdElQUG9ydCJdID09ICI1MDYzIikgewogICAgZGlyZWN0SXBQb3J0aXRlbS5pc1dhcm4gPSB0cnVlOwogICAgZGlyZWN0SXBQb3J0aXRlbS53YXJuTGFiZWwgPSB2bS4kdCgiU2FtZVNpcFBvcnRFcnIiKTsKICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICB9CgogIHJldHVybiBzdWNjZXNzOwp9CgpmdW5jdGlvbiBjaGVja0ZvcndhcmREYXRhKHZtKSB7CiAgdmFyIHN1Y2Nlc3MgPSB0cnVlOwoKICBpZiAodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLkFMV0FZUy5FbmFibGUiXSA9PSAiMSIgJiYgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLkFMV0FZUy5UYXJnZXQiXSA9PSAiIikgewogICAgdmFyIGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImZvcndhcmRUcmFuc2ZlciIsICJDb25maWcuRm9yd2FyZC5BTFdBWVMuVGFyZ2V0Iik7CiAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQoKICBpZiAodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLkJVU1kuRW5hYmxlIl0gPT0gIjEiICYmIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRm9yd2FyZC5CVVNZLlRhcmdldCJdID09ICIiKSB7CiAgICB2YXIgX2l0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImZvcndhcmRUcmFuc2ZlciIsICJDb25maWcuRm9yd2FyZC5CVVNZLlRhcmdldCIpOwoKICAgIF9pdGVtLmlzV2FybiA9IHRydWU7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQoKICBpZiAodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLlRJTUVPVVQuRW5hYmxlIl0gPT0gIjEiICYmIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRm9yd2FyZC5USU1FT1VULlRhcmdldCJdID09ICIiKSB7CiAgICB2YXIgX2l0ZW0yID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJmb3J3YXJkVHJhbnNmZXIiLCAiQ29uZmlnLkZvcndhcmQuVElNRU9VVC5UYXJnZXQiKTsKCiAgICBfaXRlbTIuaXNXYXJuID0gdHJ1ZTsKICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICB9CgogIHJldHVybiBzdWNjZXNzOwp9CgpmdW5jdGlvbiBnZXRBbGxvd1RhYmxlRGF0YSh2bSwgcGFnZSkgewogIHZtLiRheGlvcy5nZXQoImFwaS9waG9uZUNhbGxGZWF0dXJlL2dldD9wYWdlPSIgKyBwYWdlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgdmFyIHRhYmxlRGF0YSA9IFtdOwogICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmFsbG93TGlzdC5sZW5ndGg7IGkrKykgewogICAgICB2YXIgaXRlbSA9IHsKICAgICAgICBrZXk6IGRhdGEuYWxsb3dMaXN0W2ldLmlkLAogICAgICAgIGluZGV4OiBpICsgMSwKICAgICAgICBkZXZpY2VMb2NhdGlvbjogZGF0YS5hbGxvd0xpc3RbaV0ubG9jYXRpb24sCiAgICAgICAgZGV2aWNlTnVtYmVyOiBkYXRhLmFsbG93TGlzdFtpXS5udW1iZXIsCiAgICAgICAgZWRpdDogaQogICAgICB9OwogICAgICB0YWJsZURhdGEucHVzaChpdGVtKTsKICAgIH0KCiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKS50YWJsZURhdGEgPSB0YWJsZURhdGE7CiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKS50YWJsZUZvb3RlckRhdGEuc3VtID0gZGF0YS5zdW07CiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKS50YWJsZUZvb3RlckRhdGEucGFnZU51bWJlciA9IGRhdGEucGFnZU51bTsKICAgIGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYWxsb3dsaXN0IiwgImFsbG93bGlzdCIpLnRhYmxlRm9vdGVyRGF0YS5jdXJQYWdlID0gcGFnZTsKICAgIGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYWxsb3dsaXN0IiwgImFsbG93bGlzdCIpLnNlbGVjdGVkUm93S2V5cyA9IFtdOwogIH0pOwp9CgpmdW5jdGlvbiBvbkNoYW5nZUFsbG93TGlzdCh2bSkgewogIHZhciBhZGRNb2RhbERhdGEgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKS50YWJsZUhlYWREYXRhLmFkZE1vZGFsRGF0YTsKICB2YXIgZGV2aWNlTG9hY3Rpb24gPSBhZGRNb2RhbERhdGEuaXRlbXNbZ2V0SW5kZXhCeUtleShhZGRNb2RhbERhdGEuaXRlbXMsICJkZXZpY2VMb2NhdGlvbiIpXTsKICB2YXIgZGV2aWNlTnVtYmVyID0gYWRkTW9kYWxEYXRhLml0ZW1zW2dldEluZGV4QnlLZXkoYWRkTW9kYWxEYXRhLml0ZW1zLCAiZGV2aWNlTnVtYmVyIildOwogIHZhciBpZCA9IGFkZE1vZGFsRGF0YS5rZXk7CiAgdmFyIGVyckZsYWcgPSBmYWxzZTsKCiAgaWYgKGRldmljZUxvYWN0aW9uLnZhbHVlID09ICIiKSB7CiAgICBkZXZpY2VMb2FjdGlvbi5pc1dhcm4gPSB0cnVlOwogICAgZXJyRmxhZyA9IHRydWU7CiAgfQoKICBpZiAoZGV2aWNlTnVtYmVyLnZhbHVlID09ICIiKSB7CiAgICBkZXZpY2VOdW1iZXIuaXNXYXJuID0gdHJ1ZTsKICAgIGRldmljZU51bWJlci53YXJuTGFiZWwgPSB2bS4kdCgiQWxsb3dJUFNJUE5vRW1wdHkiKTsKICAgIGVyckZsYWcgPSB0cnVlOwogIH0KCiAgaWYgKGVyckZsYWcpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBkYXRhID0gewogICAgbG9jYXRpb246IGRldmljZUxvYWN0aW9uLnZhbHVlLAogICAgbnVtYmVyOiBkZXZpY2VOdW1iZXIudmFsdWUsCiAgICBpZDogaWQKICB9OwogIHZhciBhY3Rpb24gPSBpZCA+PSAwID8gImVkaXQiIDogImFkZCI7CiAgdmFyIHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVDYWxsRmVhdHVyZSIsCiAgICBhY3Rpb246IGFjdGlvbiwKICAgIGRhdGE6IGRhdGEKICB9OwogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIHZhciByZXQgPSByZXNwb25zZS5kYXRhLnJldGNvZGU7CgogICAgaWYgKHJldCA9PSAwKSB7CiAgICAgIGRldmljZUxvYWN0aW9uLnZhbHVlID0gIiI7CiAgICAgIGRldmljZU51bWJlci52YWx1ZSA9ICIiOwogICAgICB2YXIgcGFnZSA9IDA7CiAgICAgIHZhciB0YWJsZUl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKTsKCiAgICAgIGlmIChhY3Rpb24gPT0gImFkZCIpIHsKICAgICAgICAvL+mhtemdouaVsOaNruWPmOWMlgogICAgICAgIHBhZ2UgPSBNYXRoLmNlaWwoKHRhYmxlSXRlbS50YWJsZUZvb3RlckRhdGEuc3VtICsgMSkgLyB0YWJsZUl0ZW0udGFibGVGb290ZXJEYXRhLnBhZ2VOdW1iZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIHBhZ2UgPSB0YWJsZUl0ZW0udGFibGVGb290ZXJEYXRhLmN1clBhZ2U7CiAgICAgIH0KCiAgICAgIGdldEFsbG93VGFibGVEYXRhKHZtLCBwYWdlKTsgLy/lhbPpl63nqpflj6PlubblsZXnpLrmiJDlip8KCiAgICAgIGFkZE1vZGFsRGF0YS52aXNpYmxlID0gZmFsc2U7CiAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSk7CiAgICB9IGVsc2UgaWYgKHJldCA9PSA3KSB7CiAgICAgIGRldmljZU51bWJlci5pc1dhcm4gPSB0cnVlOwogICAgICBkZXZpY2VOdW1iZXIud2FybkxhYmVsID0gdm0uJHQoIldoaWxlTnVtYmVyQWxyZWFkeUV4aXN0Iik7CiAgICB9IGVsc2UgewogICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiV2hpbGVMaXN0QWRkRXJyIikpOwogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBvbkRlbGV0ZUFsbG93TGlzdCh2bSwgdHlwZSkgewogIGlmICghY29uZmlybSh0eXBlID09ICJhbGwiID8gdm0uJHQoIkRlbGV0ZUFsbENvbmZpcm0iKSA6IHZtLiR0KCJEZWxldGVTZWxlY3RlZENvbmZpcm0iKSkpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBzZWxlY3RlZFJvd0tleXMgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKS5zZWxlY3RlZFJvd0tleXM7CiAgdmFyIHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVDYWxsRmVhdHVyZSIsCiAgICBhY3Rpb246ICJkZWwiLAogICAgZGF0YTogewogICAgICB0eXBlOiB0eXBlLAogICAgICBpZHM6IHNlbGVjdGVkUm93S2V5cwogICAgfQogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtLCB2bS4kdCgiRGVsZXRlQWxsb3dMaXN0U3VjY2VzcyIpKTsKCiAgICBpZiAodHlwZSAhPSAiYWxsIikgewogICAgICB2YXIgdGFibGVGb290ZXJEYXRhID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhbGxvd2xpc3QiLCAiYWxsb3dsaXN0IikudGFibGVGb290ZXJEYXRhOwogICAgICB2YXIgc3VtUGFnZSA9IE1hdGguY2VpbCgodGFibGVGb290ZXJEYXRhLnN1bSAtIHNlbGVjdGVkUm93S2V5cy5sZW5ndGgpIC8gdGFibGVGb290ZXJEYXRhLnBhZ2VOdW1iZXIpOwogICAgICBzdW1QYWdlID0gc3VtUGFnZSA9PSAwID8gMSA6IHN1bVBhZ2U7CiAgICAgIHZhciBwYWdlID0gdGFibGVGb290ZXJEYXRhLmN1clBhZ2UgPj0gc3VtUGFnZSA/IHN1bVBhZ2UgOiB0YWJsZUZvb3RlckRhdGEuY3VyUGFnZTsKICAgICAgZ2V0QWxsb3dUYWJsZURhdGEodm0sIHBhZ2UpOwogICAgfSBlbHNlIHsKICAgICAgZ2V0QWxsb3dUYWJsZURhdGEodm0sIDEpOwogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBfb25FeHBvcnQodm0sIHR5cGUpIHsKICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICB0YXJnZXQ6ICJwaG9uZUNhbGxGZWF0dXJlIiwKICAgIGFjdGlvbjogImV4cG9ydCIsCiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IHR5cGUKICAgIH0KICB9OwogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSwgdm0uJHQoIkV4cG9ydFN1Y2Nlc3MiKSk7CiAgICB2YXIgYWRkcmVzcyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5hZGRyZXNzOwogICAgd2luZG93Lm9wZW4oYWRkcmVzcyk7CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uSW1wb3J0KHZtKSB7CiAgdmFyIG1vZGFsID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhbGxvd2xpc3QiLCAiYWxsb3dsaXN0IikudGFibGVIZWFkRGF0YS5pbXBvcnRNb2RhbERhdGE7CiAgdmFyIGl0ZW0gPSBtb2RhbC5pdGVtc1tnZXRJbmRleEJ5S2V5KG1vZGFsLml0ZW1zLCAiaW1wb3J0IildOwogIHZhciBmaWxlTmFtZSA9IGl0ZW0udmFsdWUuZmlsZU5hbWU7CgogIGlmIChmaWxlTmFtZSA9PSAiIiB8fCBmaWxlTmFtZSA9PSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikpIHsKICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJGaWxlRW1wdHlXYXJuaW5nIikpOwogICAgcmV0dXJuOwogIH0KCiAgbW9kYWwuY29uZmlybUxvYWRpbmcgPSB0cnVlOwogIHZhciB1cERhdGEgPSBuZXcgRm9ybURhdGEoKTsKICB1cERhdGEuYXBwZW5kKCJmaWxlIiwgaXRlbS52YWx1ZS5maWxlRGF0YSk7CiAgYXhpb3MucG9zdCgiYXBpL3Bob25lQ2FsbEZlYXR1cmUvaW1wb3J0IiwgdXBEYXRhLCB7CiAgICBoZWFkZXJzOiB7CiAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIKICAgIH0KICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IC0xKSB7CiAgICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJXaGl0ZUxpc3RJbXBvcnRGYWlsIikpOwogICAgfSBlbHNlIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IDIpIHsKICAgICAgc2hvd1dhcm5pbmdJbmZvKHZtLCB2bS4kdCgiV2hpdGVMaXN0SW1wb3J0RXhpc3RXYXJuaW5nIikpOwogICAgICBpdGVtLnZhbHVlLmZpbGVOYW1lID0gdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpOwogICAgICBpdGVtLnZhbHVlLmZpbGVEYXRhID0ge307CiAgICAgIG1vZGFsLnZpc2libGUgPSBmYWxzZTsKICAgIH0gZWxzZSBpZiAocmVzLmRhdGEucmV0Y29kZSA9PSAwKSB7CiAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSwgdm0uJHQoIldoaXRlTGlzdEltcG9ydFN1Y2Nlc3MiKSk7CiAgICAgIGl0ZW0udmFsdWUuZmlsZU5hbWUgPSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIik7CiAgICAgIGl0ZW0udmFsdWUuZmlsZURhdGEgPSB7fTsKICAgICAgbW9kYWwudmlzaWJsZSA9IGZhbHNlOwogICAgfQoKICAgIG1vZGFsLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2U7CiAgICB2YXIgcGFnZSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYWxsb3dsaXN0IiwgImFsbG93bGlzdCIpLnRhYmxlRm9vdGVyRGF0YS5jdXJQYWdlOwogICAgZ2V0QWxsb3dUYWJsZURhdGEodm0sIHBhZ2UpOwogIH0pOwp9"},null]}