{"remainingRequest":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\thread-loader\\dist\\cjs.js!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\UpgradeAdvanced.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\UpgradeAdvanced.vue","mtime":1625716251138},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1624613273395},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1624613260275},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7Ci8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCB7IHNob3dSZXF1ZXN0U3VjY2VzcywgZGVlcENsb25lLCBnZXRJbmRleEJ5S2V5LCBnZXRJdGVtQnlLZXksIGNoZWNrUmFuZ2VPZk51bWJlciwgbm90Q29udGFpbkludmFsaWQsIGlzSG91ciwgaXNNaW51dGVPclNlYywgY2hlY2tGaWxlU2l6ZSB9IGZyb20gIkAvanMvY29tbW9uLmpzIjsKaW1wb3J0IHsgY2hlY2tGaWxlRm9ybWF0LCBzaG93RXJyb3JJbmZvIH0gZnJvbSAiLi4vanMvY29tbW9uIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvbW1vblBhZ2U6IENvbW1vblBhZ2UKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VkQ2ZnRGF0YToge30sCiAgICAgIHN1Ym1pdENmZ0RhdGE6IHt9LAogICAgICBzdWJtaXREYXRhOiB7fSwKICAgICAgYXBpRGF0YToge30sCiAgICAgIGRhdGE6IHsKICAgICAgICBnZXREYXRhU3VjY2VzczogZmFsc2UKICAgICAgfSwKICAgICAgc3RhdGVEYXRhOiB7fSwKICAgICAgaW50ZXJPYmo6IE9iamVjdCwKICAgICAgZGhjcE9wdGlvbkl0ZW1zOiBbewogICAgICAgIGtleTogMSwKICAgICAgICBsYWJlbDogdGhpcy4kdCgiQ3VzdG9tT3B0aW9uIikKICAgICAgfSwgewogICAgICAgIGtleTogMiwKICAgICAgICBsYWJlbDogdGhpcy4kdCgiT3B0aW9uNDMiKQogICAgICB9LCB7CiAgICAgICAga2V5OiA0LAogICAgICAgIGxhYmVsOiB0aGlzLiR0KCJPcHRpb242NiIpCiAgICAgIH1dLAogICAgICBzY2hlZHVsZVdlZWtJdGVtczogW10sCiAgICAgIHNjaGVkdWxlU29tZURheUl0ZW1zOiBbXSwKICAgICAgc29tZURheU9mV2VlazogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgZ2V0RGF0YSh0aGlzKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2U6IGZ1bmN0aW9uIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2UoZXZlbnQpIHsKICAgICAgLy9ESENQIE9wdGlvbiBFbmFibGUKICAgICAgaWYgKGV2ZW50Lml0ZW1LZXkgPT0gIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkVuYWJsZSIpIHsKICAgICAgICB2YXIgaXRlbSA9IGdldEl0ZW1CeUtleSh0aGlzLmRhdGEsICJkaGNwT3B0aW9uIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkVuYWJsZSIpOwogICAgICAgIGl0ZW0udmFsdWUgPSBldmVudC5uZXdWYWw7CiAgICAgICAgdGhpcy5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGdldERoY3BPcHRpb25WYWx1ZShldmVudC5uZXdWYWwpOwogICAgICB9IC8vTW9kZQogICAgICBlbHNlIGlmIChldmVudC5pdGVtS2V5ID09ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5NT0RFLk1vZGUiKSB7CiAgICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOwogICAgICAgICAgb25DaGVja1NjaGVkdWxlQXZhaWwodGhpcyk7CiAgICAgICAgfSAvL1NvbWVEYXkKICAgICAgICBlbHNlIGlmIChldmVudC5pdGVtS2V5ID09ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5EYXlPZldlZWsiKSB7CiAgICAgICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7CgogICAgICAgICAgICB2YXIgX2l0ZW0gPSBnZXRJdGVtQnlLZXkodGhpcy5kYXRhLCAiYXV0b21hdGljQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuU29tZURheU9mV2VlayIpOwoKICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbCA9PSA4KSB7CiAgICAgICAgICAgICAgX2l0ZW0uaXNTaG93ID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfaXRlbS5pc1Nob3cgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5pdGVtS2V5ID09ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Tb21lRGF5T2ZXZWVrIikgewogICAgICAgICAgICB2YXIgX2l0ZW0yID0gZ2V0SXRlbUJ5S2V5KHRoaXMuZGF0YSwgImF1dG9tYXRpY0F1dG9wIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiKTsKCiAgICAgICAgICAgIF9pdGVtMi52YWx1ZSA9IGV2ZW50Lm5ld1ZhbDsKICAgICAgICAgICAgdmFyIHNvbWVEYXlWYWx1ZSA9ICIiOwoKICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBldmVudC5uZXdWYWwpIHsKICAgICAgICAgICAgICBzb21lRGF5VmFsdWUgPSBzb21lRGF5VmFsdWUgKyBldmVudC5uZXdWYWxbaV0gKyAiLCI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBzb21lRGF5VmFsdWUuc3Vic3RyaW5nKDAsIHNvbWVEYXlWYWx1ZS5sZW5ndGggLSAxKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXRlbUtleSA9PSAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX01PREUuTW9kZSIpIHsKICAgICAgICAgICAgdGhpcy5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGV2ZW50Lm5ld1ZhbDsKICAgICAgICAgICAgb25DaGVja1JlYm9vdFNjaGVkdWxlQXZhaWwodGhpcyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOwogICAgICAgICAgfQogICAgfQogIH0KfTsKdmFyIE5vdEdldFJlc3BvbnNlID0gMDsKdmFyIE5vdEdldFJlc3BvbnNlTnVtID0gMDsKdmFyIElzQWxyZWFkeVJlYm9vdCA9IDA7CgpmdW5jdGlvbiBnZXREaGNwT3B0aW9uVmFsdWUodmFsdWUpIHsKICB2YXIgYm94ZXMgPSAwOwoKICBmb3IgKHZhciBpbmRleCBpbiB2YWx1ZSkgewogICAgYm94ZXMgPSBib3hlcyB8IHZhbHVlW2luZGV4XTsKICB9CgogIHJldHVybiBib3hlczsKfQoKZnVuY3Rpb24gZ2V0RGF0YSh2bSkgewogIHZtLiRheGlvcy5nZXQoImFwaS91cGdyYWRlQWR2YW5jZWQvaW5mbyIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICBpZiAocmVzcG9uc2UuZGF0YS5yZXRjb2RlID09IC0xKSB7CiAgICAgIHZtLmRhdGEgPSB7CiAgICAgICAgc2hvd05vUGVybWlzc2lvbjogdHJ1ZQogICAgICB9OwogICAgICByZXR1cm47CiAgICB9CgogICAgdm0uZ2V0RGF0YVN1Y2Nlc3MgPSB0cnVlOwogICAgdm0uYXBpRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YSA9IGRlZXBDbG9uZShyZXNwb25zZS5kYXRhLmNvbmZpZ0RhdGEpOwogICAgdm0uc3RhdGVEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhOyAvL3NjaGVkdWxlV2Vla0l0ZW1z6LWL5YC8CgogICAgdm0uc2NoZWR1bGVXZWVrSXRlbXMgPSBbXTsKICAgIHZhciB3ZWVrSXRlbSA9IHsKICAgICAga2V5OiAiMCIsCiAgICAgIGxhYmVsOiB2bS4kdCgiRXZlcnlEYXkiKQogICAgfTsKICAgIHZtLnNjaGVkdWxlV2Vla0l0ZW1zLnB1c2god2Vla0l0ZW0pOwogICAgdm0uc2NoZWR1bGVXZWVrSXRlbXMgPSBnZXRXZWVrSXRlbXModm0uc2NoZWR1bGVXZWVrSXRlbXMsIHZtLiR0KCJBbGxXZWVrRGF5cyIpKTsKICAgIHdlZWtJdGVtID0gewogICAgICBrZXk6ICI4IiwKICAgICAgbGFiZWw6IHZtLiR0KCJTb21lRGF5IikKICAgIH07CiAgICB2bS5zY2hlZHVsZVdlZWtJdGVtcy5wdXNoKHdlZWtJdGVtKTsgLy9zY2hlZHVsZVNvbWRheUl0ZW1z6LWL5YC8CgogICAgdm0uc2NoZWR1bGVTb21lRGF5SXRlbXMgPSBbXTsKICAgIHZtLnNjaGVkdWxlU29tZURheUl0ZW1zID0gZ2V0V2Vla0l0ZW1zKHZtLnNjaGVkdWxlU29tZURheUl0ZW1zLCB2bS4kdCgiQWxsV2Vla0RheXMiKSk7IC8vc29tZURheU9mV2Vla+i1i+WAvAoKICAgIHZtLnNvbWVEYXlPZldlZWsgPSB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuU29tZURheU9mV2VlayJdLnNwbGl0KCIsIik7CiAgICBjcmVhdGVQYWdlRGF0YSh2bSk7CiAgICB2bS5kYXRhLmdldERhdGFTdWNjZXNzID0gdHJ1ZTsgLy9kaGNwT3B0aW9uCgogICAgdmFyIGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImRoY3BPcHRpb24iLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uRW5hYmxlIik7CiAgICBpdGVtLnZhbHVlID0gW107CiAgICB2YXIgZGhjcE9wdGlvbkVuYWJsZSA9IHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5FbmFibGUiXTsKCiAgICBmb3IgKHZhciBpbmRleCBpbiB2bS5kaGNwT3B0aW9uSXRlbXMpIHsKICAgICAgaWYgKHZtLmRoY3BPcHRpb25JdGVtc1tpbmRleF0ua2V5ICYgZGhjcE9wdGlvbkVuYWJsZSkgewogICAgICAgIGl0ZW0udmFsdWUucHVzaCh2bS5kaGNwT3B0aW9uSXRlbXNbaW5kZXhdLmtleSk7CiAgICAgIH0KICAgIH0KCiAgICBJc0FscmVhZHlSZWJvb3QgPSAwOyAvLyBBdXRvbWF0aWMgQXV0b3AKCiAgICBvbkNoZWNrU2NoZWR1bGVBdmFpbCh2bSk7CiAgICBvbkNoZWNrUmVib290U2NoZWR1bGVBdmFpbCh2bSk7CiAgICBnZXRBY3V0b1BTdGF0dXModm0pOwogIH0pOwp9CgpmdW5jdGlvbiBzdWJtaXREYXRhKHZtKSB7CiAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICB0YXJnZXQ6ICJ1cGdyYWRlQWR2YW5jZWQiLAogICAgYWN0aW9uOiAic2V0IiwKICAgIGNvbmZpZ0RhdGE6IHZtLnN1Ym1pdENmZ0RhdGEsCiAgICBkYXRhOiB2bS5zdWJtaXREYXRhCiAgfTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHJlc3BvbnNlKSB7CiAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSk7CiAgICB9CgogICAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CiAgfSk7CiAgdm0uc3VibWl0RGF0YSA9IHt9Owp9CgpmdW5jdGlvbiBnZXRDb21taXREYXRhKHZtKSB7CiAgdm0uc3VibWl0Q2ZnRGF0YSA9IHt9OwoKICBmb3IgKHZhciBjaGFuZ2VkS2V5IGluIHZtLmNoYW5nZWRDZmdEYXRhKSB7CiAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhW2NoYW5nZWRLZXldICE9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldKSB7CiAgICAgIHZtLnN1Ym1pdENmZ0RhdGFbY2hhbmdlZEtleV0gPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGdldFdlZWtJdGVtcyhpdGVtcywgdmFsdWUpIHsKICB2YXIgRGF5T2ZXZWVrID0gdmFsdWUuc3BsaXQoIiYiKTsKCiAgZm9yICh2YXIgaSA9IDE7IGkgPCA3OyBpKyspIHsKICAgIHZhciBfd2Vla0l0ZW0gPSB7CiAgICAgIGtleTogaS50b1N0cmluZygpLAogICAgICBsYWJlbDogRGF5T2ZXZWVrW2ldCiAgICB9OwogICAgaXRlbXMucHVzaChfd2Vla0l0ZW0pOwogIH0KCiAgdmFyIHdlZWtJdGVtID0gewogICAga2V5OiAiNyIsCiAgICBsYWJlbDogRGF5T2ZXZWVrWzBdCiAgfTsKICBpdGVtcy5wdXNoKHdlZWtJdGVtKTsKICByZXR1cm4gaXRlbXM7Cn0gLy8gQVVUT1BfU1RBVEVfU1VDQ0VTUyA9IDAsCi8vIEFVVE9QX1NUQVRFX0ZBSUxFRCwgMQovLyBBVVRPUF9TVEFURV9DSEVDS19ST01fRkFJTEVELCAyCi8vIEFVVE9QX1NUQVRFX1VQR1JBRElORywgMwovLyBUSU1FT1VUIDQKLy8gRklOSVNIRUQgNQovLyBUQUxLSU5HIC0xCi8vIFdBSVRJTkcgLTIKCgpmdW5jdGlvbiBnZXRBY3V0b1BTdGF0dXModm0pIHsKICBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIi0xIikgewogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHJlc2V0VG9Ob3JtYWxQYWdlKHZtKTsKICAgIH0sIDY1MDApOwogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjAiKSB7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgcmVzZXRUb05vcm1hbFBhZ2Uodm0pOwogICAgfSwgNjUwMCk7CiAgfSBlbHNlIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiMSIpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICByZXNldFRvTm9ybWFsUGFnZSh2bSk7CiAgICB9LCA2NTAwKTsKICAgIHZhciB0bXAgPSB2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dSZWFzb24uc3BsaXQoIjsiKTsKICAgIHZhciB0bXBMZW4gPSB0bXAubGVuZ3RoOwogICAgdmFyIHRtcFNob3cgPSAiUmVhc29uOiAiOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG1wTGVuIC0gMTsgaSsrKSB7CiAgICAgIGlmICh0bXBbaV0gPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgdG1wU2hvdyArPSB2bS4kdCgiQXV0b1BGYWlsZWRSZWFzb25BcnIiKVt0bXBbaV1dOwogICAgfQoKICAgIHNob3dFcnJvckluZm8odm0sIHRtcFNob3cpOwogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjMiKSB7CiAgICByZVN0YXJ0Q2hlY2tBdXRvUCh2bSk7CiAgICB2bS5pbnRlck9iaiA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgTG9uZ0NoZWNrU3RhdHVzKHZtKTsKICAgIH0sIDQwMDApOwogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIi0yIikgewogICAgcmVTdGFydENoZWNrQXV0b1Aodm0pOwogICAgdm0uaW50ZXJPYmogPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgIExvbmdDaGVja1N0YXR1cyh2bSk7CiAgICB9LCA0MDAwKTsKICB9IGVsc2UgewogICAgcmVzZXRUb05vcm1hbFBhZ2Uodm0pOwogIH0KfQoKZnVuY3Rpb24gTG9uZ0NoZWNrU3RhdHVzKHZtKSB7CiAgaWYgKDEgPT0gTm90R2V0UmVzcG9uc2UpIHsKICAgIHsKICAgICAgc3RhdHVzQ2hlY2sodm0pOwogICAgICBOb3RHZXRSZXNwb25zZU51bSA9IDA7CiAgICAgIE5vdEdldFJlc3BvbnNlID0gMDsKICAgIH0KICB9IGVsc2UgewogICAgTm90R2V0UmVzcG9uc2VOdW0rKzsKCiAgICBpZiAoTm90R2V0UmVzcG9uc2VOdW0gPj0gMykgewogICAgICBOb3RHZXRSZXNwb25zZSA9IDE7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiByZXNldE5vdEdldFJlc3BvbnNlKHZtKSB7CiAgY2xlYXJJbnRlcnZhbCh2bS5pbnRlck9iaik7CiAgdm0uaW50ZXJPYmogPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICBMb25nQ2hlY2tTdGF0dXModm0pOwogIH0sIDQwMDApOwogIE5vdEdldFJlc3BvbnNlID0gMDsKICBOb3RHZXRSZXNwb25zZU51bSA9IDA7Cn0KCmZ1bmN0aW9uIHJlU3RhcnRDaGVja0F1dG9QKHZtKSB7CiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICBzdGF0dXNDaGVjayh2bSk7CiAgfSwgMzAwMCk7Cn0KCmZ1bmN0aW9uIHN0YXR1c0NoZWNrKHZtKSB7CiAgZ2V0U3RhdHVlRGF0YSh2bSk7Cn0KCmZ1bmN0aW9uIG9uU3RzQWN0T2ZBdXRvUCh2bSkgewogIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiMiIpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBnZXREYXRhKHZtKTsKICAgIH0sIDY1MDApOwogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjEiKSB7CiAgICBjbGVhckludGVydmFsKHZtLmludGVyT2JqKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICB2YXIgdG1wID0gdm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93UmVhc29uLnNwbGl0KCI7Iik7CiAgICAgIHZhciB0bXBMZW4gPSB0bXAubGVuZ3RoOwogICAgICB2YXIgdG1wU2hvdyA9ICJSZWFzb246ICI7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRtcExlbiAtIDE7IGkrKykgewogICAgICAgIGlmICh0bXBbaV0gPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgdG1wU2hvdyArPSB2bS4kdCgiQXV0b1BGYWlsZWRSZWFzb25BcnIiKVt0bXBbaV1dOwogICAgICB9CgogICAgICBzaG93RXJyb3JJbmZvKHZtLCB0bXBTaG93KTsKICAgICAgZ2V0RGF0YSh2bSk7CiAgICB9LCA2NTAwKTsKICAgIHJldHVybiAiTm90R29PbiI7CiAgfSBlbHNlIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiMyIpIHt9IGVsc2UgaWYgKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICItMiIpIHt9IGVsc2UgaWYgKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICI0IikgewogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJUaW1lT3V0V2FybmluZyIpKTsKICAgICAgZ2V0RGF0YSh2bSk7CiAgICB9LCA2NTAwKTsKICAgIHJldHVybiAiTm90R29PbiI7CiAgfSBlbHNlIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiNSIpIHsKICAgIGlmICgiMSIgPT0gSXNBbHJlYWR5UmVib290KSB7CiAgICAgIHJldHVybiAiTm90R29PbiI7CiAgICB9CgogICAgSXNBbHJlYWR5UmVib290ID0gIjEiOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSwgdm0uJHQoIkFVVE9QRmluaXNoZWROb3RpY2UiKSk7CiAgICAgIGdldERhdGEodm0pOwogICAgfSwgNzAwMCk7CiAgfQp9CgpmdW5jdGlvbiBnZXRTdGF0dWVEYXRhKHZtKSB7CiAgdm0uJHJvb3QucHJvY2Vzc2luZ1Zpc2libGUgPSB0cnVlOwogIHZtLiRheGlvcy5nZXQoImFwaS91cGdyYWRlQWR2YW5jZWQvaW5mbz9BdXRvcE5vdz0xIikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIHZtLnN0YXRlRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgIHJlc2V0Tm90R2V0UmVzcG9uc2Uodm0pOwogICAgdmFyIHRoaXNSZXMgPSBvblN0c0FjdE9mQXV0b1Aodm0pOwoKICAgIGlmICgiTm90R29PbiIgPT0gdGhpc1JlcykgewogICAgICByZXR1cm47CiAgICB9CgogICAgcmVTdGFydENoZWNrQXV0b1Aodm0pOwogIH0pOwp9CgpmdW5jdGlvbiByZXNldFRvTm9ybWFsUGFnZSh2bSkgewogIGNsZWFySW50ZXJ2YWwodm0uaW50ZXJPYmopOwogIHZtLiRyb290LnByb2Nlc3NpbmdWaXNpYmxlID0gZmFsc2U7Cn0KCmZ1bmN0aW9uIG9uQXV0b1BDb25maXJtKHZtKSB7CiAgZ2V0Q29tbWl0RGF0YSh2bSk7CgogIGlmICh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIl0gPT0gMCkgewogICAgYWxlcnQodm0uJHQoIkFVVE9QRGlzYWJsZWRXYXJuaW5nIikpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKCFjaGVja0NvbW1pdERhdGEodm0pKSB7CiAgICByZXR1cm47CiAgfQoKICBpZiAoY29uZmlybSh2bS4kdCgiU2F2ZUFuZEF1dG9QQ29uZmlybSIpKSkgewogICAgdm0uc3VibWl0RGF0YSA9IHsKICAgICAgQVVUT1BOb3c6ICIxIgogICAgfTsKICAgIHN1Ym1pdERhdGEodm0pOwogICAgdm0uJHJvb3QucHJvY2Vzc2luZ1Zpc2libGUgPSB0cnVlOwogICAgdm0uJGF4aW9zLmdldCgiYXBpL3VwZ3JhZGVBZHZhbmNlZC9pbmZvP0F1dG9wTm93PTEiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICB2bS5zdGF0ZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgIGdldEFjdXRvUFN0YXR1cyh2bSk7CiAgICB9KTsKICB9Cn0KCmZ1bmN0aW9uIG9uQ2hlY2tTY2hlZHVsZUF2YWlsKHZtKSB7CiAgdmFyIHN0cyA9IHRydWU7CiAgdmFyIGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImF1dG9tYXRpY0F1dG9wIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiKTsKCiAgaWYgKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5NT0RFLk1vZGUiXSA9PSAyIHx8IHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5NT0RFLk1vZGUiXSA9PSAzKSB7CiAgICBzdHMgPSBmYWxzZTsKCiAgICBpZiAodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkRheU9mV2VlayJdID09IDgpIHsKICAgICAgaXRlbS5pc1Nob3cgPSB0cnVlOwogICAgfQogIH0gZWxzZSB7CiAgICBpdGVtLmlzU2hvdyA9IGZhbHNlOwogIH0KCiAgdmFyIGl0ZW0xID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhdXRvbWF0aWNBdXRvcCIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5EYXlPZldlZWsiKTsKICB2YXIgaXRlbTIgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImF1dG9tYXRpY0F1dG9wIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkhvdXJPZkRheSIpOwogIHZhciBpdGVtMyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYXV0b21hdGljQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuTWludXRlT2ZIb3VyIik7CiAgaXRlbTEuZGlzYWJsZWQgPSBzdHM7CiAgaXRlbTIuZGlzYWJsZWQgPSBzdHM7CiAgaXRlbTMuZGlzYWJsZWQgPSBzdHM7Cn0KCmZ1bmN0aW9uIG9uQ2hlY2tSZWJvb3RTY2hlZHVsZUF2YWlsKHZtKSB7CiAgdmFyIHN0cyA9IHRydWU7CgogIGlmICh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX01PREUuTW9kZSJdID09IDEpIHsKICAgIHN0cyA9IGZhbHNlOwogIH0KCiAgdmFyIGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgInJlYm9vdFNjaGVkdWxlIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5EYXlPZldlZWsiKTsKICBpdGVtLmRpc2FibGVkID0gc3RzOwogIGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgInJlYm9vdFNjaGVkdWxlIiwgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiKTsKICBpdGVtLmRpc2FibGVkID0gc3RzOwp9CgpmdW5jdGlvbiBfb25FeHBvcnQodm0sIHR5cGUpIHsKICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICB0YXJnZXQ6ICJ1cGdyYWRlQWR2YW5jZWQiLAogICAgYWN0aW9uOiAiZXhwb3J0IiwKICAgIGRhdGE6IHsKICAgICAgdHlwZTogdHlwZQogICAgfQogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtLCB2bS4kdCgiRXhwb3J0U3VjY2VzcyIpKTsKICAgIHZhciBhZGRyZXNzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmFkZHJlc3M7CiAgICB3aW5kb3cub3BlbihhZGRyZXNzKTsKICB9KTsKfQoKZnVuY3Rpb24gb25DbGVhck1ENSh2bSkgewogIHZhciByZXF1ZXN0RGF0YSA9IHsKICAgIHRhcmdldDogInVwZ3JhZGVBZHZhbmNlZCIsCiAgICBhY3Rpb246ICJzZXQiLAogICAgZGF0YTogewogICAgICBDbGVhck1ENTogIjEiCiAgICB9CiAgfTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJDbGVhclN1Y2Nlc3MiKSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uSW1wb3J0KHZtKSB7CiAgdmFyIGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgIm90aGVycyIsICJpbXBvcnRDb25maWdGaWxlIik7CiAgdmFyIGZpbGVOYW1lID0gaXRlbS52YWx1ZS5maWxlTmFtZTsKICB2YXIgZmlsZVVwTGltaXQgPSAxMDI0OyAvLzFNQgoKICB2YXIgZmlsZUxvd2VyTGltaXQgPSAwOwoKICBpZiAoZmlsZU5hbWUgPT0gIiIgfHwgZmlsZU5hbWUgPT0gdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpKSB7CiAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiRmlsZUVtcHR5V2FybmluZyIpKTsKICAgIHJldHVybjsKICB9CgogIGlmIChmaWxlTmFtZS5sZW5ndGggPj0gMTI3KSB7CiAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiV2FybmluZ0ZpbGVOYW1lVG9vTG9uZyIpKTsKICAgIHJldHVybjsKICB9CgogIGlmICghKGNoZWNrRmlsZUZvcm1hdChmaWxlTmFtZSwgIi5UR1oiLCA0KSB8fCBjaGVja0ZpbGVGb3JtYXQoZmlsZU5hbWUsICIuQ09ORiIsIDUpIHx8IGNoZWNrRmlsZUZvcm1hdChmaWxlTmFtZSwgIi5DRkciLCA0KSkpIHsKICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJGaWxlRm9ybWF0V2FybmluZyIpKTsKICAgIHJldHVybjsKICB9CgogIHZhciBGaWxlU2l6ZUZsYWcgPSBjaGVja0ZpbGVTaXplKGl0ZW0udmFsdWUuZmlsZURhdGEsIGZpbGVVcExpbWl0LCBmaWxlTG93ZXJMaW1pdCk7CgogIGlmIChGaWxlU2l6ZUZsYWcgPT0gIi0xIikgewogICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkZpbGVOb3RFeGlzdFdhcm5pbmciKSk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoRmlsZVNpemVGbGFnID09ICItMiIpIHsKICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJVcGxvYWRpbmdGaWxlVG9vTGFyZ2VXYXJuaW5nIikpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKEZpbGVTaXplRmxhZyA9PSAiLTMiKSB7CiAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiRmlsZUZvcm1hdFdhcm5pbmciKSk7CiAgICByZXR1cm47CiAgfQoKICB2bS4kY29uZmlybSh7CiAgICBjb250ZW50OiB2bS4kdCgiSW1wb3J0Q29uZmlnUmVib290SGludCIpLAogICAgb25PazogZnVuY3Rpb24gb25PaygpIHsKICAgICAgLy/kuIrkvKAKICAgICAgaXRlbS5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHVwRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICB1cERhdGEuYXBwZW5kKCJmaWxlIiwgaXRlbS52YWx1ZS5maWxlRGF0YSk7CiAgICAgIGF4aW9zLnBvc3QoImFwaS91cGdyYWRlQWR2YW5jZWQvdXBsb2FkIiwgdXBEYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gLTEpIHsKICAgICAgICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJDb25maWdVcGxvYWRGYWlsZWQiKSk7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IC0yKSB7CiAgICAgICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiQ29uZmlnbnN0YWxsRmFpbGVkIikpOwogICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEucmV0Y29kZSA9PSAwKSB7CiAgICAgICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJDb25maWdJbnN0YWxsU3VjY2VzcyIpKTsKICAgICAgICAgIGl0ZW0udmFsdWUuZmlsZU5hbWUgPSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIik7CiAgICAgICAgICBpdGVtLnZhbHVlLmZpbGVEYXRhID0ge307CiAgICAgICAgfQoKICAgICAgICBpdGVtLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHJldHVybjsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gY2hlY2tDb21taXREYXRhKHZtKSB7CiAgdmFyIHN1Y2Nlc3MgPSB0cnVlOyAvL0RIQ1BDdXN0b21PcHRpb27moKHpqowKCiAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdKSB7CiAgICBpZiAoIWNoZWNrUmFuZ2VPZk51bWJlcih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdLCAxMjgsIDI1NCkgJiYgdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uQ3VzdG9tSWQiXSAhPSAiIikgewogICAgICB2YXIgaXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiZGhjcE9wdGlvbiIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCIpOwogICAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9IC8vU2VydmVyVXNlck5hbWXmoKHpqowKCgogIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSJdKSB7CiAgICBpZiAoIW5vdENvbnRhaW5JbnZhbGlkKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuVXNlck5hbWUiXSkpIHsKICAgICAgdmFyIF9pdGVtMyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAibWFudWFsQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSIpOwoKICAgICAgX2l0ZW0zLmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9IC8vU2VydmVyUGFzc3dvcmTmoKHpqowKCgogIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Qd2QiXSkgewogICAgaWYgKCFub3RDb250YWluSW52YWxpZCh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlB3ZCJdKSkgewogICAgICB2YXIgX2l0ZW00ID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJtYW51YWxBdXRvcCIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlB3ZCIpOwoKICAgICAgX2l0ZW00LmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9IC8vU2VydmVyQ29tbW9uQUVTS2V55qCh6aqMCgoKICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiJdKSB7CiAgICBpZiAoIW5vdENvbnRhaW5JbnZhbGlkKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiJdKSkgewogICAgICB2YXIgX2l0ZW01ID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJtYW51YWxBdXRvcCIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTYiKTsKCiAgICAgIF9pdGVtNS5pc1dhcm4gPSB0cnVlOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfSAvL1NlcnZlck1BQ0FFU0tleeagoemqjAoKCiAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTZNYWMiXSkgewogICAgaWYgKCFub3RDb250YWluSW52YWxpZCh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTZNYWMiXSkpIHsKICAgICAgdmFyIF9pdGVtNiA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAibWFudWFsQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2TWFjIik7CgogICAgICBfaXRlbTYuaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0gLy9ob3Vy5ZKMbWludXRl5qCh6aqMCgoKICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkhvdXJPZkRheSJdKSB7CiAgICBpZiAoIWlzSG91cih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiXSkgfHwgMCA9PSB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiXS5sZW5ndGgpIHsKICAgICAgdmFyIF9pdGVtNyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYXV0b21hdGljQXV0b3AiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuSG91ck9mRGF5Iik7CgogICAgICBfaXRlbTcuaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KCiAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiXSkgewogICAgaWYgKCFpc01pbnV0ZU9yU2VjKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLk1pbnV0ZU9mSG91ciJdKSB8fCAwID09IHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLk1pbnV0ZU9mSG91ciJdLmxlbmd0aCkgewogICAgICB2YXIgX2l0ZW04ID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhdXRvbWF0aWNBdXRvcCIsICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiKTsKCiAgICAgIF9pdGVtOC5pc1dhcm4gPSB0cnVlOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfQoKICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiXSkgewogICAgaWYgKCFpc0hvdXIodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSJdKSB8fCAwID09IHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiXS5sZW5ndGgpIHsKICAgICAgdmFyIF9pdGVtOSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAicmVib290U2NoZWR1bGUiLCAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSIpOwoKICAgICAgX2l0ZW05LmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CgogIHJldHVybiBzdWNjZXNzOwp9CgpmdW5jdGlvbiBjcmVhdGVQYWdlRGF0YSh2bSkgewogIHZtLmRhdGEgPSB7CiAgICAvLyBnZXREYXRhU3VjY2VzczogdHJ1ZSwKICAgIGJyZWFkQ3J1bWI6IHsKICAgICAgZmlyc3RUaXRsZTogdm0uJHQoIlVwZ3JhZGUiKSwKICAgICAgc2Vjb25kVGl0bGU6IHZtLiR0KCJBZHZhbmNlIikKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIGdldENvbW1pdERhdGEodm0pOwoKICAgICAgaWYgKCFjaGVja0NvbW1pdERhdGEodm0pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzdWJtaXREYXRhKHZtKTsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7CiAgICAgIGdldERhdGEodm0pOwogICAgfSwKICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgY2FuY2VsTG9hZGluZzogZmFsc2UsCiAgICBjb250ZW50czogW10KICB9OwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVQbnBPcHRpb25Db250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZURoY3BPcHRpb25Db250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZU1hbnVhbEF1dG9wQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVBdXRvbWF0aWNBdXRvcENvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlUmVib290U2NoZWR1bGVDb250ZW50KHZtKSk7CgogIGlmICh2bS4kcm9vdC5oaWRkZW5BcnIuaXNTaG93VXBncmFkZU90aGVycyA9PSAxKSB7CiAgICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlT3RoZXJzQ29udGVudCh2bSkpOwogIH0KfQoKZnVuY3Rpb24gY3JlYXRlUG5wT3B0aW9uQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAicG5wT3B0aW9uIiwKICAgIHRpdGxlOiB2bS4kdCgiUE5QT3B0aW9uIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiUE5QT3B0aW9uRGVzYyIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiUE5QQ29uZmlnIiksCiAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlBOUC5FbmFibGUiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5QTlAuRW5hYmxlIl0sCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUE5QT3B0aW9uRGVzYyIpCiAgICB9XQogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZURoY3BPcHRpb25Db250ZW50KHZtKSB7CiAgdmFyIGNvbnRlbnQgPSB7CiAgICBrZXk6ICJkaGNwT3B0aW9uIiwKICAgIHRpdGxlOiB2bS4kdCgiREhDUE9wdGlvbiIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkRIQ1BPcHRpb25EZXNjIiksCiAgICBpdGVtczogW3sKICAgICAgdGl0bGU6IHZtLiR0KCJDdXN0b21PcHRpb24iKSwKICAgICAgdHlwZTogImlucHV0IiwKICAgICAgc2hvd0hpbnQ6IHRydWUsCiAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiKDEyOH4yNTQpIiksCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIkN1c3RvbU9wdGlvblJhbmdlRXJyb3IiKSwKICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uQ3VzdG9tSWQiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkN1c3RvbU9wdGlvbkRlc2MiKQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIk9wdGlvbkVuYWJsZSIpLAogICAgICB0eXBlOiAibXVsdGlwbGUtY2hlY2tib3giLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5FbmFibGUiLAogICAgICB2YWx1ZTogW10sCiAgICAgIGNoZWNrYm94SXRlbXM6IHZtLmRoY3BPcHRpb25JdGVtcywKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJESENQT3B0aW9uRW5hYmxlRGVzYyIpCiAgICB9XQogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZU1hbnVhbEF1dG9wQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAibWFudWFsQXV0b3AiLAogICAgdGl0bGU6IHZtLiR0KCJNYW51YWxBdXRvcCIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIk1hbnVhbEF1dG9wRGVzYyIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiVVJMIiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIG1heExlbmd0aDogMTI3LAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlVybCIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuVXJsIl0sCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b3BVUkxEZXNjIikKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJVc2VyTmFtZSIpLAogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja0FsYXJtU3VibWl0RGF0YSIpLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlVzZXJOYW1lIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSJdLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkF1dG9wVXNlcm5hbWVEZXNjIikKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJQYXNzd29yZExhYmVsIiksCiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIGlucHV0VHlwZTogInBhc3N3b3JkIiwKICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgd2FybkxhYmVsOiB2bS4kdCgiUGxlYXNlQ2hlY2tBbGFybVN1Ym1pdERhdGEiKSwKICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Qd2QiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlB3ZCJdLAogICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkF1dG9wUGFzc3dvcmREZXNjIikKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJDb21tb25BRVNLZXkiKSwKICAgICAgdHlwZTogImlucHV0IiwKICAgICAgaW5wdXRUeXBlOiAicGFzc3dvcmQiLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja0FsYXJtU3VibWl0RGF0YSIpLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTYiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTYiXSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJDb21tb25BRVNLZXlEZXNjIikKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJNQUNBRVNLZXkiKSwKICAgICAgdHlwZTogImlucHV0IiwKICAgICAgaW5wdXRUeXBlOiAicGFzc3dvcmQiLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja0FsYXJtU3VibWl0RGF0YSIpLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTZNYWMiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTZNYWMiXSwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBRVNLZXlEZXNjIikKICAgIH0sIHsKICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgIGtleTogIkF1dG9QQ29uZmlybUJ0biIsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgb25BdXRvUENvbmZpcm0odm0pOwogICAgICB9LAogICAgICBpc1Nob3dQb3BvdmVyOiBmYWxzZSwKICAgICAgYnV0dG9uTmFtZTogdm0uJHQoIkF1dG9QTm93IiksCiAgICAgIGJ1dHRvbkljb246ICJpY29uYXV0b1AiCiAgICB9XQogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUF1dG9tYXRpY0F1dG9wQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAiYXV0b21hdGljQXV0b3AiLAogICAgdGl0bGU6IHZtLiR0KCJBdXRvbWF0aWNBdXRvcCIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkF1dG9tYXRpY0F1dG9wRGVzYyIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiTW9kZSIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiBbewogICAgICAgIGtleTogMCwKICAgICAgICBsYWJlbDogdm0uJHQoIkRpc2FibGVkIikKICAgICAgfSwgewogICAgICAgIGtleTogMSwKICAgICAgICBsYWJlbDogdm0uJHQoIlBvd2VyT24iKQogICAgICB9LCB7CiAgICAgICAga2V5OiAyLAogICAgICAgIGxhYmVsOiB2bS4kdCgiUmVwZWF0ZWRseSIpCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDMsCiAgICAgICAgbGFiZWw6IHZtLiR0KCJQb3dlck9uIikgKyB2bS4kdCgiUmVwZWF0ZWRseSIpCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDQsCiAgICAgICAgbGFiZWw6IHZtLiR0KCJSZXBlYXRlZGx5QnlIb3VyIikKICAgICAgfV0sCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b3BNb2RlRGVzYyIpCiAgICB9LCB7CiAgICAgIHRpdGxlOiB2bS4kdCgiU2NoZWR1bGUiKSwKICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuRGF5T2ZXZWVrIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuRGF5T2ZXZWVrIl0sCiAgICAgIHNlbGVjdEl0ZW1zOiB2bS5zY2hlZHVsZVdlZWtJdGVtcywKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBdXRvcFNjaGVkdWxlRGVzYyIpCiAgICB9LCB7CiAgICAgIHR5cGU6ICJtdWx0aXBsZS1jaGVja2JveCIsCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiLAogICAgICBpc1Nob3c6IGZhbHNlLAogICAgICBpc1Nob3dQb3BvdmVyOiBmYWxzZSwKICAgICAgdmFsdWU6IHZtLnNvbWVEYXlPZldlZWssCiAgICAgIGNoZWNrYm94SXRlbXM6IHZtLnNjaGVkdWxlU29tZURheUl0ZW1zCiAgICB9LCB7CiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlNjaGVkdWxlSG91clJhbmdlRXJyb3IiKSwKICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCIoMH4yM0hvdXIpIiksCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkhvdXJPZkRheSIsCiAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkhvdXJPZkRheSJdLAogICAgICBzaG93RGVzY3JpcHRpb246IGZhbHNlCiAgICB9LCB7CiAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiKDB+NTlNaW4pIiksCiAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlNjaGVkdWxlTWludXRlUmFuZ2VFcnJvciIpLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiXSwKICAgICAgc2hvd0Rlc2NyaXB0aW9uOiBmYWxzZQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkV4cG9ydEF1dG9wVGVtcGxhdGUiKSwKICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgIGtleTogIkV4cG9ydEF1dG9wQnRuIiwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICBfb25FeHBvcnQodm0sICJ0ZW1wbGF0ZSIpOwogICAgICB9LAogICAgICBpc1Nob3dQb3BvdmVyOiB0cnVlLAogICAgICBidXR0b25OYW1lOiB2bS4kdCgiRXhwb3J0IiksCiAgICAgIGJ1dHRvbkljb246ICJpY29uZXhwb3J0IiwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJFeHBvcnRBdXRvcFRlbURlc2MiKQogICAgfSwgewogICAgICB0aXRsZTogdm0uJHQoIkNsZWFyTUQ1IiksCiAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICBrZXk6ICJDbGVhck1ENUJ0biIsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgb25DbGVhck1ENSh2bSk7CiAgICAgIH0sCiAgICAgIGlzU2hvd1BvcG92ZXI6IHRydWUsCiAgICAgIGJ1dHRvbk5hbWU6IHZtLiR0KCJDbGVhciIpLAogICAgICBidXR0b25JY29uOiAiaWNvbmNsZWFyIiwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBdXRvcENsZWFyTUQ1RGVzYyIpCiAgICB9XQogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVJlYm9vdFNjaGVkdWxlQ29udGVudCh2bSkgewogIHZhciBjb250ZW50ID0gewogICAga2V5OiAicmVib290U2NoZWR1bGUiLAogICAgdGl0bGU6IHZtLiR0KCJSZWJvb3RTY2hlZHVsZSIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIlJlYm9vdFNjaGVkdWxlRGVzYyIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiU3dpdGNoIiksCiAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9NT0RFLk1vZGUiLAogICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfTU9ERS5Nb2RlIl0sCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b3BTd2l0Y2hEZXNjIikKICAgIH0sIHsKICAgICAgdGl0bGU6IHZtLiR0KCJTY2hlZHVsZSIpLAogICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfU0NIRURVTEUuRGF5T2ZXZWVrIiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkRheU9mV2VlayJdLAogICAgICBzZWxlY3RJdGVtczogdm0uc2NoZWR1bGVXZWVrSXRlbXMsCiAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b3BSZWJvb3RTY2hlZHVsZURlc2MiKQogICAgfSwgewogICAgICB0eXBlOiAiaW5wdXQiLAogICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICBpc1dhcm46IGZhbHNlLAogICAgICB3YXJuTGFiZWw6IHZtLiR0KCJTY2hlZHVsZUhvdXJSYW5nZUVycm9yIiksCiAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiKDB+MjNIb3VyKSIpLAogICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfU0NIRURVTEUuSG91ck9mRGF5IiwKICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSJdLAogICAgICBzaG93RGVzY3JpcHRpb246IGZhbHNlCiAgICB9XQogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZU90aGVyc0NvbnRlbnQodm0pIHsKICB2YXIgY29udGVudCA9IHsKICAgIGtleTogIm90aGVycyIsCiAgICB0aXRsZTogdm0uJHQoIk90aGVycyIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkF1dG9wT3RoZXJzRGVzYyIpLAogICAgaXRlbXM6IFt7CiAgICAgIHRpdGxlOiB2bS4kdCgiQ29uZmlnRmlsZSIpLAogICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsCiAgICAgIGtleTogImltcG9ydENvbmZpZ0ZpbGUiLAogICAgICBhY2NlcHRGaWxlVHlwZTogIi50Z3osLmNvbmYsLmNmZyIsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB2YWx1ZTogewogICAgICAgIGZpbGVEYXRhOiB7fSwKICAgICAgICBmaWxlTmFtZTogdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpCiAgICAgIH0sCiAgICAgIG1vZGFsVGl0bGU6IHZtLiR0KCJBdXRvcEZpbGVIaW50IiksCiAgICAgIGltcG9ydEJ0bk5hbWU6IHZtLiR0KCJJbXBvcnQiKSwKICAgICAgZXhwb3J0QnRuTmFtZTogdm0uJHQoIkV4cG9ydCIpLAogICAgICBtb2RhbENvbmZpcm1OYW1lOiB2bS4kdCgiSW1wb3J0IiksCiAgICAgIHVwbG9hZEZ1bmN0aW9uOiBmdW5jdGlvbiB1cGxvYWRGdW5jdGlvbigpIHsKICAgICAgICBvbkltcG9ydCh2bSk7CiAgICAgIH0sCiAgICAgIGlzU2hvd0V4cG9ydDogdHJ1ZSwKICAgICAgb25FeHBvcnQ6IGZ1bmN0aW9uIG9uRXhwb3J0KCkgewogICAgICAgIF9vbkV4cG9ydCh2bSwgImNvbmZpZyIpOwogICAgICB9LAogICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgaGludENvbnRlbnQ6ICIoIiArIHZtLiR0KCJFbmNyeXB0ZWQiKSArICIpIiwKICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBdXRvcENvbmZpZ0ZpbGVEZXNjIikKICAgIH1dCiAgfTsKICByZXR1cm4gY29udGVudDsKfQ=="},null]}