{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/PhoneIntercom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/PhoneIntercom.vue","mtime":1600155105014},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js","mtime":1600155105338},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCB7IHNob3dSZXF1ZXN0U3VjY2VzcyxkZWVwQ2xvbmV9IGZyb20gIkAvanMvY29tbW9uLmpzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDb21tb25QYWdlLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYW5nZWRDZmdEYXRhOiB7fSwKICAgICAgc3VibWl0Q2ZnRGF0YToge30sCiAgICAgIGFwaURhdGE6IHt9LAogICAgICBkYXRhOiB7CiAgICAgICAgZ2V0RGF0YVN1Y2Nlc3M6IGZhbHNlLAogICAgICB9LAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBnZXREYXRhKHRoaXMpOwogIH0sCiAgbWV0aG9kczogewogICAgb25Db21tb25QYWdlRGF0YUNoYW5nZTogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7CiAgICB9LAogIH0sCn07CgpmdW5jdGlvbiBzdWJtaXREYXRhKHZtKSB7CiAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKCiAgbGV0IHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVJbnRlcmNvbSIsCiAgICBhY3Rpb246ICJzZXQiLAogICAgY29uZmlnRGF0YTogdm0uc3VibWl0Q2ZnRGF0YSwKICB9OwogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSk7CiAgICB2bS5kYXRhLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICB9KTsKfQoKZnVuY3Rpb24gZ2V0RGF0YSh2bSkgewogIHZtLiRheGlvcy5nZXQoImFwaS9waG9uZUludGVyY29tL2luZm8iKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgdm0uZ2V0RGF0YVN1Y2Nlc3MgPSB0cnVlOwogICAgdm0uYXBpRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YSA9IGRlZXBDbG9uZShyZXNwb25zZS5kYXRhLmNvbmZpZ0RhdGEpOwogICAgY3JlYXRlUGFnZURhdGEodm0pOwogIH0pOwp9CgpmdW5jdGlvbiBnZXRDb21taXREYXRhKHZtKSB7CiAgdm0uc3VibWl0Q2ZnRGF0YSA9IHt9OwogIGZvciAodmFyIGNoYW5nZWRLZXkgaW4gdm0uY2hhbmdlZENmZ0RhdGEpIHsKICAgIGlmICh2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbY2hhbmdlZEtleV0gIT0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV0pIHsKICAgICAgdm0uc3VibWl0Q2ZnRGF0YVtjaGFuZ2VkS2V5XSA9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldOwogICAgfQogIH0KfQoKZnVuY3Rpb24gY3JlYXRlUGFnZURhdGEodm0pIHsKICB2bS5kYXRhID0gewogICAgZ2V0RGF0YVN1Y2Nlc3M6IHRydWUsCiAgICBicmVhZENydW1iOiB7CiAgICAgIGZpcnN0VGl0bGU6IHZtLiR0KCJQaG9uZSIpLAogICAgICBzZWNvbmRUaXRsZTogdm0uJHQoIkludGVyY29tIiksCiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgZ2V0Q29tbWl0RGF0YSh2bSk7CiAgICAgIHN1Ym1pdERhdGEodm0pOwogICAgfSwKICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7CiAgICAgIGdldERhdGEodm0pOwogICAgfSwKICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgY2FuY2VsTG9hZGluZzogZmFsc2UsCiAgICBjb250ZW50czogWwogICAgICB7CiAgICAgICAga2V5OiAic29zIiwKICAgICAgICB0aXRsZTogdm0uJHQoIlNPUyIpLAogICAgICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJTT1MiKSwKICAgICAgICBpdGVtczogWwogICAgICAgICAgewogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkNhbGxOdW1iZXIiKSArICIgMSIsCiAgICAgICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgICAgIGtleTogIkNvbmZpZy5GZWF0dXJlcy5DQUxMUk9CSU4uTnVtMDEiLAogICAgICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuQ0FMTFJPQklOLk51bTAxIl0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkNhbGxOdW1iZXIiKSArICIgMiIsCiAgICAgICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgICAgIGtleTogIkNvbmZpZy5GZWF0dXJlcy5DQUxMUk9CSU4uTnVtMDIiLAogICAgICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuQ0FMTFJPQklOLk51bTAyIl0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkNhbGxOdW1iZXIiKSArICIgMyIsCiAgICAgICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgICAgIGtleTogIkNvbmZpZy5GZWF0dXJlcy5DQUxMUk9CSU4uTnVtMDMiLAogICAgICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuQ0FMTFJPQklOLk51bTAzIl0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkNhbGxUaW1lb3V0IikgKyAiKCAiICsgdm0uJHQoIlNlY29uZCIpICsgIikiLAogICAgICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkNBTExST0JJTi5UaW1lIiwKICAgICAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkNBTExST0JJTi5UaW1lIl0sCiAgICAgICAgICAgIHNlbGVjdEl0ZW1zOiBbCiAgICAgICAgICAgICAgeyBrZXk6IDUsIGxhYmVsOiA1IH0sCiAgICAgICAgICAgICAgeyBrZXk6IDE1LCBsYWJlbDogMTUgfSwKICAgICAgICAgICAgICB7IGtleTogMzAsIGxhYmVsOiAzMCB9LAogICAgICAgICAgICAgIHsga2V5OiA2MCwgbGFiZWw6IDYwIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkxvb3BUaW1lcyIpLAogICAgICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkNBTExST0JJTi5Db3VudCIsCiAgICAgICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5GZWF0dXJlcy5DQUxMUk9CSU4uQ291bnQiXSwKICAgICAgICAgICAgc2VsZWN0SXRlbXM6IFsKICAgICAgICAgICAgICB7IGtleTogMSwgbGFiZWw6IDEgfSwKICAgICAgICAgICAgICB7IGtleTogMiwgbGFiZWw6IDIgfSwKICAgICAgICAgICAgICB7IGtleTogMywgbGFiZWw6IDMgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgewogICAgICAgIGtleTogImludGVyY29tIiwKICAgICAgICB0aXRsZTogdm0uJHQoIkludGVyY29tIiksCiAgICAgICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkludGVyY29tIiksCiAgICAgICAgaXRlbXM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJJbnRlcmNvbUFjdGl2ZSIpLAogICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgICAgICBrZXk6ICJDb25maWcuRmVhdHVyZXMuSU5URVJDT00uRW5hYmxlIiwKICAgICAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLklOVEVSQ09NLkVuYWJsZSJdLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJJbnRlcmNvbU11dGUiKSwKICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLklOVEVSQ09NLk11dGUiLAogICAgICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuSU5URVJDT00uTXV0ZSJdLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJJbnRlcmNvbVByZXZpZXciKSwKICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLklOVEVSQ09NLlByZXZpZXciLAogICAgICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuSU5URVJDT00uUHJldmlldyJdLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICB9LAogICAgXSwKICB9Owp9Cg=="},{"version":3,"sources":["PhoneIntercom.vue"],"names":[],"mappings":";;;;;AAKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PhoneIntercom.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <CommonPage :data=\"data\" @onDataChange=\"onCommonPageDataChange($event)\"></CommonPage>\n</template>\n\n<script>\nimport CommonPage from \"@/components/CommonPage.vue\";\nimport { showRequestSuccess,deepClone} from \"@/js/common.js\";\n\nexport default {\n  components: {\n    CommonPage,\n  },\n  data() {\n    return {\n      changedCfgData: {},\n      submitCfgData: {},\n      apiData: {},\n      data: {\n        getDataSuccess: false,\n      },\n    };\n  },\n  created() {\n    getData(this);\n  },\n  methods: {\n    onCommonPageDataChange: function (event) {\n      this.changedCfgData[event.itemKey] = event.newVal;\n    },\n  },\n};\n\nfunction submitData(vm) {\n  vm.data.submitLoading = true;\n\n  let requestData = {\n    target: \"phoneIntercom\",\n    action: \"set\",\n    configData: vm.submitCfgData,\n  };\n  vm.$axios.post(\"api\", requestData).then((response) => {\n    showRequestSuccess(vm);\n    vm.data.submitLoading = false;\n  });\n}\n\nfunction getData(vm) {\n  vm.$axios.get(\"api/phoneIntercom/info\").then((response) => {\n    vm.getDataSuccess = true;\n    vm.apiData = response.data;\n    vm.changedCfgData = deepClone(response.data.configData);\n    createPageData(vm);\n  });\n}\n\nfunction getCommitData(vm) {\n  vm.submitCfgData = {};\n  for (var changedKey in vm.changedCfgData) {\n    if (vm.apiData.configData[changedKey] != vm.changedCfgData[changedKey]) {\n      vm.submitCfgData[changedKey] = vm.changedCfgData[changedKey];\n    }\n  }\n}\n\nfunction createPageData(vm) {\n  vm.data = {\n    getDataSuccess: true,\n    breadCrumb: {\n      firstTitle: vm.$t(\"Phone\"),\n      secondTitle: vm.$t(\"Intercom\"),\n    },\n    onSubmit: function () {\n      getCommitData(vm);\n      submitData(vm);\n    },\n    onCancel: function () {\n      vm.data.cancelLoading = true;\n      getData(vm);\n    },\n    submitLoading: false,\n    cancelLoading: false,\n    contents: [\n      {\n        key: \"sos\",\n        title: vm.$t(\"SOS\"),\n        titleDescription: vm.$t(\"SOS\"),\n        items: [\n          {\n            title: vm.$t(\"CallNumber\") + \" 1\",\n            type: \"input\",\n            key: \"Config.Features.CALLROBIN.Num01\",\n            value: vm.apiData.configData[\"Config.Features.CALLROBIN.Num01\"],\n          },\n          {\n            title: vm.$t(\"CallNumber\") + \" 2\",\n            type: \"input\",\n            key: \"Config.Features.CALLROBIN.Num02\",\n            value: vm.apiData.configData[\"Config.Features.CALLROBIN.Num02\"],\n          },\n          {\n            title: vm.$t(\"CallNumber\") + \" 3\",\n            type: \"input\",\n            key: \"Config.Features.CALLROBIN.Num03\",\n            value: vm.apiData.configData[\"Config.Features.CALLROBIN.Num03\"],\n          },\n          {\n            title: vm.$t(\"CallTimeout\") + \"( \" + vm.$t(\"Second\") + \")\",\n            type: \"select\",\n            key: \"Config.Features.CALLROBIN.Time\",\n            value: vm.apiData.configData[\"Config.Features.CALLROBIN.Time\"],\n            selectItems: [\n              { key: 5, label: 5 },\n              { key: 15, label: 15 },\n              { key: 30, label: 30 },\n              { key: 60, label: 60 },\n            ],\n          },\n          {\n            title: vm.$t(\"LoopTimes\"),\n            type: \"select\",\n            key: \"Config.Features.CALLROBIN.Count\",\n            value: vm.apiData.configData[\"Config.Features.CALLROBIN.Count\"],\n            selectItems: [\n              { key: 1, label: 1 },\n              { key: 2, label: 2 },\n              { key: 3, label: 3 },\n            ],\n          },\n        ],\n      },\n      {\n        key: \"intercom\",\n        title: vm.$t(\"Intercom\"),\n        titleDescription: vm.$t(\"Intercom\"),\n        items: [\n          {\n            title: vm.$t(\"IntercomActive\"),\n            type: \"checkbox\",\n            key: \"Config.Features.INTERCOM.Enable\",\n            value: vm.apiData.configData[\"Config.Features.INTERCOM.Enable\"],\n          },\n          {\n            title: vm.$t(\"IntercomMute\"),\n            type: \"checkbox\",\n            key: \"Config.Features.INTERCOM.Mute\",\n            value: vm.apiData.configData[\"Config.Features.INTERCOM.Mute\"],\n          },\n          {\n            title: vm.$t(\"IntercomPreview\"),\n            type: \"checkbox\",\n            key: \"Config.Features.INTERCOM.Preview\",\n            value: vm.apiData.configData[\"Config.Features.INTERCOM.Preview\"],\n          },\n        ],\n      },\n    ],\n  };\n}\n</script>"]}]}