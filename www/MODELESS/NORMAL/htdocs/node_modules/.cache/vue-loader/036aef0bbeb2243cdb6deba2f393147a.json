{"remainingRequest":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\SettingVoiceAssistant.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\SettingVoiceAssistant.vue","mtime":1624613275304},{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632654448000},{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1632654448000},{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1632654448000},{"path":"E:\\code\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgQ29tbW9uUGFnZSBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uUGFnZS52dWUiOw0KaW1wb3J0IHsgc2hvd1JlcXVlc3RTdWNjZXNzLCBkZWVwQ2xvbmUgfSBmcm9tICJAL2pzL2NvbW1vbi5qcyI7DQppbXBvcnQgeyBnZXRJbmRleEJ5S2V5LCBnZXRJdGVtQnlLZXkgfSBmcm9tICIuLi9qcy9jb21tb24iOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBDb21tb25QYWdlLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBjaGFuZ2VkQ2ZnRGF0YToge30sDQogICAgICBzdWJtaXRDZmdEYXRhOiB7fSwNCiAgICAgIGFwaURhdGE6IHt9LA0KICAgICAgZGF0YTogew0KICAgICAgICBnZXREYXRhU3VjY2VzczogZmFsc2UsDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgZ2V0RGF0YSh0aGlzKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2U6IGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgc2V0Q2hhbmdlZERhdGEodGhpcywgZXZlbnQpOw0KICAgIH0sDQogIH0sDQp9Ow0KDQpmdW5jdGlvbiBzZXRDaGFuZ2VkRGF0YSh2bSwgZXZlbnQpIHsNCiAgaWYgKGV2ZW50LmNvbnRlbnRLZXkgPT0gInZvaWNlQ29tbWFuZFNldHRpbmciKSB7DQogICAgdm0uY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7DQogIH0NCn0NCg0KZnVuY3Rpb24gc3VibWl0RGF0YSh2bSkgew0KICB2bS5kYXRhLnN1Ym1pdExvYWRpbmcgPSB0cnVlOw0KDQogIGxldCBkYXRhID0ge307DQogIGlmICgNCiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgInZvaWNlQXNzaXN0YW50U2V0dGluZyIsICJ2b2ljZUFzc2lzdGFudEVuYWJsZSIpDQogICAgICAudmFsdWUgIT0gdm0uYXBpRGF0YS5kYXRhLnZvaWNlQXNzaXN0YW50RW5hYmxlDQogICkgew0KICAgIGRhdGEgPSB7DQogICAgICB2b2ljZUFzc2lzdGFudEVuYWJsZTogZ2V0SXRlbUJ5S2V5KA0KICAgICAgICB2bS5kYXRhLA0KICAgICAgICAidm9pY2VBc3Npc3RhbnRTZXR0aW5nIiwNCiAgICAgICAgInZvaWNlQXNzaXN0YW50RW5hYmxlIg0KICAgICAgKS52YWx1ZSwNCiAgICB9Ow0KICB9DQoNCiAgbGV0IHJlcXVlc3REYXRhID0gew0KICAgIHRhcmdldDogInNldHRpbmdWb2ljZUFzc2lzdGFudCIsDQogICAgYWN0aW9uOiAic2V0IiwNCiAgICBjb25maWdEYXRhOiB2bS5zdWJtaXRDZmdEYXRhLA0KICAgIGRhdGE6IGRhdGEsDQogIH07DQogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIHJlc3BvbnNlKSB7DQogICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOw0KICAgICAgdm0uYXBpRGF0YS5kYXRhLnZvaWNlQXNzaXN0YW50RW5hYmxlID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJ2b2ljZUFzc2lzdGFudFNldHRpbmciLCAidm9pY2VBc3Npc3RhbnRFbmFibGUiKS52YWx1ZTsNCiAgICB9DQogICAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiBnZXREYXRhKHZtKSB7DQogIHZtLiRheGlvcy5nZXQoImFwaS9zZXR0aW5nVm9pY2VBc3Npc3RhbnQvaW5mbyIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgdm0uZ2V0RGF0YVN1Y2Nlc3MgPSB0cnVlOw0KICAgIHZtLmFwaURhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgIHZtLmNoYW5nZWRDZmdEYXRhID0gZGVlcENsb25lKHJlc3BvbnNlLmRhdGEuY29uZmlnRGF0YSk7DQogICAgY3JlYXRlUGFnZURhdGEodm0pOw0KICB9KTsNCn0NCg0KZnVuY3Rpb24gZ2V0Q29tbWl0RGF0YSh2bSkgew0KICB2bS5zdWJtaXRDZmdEYXRhID0ge307DQogIGZvciAodmFyIGNoYW5nZWRLZXkgaW4gdm0uY2hhbmdlZENmZ0RhdGEpIHsNCiAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhW2NoYW5nZWRLZXldICE9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldKSB7DQogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV07DQogICAgfQ0KICB9DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVBhZ2VEYXRhKHZtKSB7DQogIHZtLmRhdGEgPSB7DQogICAgZ2V0RGF0YVN1Y2Nlc3M6IHRydWUsDQogICAgYnJlYWRDcnVtYjogew0KICAgICAgZmlyc3RUaXRsZTogdm0uJHQoIlNldHRpbmdzIiksDQogICAgICBzZWNvbmRUaXRsZTogdm0uJHQoIlZvaWNlQXNzaXN0YW50IiksDQogICAgfSwNCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gKCkgew0KICAgICAgZ2V0Q29tbWl0RGF0YSh2bSk7DQogICAgICBzdWJtaXREYXRhKHZtKTsNCiAgICB9LA0KICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiAoKSB7DQogICAgICB2bS5kYXRhLmNhbmNlbExvYWRpbmcgPSB0cnVlOw0KICAgICAgZ2V0RGF0YSh2bSk7DQogICAgfSwNCiAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZSwNCiAgICBjYW5jZWxMb2FkaW5nOiBmYWxzZSwNCiAgICBjb250ZW50czogW10sDQogIH07DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVWb2ljQXNzaXN0YW50U2V0dGluZ0NvbnRlbnQodm0pKTsNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVZvaWNDb21tYW5kU2V0dGluZ0NvbnRlbnQodm0pKTsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlVm9pY0NvbW1hbmRTZXR0aW5nQ29udGVudCh2bSkgew0KICBsZXQgdHlwZUl0ZW1zID0gW107DQogIHR5cGVJdGVtcy5wdXNoKHsga2V5OiAzLCBsYWJlbDogdm0uJHQoIlJlbW90ZVJlbGF5SFRUUCIpIH0pOw0KICBpZiAodm0uYXBpRGF0YS5kYXRhLm1heFJlbGF5U29mdGtleU51bSA9PSAzKSB7DQogICAgaWYgKHZtLmFwaURhdGEuZGF0YS5zdXBwb3J0VGhyZWVEdG1mID09IDEpIHsNCiAgICAgIHR5cGVJdGVtcy5wdXNoKHsga2V5OiAyLCBsYWJlbDogdm0uJHQoIlJlbW90ZVJlbGF5RFRNRiIpICsgIjEiIH0pOw0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDE0LCBsYWJlbDogdm0uJHQoIlJlbW90ZVJlbGF5RFRNRiIpICsgIjIiIH0pOw0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDE1LCBsYWJlbDogdm0uJHQoIlJlbW90ZVJlbGF5RFRNRiIpICsgIjMiIH0pOw0KICAgIH0gZWxzZSB7DQogICAgICB0eXBlSXRlbXMucHVzaCh7IGtleTogMiwgbGFiZWw6IHZtLiR0KCJSZW1vdGVSZWxheURUTUYiKSB9KTsNCiAgICB9DQogICAgaWYgKHZtLmFwaURhdGEuZGF0YS5zdXBwb3J0UmVsYXlCID09IDEpIHsNCiAgICAgIHR5cGVJdGVtcy5wdXNoKHsga2V5OiAwLCBsYWJlbDogdm0uJHQoIkxvY2FsUmVsYXkiKSArICIxIiB9KTsNCiAgICAgIHR5cGVJdGVtcy5wdXNoKHsga2V5OiAxLCBsYWJlbDogdm0uJHQoIkxvY2FsUmVsYXkiKSArICIyIiB9KTsNCiAgICB9IGVsc2Ugew0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDAsIGxhYmVsOiB2bS4kdCgiTG9jYWxSZWxheSIpIH0pOw0KICAgIH0NCiAgfSBlbHNlIHsNCiAgICB0eXBlSXRlbXMucHVzaCh7IGtleTogMiwgbGFiZWw6IHZtLiR0KCJSZW1vdGVSZWxheURUTUYiKSB9KTsNCiAgICB0eXBlSXRlbXMucHVzaCh7IGtleTogMCwgbGFiZWw6IHZtLiR0KCJMb2NhbFJlbGF5IikgfSk7DQogIH0NCiAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDQsIGxhYmVsOiB2bS4kdCgiV2ViUmVsYXlBY3Rpb25WYWx1ZSIpIH0pOw0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJ2b2ljZUNvbW1hbmRTZXR0aW5nIiwNCiAgICB0aXRsZTogdm0uJHQoIlZvaWNlQ29tbWFuZFNldHRpbmciKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiVm9pY2VDb21tYW5kU2V0dGluZ0Rlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlVubG9ja1R5cGUiKSwNCiAgICAgICAgdHlwZTogInNlbGVjdCIsDQogICAgICAgIGtleTogIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5Wb2ljZUFzc2lzdGFuY2VSZWxheVR5cGUiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLlZvaWNlQXNzaXN0YW5jZVJlbGF5VHlwZSINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogdHlwZUl0ZW1zLA0KICAgICAgICBzaG93SGludDogdHJ1ZSwNCiAgICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCJVbmxvY2tUeXBlSGludCIpLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlVubG9ja1R5cGVEZXNjIiksDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVWb2ljQXNzaXN0YW50U2V0dGluZ0NvbnRlbnQodm0pIHsNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAidm9pY2VBc3Npc3RhbnRTZXR0aW5nIiwNCiAgICB0aXRsZTogdm0uJHQoIlZvaWNlQXNzaXN0YW5jZVNldHRpbmciKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiVm9pY2VBc3Npc3RhbnRTZXR0aW5nRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiVm9pY2VBc3Npc3RhbnRFbmFibGVkIiksDQogICAgICAgIHR5cGU6ICJjaGVja2JveCIsDQogICAgICAgIGtleTogInZvaWNlQXNzaXN0YW50RW5hYmxlIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuZGF0YS52b2ljZUFzc2lzdGFudEVuYWJsZSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJWb2ljZUFzc2lzdGFudEVuYWJsZURlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQo="},{"version":3,"sources":["SettingVoiceAssistant.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SettingVoiceAssistant.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <CommonPage :data=\"data\" @onDataChange=\"onCommonPageDataChange($event)\"></CommonPage>\r\n</template>\r\n\r\n<script>\r\nimport CommonPage from \"@/components/CommonPage.vue\";\r\nimport { showRequestSuccess, deepClone } from \"@/js/common.js\";\r\nimport { getIndexByKey, getItemByKey } from \"../js/common\";\r\n\r\nexport default {\r\n  components: {\r\n    CommonPage,\r\n  },\r\n  data() {\r\n    return {\r\n      changedCfgData: {},\r\n      submitCfgData: {},\r\n      apiData: {},\r\n      data: {\r\n        getDataSuccess: false,\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    getData(this);\r\n  },\r\n  methods: {\r\n    onCommonPageDataChange: function (event) {\r\n      setChangedData(this, event);\r\n    },\r\n  },\r\n};\r\n\r\nfunction setChangedData(vm, event) {\r\n  if (event.contentKey == \"voiceCommandSetting\") {\r\n    vm.changedCfgData[event.itemKey] = event.newVal;\r\n  }\r\n}\r\n\r\nfunction submitData(vm) {\r\n  vm.data.submitLoading = true;\r\n\r\n  let data = {};\r\n  if (\r\n    getItemByKey(vm.data, \"voiceAssistantSetting\", \"voiceAssistantEnable\")\r\n      .value != vm.apiData.data.voiceAssistantEnable\r\n  ) {\r\n    data = {\r\n      voiceAssistantEnable: getItemByKey(\r\n        vm.data,\r\n        \"voiceAssistantSetting\",\r\n        \"voiceAssistantEnable\"\r\n      ).value,\r\n    };\r\n  }\r\n\r\n  let requestData = {\r\n    target: \"settingVoiceAssistant\",\r\n    action: \"set\",\r\n    configData: vm.submitCfgData,\r\n    data: data,\r\n  };\r\n  vm.$axios.post(\"api\", requestData).then((response) => {\r\n    if (\"undefined\" != typeof response) {\r\n      showRequestSuccess(vm);\r\n      vm.apiData.data.voiceAssistantEnable = getItemByKey(vm.data, \"voiceAssistantSetting\", \"voiceAssistantEnable\").value;\r\n    }\r\n    vm.data.submitLoading = false;\r\n  });\r\n}\r\n\r\nfunction getData(vm) {\r\n  vm.$axios.get(\"api/settingVoiceAssistant/info\").then((response) => {\r\n    vm.getDataSuccess = true;\r\n    vm.apiData = response.data;\r\n    vm.changedCfgData = deepClone(response.data.configData);\r\n    createPageData(vm);\r\n  });\r\n}\r\n\r\nfunction getCommitData(vm) {\r\n  vm.submitCfgData = {};\r\n  for (var changedKey in vm.changedCfgData) {\r\n    if (vm.apiData.configData[changedKey] != vm.changedCfgData[changedKey]) {\r\n      vm.submitCfgData[changedKey] = vm.changedCfgData[changedKey];\r\n    }\r\n  }\r\n}\r\n\r\nfunction createPageData(vm) {\r\n  vm.data = {\r\n    getDataSuccess: true,\r\n    breadCrumb: {\r\n      firstTitle: vm.$t(\"Settings\"),\r\n      secondTitle: vm.$t(\"VoiceAssistant\"),\r\n    },\r\n    onSubmit: function () {\r\n      getCommitData(vm);\r\n      submitData(vm);\r\n    },\r\n    onCancel: function () {\r\n      vm.data.cancelLoading = true;\r\n      getData(vm);\r\n    },\r\n    submitLoading: false,\r\n    cancelLoading: false,\r\n    contents: [],\r\n  };\r\n  vm.data.contents.push(createVoicAssistantSettingContent(vm));\r\n  vm.data.contents.push(createVoicCommandSettingContent(vm));\r\n}\r\n\r\nfunction createVoicCommandSettingContent(vm) {\r\n  let typeItems = [];\r\n  typeItems.push({ key: 3, label: vm.$t(\"RemoteRelayHTTP\") });\r\n  if (vm.apiData.data.maxRelaySoftkeyNum == 3) {\r\n    if (vm.apiData.data.supportThreeDtmf == 1) {\r\n      typeItems.push({ key: 2, label: vm.$t(\"RemoteRelayDTMF\") + \"1\" });\r\n      typeItems.push({ key: 14, label: vm.$t(\"RemoteRelayDTMF\") + \"2\" });\r\n      typeItems.push({ key: 15, label: vm.$t(\"RemoteRelayDTMF\") + \"3\" });\r\n    } else {\r\n      typeItems.push({ key: 2, label: vm.$t(\"RemoteRelayDTMF\") });\r\n    }\r\n    if (vm.apiData.data.supportRelayB == 1) {\r\n      typeItems.push({ key: 0, label: vm.$t(\"LocalRelay\") + \"1\" });\r\n      typeItems.push({ key: 1, label: vm.$t(\"LocalRelay\") + \"2\" });\r\n    } else {\r\n      typeItems.push({ key: 0, label: vm.$t(\"LocalRelay\") });\r\n    }\r\n  } else {\r\n    typeItems.push({ key: 2, label: vm.$t(\"RemoteRelayDTMF\") });\r\n    typeItems.push({ key: 0, label: vm.$t(\"LocalRelay\") });\r\n  }\r\n  typeItems.push({ key: 4, label: vm.$t(\"WebRelayActionValue\") });\r\n  let content = {\r\n    key: \"voiceCommandSetting\",\r\n    title: vm.$t(\"VoiceCommandSetting\"),\r\n    titleDescription: vm.$t(\"VoiceCommandSettingDesc\"),\r\n    items: [\r\n      {\r\n        title: vm.$t(\"UnlockType\"),\r\n        type: \"select\",\r\n        key: \"Config.DoorSetting.RELAY.VoiceAssistanceRelayType\",\r\n        value:\r\n          vm.apiData.configData[\r\n            \"Config.DoorSetting.RELAY.VoiceAssistanceRelayType\"\r\n          ],\r\n        selectItems: typeItems,\r\n        showHint: true,\r\n        hintContent: vm.$t(\"UnlockTypeHint\"),\r\n        description: vm.$t(\"UnlockTypeDesc\"),\r\n      },\r\n    ],\r\n  };\r\n  return content;\r\n}\r\n\r\nfunction createVoicAssistantSettingContent(vm) {\r\n  let content = {\r\n    key: \"voiceAssistantSetting\",\r\n    title: vm.$t(\"VoiceAssistanceSetting\"),\r\n    titleDescription: vm.$t(\"VoiceAssistantSettingDesc\"),\r\n    items: [\r\n      {\r\n        title: vm.$t(\"VoiceAssistantEnabled\"),\r\n        type: \"checkbox\",\r\n        key: \"voiceAssistantEnable\",\r\n        value: vm.apiData.data.voiceAssistantEnable,\r\n        description: vm.$t(\"VoiceAssistantEnableDesc\"),\r\n      },\r\n    ],\r\n  };\r\n  return content;\r\n}\r\n</script>"]}]}