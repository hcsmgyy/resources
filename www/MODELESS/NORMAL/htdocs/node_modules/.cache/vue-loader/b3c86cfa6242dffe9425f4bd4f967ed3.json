{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/UpgradeAdvanced.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/UpgradeAdvanced.vue","mtime":1600155105014},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js","mtime":1600155105338},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCB7IAogIHNob3dSZXF1ZXN0U3VjY2VzcywKICBkZWVwQ2xvbmUsCiAgZ2V0SW5kZXhCeUtleSwKICBnZXRJdGVtQnlLZXksCiAgY2hlY2tSYW5nZU9mTnVtYmVyLAogIG5vdENvbnRhaW5JbnZhbGlkLAogIGlzSG91ciwKICBpc01pbnV0ZU9yU2VjLAogIGNoZWNrRmlsZVNpemUKfSBmcm9tICJAL2pzL2NvbW1vbi5qcyI7CmltcG9ydCB7IGNoZWNrRmlsZUZvcm1hdCwgc2hvd0Vycm9ySW5mbyB9IGZyb20gJy4uL2pzL2NvbW1vbic7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ29tbW9uUGFnZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VkQ2ZnRGF0YTp7fSwKICAgICAgc3VibWl0Q2ZnRGF0YTp7fSwKICAgICAgc3VibWl0RGF0YTp7fSwKICAgICAgYXBpRGF0YToge30sCiAgICAgIGRhdGE6IHsKICAgICAgICBnZXREYXRhU3VjY2VzczogZmFsc2UsCiAgICAgIH0sCiAgICAgIHN0YXRlRGF0YTp7fSwKICAgICAgaW50ZXJPYmo6IE9iamVjdCwKICAgICAgZGhjcE9wdGlvbkl0ZW1zOiBbCiAgICAgICAgeyJrZXkiOiAxLCAibGFiZWwiOiB0aGlzLiR0KCJDdXN0b21PcHRpb24iKX0sCiAgICAgICAgeyJrZXkiOiAyLCAibGFiZWwiOiB0aGlzLiR0KCJPcHRpb240MyIpfSwKICAgICAgICB7ImtleSI6IDQsICJsYWJlbCI6IHRoaXMuJHQoIk9wdGlvbjY2Iil9LAogICAgICBdLAogICAgICBzY2hlZHVsZVdlZWtJdGVtczogW10sCiAgICAgIHNjaGVkdWxlU29tZURheUl0ZW1zOiBbXSwKICAgICAgc29tZURheU9mV2VlazogW10sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGdldERhdGEodGhpcyk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkNvbW1vblBhZ2VEYXRhQ2hhbmdlOiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgLy9ESENQIE9wdGlvbiBFbmFibGUKICAgICAgaWYoZXZlbnQuaXRlbUtleSA9PSAiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uRW5hYmxlIil7CiAgICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgICAgICAgICB0aGlzLmRhdGEsCiAgICAgICAgICAiZGhjcE9wdGlvbiIsCiAgICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uRW5hYmxlIgogICAgICAgICk7CiAgICAgICAgaXRlbS52YWx1ZSA9IGV2ZW50Lm5ld1ZhbDsKICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZ2V0RGhjcE9wdGlvblZhbHVlKGV2ZW50Lm5ld1ZhbCk7CiAgICAgIH0gCiAgICAgIC8vTW9kZQogICAgICBlbHNlIGlmKGV2ZW50Lml0ZW1LZXkgPT0gIkNvbmZpZy5BdXRvcHJvdmlzaW9uLk1PREUuTW9kZSIpewogICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7CiAgICAgICAgb25DaGVja1NjaGVkdWxlQXZhaWwodGhpcyk7CiAgICAgIH0gCiAgICAgIC8vU29tZURheQogICAgICBlbHNlIGlmKGV2ZW50Lml0ZW1LZXkgPT0gIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkRheU9mV2VlayIpewogICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7CiAgICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgICAgICAgICB0aGlzLmRhdGEsCiAgICAgICAgICAiYXV0b21hdGljQXV0b3AiLAogICAgICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiCiAgICAgICAgKTsKICAgICAgICBpZihldmVudC5uZXdWYWwgPT0gOCl7CiAgICAgICAgICBpdGVtLmlzU2hvdyA9IHRydWU7CiAgICAgICAgfSBlbHNlewogICAgICAgICAgaXRlbS5pc1Nob3cgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZWxzZSBpZihldmVudC5pdGVtS2V5ID09ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Tb21lRGF5T2ZXZWVrIil7CiAgICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgICAgICAgICB0aGlzLmRhdGEsCiAgICAgICAgICAiYXV0b21hdGljQXV0b3AiLAogICAgICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiCiAgICAgICAgKTsKICAgICAgICBpdGVtLnZhbHVlID0gZXZlbnQubmV3VmFsOwogICAgICAgIHZhciBzb21lRGF5VmFsdWUgPSAiIgogICAgICAgIGZvcih2YXIgaSBpbiBldmVudC5uZXdWYWwpewogICAgICAgICAgc29tZURheVZhbHVlID0gc29tZURheVZhbHVlICsgZXZlbnQubmV3VmFsW2ldICsgIiwiOwogICAgICAgIH0KICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gc29tZURheVZhbHVlLnN1YnN0cmluZygwLHNvbWVEYXlWYWx1ZS5sZW5ndGgtMSk7CiAgICAgIH0KICAgICAgZWxzZSBpZihldmVudC5pdGVtS2V5ID09ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfTU9ERS5Nb2RlIil7CiAgICAgICAgdGhpcy5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGV2ZW50Lm5ld1ZhbDsKICAgICAgICBvbkNoZWNrUmVib290U2NoZWR1bGVBdmFpbCh0aGlzKTsKICAgICAgfQogICAgICBlbHNlewogICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsKCnZhciBOb3RHZXRSZXNwb25zZSA9IDA7CnZhciBOb3RHZXRSZXNwb25zZU51bSA9IDA7CnZhciBJc0FscmVhZHlSZWJvb3QgPSAwOwoKZnVuY3Rpb24gZ2V0RGhjcE9wdGlvblZhbHVlKHZhbHVlKXsKICB2YXIgYm94ZXMgPSAwOwogIGZvcih2YXIgaW5kZXggaW4gdmFsdWUpewogICAgYm94ZXMgPSBib3hlcyB8IHZhbHVlW2luZGV4XTsKICB9CiAgcmV0dXJuIGJveGVzOwp9CgpmdW5jdGlvbiBnZXREYXRhKHZtKSB7CiAgdm0uJGF4aW9zLmdldCgiYXBpL3VwZ3JhZGVBZHZhbmNlZC9pbmZvIikudGhlbigocmVzcG9uc2UpID0+IHsKICAgIC8vIHZtLmdldERhdGFTdWNjZXNzID0gdHJ1ZTsKICAgIHZtLmFwaURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgdm0uY2hhbmdlZENmZ0RhdGEgPSBkZWVwQ2xvbmUocmVzcG9uc2UuZGF0YS5jb25maWdEYXRhKTsKICAgIHZtLnN0YXRlRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKCiAgICAvL3NjaGVkdWxlV2Vla0l0ZW1z6LWL5YC8CiAgICB2bS5zY2hlZHVsZVdlZWtJdGVtcyA9IFtdOwogICAgbGV0IHdlZWtJdGVtID0geyJrZXkiOiAiMCIsICJsYWJlbCI6IHZtLiR0KCJFdmVyeURheSIpfTsKICAgIHZtLnNjaGVkdWxlV2Vla0l0ZW1zLnB1c2god2Vla0l0ZW0pOwogICAgdm0uc2NoZWR1bGVXZWVrSXRlbXMgPSBnZXRXZWVrSXRlbXModm0uc2NoZWR1bGVXZWVrSXRlbXMsdm0uJHQoIkFsbFdlZWtEYXlzIikpOwogICAgd2Vla0l0ZW0gPSB7ImtleSI6ICI4IiwgImxhYmVsIjogdm0uJHQoIlNvbWVEYXkiKX07CiAgICB2bS5zY2hlZHVsZVdlZWtJdGVtcy5wdXNoKHdlZWtJdGVtKTsKCiAgICAvL3NjaGVkdWxlU29tZGF5SXRlbXPotYvlgLwKICAgIHZtLnNjaGVkdWxlU29tZURheUl0ZW1zID0gW107CiAgICB2bS5zY2hlZHVsZVNvbWVEYXlJdGVtcyA9IGdldFdlZWtJdGVtcyh2bS5zY2hlZHVsZVNvbWVEYXlJdGVtcyx2bS4kdCgiQWxsV2Vla0RheXMiKSk7CgogICAgLy9zb21lRGF5T2ZXZWVr6LWL5YC8CiAgICB2bS5zb21lRGF5T2ZXZWVrID0gdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiXS5zcGxpdCgiLCIpOwoKICAgIGNyZWF0ZVBhZ2VEYXRhKHZtKTsKICAgIHZtLmRhdGEuZ2V0RGF0YVN1Y2Nlc3MgPSB0cnVlOwoKICAgIC8vZGhjcE9wdGlvbgogICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgICAgIHZtLmRhdGEsCiAgICAgICJkaGNwT3B0aW9uIiwKICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkVuYWJsZSIKICAgICk7CiAgICBpdGVtLnZhbHVlID0gW107CiAgICB2YXIgZGhjcE9wdGlvbkVuYWJsZSA9IHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5FbmFibGUiXTsKICAgIGZvcih2YXIgaW5kZXggaW4gdm0uZGhjcE9wdGlvbkl0ZW1zKXsKICAgICAgaWYodm0uZGhjcE9wdGlvbkl0ZW1zW2luZGV4XS5rZXkgJiBkaGNwT3B0aW9uRW5hYmxlKXsKICAgICAgICBpdGVtLnZhbHVlLnB1c2godm0uZGhjcE9wdGlvbkl0ZW1zW2luZGV4XS5rZXkpOwogICAgICB9CiAgICB9CiAgICBJc0FscmVhZHlSZWJvb3QgPSAwOwoKICAgIC8vIEF1dG9tYXRpYyBBdXRvcAogICAgb25DaGVja1NjaGVkdWxlQXZhaWwodm0pOwogICAgb25DaGVja1JlYm9vdFNjaGVkdWxlQXZhaWwodm0pOwoKICAgIGdldEFjdXRvUFN0YXR1cyh2bSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHN1Ym1pdERhdGEodm0pIHsKICB2bS5kYXRhLnN1Ym1pdExvYWRpbmcgPSB0cnVlOwoKICBsZXQgcmVxdWVzdERhdGEgPSB7CiAgICB0YXJnZXQ6ICJ1cGdyYWRlQWR2YW5jZWQiLAogICAgYWN0aW9uOiAic2V0IiwKICAgIGNvbmZpZ0RhdGE6IHZtLnN1Ym1pdENmZ0RhdGEsCiAgICBkYXRhOiB2bS5zdWJtaXREYXRhLAogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtKTsKICAgIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogIH0pOwoKICB2bS5zdWJtaXREYXRhID0ge307Cn0KCmZ1bmN0aW9uIGdldENvbW1pdERhdGEodm0pewogIHZtLnN1Ym1pdENmZ0RhdGEgPSB7fTsKICBmb3IgKHZhciBjaGFuZ2VkS2V5IGluIHZtLmNoYW5nZWRDZmdEYXRhKSB7CiAgICBpZih2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbY2hhbmdlZEtleV0gIT0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV0pewogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV0KICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGdldFdlZWtJdGVtcyhpdGVtcyx2YWx1ZSl7CiAgdmFyIERheU9mV2VlayA9IHZhbHVlLnNwbGl0KCImIik7CiAgZm9yKHZhciBpID0gMTsgaSA8IDc7IGkrKyl7CiAgICBsZXQgd2Vla0l0ZW0gPSB7ImtleSI6IGkudG9TdHJpbmcoKSwgImxhYmVsIjogRGF5T2ZXZWVrW2ldfTsKICAgIGl0ZW1zLnB1c2god2Vla0l0ZW0pOwogIH0KICBsZXQgd2Vla0l0ZW0gPSB7ImtleSI6ICI3IiwgImxhYmVsIjogRGF5T2ZXZWVrWzBdfTsKICBpdGVtcy5wdXNoKHdlZWtJdGVtKTsKICByZXR1cm4gaXRlbXM7Cn0KCiAgLy8gQVVUT1BfU1RBVEVfU1VDQ0VTUyA9IDAsCiAgLy8gQVVUT1BfU1RBVEVfRkFJTEVELCAxCiAgLy8gQVVUT1BfU1RBVEVfQ0hFQ0tfUk9NX0ZBSUxFRCwgMgogIC8vIEFVVE9QX1NUQVRFX1VQR1JBRElORywgMwogIC8vIFRJTUVPVVQgNAogIC8vIEZJTklTSEVEIDUKICAvLyBUQUxLSU5HIC0xCiAgLy8gV0FJVElORyAtMgpmdW5jdGlvbiBnZXRBY3V0b1BTdGF0dXModm0pewogIGlmKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICItMSIpewogICAgc2V0VGltZW91dCgoKSA9PnsKICAgICAgcmVzZXRUb05vcm1hbFBhZ2Uodm0pOwogICAgfSw2NTAwKTsKICB9IGVsc2UgaWYodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjAiKXsKICAgIHNldFRpbWVvdXQoKCkgPT57IAogICAgICByZXNldFRvTm9ybWFsUGFnZSh2bSk7CiAgICB9LDY1MDApOwogIH0gZWxzZSBpZih2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiMSIpewogICAgICBzZXRUaW1lb3V0KCgpID0+ewogICAgICByZXNldFRvTm9ybWFsUGFnZSh2bSk7CiAgICB9LDY1MDApOwogIH0gZWxzZSBpZih2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiMyIpewogICAgcmVTdGFydENoZWNrQXV0b1Aodm0pOwogICAgdm0uaW50ZXJPYmogPSBzZXRJbnRlcnZhbCgoKT0+ewogICAgICBMb25nQ2hlY2tTdGF0dXModm0pOwogICAgfSw0MDAwKTsKICB9IGVsc2UgaWYodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIi0yIil7CiAgICByZVN0YXJ0Q2hlY2tBdXRvUCh2bSk7CiAgICB2bS5pbnRlck9iaiA9IHNldEludGVydmFsKCgpPT57IAogICAgICBMb25nQ2hlY2tTdGF0dXModm0pOwogICAgfSw0MDAwKTsKICB9IGVsc2V7CiAgICByZXNldFRvTm9ybWFsUGFnZSh2bSk7CiAgfQp9CgpmdW5jdGlvbiBMb25nQ2hlY2tTdGF0dXModm0pCnsKCWlmKDEgPT0gTm90R2V0UmVzcG9uc2UpCgl7CgkJe3N0YXR1c0NoZWNrKHZtKTsKCQkgTm90R2V0UmVzcG9uc2VOdW0gPSAwOwoJCSBOb3RHZXRSZXNwb25zZSA9IDA7CgkJfQoJfQoJZWxzZQoJewoJCU5vdEdldFJlc3BvbnNlTnVtKys7CgkJaWYoTm90R2V0UmVzcG9uc2VOdW0gPj0gMykKCQl7CgkJIE5vdEdldFJlc3BvbnNlID0gMTsKCQl9Cgl9Cn0KCmZ1bmN0aW9uIHJlc2V0Tm90R2V0UmVzcG9uc2Uodm0pCnsKCWNsZWFySW50ZXJ2YWwodm0uaW50ZXJPYmopOwoJdm0uaW50ZXJPYmogPSBzZXRJbnRlcnZhbCgoKT0+ewogICAgTG9uZ0NoZWNrU3RhdHVzKHZtKTsKICB9LCA0MDAwKTsKCU5vdEdldFJlc3BvbnNlID0gMDsKCU5vdEdldFJlc3BvbnNlTnVtID0gMDsKfQoKZnVuY3Rpb24gcmVTdGFydENoZWNrQXV0b1Aodm0pCnsKCXNldFRpbWVvdXQoKCk9PnsKICAgIHN0YXR1c0NoZWNrKHZtKTsKICB9LCAzMDAwKTsKfQoKZnVuY3Rpb24gc3RhdHVzQ2hlY2sodm0pewogIGdldFN0YXR1ZURhdGEodm0pOwp9CgpmdW5jdGlvbiBvblN0c0FjdE9mQXV0b1Aodm0pewogIGlmKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICIyIil7CiAgICBzZXRUaW1lb3V0KCgpID0+ewogICAgICBnZXREYXRhKHZtKTsKICAgIH0sNjUwMCk7CiAgfSBlbHNlIGlmKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICIxIil7CiAgICBjbGVhckludGVydmFsKHZtLmludGVyT2JqKTsKICAgIHNldFRpbWVvdXQoKCkgPT57CiAgICAgIGdldERhdGEodm0pOwogICAgfSw2NTAwKTsKICAgIHJldHVybiAiTm90R29PbiI7CiAgfSBlbHNlIGlmKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICIzIil7CiAgfSBlbHNlIGlmKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICItMiIpewogIH0gZWxzZSBpZih2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiNCIpewogICAgc2V0VGltZW91dCgoKSA9PnsKICAgICAgZ2V0RGF0YSh2bSk7CiAgICB9LDY1MDApOwogICAgcmV0dXJuICJOb3RHb09uIjsKICB9IGVsc2UgaWYodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjUiKXsKICAgIGlmKCIxIiA9PSBJc0FscmVhZHlSZWJvb3QpCiAgICB7CiAgICAgIHJldHVybiAiTm90R29PbiI7CiAgICB9CiAgICBJc0FscmVhZHlSZWJvb3QgPSAiMSI7CiAgICBzZXRUaW1lb3V0KCgpID0+ewogICAgICBnZXREYXRhKHZtKTsKICAgIH0sNzAwMCk7CiAgfQp9CgpmdW5jdGlvbiBnZXRTdGF0dWVEYXRhKHZtKSB7CiAgdm0uZGF0YS5nZXREYXRhU3VjY2VzcyA9IGZhbHNlOwogIHZtLiRheGlvcy5nZXQoImFwaS91cGdyYWRlQWR2YW5jZWQvaW5mbz9BdXRvcE5vdz0xIikudGhlbigocmVzcG9uc2UpID0+IHsKICAgIHZtLnN0YXRlRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgIHJlc2V0Tm90R2V0UmVzcG9uc2Uodm0pOwogICAgdmFyIHRoaXNSZXMgPSBvblN0c0FjdE9mQXV0b1Aodm0pOwogICAgaWYoIk5vdEdvT24iID09IHRoaXNSZXMpewogICAgICByZXR1cm47CiAgICB9CiAgICByZVN0YXJ0Q2hlY2tBdXRvUCh2bSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHJlc2V0VG9Ob3JtYWxQYWdlKHZtKQp7CiAgY2xlYXJJbnRlcnZhbCh2bS5pbnRlck9iaik7Cn0KCmZ1bmN0aW9uIG9uQXV0b1BDb25maXJtKHZtKXsKICBnZXRDb21taXREYXRhKHZtKTsKICBpZih2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIl0gPT0gMCl7CiAgICBhbGVydCh2bS4kdCgiQVVUT1BEaXNhYmxlZFdhcm5pbmciKSk7CiAgICByZXR1cm47CiAgfQogIGlmICghY2hlY2tDb21taXREYXRhKHZtKSkgewogICAgcmV0dXJuOwogIH0KICBpZihjb25maXJtKHZtLiR0KCJTYXZlQW5kQXV0b1BDb25maXJtIikpKXsKICAgIHZtLnN1Ym1pdERhdGEgPSB7IkFVVE9QTm93IjogIjEifTsKICAgIHN1Ym1pdERhdGEodm0pOwogICAgdm0uZGF0YS5nZXREYXRhU3VjY2VzcyA9IGZhbHNlOwogICAgdm0uJGF4aW9zLmdldCgiYXBpL3VwZ3JhZGVBZHZhbmNlZC9pbmZvP0F1dG9wTm93PTEiKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICB2bS5zdGF0ZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgIGdldEFjdXRvUFN0YXR1cyh2bSk7CiAgICB9KTsKICB9Cn0KCmZ1bmN0aW9uIG9uQ2hlY2tTY2hlZHVsZUF2YWlsKHZtKXsKICB2YXIgc3RzID0gdHJ1ZTsKICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgKICAgIHZtLmRhdGEsCiAgICAiYXV0b21hdGljQXV0b3AiLAogICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiCiAgKTsKICBpZih2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIl0gPT0gMiAKICAgIHx8IHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5NT0RFLk1vZGUiXSA9PSAzKXsKICAgIHN0cyA9IGZhbHNlOwogICAgaWYodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkRheU9mV2VlayJdID09IDgpewogICAgICBpdGVtLmlzU2hvdyA9IHRydWU7CiAgICB9CiAgfSBlbHNlewogICAgaXRlbS5pc1Nob3cgPSBmYWxzZTsKICB9CiAgbGV0IGl0ZW0xID0gZ2V0SXRlbUJ5S2V5KAogICAgdm0uZGF0YSwKICAgICJhdXRvbWF0aWNBdXRvcCIsCiAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuRGF5T2ZXZWVrIgogICk7CiAgbGV0IGl0ZW0yID0gZ2V0SXRlbUJ5S2V5KAogICAgdm0uZGF0YSwKICAgICJhdXRvbWF0aWNBdXRvcCIsCiAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuSG91ck9mRGF5IgogICk7CiAgbGV0IGl0ZW0zID0gZ2V0SXRlbUJ5S2V5KAogICAgdm0uZGF0YSwKICAgICJhdXRvbWF0aWNBdXRvcCIsCiAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuTWludXRlT2ZIb3VyIgogICk7CiAgaXRlbTEuZGlzYWJsZWQgPSBzdHM7CiAgaXRlbTIuZGlzYWJsZWQgPSBzdHM7CiAgaXRlbTMuZGlzYWJsZWQgPSBzdHM7Cn0KCmZ1bmN0aW9uIG9uQ2hlY2tSZWJvb3RTY2hlZHVsZUF2YWlsKHZtKXsKICB2YXIgc3RzID0gdHJ1ZTsKICBpZih2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX01PREUuTW9kZSJdID09IDEpewogICAgc3RzID0gZmFsc2U7CiAgfQogIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgdm0uZGF0YSwKICAgICJyZWJvb3RTY2hlZHVsZSIsCiAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkRheU9mV2VlayIKICApOwogIGl0ZW0uZGlzYWJsZWQgPSBzdHM7CiAgaXRlbSA9IGdldEl0ZW1CeUtleSgKICAgIHZtLmRhdGEsCiAgICAicmVib290U2NoZWR1bGUiLAogICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiCiAgKTsKICBpdGVtLmRpc2FibGVkID0gc3RzOwp9CgpmdW5jdGlvbiBvbkV4cG9ydCh2bSwgdHlwZSkgewogIGxldCByZXF1ZXN0RGF0YSA9IHsKICAgIHRhcmdldDogInVwZ3JhZGVBZHZhbmNlZCIsCiAgICBhY3Rpb246ICJleHBvcnQiLAogICAgZGF0YTogewogICAgICB0eXBlOiB0eXBlLAogICAgfSwKICB9OwogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSwgdm0uJHQoIkV4cG9ydFN1Y2Nlc3MiKSk7CiAgICBsZXQgYWRkcmVzcyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5hZGRyZXNzOwogICAgd2luZG93Lm9wZW4oYWRkcmVzcyk7CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uQ2xlYXJNRDUodm0pewogIGxldCByZXF1ZXN0RGF0YSA9IHsKICAgIHRhcmdldDogInVwZ3JhZGVBZHZhbmNlZCIsCiAgICBhY3Rpb246ICJzZXQiLAogICAgZGF0YTogewogICAgICAiQ2xlYXJNRDUiOiAiMSIsCiAgICB9LAogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtLCB2bS4kdCgiQ2xlYXJTdWNjZXNzIikpOwogIH0pOwp9CgpmdW5jdGlvbiBvbkltcG9ydCh2bSl7CiAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgIm90aGVycyIsICJpbXBvcnRDb25maWdGaWxlIik7CiAgbGV0IGZpbGVOYW1lID0gaXRlbS52YWx1ZS5maWxlTmFtZTsKICB2YXIgZmlsZVVwTGltaXQgPSAxMDI0OyAvLzFNQiAKCXZhciBmaWxlTG93ZXJMaW1pdCA9IDA7IAogIGlmIChmaWxlTmFtZSA9PSAiIiB8fCBmaWxlTmFtZSA9PSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikpIHsKICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJGaWxlRW1wdHlXYXJuaW5nIikpOwogICAgcmV0dXJuOwogIH0KICBpZiAoZmlsZU5hbWUubGVuZ3RoID49IDEyNykgewogICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIldhcm5pbmdGaWxlTmFtZVRvb0xvbmciKSk7CiAgICByZXR1cm47CiAgfQogIGlmICghKChjaGVja0ZpbGVGb3JtYXQoZmlsZU5hbWUsICIuVEdaIiwgNCkpIHx8IChjaGVja0ZpbGVGb3JtYXQoZmlsZU5hbWUsICIuQ09ORiIsNSkpCiAgICB8fCAoY2hlY2tGaWxlRm9ybWF0KGZpbGVOYW1lLCIuQ0ZHIiw0KSkpKSB7CiAgICBzaG93RXJyb3JJbmZvKHZtLHZtLiR0KCJGaWxlRm9ybWF0V2FybmluZyIpKTsKICAgIHJldHVybjsKICB9CiAgdmFyIEZpbGVTaXplRmxhZyA9IGNoZWNrRmlsZVNpemUoaXRlbS52YWx1ZS5maWxlRGF0YSxmaWxlVXBMaW1pdCxmaWxlTG93ZXJMaW1pdCk7CiAgaWYoRmlsZVNpemVGbGFnID09ICItMSIpewogICAgc2hvd0Vycm9ySW5mbyh2bSx2bS4kdCgiRmlsZU5vdEV4aXN0V2FybmluZyIpKTsKICAgIHJldHVybjsKICB9CiAgaWYoRmlsZVNpemVGbGFnID09ICItMiIpewogICAgc2hvd0Vycm9ySW5mbyh2bSx2bS4kdCgiVXBsb2FkaW5nRmlsZVRvb0xhcmdlV2FybmluZyIpKTsKICAgIHJldHVybjsKICB9CiAgaWYoRmlsZVNpemVGbGFnID09ICItMyIpewogICAgc2hvd0Vycm9ySW5mbyh2bSx2bS4kdCgiRmlsZUZvcm1hdFdhcm5pbmciKSk7CiAgICByZXR1cm47CiAgfQogIC8v5LiK5LygCiAgaXRlbS5sb2FkaW5nID0gdHJ1ZTsKICBjb25zdCB1cERhdGEgPSBuZXcgRm9ybURhdGEoKTsKICB1cERhdGEuYXBwZW5kKCJmaWxlIiwgaXRlbS52YWx1ZS5maWxlRGF0YSk7CiAgYXhpb3MKICAgIC5wb3N0KCJhcGkvdXBncmFkZUFkdmFuY2VkL3VwbG9hZCIsIHVwRGF0YSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiwKICAgICAgfSwKICAgIH0pCiAgICAudGhlbigocmVzKSA9PiB7CiAgICAgIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IC0xKSB7CiAgICAgICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkNvbmZpZ1VwbG9hZEZhaWxlZCIpKTsKICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IC0yKSB7CiAgICAgICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkNvbmZpZ25zdGFsbEZhaWxlZCIpKTsKICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IDApIHsKICAgICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJDb25maWdJbnN0YWxsU3VjY2VzcyIpKTsKICAgICAgICBpdGVtLnZhbHVlLmZpbGVOYW1lID0gIHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKTsKICAgICAgICBpdGVtLnZhbHVlLmZpbGVEYXRhID0ge307CiAgICAgIH0KICAgICAgaXRlbS5sb2FkaW5nID0gZmFsc2U7CiAgICB9KTsKICByZXR1cm47Cn0KCmZ1bmN0aW9uIGNoZWNrQ29tbWl0RGF0YSh2bSl7CiAgbGV0IHN1Y2Nlc3MgPSB0cnVlOwogIC8vREhDUEN1c3RvbU9wdGlvbuagoemqjAogIGlmKCJ1bmRlZmluZWQiICE9IHR5cGVvZih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdKSl7CiAgICBpZighY2hlY2tSYW5nZU9mTnVtYmVyKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkN1c3RvbUlkIl0sIDEyOCwgMjU0KSAmJiB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdICE9ICIiKXsKICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgICAgICAgdm0uZGF0YSwKICAgICAgICAiZGhjcE9wdGlvbiIsCiAgICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkN1c3RvbUlkIgogICAgICApOwogICAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CgogIC8vU2VydmVyVXNlck5hbWXmoKHpqowKICBpZigidW5kZWZpbmVkIiAhPSB0eXBlb2Yodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSJdKSl7CiAgICBpZighbm90Q29udGFpbkludmFsaWQodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSJdKSl7CiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgIHZtLmRhdGEsCiAgICAgICAgIm1hbnVhbEF1dG9wIiwKICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSIKICAgICAgKTsKICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfQoKICAvL1NlcnZlclBhc3N3b3Jk5qCh6aqMCiAgaWYoInVuZGVmaW5lZCIgIT0gdHlwZW9mKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuUHdkIl0pKXsKICAgIGlmKCFub3RDb250YWluSW52YWxpZCh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlB3ZCJdKSl7CiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgIHZtLmRhdGEsCiAgICAgICAgIm1hbnVhbEF1dG9wIiwKICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Qd2QiCiAgICAgICk7CiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KCiAgLy9TZXJ2ZXJDb21tb25BRVNLZXnmoKHpqowKICBpZigidW5kZWZpbmVkIiAhPSB0eXBlb2Yodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2Il0pKXsKICAgIGlmKCFub3RDb250YWluSW52YWxpZCh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTYiXSkpewogICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgKICAgICAgICB2bS5kYXRhLAogICAgICAgICJtYW51YWxBdXRvcCIsCiAgICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiIKICAgICAgKTsKICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgICB9CiAgfQoKICAvL1NlcnZlck1BQ0FFU0tleeagoemqjAogIGlmKCJ1bmRlZmluZWQiICE9IHR5cGVvZih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTZNYWMiXSkpewogICAgaWYoIW5vdENvbnRhaW5JbnZhbGlkKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNk1hYyJdKSl7CiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgIHZtLmRhdGEsCiAgICAgICAgIm1hbnVhbEF1dG9wIiwKICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2TWFjIgogICAgICApOwogICAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CgogIC8vaG91cuWSjG1pbnV0ZeagoemqjAogIGlmKCJ1bmRlZmluZWQiICE9IHR5cGVvZih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiXSkpewogICAgaWYoIWlzSG91cih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiXSkgCiAgICAgIHx8IDAgPT0gdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuSG91ck9mRGF5Il0ubGVuZ3RoKXsKICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgICAgICAgdm0uZGF0YSwKICAgICAgICAiYXV0b21hdGljQXV0b3AiLAogICAgICAgICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiCiAgICAgICk7CiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KCiAgaWYoInVuZGVmaW5lZCIgIT0gdHlwZW9mKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLk1pbnV0ZU9mSG91ciJdKSl7CiAgICBpZighaXNNaW51dGVPclNlYyh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiXSkgCiAgICAgIHx8IDAgPT0gdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuTWludXRlT2ZIb3VyIl0ubGVuZ3RoKXsKICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgICAgICAgdm0uZGF0YSwKICAgICAgICAiYXV0b21hdGljQXV0b3AiLAogICAgICAgICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiCiAgICAgICk7CiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KCiAgaWYoInVuZGVmaW5lZCIgIT0gdHlwZW9mKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiXSkpewogICAgaWYoIWlzSG91cih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfU0NIRURVTEUuSG91ck9mRGF5Il0pIAogICAgICB8fCAwID09IHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiXS5sZW5ndGgpewogICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgKICAgICAgICB2bS5kYXRhLAogICAgICAgICJyZWJvb3RTY2hlZHVsZSIsCiAgICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiCiAgICAgICk7CiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KCiAgcmV0dXJuIHN1Y2Nlc3M7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVBhZ2VEYXRhKHZtKSB7CiAgdm0uZGF0YSA9IHsKICAgIC8vIGdldERhdGFTdWNjZXNzOiB0cnVlLAogICAgYnJlYWRDcnVtYjogewogICAgICBmaXJzdFRpdGxlOiB2bS4kdCgiVXBncmFkZSIpLAogICAgICBzZWNvbmRUaXRsZTogdm0uJHQoIkFkdmFuY2UiKSwKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gKCkgewogICAgICBnZXRDb21taXREYXRhKHZtKTsKICAgICAgaWYgKCFjaGVja0NvbW1pdERhdGEodm0pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHN1Ym1pdERhdGEodm0pOwogICAgfSwKICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7CiAgICAgIGdldERhdGEodm0pOwogICAgfSwKICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgY2FuY2VsTG9hZGluZzogZmFsc2UsCiAgICBjb250ZW50czogW10sCiAgfTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlUG5wT3B0aW9uQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVEaGNwT3B0aW9uQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVNYW51YWxBdXRvcENvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlQXV0b21hdGljQXV0b3BDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVJlYm9vdFNjaGVkdWxlQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVPdGhlcnNDb250ZW50KHZtKSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVBucE9wdGlvbkNvbnRlbnQodm0pIHsKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogInBucE9wdGlvbiIsCiAgICB0aXRsZTogdm0uJHQoIlBOUE9wdGlvbiIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIlBOUE9wdGlvbiIpLAogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiUE5QQ29uZmlnIiksCiAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5QTlAuRW5hYmxlIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5QTlAuRW5hYmxlIl0sCiAgICAgIH0sCiAgICBdLAogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZURoY3BPcHRpb25Db250ZW50KHZtKSB7CiAgbGV0IGNvbnRlbnQgPSB7CiAgICBrZXk6ICJkaGNwT3B0aW9uIiwKICAgIHRpdGxlOiB2bS4kdCgiREhDUE9wdGlvbiIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkRIQ1BPcHRpb24iKSwKICAgIGl0ZW1zOiBbCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkN1c3RvbU9wdGlvbiIpLAogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgc2hvd0hpbnQ6dHJ1ZSwKICAgICAgICBoaW50Q29udGVudDp2bS4kdCgiKDEyOH4yNTQpIiksCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja0FsYXJtU3VibWl0RGF0YSIpLAogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkN1c3RvbUlkIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJPcHRpb25FbmFibGUiKSwKICAgICAgICB0eXBlOiAibXVsdGlwbGUtY2hlY2tib3giLAogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkVuYWJsZSIsCiAgICAgICAgdmFsdWU6IFtdLAogICAgICAgIGNoZWNrYm94SXRlbXM6IHZtLmRoY3BPcHRpb25JdGVtcywKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlTWFudWFsQXV0b3BDb250ZW50KHZtKSB7CiAgbGV0IGNvbnRlbnQgPSB7CiAgICBrZXk6ICJtYW51YWxBdXRvcCIsCiAgICB0aXRsZTogdm0uJHQoIk1hbnVhbEF1dG9wIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiTWFudWFsQXV0b3AiKSwKICAgIGl0ZW1zOiBbCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlVSTCIpLAogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgbWF4TGVuZ3RoOiAxMjcsCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5VcmwiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuVXJsIl0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlVzZXJOYW1lIiksCiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBpc1dhcm46IGZhbHNlLAogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlBsZWFzZUNoZWNrQWxhcm1TdWJtaXREYXRhIiksCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJQYXNzd29yZExhYmVsIiksCiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBpbnB1dFR5cGU6ICJwYXNzd29yZCIsCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja0FsYXJtU3VibWl0RGF0YSIpLAogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuUHdkIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlB3ZCJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJDb21tb25BRVNLZXkiKSwKICAgICAgICB0eXBlOiAiaW5wdXQiLAogICAgICAgIGlucHV0VHlwZTogInBhc3N3b3JkIiwKICAgICAgICBpc1dhcm46IGZhbHNlLAogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlBsZWFzZUNoZWNrQWxhcm1TdWJtaXREYXRhIiksCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2IiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTYiXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiTUFDQUVTS2V5IiksCiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBpbnB1dFR5cGU6ICJwYXNzd29yZCIsCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja0FsYXJtU3VibWl0RGF0YSIpLAogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNk1hYyIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2TWFjIl0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICBrZXk6ICJBdXRvUENvbmZpcm1CdG4iLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIG9uQXV0b1BDb25maXJtKHZtKTsKICAgICAgICB9LAogICAgICAgIGlzU2hvd1BvcG92ZXI6IGZhbHNlLAogICAgICAgIGJ1dHRvbk5hbWU6IHZtLiR0KCJBdXRvUE5vdyIpLAogICAgICB9LAogICAgXSwKICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVBdXRvbWF0aWNBdXRvcENvbnRlbnQodm0pIHsKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogImF1dG9tYXRpY0F1dG9wIiwKICAgIHRpdGxlOiB2bS4kdCgiQXV0b21hdGljQXV0b3AiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJBdXRvbWF0aWNBdXRvcCIpLAogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiTW9kZSIpLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLk1PREUuTW9kZSIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIl0sCiAgICAgICAgc2VsZWN0SXRlbXM6IFsKICAgICAgICAgIHsia2V5IjowLCJsYWJlbCI6dm0uJHQoIkRpc2FibGVkIil9LAogICAgICAgICAgeyJrZXkiOjEsImxhYmVsIjp2bS4kdCgiUG93ZXJPbiIpfSwKICAgICAgICAgIHsia2V5IjoyLCJsYWJlbCI6dm0uJHQoIlJlcGVhdGVkbHkiKX0sCiAgICAgICAgICB7ImtleSI6MywibGFiZWwiOnZtLiR0KCJQb3dlck9uIikrdm0uJHQoIlJlcGVhdGVkbHkiKX0sCiAgICAgICAgICB7ImtleSI6NCwibGFiZWwiOnZtLiR0KCJSZXBlYXRlZGx5QnlIb3VyIil9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlNjaGVkdWxlIiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkRheU9mV2VlayIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuRGF5T2ZXZWVrIl0sCiAgICAgICAgc2VsZWN0SXRlbXM6IHZtLnNjaGVkdWxlV2Vla0l0ZW1zLAogICAgICB9LAogICAgICB7CiAgICAgICAgdHlwZTogIm11bHRpcGxlLWNoZWNrYm94IiwKICAgICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Tb21lRGF5T2ZXZWVrIiwKICAgICAgICBpc1Nob3c6IGZhbHNlLAogICAgICAgIGlzU2hvd1BvcG92ZXI6IGZhbHNlLAogICAgICAgIHZhbHVlOiB2bS5zb21lRGF5T2ZXZWVrLAogICAgICAgIGNoZWNrYm94SXRlbXM6IHZtLnNjaGVkdWxlU29tZURheUl0ZW1zLAogICAgICB9LAogICAgICB7CiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCIwLTIzIiksCiAgICAgICAgaGludENvbnRlbnQ6dm0uJHQoIigwfjIzSG91cikiKSwKICAgICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkhvdXJPZkRheSJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBzaG93SGludDp0cnVlLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBpc1dhcm46IGZhbHNlLAogICAgICAgIGhpbnRDb250ZW50OnZtLiR0KCIoMH41OU1pbikiKSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCIwLTU5IiksCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuTWludXRlT2ZIb3VyIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiRXhwb3J0QXV0b3BUZW1wbGF0ZSIpLAogICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgIGtleTogIkV4cG9ydEF1dG9wQnRuIiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBvbkV4cG9ydCh2bSwidGVtcGxhdGUiKTsKICAgICAgICB9LAogICAgICAgIGlzU2hvd1BvcG92ZXI6IHRydWUsCiAgICAgICAgYnV0dG9uTmFtZTogdm0uJHQoIkV4cG9ydCIpLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJDbGVhck1ENSIpLAogICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgIGtleTogIkNsZWFyTUQ1QnRuIiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBvbkNsZWFyTUQ1KHZtKTsKICAgICAgICB9LAogICAgICAgIGlzU2hvd1BvcG92ZXI6IHRydWUsCiAgICAgICAgYnV0dG9uTmFtZTogdm0uJHQoIkNsZWFyIiksCiAgICAgIH0sCiAgICBdLAogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVJlYm9vdFNjaGVkdWxlQ29udGVudCh2bSkgewogIGxldCBjb250ZW50ID0gewogICAga2V5OiAicmVib290U2NoZWR1bGUiLAogICAgdGl0bGU6IHZtLiR0KCJSZWJvb3RTY2hlZHVsZSIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIlJlYm9vdFNjaGVkdWxlIiksCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJTd2l0Y2giKSwKICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9NT0RFLk1vZGUiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9NT0RFLk1vZGUiXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiU2NoZWR1bGUiKSwKICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkRheU9mV2VlayIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkRheU9mV2VlayJdLAogICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5zY2hlZHVsZVdlZWtJdGVtcywKICAgICAgfSwKICAgICAgewogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgc2hvd0hpbnQ6IHRydWUsCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiMC0yMyIpLAogICAgICAgIGhpbnRDb250ZW50OnZtLiR0KCIoMH4yM0hvdXIpIiksCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSJdLAogICAgICB9LAogICAgXSwKICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVPdGhlcnNDb250ZW50KHZtKSB7CiAgbGV0IGNvbnRlbnQgPSB7CiAgICBrZXk6ICJvdGhlcnMiLAogICAgdGl0bGU6IHZtLiR0KCJPdGhlcnMiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJPdGhlcnMiKSwKICAgIGl0ZW1zOiBbCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkNvbmZpZ0ZpbGUiKSwKICAgICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsCiAgICAgICAga2V5OiAiaW1wb3J0Q29uZmlnRmlsZSIsCiAgICAgICAgYWNjZXB0RmlsZVR5cGU6ICIudGd6LC5jb25mLC5jZmciLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICBmaWxlRGF0YToge30sCiAgICAgICAgICBmaWxlTmFtZTogdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpLAogICAgICAgIH0sCiAgICAgICAgbW9kYWxUaXRsZTogdm0uJHQoIkF1dG9wRmlsZUhpbnQiKSwKICAgICAgICBpbXBvcnRCdG5OYW1lOiB2bS4kdCgiSW1wb3J0IiksCiAgICAgICAgZXhwb3J0QnRuTmFtZTogdm0uJHQoIkV4cG9ydCIpLAogICAgICAgIG1vZGFsQ29uZmlybU5hbWU6dm0uJHQoIkluc3RhbGwiKSwKICAgICAgICB1cGxvYWRGdW5jdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgb25JbXBvcnQodm0pOwogICAgICAgIH0sCiAgICAgICAgaXNTaG93RXhwb3J0OiB0cnVlLAogICAgICAgIG9uRXhwb3J0OiBmdW5jdGlvbigpewogICAgICAgICAgb25FeHBvcnQodm0sImNvbmZpZyIpOwogICAgICAgIH0sCiAgICAgICAgc2hvd0hpbnQ6IHRydWUsCiAgICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCIoIisiRW5jcnlwdGVkIisiKSIpLAogICAgICB9LAogICAgXSwKICB9OwogIHJldHVybiBjb250ZW50Owp9Cgo="},null]}