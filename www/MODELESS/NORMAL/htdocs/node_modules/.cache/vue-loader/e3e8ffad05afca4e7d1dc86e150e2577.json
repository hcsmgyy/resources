{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/PhoneCallFeature.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/PhoneCallFeature.vue","mtime":1600155105014},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js","mtime":1600155105338},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IHsKICBzaG93UmVxdWVzdFN1Y2Nlc3MsCiAgZGVlcENsb25lLAogIGdldEVuYWJsZVNlbGVjdEl0ZW1zLAogIGdldEl0ZW1CeUtleSwKICBjaGVja1JhbmdlT2ZOdW1iZXIsCiAgZ2V0SW5kZXhCeUtleSwKICBzaG93RXJyb3JJbmZvLAogIGNoZWNrRmlsZUZvcm1hdCwKICBzaG93V2FybmluZ0luZm8sCn0gZnJvbSAiQC9qcy9jb21tb24uanMiOwoKY29uc3QgcmV0dXJuQ29kZUl0ZW1zID0gWwogIHsga2V5OiA0MDQsIGxhYmVsOiAiNDA0KE5vdCBGb3VuZCkiIH0sCiAgeyBrZXk6IDQ4MCwgbGFiZWw6ICI0ODAoVGVtcG9yYXJpbHkgVW5hdmFpbGFibGUpIiB9LAogIHsga2V5OiA0ODYsIGxhYmVsOiAiNDg2KEJ1c3kgSGVyZSkiIH0sCiAgeyBrZXk6IDYwMywgbGFiZWw6ICI2MDMoRGVjbGluZSkiIH0sCl07CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ29tbW9uUGFnZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VkQ2ZnRGF0YToge30sCiAgICAgIHN1Ym1pdENmZ0RhdGE6IHt9LAogICAgICBhcGlEYXRhOiB7fSwKICAgICAgZGF0YTogewogICAgICAgIGdldERhdGFTdWNjZXNzOiBmYWxzZSwKICAgICAgfSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgZ2V0RGF0YSh0aGlzKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2U6IGZ1bmN0aW9uIChldmVudCkgewogICAgICBzZXRDaGFuZ2VkRGF0YSh0aGlzLCBldmVudCk7CiAgICAgIC8v55WM6Z2i5Y+Y5YyWCiAgICAgIGhhbmRsZXJQYWdlQ2hhbmdlZCh0aGlzKTsKICAgIH0sCiAgfSwKfTsKCmZ1bmN0aW9uIHNldENoYW5nZWREYXRhKHZtLCBldmVudCkgewogIGlmICgKICAgIGV2ZW50Lml0ZW1LZXkgPT0gIkNvbmZpZy5GZWF0dXJlcy5ETkQuU3RhcnRUaW1lIiB8fAogICAgZXZlbnQuaXRlbUtleSA9PSAiQ29uZmlnLkZlYXR1cmVzLkRORC5FbmRUaW1lIgogICkgewogICAgdm0uY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPQogICAgICBldmVudC5uZXdWYWwudG9EYXRlKCkuZ2V0SG91cnMoKSArCiAgICAgICI6IiArCiAgICAgIGV2ZW50Lm5ld1ZhbC50b0RhdGUoKS5nZXRNaW51dGVzKCk7CiAgfSBlbHNlIHsKICAgIHZtLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOwogIH0KfQoKZnVuY3Rpb24gaGFuZGxlclBhZ2VDaGFuZ2VkKHZtKSB7CiAgbGV0IHNjaGVkdWxlTW9kZUl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgICB2bS5kYXRhLAogICAgIkRORCIsCiAgICAiQ29uZmlnLkZlYXR1cmVzLkRORC5TY2hlZHVsZU1vZGUiCiAgKTsKICBsZXQgZG5kU3RhcnRUaW1lSXRlbSA9IGdldEl0ZW1CeUtleSgKICAgIHZtLmRhdGEsCiAgICAiRE5EIiwKICAgICJDb25maWcuRmVhdHVyZXMuRE5ELlN0YXJ0VGltZSIKICApOwogIGxldCBkbmRFbmRUaW1lSXRlbSA9IGdldEl0ZW1CeUtleSgKICAgIHZtLmRhdGEsCiAgICAiRE5EIiwKICAgICJDb25maWcuRmVhdHVyZXMuRE5ELkVuZFRpbWUiCiAgKTsKICBpZiAodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5GZWF0dXJlcy5ETkQuV2hvbGVEYXkiXSA9PSAiMSIpIHsKICAgIHNjaGVkdWxlTW9kZUl0ZW0uZGlzYWJsZWQgPSB0cnVlOwogICAgZG5kU3RhcnRUaW1lSXRlbS5kaXNhYmxlZCA9IHRydWU7CiAgICBkbmRFbmRUaW1lSXRlbS5kaXNhYmxlZCA9IHRydWU7CiAgfSBlbHNlIHsKICAgIHNjaGVkdWxlTW9kZUl0ZW0uZGlzYWJsZWQgPSBmYWxzZTsKICAgIGlmICh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5TY2hlZHVsZU1vZGUiXSA9PSAiMSIpIHsKICAgICAgZG5kU3RhcnRUaW1lSXRlbS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICBkbmRFbmRUaW1lSXRlbS5kaXNhYmxlZCA9IGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgZG5kU3RhcnRUaW1lSXRlbS5kaXNhYmxlZCA9IHRydWU7CiAgICAgIGRuZEVuZFRpbWVJdGVtLmRpc2FibGVkID0gdHJ1ZTsKICAgIH0KICB9CgogIGxldCBzdGFydFRpbWVNaW4gPQogICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5GZWF0dXJlcy5ETkQuU3RhcnRUaW1lIl0uc3BsaXQoIjoiKVswXSAqIDYwICsKICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRmVhdHVyZXMuRE5ELlN0YXJ0VGltZSJdLnNwbGl0KCI6IilbMV07CiAgbGV0IGVuZFRpbWVNaW4gPQogICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5GZWF0dXJlcy5ETkQuRW5kVGltZSJdLnNwbGl0KCI6IilbMF0gKiA2MCArCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5FbmRUaW1lIl0uc3BsaXQoIjoiKVsxXTsKICBpZiAocGFyc2VJbnQoc3RhcnRUaW1lTWluKSA+PSBwYXJzZUludChlbmRUaW1lTWluKSkgewogICAgZG5kRW5kVGltZUl0ZW0uc2hvd0hpbnQgPSB0cnVlOwogIH0gZWxzZSB7CiAgICBkbmRFbmRUaW1lSXRlbS5zaG93SGludCA9IGZhbHNlOwogIH0KfQoKZnVuY3Rpb24gc3VibWl0RGF0YSh2bSkgewogIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IHRydWU7CgogIGxldCByZXF1ZXN0RGF0YSA9IHsKICAgIHRhcmdldDogInBob25lQ2FsbEZlYXR1cmUiLAogICAgYWN0aW9uOiAic2V0IiwKICAgIGNvbmZpZ0RhdGE6IHZtLnN1Ym1pdENmZ0RhdGEsCiAgfTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOwogICAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldERhdGEodm0pIHsKICB2bS4kYXhpb3MuZ2V0KCJhcGkvcGhvbmVDYWxsRmVhdHVyZS9pbmZvIikudGhlbigocmVzcG9uc2UpID0+IHsKICAgIHZtLmdldERhdGFTdWNjZXNzID0gdHJ1ZTsKICAgIHZtLmFwaURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgdm0uY2hhbmdlZENmZ0RhdGEgPSBkZWVwQ2xvbmUocmVzcG9uc2UuZGF0YS5jb25maWdEYXRhKTsKICAgIGNyZWF0ZVBhZ2VEYXRhKHZtKTsKICAgIGhhbmRsZXJQYWdlQ2hhbmdlZCh2bSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldENvbW1pdERhdGEodm0pIHsKICB2bS5zdWJtaXRDZmdEYXRhID0ge307CiAgZm9yICh2YXIgY2hhbmdlZEtleSBpbiB2bS5jaGFuZ2VkQ2ZnRGF0YSkgewogICAgaWYgKHZtLmFwaURhdGEuY29uZmlnRGF0YVtjaGFuZ2VkS2V5XSAhPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XSkgewogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV07CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBjcmVhdGVQYWdlRGF0YSh2bSkgewogIHZtLmRhdGEgPSB7CiAgICBnZXREYXRhU3VjY2VzczogdHJ1ZSwKICAgIGJyZWFkQ3J1bWI6IHsKICAgICAgZmlyc3RUaXRsZTogdm0uJHQoIlBob25lIiksCiAgICAgIHNlY29uZFRpdGxlOiB2bS4kdCgiQ2FsbEZlYXR1cmUiKSwKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gKCkgewogICAgICBpZiAoIWNoZWNrQ29tbWl0RGF0YSh2bSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZ2V0Q29tbWl0RGF0YSh2bSk7CiAgICAgIHN1Ym1pdERhdGEodm0pOwogICAgfSwKICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7CiAgICAgIGdldERhdGEodm0pOwogICAgfSwKICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgY2FuY2VsTG9hZGluZzogZmFsc2UsCiAgICBjb250ZW50czogW10sCiAgfTsKCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZUZvcndhcmRDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZURORENvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlQXVkaW9DYWxsU2V0dGluZ0NvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlT3RoZXJzQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVBbGxvd2xpc3RzQ29udGVudCh2bSkpOwogIGdldEFsbG93VGFibGVEYXRhKHZtLCAxKTsKfQoKZnVuY3Rpb24gY3JlYXRlQWxsb3dsaXN0c0NvbnRlbnQodm0pIHsKICAvL+a3u+WKoOahhgogIGxldCBhZGRNb2RhbERhdGEgPSB7CiAgICB0aXRsZTogdm0uJHQoIkFkZCIpICsgIiAiICsgdm0uJHQoIkF1dG9BbnN3ZXJXaGl0ZWxpc3QiKSArICI+PiIsCiAgICBrZXk6IC0xLAogICAgY2FuY2VsQnRuTGFiZWw6IHZtLiR0KCJDYW5jZWwiKSwKICAgIHN1Ym1pdEJ0bkxhYmVsOiB2bS4kdCgiU3VibWl0IiksCiAgICB2aXNpYmxlOiBmYWxzZSwKICAgIHNob3dGb290ZXI6IHRydWUsCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJEZXZpY2VMb2NhdGlvbiIpLAogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAga2V5OiAiZGV2aWNlTG9jYXRpb24iLAogICAgICAgIHZhbHVlOiAiIiwKICAgICAgICBpc1dhcm46IGZhbHNlLAogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlZhbHVlRW1wdHlXYXJuaW5nIiksCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkRldmljZU51bWJlciIpLAogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAga2V5OiAiZGV2aWNlTnVtYmVyIiwKICAgICAgICB2YWx1ZTogIiIsCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJWYWx1ZUVtcHR5V2FybmluZyIpLAogICAgICB9LAogICAgXSwKICAgIG9uQ29uZmlybTogZnVuY3Rpb24gKCkgewogICAgICBvbkNoYW5nZUFsbG93TGlzdCh2bSk7CiAgICB9LAogIH07CgogIC8v5a+85YWl5qGGCiAgbGV0IGltcG9ydE1vZGFsRGF0YSA9IHsKICAgIHRpdGxlOiAiICIsCiAgICBjYW5jZWxCdG5MYWJlbDogdm0uJHQoIkNhbmNlbCIpLAogICAgc3VibWl0QnRuTGFiZWw6IHZtLiR0KCJJbXBvcnQiKSwKICAgIHNob3dGb290ZXI6IHRydWUsCiAgICB2aXNpYmxlOiBmYWxzZSwKICAgIGl0ZW1zOiBbCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkFsbG93TGlzdEltcG9ydEhpbnQiKSwKICAgICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsCiAgICAgICAga2V5OiAiaW1wb3J0IiwKICAgICAgICBhY2NlcHRGaWxlVHlwZTogIi54bWwsLmNzdiIsCiAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIGZpbGVEYXRhOiB7fSwKICAgICAgICAgIGZpbGVOYW1lOiB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIiksCiAgICAgICAgfSwKICAgICAgICBpbXBvcnRCdG5OYW1lOiB2bS4kdCgiUmVzZXQiKSwKICAgICAgfSwKICAgIF0sCiAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgpIHsKICAgICAgb25JbXBvcnQodm0pOwogICAgfSwKICAgIGNvbmZpcm1Mb2FkaW5nOiBmYWxzZSwKICB9OwoKICAvL+ihqOWktOaVsOaNrgogIGxldCB0YWJsZUhlYWREYXRhID0gewogICAgYWRkTW9kYWxEYXRhOiBhZGRNb2RhbERhdGEsCiAgICBpbXBvcnRNb2RhbERhdGE6IGltcG9ydE1vZGFsRGF0YSwKICAgIGV4cG9ydEl0ZW1zOiBbCiAgICAgIHsga2V5OiAieG1sIiwgbGFiZWw6ICJ4bWwiIH0sCiAgICAgIHsga2V5OiAiY3N2IiwgbGFiZWw6ICJjc3YiIH0sCiAgICBdLAogICAgb25FeHBvcnQ6ZnVuY3Rpb24odHlwZSl7CiAgICAgIG9uRXhwb3J0KHZtLCB0eXBlKSAKICAgIH0KICB9OwoKICAvL+ihqOWwvuaVsOaNrgogIGxldCB0YWJsZUZvb3RlckRhdGEgPSB7CiAgICBvbkRlbGV0ZTogZnVuY3Rpb24gKCkgewogICAgICBvbkRlbGV0ZUFsbG93TGlzdCh2bSwgInNlbGVjdCIpOwogICAgfSwKICAgIG9uRGVsZXRlQWxsOiBmdW5jdGlvbiAoKSB7CiAgICAgIG9uRGVsZXRlQWxsb3dMaXN0KHZtLCAiYWxsIik7CiAgICB9LAogICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiAocGFnZSkgewogICAgICBnZXRBbGxvd1RhYmxlRGF0YSh2bSwgcGFnZSk7CiAgICB9LAogICAgc3VtOiAwLAogICAgcGFnZU51bWJlcjogMTAsCiAgICBjdXJQYWdlOiAwLAogICAgZGVsZXRlRGlzYWJsZWQ6IHRydWUsCiAgICBkZWxldGVBbGxEaXNhYmxlZDogZmFsc2UsCiAgfTsKCiAgLy/ooajmoLzmlbDmja4KCiAgbGV0IGNvbnRlbnQgPSB7CiAgICBrZXk6ICJhbGxvd2xpc3QiLAogICAgdGl0bGU6IHZtLiR0KCJBdXRvQW5zd2VyV2hpdGVsaXN0IiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b0Fuc3dlcldoaXRlbGlzdCIpLAogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIHR5cGU6ICJ0YWJsZSIsCiAgICAgICAga2V5OiAiYWxsb3dsaXN0IiwKICAgICAgICBzaG93SGVhZDogdHJ1ZSwKICAgICAgICBzaG93Rm9vdGVyOiB0cnVlLAogICAgICAgIHNob3dSb3dTZWxlY3Rpb246IHRydWUsCiAgICAgICAgc2VsZWN0ZWRSb3dLZXlzOiBbXSwKICAgICAgICB0YWJsZUhlYWREYXRhOiB0YWJsZUhlYWREYXRhLAogICAgICAgIHRhYmxlRm9vdGVyRGF0YTogdGFibGVGb290ZXJEYXRhLAogICAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgICAgdGFibGVDb2x1bW5zOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHR5cGU6ICJsYWJlbCIsCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiSW5kZXgiKSwKICAgICAgICAgICAgZGF0YUluZGV4OiAiaW5kZXgiLAogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJpbmRleCIgfSwKICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgICAgICB3aWR0aDogIjEwJSIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAibGFiZWwiLAogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkRldmljZUxvY2F0aW9uIiksCiAgICAgICAgICAgIGRhdGFJbmRleDogImRldmljZUxvY2F0aW9uIiwKICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiZGV2aWNlTG9jYXRpb24iIH0sCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICAgICAgd2lkdGg6ICI0MCUiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJEZXZpY2VOdW1iZXIiKSwKICAgICAgICAgICAgZGF0YUluZGV4OiAiZGV2aWNlTnVtYmVyIiwKICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiZGV2aWNlTnVtYmVyIiB9LAogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgICAgIHdpZHRoOiAiNDAlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHR5cGU6ICJlZGl0IiwKICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJFZGl0TGFiZWwiKSwKICAgICAgICAgICAgZGF0YUluZGV4OiAiZWRpdCIsCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImVkaXQiIH0sCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICAgICAgd2lkdGg6ICIxMCUiLAogICAgICAgICAgICBvbkVkaXQ6IGZ1bmN0aW9uIChpbmRleCwga2V5KSB7CiAgICAgICAgICAgICAgbGV0IGFsbG93VGFibGVJdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgICAgICAgICAgdm0uZGF0YSwKICAgICAgICAgICAgICAgICJhbGxvd2xpc3QiLAogICAgICAgICAgICAgICAgImFsbG93bGlzdCIKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIC8vbG9jYXRpb24KICAgICAgICAgICAgICBhbGxvd1RhYmxlSXRlbS50YWJsZUhlYWREYXRhLmFkZE1vZGFsRGF0YS5pdGVtc1sKICAgICAgICAgICAgICAgIGdldEluZGV4QnlLZXkoCiAgICAgICAgICAgICAgICAgIGFsbG93VGFibGVJdGVtLnRhYmxlSGVhZERhdGEuYWRkTW9kYWxEYXRhLml0ZW1zLAogICAgICAgICAgICAgICAgICAiZGV2aWNlTG9jYXRpb24iCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgXS52YWx1ZSA9IGFsbG93VGFibGVJdGVtLnRhYmxlRGF0YVtpbmRleF0uZGV2aWNlTG9jYXRpb247CiAgICAgICAgICAgICAgLy9udW1iZXIKICAgICAgICAgICAgICBhbGxvd1RhYmxlSXRlbS50YWJsZUhlYWREYXRhLmFkZE1vZGFsRGF0YS5pdGVtc1sKICAgICAgICAgICAgICAgIGdldEluZGV4QnlLZXkoCiAgICAgICAgICAgICAgICAgIGFsbG93VGFibGVJdGVtLnRhYmxlSGVhZERhdGEuYWRkTW9kYWxEYXRhLml0ZW1zLAogICAgICAgICAgICAgICAgICAiZGV2aWNlTnVtYmVyIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIF0udmFsdWUgPSBhbGxvd1RhYmxlSXRlbS50YWJsZURhdGFbaW5kZXhdLmRldmljZU51bWJlcjsKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlT3RoZXJzQ29udGVudCh2bSkgewogIGxldCBjb250ZW50ID0gewogICAga2V5OiAib3RoZXJzIiwKICAgIHRpdGxlOiB2bS4kdCgiT3RoZXJzIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiT3RoZXJzIiksCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJSZXR1cm5Db2RlUmVmdXNlIiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLlJFSkVDVC5SZXR1cm5Db2RlIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuUkVKRUNULlJldHVybkNvZGUiXSwKICAgICAgICBzZWxlY3RJdGVtczogcmV0dXJuQ29kZUl0ZW1zLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJBdXRvQW5zd2VyRGVsYXkiKSwKICAgICAgICB0eXBlOiAiaW5wdXQiLAogICAgICAgIGtleTogIkNvbmZpZy5GZWF0dXJlcy5BVVRPQU5TV0VSLkRlbGF5IiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuQVVUT0FOU1dFUi5EZWxheSJdLAogICAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICAgIGhpbnRDb250ZW50OiAiKCAwfjMwIiArIHZtLiR0KCJTZWNvbmQiKSArICIgKSIsCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJXcm9uZ1ZhbHVlIiksCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkFuc3dlck1vZGUiKSwKICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICBrZXk6ICJDb25maWcuRmVhdHVyZXMuQU5TV0VSTU9ERS5Qcmlvcml0eSIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkFOU1dFUk1PREUuUHJpb3JpdHkiXSwKICAgICAgICBzZWxlY3RJdGVtczogWwogICAgICAgICAgeyBrZXk6IDAsIGxhYmVsOiB2bS4kdCgiQXVkaW8iKSB9LAogICAgICAgICAgeyBrZXk6IDEsIGxhYmVsOiB2bS4kdCgiVmlkZW8iKSB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkhhbmd1cEJ1c3lUb25lIiksCiAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICBrZXk6ICJDb25maWcuU2V0dGluZ3MuR0VORVJBTC5IdW5nVXBCdXN5VG9uZSIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLlNldHRpbmdzLkdFTkVSQUwuSHVuZ1VwQnVzeVRvbmUiXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiSW5kb29yQXV0b0Fuc3dlciIpLAogICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkFVVE9fQU5TV0VSLkluZG9vclRvSW5kb29yIiwKICAgICAgICB2YWx1ZToKICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkFVVE9fQU5TV0VSLkluZG9vclRvSW5kb29yIl0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkRpcmVjdElQQ2FsbCIpLAogICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAga2V5OiAiQ29uZmlnLlNldHRpbmdzLkdFTkVSQUwuRGlyZWN0SVAiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5HRU5FUkFMLkRpcmVjdElQIl0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkRpcmVjdElQQ2FsbFBvcnQiKSwKICAgICAgICB0eXBlOiAiaW5wdXQiLAogICAgICAgIGtleTogIkNvbmZpZy5TZXR0aW5ncy5HRU5FUkFMLkRpcmVjdElQUG9ydCIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLlNldHRpbmdzLkdFTkVSQUwuRGlyZWN0SVBQb3J0Il0sCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgICBoaW50Q29udGVudDogIiggMX42NTUzNSApIiwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlQXVkaW9DYWxsU2V0dGluZ0NvbnRlbnQodm0pIHsKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogImF1ZGlvQ2FsbFNldHRpbmciLAogICAgdGl0bGU6IHZtLiR0KCJBdWRpb0NhbGxTZXR0aW5nIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiQXVkaW9DYWxsU2V0dGluZyIpLAogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiUmVjZWl2ZUxpdmVTdHJlYW0iKSwKICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgIGtleTogIkNvbmZpZy5GZWF0dXJlcy5BVURJT19DQUxMLlJlY2VpdmVMaXZlU3RyZWFtIiwKICAgICAgICB2YWx1ZToKICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkFVRElPX0NBTEwuUmVjZWl2ZUxpdmVTdHJlYW0iXSwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlRm9yd2FyZENvbnRlbnQodm0pIHsKICBsZXQgbm9BbnN3ZXJSaW5nVGltZUl0ZW1zID0gW107CiAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMTsgaSsrKSB7CiAgICBub0Fuc3dlclJpbmdUaW1lSXRlbXMucHVzaCh7CiAgICAgIGtleTogaSAqIDYsCiAgICAgIGxhYmVsOiBpICogNiArICIgIiArIHZtLiR0KCJTZWNvbmQiKSwKICAgIH0pOwogIH0KCiAgbGV0IGNvbnRlbnQgPSB7CiAgICBrZXk6ICJmb3J3YXJkVHJhbnNmZXIiLAogICAgdGl0bGU6IHZtLiR0KCJGb3J3YXJkVHJhbnNmZXIiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJGb3J3YXJkVHJhbnNmZXIiKSwKICAgIGl0ZW1zOiBbCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkZvcndhcmRBbHdheXMiKSwKICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICBrZXk6ICJDb25maWcuRm9yd2FyZC5BTFdBWVMuRW5hYmxlIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRm9yd2FyZC5BTFdBWVMuRW5hYmxlIl0sCiAgICAgICAgc2VsZWN0SXRlbXM6IGdldEVuYWJsZVNlbGVjdEl0ZW1zKHZtKSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiVGFyZ2V0TnVtYmVyIiksCiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBrZXk6ICJDb25maWcuRm9yd2FyZC5BTFdBWVMuVGFyZ2V0IiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRm9yd2FyZC5BTFdBWVMuVGFyZ2V0Il0sCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJGb3J3YXJkVGFyZ2V0V2FybmluZyIpLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJGb3J3YXJkQnVzeSIpLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIGtleTogIkNvbmZpZy5Gb3J3YXJkLkJVU1kuRW5hYmxlIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRm9yd2FyZC5CVVNZLkVuYWJsZSJdLAogICAgICAgIHNlbGVjdEl0ZW1zOiBnZXRFbmFibGVTZWxlY3RJdGVtcyh2bSksCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlRhcmdldE51bWJlciIpLAogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkZvcndhcmQuQlVTWS5UYXJnZXQiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLkJVU1kuVGFyZ2V0Il0sCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJGb3J3YXJkVGFyZ2V0V2FybmluZyIpLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJGb3J3YXJkTm9BbnN3ZXIiKSwKICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICBrZXk6ICJDb25maWcuRm9yd2FyZC5USU1FT1VULkVuYWJsZSIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZvcndhcmQuVElNRU9VVC5FbmFibGUiXSwKICAgICAgICBzZWxlY3RJdGVtczogZ2V0RW5hYmxlU2VsZWN0SXRlbXModm0pLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJUYXJnZXROdW1iZXIiKSwKICAgICAgICB0eXBlOiAiaW5wdXQiLAogICAgICAgIGtleTogIkNvbmZpZy5Gb3J3YXJkLlRJTUVPVVQuVGFyZ2V0IiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRm9yd2FyZC5USU1FT1VULlRhcmdldCJdLAogICAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiRm9yd2FyZFRhcmdldFdhcm5pbmciKSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiTm9BbnN3ZXJSaW5nVGltZSIpLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIGtleTogIkNvbmZpZy5Gb3J3YXJkLlRJTUVPVVQuVGltZW91dCIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZvcndhcmQuVElNRU9VVC5UaW1lb3V0Il0sCiAgICAgICAgc2VsZWN0SXRlbXM6IG5vQW5zd2VyUmluZ1RpbWVJdGVtcywKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlRE5EQ29udGVudCh2bSkgewogIGxldCBkbmRTdGFydFRpbWUgPSBuZXcgRGF0ZSgpOwogIGRuZFN0YXJ0VGltZS5zZXRIb3VycygKICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5TdGFydFRpbWUiXS5zcGxpdCgiOiIpWzBdCiAgKTsKICBkbmRTdGFydFRpbWUuc2V0TWludXRlcygKICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5TdGFydFRpbWUiXS5zcGxpdCgiOiIpWzFdCiAgKTsKCiAgbGV0IGRuZEVuZFRpbWUgPSBuZXcgRGF0ZSgpOwogIGRuZEVuZFRpbWUuc2V0SG91cnMoCiAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5GZWF0dXJlcy5ETkQuRW5kVGltZSJdLnNwbGl0KCI6IilbMF0KICApOwogIGRuZEVuZFRpbWUuc2V0TWludXRlcygKICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5FbmRUaW1lIl0uc3BsaXQoIjoiKVsxXQogICk7CgogIGxldCBjb250ZW50ID0gewogICAga2V5OiAiRE5EIiwKICAgIHRpdGxlOiB2bS4kdCgiRE5EIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiRE5EIiksCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJXaG9sZURheSIpLAogICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkRORC5XaG9sZURheSIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkRORC5XaG9sZURheSJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJETkRTY2hlZHVsZSIpLAogICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkRORC5TY2hlZHVsZU1vZGUiLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuRE5ELlNjaGVkdWxlTW9kZSJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJETkRTdGFydFRpbWUiKSwKICAgICAgICB0eXBlOiAidGltZSIsCiAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkRORC5TdGFydFRpbWUiLAogICAgICAgIHRpbWVGb3JtYXQ6ICJISDptbSIsCiAgICAgICAgdmFsdWU6IG1vbWVudChkbmRTdGFydFRpbWUpLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJETkRFbmRUaW1lIiksCiAgICAgICAgdHlwZTogInRpbWUiLAogICAgICAgIGtleTogIkNvbmZpZy5GZWF0dXJlcy5ETkQuRW5kVGltZSIsCiAgICAgICAgdGltZUZvcm1hdDogIkhIOm1tIiwKICAgICAgICB2YWx1ZTogbW9tZW50KGRuZEVuZFRpbWUpLAogICAgICAgIHNob3dIaW50OiB0cnVlLAogICAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiTmV4dERheSIpLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJSZXR1cm5Db2RlRE5EIiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkZlYXR1cmVzLkRORC5SZXR1cm5Db2RlIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRmVhdHVyZXMuRE5ELlJldHVybkNvZGUiXSwKICAgICAgICBzZWxlY3RJdGVtczogcmV0dXJuQ29kZUl0ZW1zLAogICAgICB9LAogICAgXSwKICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjaGVja0NvbW1pdERhdGEodm0pIHsKICByZXR1cm4gY2hlY2tGb3J3YXJkRGF0YSh2bSkgJiYgY2hlY2tPdGhlcnNEYXRhKHZtKTsKfQoKZnVuY3Rpb24gY2hlY2tPdGhlcnNEYXRhKHZtKSB7CiAgbGV0IHN1Y2Nlc3MgPSB0cnVlOwoKICBpZiAoCiAgICAhY2hlY2tSYW5nZU9mTnVtYmVyKAogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZlYXR1cmVzLkFVVE9BTlNXRVIuRGVsYXkiXSwKICAgICAgMCwKICAgICAgMzAKICAgICkgfHwKICAgICIiID09IHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRmVhdHVyZXMuQVVUT0FOU1dFUi5EZWxheSJdCiAgKSB7CiAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgKICAgICAgdm0uZGF0YSwKICAgICAgIm90aGVycyIsCiAgICAgICJDb25maWcuRmVhdHVyZXMuQVVUT0FOU1dFUi5EZWxheSIKICAgICk7CiAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQoKICBsZXQgZGlyZWN0SXBQb3J0aXRlbSA9IGdldEl0ZW1CeUtleSgKICAgIHZtLmRhdGEsCiAgICAib3RoZXJzIiwKICAgICJDb25maWcuU2V0dGluZ3MuR0VORVJBTC5EaXJlY3RJUFBvcnQiCiAgKTsKICBpZiAoCiAgICAhY2hlY2tSYW5nZU9mTnVtYmVyKAogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLlNldHRpbmdzLkdFTkVSQUwuRGlyZWN0SVBQb3J0Il0sCiAgICAgIDEsCiAgICAgIDY1NTM1CiAgICApCiAgKSB7CiAgICBkaXJlY3RJcFBvcnRpdGVtLmlzV2FybiA9IHRydWU7CiAgICBkaXJlY3RJcFBvcnRpdGVtLndhcm5MYWJlbCA9IHZtLiR0KCJXcm9uZ1ZhbHVlIik7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQogIGlmICgKICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuU2V0dGluZ3MuR0VORVJBTC5EaXJlY3RJUFBvcnQiXSA9PSAiNTA2MiIgfHwKICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuU2V0dGluZ3MuR0VORVJBTC5EaXJlY3RJUFBvcnQiXSA9PSAiNTA2MyIKICApIHsKICAgIGRpcmVjdElwUG9ydGl0ZW0uaXNXYXJuID0gdHJ1ZTsKICAgIGRpcmVjdElwUG9ydGl0ZW0ud2FybkxhYmVsID0gdm0uJHQoIlNhbWVTaXBQb3J0RXJyIik7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQogIHJldHVybiBzdWNjZXNzOwp9CgpmdW5jdGlvbiBjaGVja0ZvcndhcmREYXRhKHZtKSB7CiAgbGV0IHN1Y2Nlc3MgPSB0cnVlOwogIGlmICgKICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRm9yd2FyZC5BTFdBWVMuRW5hYmxlIl0gPT0gIjEiICYmCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZvcndhcmQuQUxXQVlTLlRhcmdldCJdID09ICIiCiAgKSB7CiAgICBsZXQgaXRlbSA9IDcodm0uZGF0YSwgImZvcndhcmRUcmFuc2ZlciIsICJDb25maWcuRm9yd2FyZC5BTFdBWVMuVGFyZ2V0Iik7CiAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQogIGlmICgKICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRm9yd2FyZC5CVVNZLkVuYWJsZSJdID09ICIxIiAmJgogICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLkJVU1kuVGFyZ2V0Il0gPT0gIiIKICApIHsKICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICB2bS5kYXRhLAogICAgICAiZm9yd2FyZFRyYW5zZmVyIiwKICAgICAgIkNvbmZpZy5Gb3J3YXJkLkJVU1kuVGFyZ2V0IgogICAgKTsKICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsKICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICB9CiAgaWYgKAogICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Gb3J3YXJkLlRJTUVPVVQuRW5hYmxlIl0gPT0gIjEiICYmCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkZvcndhcmQuVElNRU9VVC5UYXJnZXQiXSA9PSAiIgogICkgewogICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoCiAgICAgIHZtLmRhdGEsCiAgICAgICJmb3J3YXJkVHJhbnNmZXIiLAogICAgICAiQ29uZmlnLkZvcndhcmQuVElNRU9VVC5UYXJnZXQiCiAgICApOwogICAgaXRlbS5pc1dhcm4gPSB0cnVlOwogICAgc3VjY2VzcyA9IGZhbHNlOwogIH0KICByZXR1cm4gc3VjY2VzczsKfQoKZnVuY3Rpb24gZ2V0QWxsb3dUYWJsZURhdGEodm0sIHBhZ2UpIHsKICB2bS4kYXhpb3MuZ2V0KCJhcGkvcGhvbmVDYWxsRmVhdHVyZS9nZXQ/cGFnZT0iICsgcGFnZSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgIGxldCB0YWJsZURhdGEgPSBbXTsKICAgIGxldCBkYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmFsbG93TGlzdC5sZW5ndGg7IGkrKykgewogICAgICBsZXQgaXRlbSA9IHsKICAgICAgICBrZXk6IGRhdGEuYWxsb3dMaXN0W2ldLmlkLAogICAgICAgIGluZGV4OiBpICsgMSwKICAgICAgICBkZXZpY2VMb2NhdGlvbjogZGF0YS5hbGxvd0xpc3RbaV0ubG9jYXRpb24sCiAgICAgICAgZGV2aWNlTnVtYmVyOiBkYXRhLmFsbG93TGlzdFtpXS5udW1iZXIsCiAgICAgICAgZWRpdDogaSwKICAgICAgfTsKICAgICAgdGFibGVEYXRhLnB1c2goaXRlbSk7CiAgICB9CiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKS50YWJsZURhdGEgPSB0YWJsZURhdGE7CiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKS50YWJsZUZvb3RlckRhdGEuc3VtID0KICAgICAgZGF0YS5zdW07CiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKS50YWJsZUZvb3RlckRhdGEucGFnZU51bWJlciA9CiAgICAgIGRhdGEucGFnZU51bTsKICAgIGdldEl0ZW1CeUtleSgKICAgICAgdm0uZGF0YSwKICAgICAgImFsbG93bGlzdCIsCiAgICAgICJhbGxvd2xpc3QiCiAgICApLnRhYmxlRm9vdGVyRGF0YS5jdXJQYWdlID0gcGFnZTsKICAgIGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYWxsb3dsaXN0IiwgImFsbG93bGlzdCIpLnNlbGVjdGVkUm93S2V5cyA9IFtdOwogIH0pOwp9CgpmdW5jdGlvbiBvbkNoYW5nZUFsbG93TGlzdCh2bSkgewogIGxldCBhZGRNb2RhbERhdGEgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImFsbG93bGlzdCIsICJhbGxvd2xpc3QiKQogICAgLnRhYmxlSGVhZERhdGEuYWRkTW9kYWxEYXRhOwogIGxldCBkZXZpY2VMb2FjdGlvbiA9CiAgICBhZGRNb2RhbERhdGEuaXRlbXNbZ2V0SW5kZXhCeUtleShhZGRNb2RhbERhdGEuaXRlbXMsICJkZXZpY2VMb2NhdGlvbiIpXTsKICBsZXQgZGV2aWNlTnVtYmVyID0KICAgIGFkZE1vZGFsRGF0YS5pdGVtc1tnZXRJbmRleEJ5S2V5KGFkZE1vZGFsRGF0YS5pdGVtcywgImRldmljZU51bWJlciIpXTsKICBsZXQgaWQgPSBhZGRNb2RhbERhdGEua2V5OwoKICBsZXQgZXJyRmxhZyA9IGZhbHNlOwogIGlmIChkZXZpY2VMb2FjdGlvbi52YWx1ZSA9PSAiIikgewogICAgZGV2aWNlTG9hY3Rpb24uaXNXYXJuID0gdHJ1ZTsKICAgIGVyckZsYWcgPSB0cnVlOwogIH0KCiAgaWYgKGRldmljZU51bWJlci52YWx1ZSA9PSAiIikgewogICAgZGV2aWNlTnVtYmVyLmlzV2FybiA9IHRydWU7CiAgICBkZXZpY2VOdW1iZXIud2FybkxhYmVsID0gdm0uJHQoIlZhbHVlRW1wdHlXYXJuaW5nIik7CiAgICBlcnJGbGFnID0gdHJ1ZTsKICB9CgogIGlmIChlcnJGbGFnKSB7CiAgICByZXR1cm47CiAgfQoKICBsZXQgZGF0YSA9IHsKICAgIGxvY2F0aW9uOiBkZXZpY2VMb2FjdGlvbi52YWx1ZSwKICAgIG51bWJlcjogZGV2aWNlTnVtYmVyLnZhbHVlLAogICAgaWQ6IGlkLAogIH07CgogIGxldCBhY3Rpb24gPSBpZCA+PSAwID8gImVkaXQiIDogImFkZCI7CgogIGxldCByZXF1ZXN0RGF0YSA9IHsKICAgIHRhcmdldDogInBob25lQ2FsbEZlYXR1cmUiLAogICAgYWN0aW9uOiBhY3Rpb24sCiAgICBkYXRhOiBkYXRhLAogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgbGV0IHJldCA9IHJlc3BvbnNlLmRhdGEucmV0Y29kZTsKICAgIGlmIChyZXQgPT0gMCkgewogICAgICBkZXZpY2VMb2FjdGlvbi52YWx1ZSA9ICIiOwogICAgICBkZXZpY2VOdW1iZXIudmFsdWUgPSAiIjsKICAgICAgbGV0IHBhZ2UgPSAwOwogICAgICBsZXQgdGFibGVJdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhbGxvd2xpc3QiLCAiYWxsb3dsaXN0Iik7CiAgICAgIGlmIChhY3Rpb24gPT0gImFkZCIpIHsKICAgICAgICAvL+mhtemdouaVsOaNruWPmOWMlgogICAgICAgIHBhZ2UgPSBNYXRoLmNlaWwoCiAgICAgICAgICAodGFibGVJdGVtLnRhYmxlRm9vdGVyRGF0YS5zdW0gKyAxKSAvCiAgICAgICAgICAgIHRhYmxlSXRlbS50YWJsZUZvb3RlckRhdGEucGFnZU51bWJlcgogICAgICAgICk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFnZSA9IHRhYmxlSXRlbS50YWJsZUZvb3RlckRhdGEuY3VyUGFnZTsKICAgICAgfQogICAgICBnZXRBbGxvd1RhYmxlRGF0YSh2bSwgcGFnZSk7CiAgICAgIC8v5YWz6Zet56qX5Y+j5bm25bGV56S65oiQ5YqfCiAgICAgIGFkZE1vZGFsRGF0YS52aXNpYmxlID0gZmFsc2U7CiAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSk7CiAgICB9IGVsc2UgaWYgKHJldCA9PSA3KSB7CiAgICAgIGRldmljZU51bWJlci5pc1dhcm4gPSB0cnVlOwogICAgICBkZXZpY2VOdW1iZXIud2FybkxhYmVsID0gdm0uJHQoIldoaWxlTnVtYmVyQWxyZWFkeUV4aXN0Iik7CiAgICB9IGVsc2UgewogICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiV2hpbGVMaXN0QWRkRXJyIikpOwogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBvbkRlbGV0ZUFsbG93TGlzdCh2bSwgdHlwZSkgewogIGlmICgKICAgICFjb25maXJtKAogICAgICB0eXBlID09ICJhbGwiID8gdm0uJHQoIkRlbGV0ZUFsbENvbmZpcm0iKSA6IHZtLiR0KCJEZWxldGVTZWxlY3RlZENvbmZpcm0iKQogICAgKQogICkgewogICAgcmV0dXJuOwogIH0KICBsZXQgc2VsZWN0ZWRSb3dLZXlzID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhbGxvd2xpc3QiLCAiYWxsb3dsaXN0IikKICAgIC5zZWxlY3RlZFJvd0tleXM7CiAgbGV0IHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVDYWxsRmVhdHVyZSIsCiAgICBhY3Rpb246ICJkZWwiLAogICAgZGF0YTogewogICAgICB0eXBlOiB0eXBlLAogICAgICBpZHM6IHNlbGVjdGVkUm93S2V5cywKICAgIH0sCiAgfTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJEZWxldGVBbGxvd0xpc3RTdWNjZXNzIikpOwogICAgaWYgKHR5cGUgIT0gImFsbCIpIHsKICAgICAgbGV0IHRhYmxlRm9vdGVyRGF0YSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYWxsb3dsaXN0IiwgImFsbG93bGlzdCIpCiAgICAgICAgLnRhYmxlRm9vdGVyRGF0YTsKICAgICAgbGV0IHN1bVBhZ2UgPSBNYXRoLmNlaWwoCiAgICAgICAgKHRhYmxlRm9vdGVyRGF0YS5zdW0gLSBzZWxlY3RlZFJvd0tleXMubGVuZ3RoKSAvCiAgICAgICAgICB0YWJsZUZvb3RlckRhdGEucGFnZU51bWJlcgogICAgICApOwogICAgICBzdW1QYWdlID0gc3VtUGFnZSA9PSAwID8gMSA6IHN1bVBhZ2U7CiAgICAgIGxldCBwYWdlID0KICAgICAgICB0YWJsZUZvb3RlckRhdGEuY3VyUGFnZSA+PSBzdW1QYWdlID8gc3VtUGFnZSA6IHRhYmxlRm9vdGVyRGF0YS5jdXJQYWdlOwogICAgICBnZXRBbGxvd1RhYmxlRGF0YSh2bSwgcGFnZSk7CiAgICB9IGVsc2UgewogICAgICBnZXRBbGxvd1RhYmxlRGF0YSh2bSwgMSk7CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uRXhwb3J0KHZtLCB0eXBlKSB7CiAgbGV0IHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVDYWxsRmVhdHVyZSIsCiAgICBhY3Rpb246ICJleHBvcnQiLAogICAgZGF0YTogewogICAgICB0eXBlOiB0eXBlLAogICAgfSwKICB9OwogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSwgdm0uJHQoIkV4cG9ydFN1Y2Nlc3MiKSk7CiAgICBsZXQgYWRkcmVzcyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5hZGRyZXNzOwogICAgd2luZG93Lm9wZW4oYWRkcmVzcyk7CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uSW1wb3J0KHZtKSB7CiAgbGV0IG1vZGFsID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhbGxvd2xpc3QiLCAiYWxsb3dsaXN0IikudGFibGVIZWFkRGF0YQogICAgLmltcG9ydE1vZGFsRGF0YTsKICBsZXQgaXRlbSA9IG1vZGFsLml0ZW1zW2dldEluZGV4QnlLZXkobW9kYWwuaXRlbXMsICJpbXBvcnQiKV07CiAgbGV0IGZpbGVOYW1lID0gaXRlbS52YWx1ZS5maWxlTmFtZTsKICBpZiAoZmlsZU5hbWUgPT0gIiIgfHwgZmlsZU5hbWUgPT0gdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpKSB7CiAgICByZXR1cm47CiAgfQoKICBtb2RhbC5jb25maXJtTG9hZGluZyA9IHRydWU7CiAgY29uc3QgdXBEYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgdXBEYXRhLmFwcGVuZCgiZmlsZSIsIGl0ZW0udmFsdWUuZmlsZURhdGEpOwogIGF4aW9zCiAgICAucG9zdCgiYXBpL3Bob25lQ2FsbEZlYXR1cmUvaW1wb3J0IiwgdXBEYXRhLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiLAogICAgICB9LAogICAgfSkKICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gLTEpIHsKICAgICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiV2hpdGVMaXN0SW1wb3J0RmFpbCIpKTsKICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IDIpIHsKICAgICAgICBzaG93V2FybmluZ0luZm8odm0sIHZtLiR0KCJXaGl0ZUxpc3RJbXBvcnRFeGlzdFdhcm5pbmciKSk7CiAgICAgICAgaXRlbS52YWx1ZS5maWxlTmFtZSA9IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKTsKICAgICAgICBpdGVtLnZhbHVlLmZpbGVEYXRhID0ge307CiAgICAgICAgbW9kYWwudmlzaWJsZSA9IGZhbHNlOwogICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gMCkgewogICAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSwgdm0uJHQoIldoaXRlTGlzdEltcG9ydFN1Y2Nlc3MiKSk7CiAgICAgICAgaXRlbS52YWx1ZS5maWxlTmFtZSA9IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKTsKICAgICAgICBpdGVtLnZhbHVlLmZpbGVEYXRhID0ge307CiAgICAgICAgbW9kYWwudmlzaWJsZSA9IGZhbHNlOwogICAgICB9CiAgICAgIG1vZGFsLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2U7CiAgICAgIGxldCBwYWdlID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJhbGxvd2xpc3QiLCAiYWxsb3dsaXN0IikudGFibGVGb290ZXJEYXRhCiAgICAgICAgLmN1clBhZ2U7CiAgICAgIGdldEFsbG93VGFibGVEYXRhKHZtLCBwYWdlKTsKICAgIH0pOwp9Cg=="},null]}