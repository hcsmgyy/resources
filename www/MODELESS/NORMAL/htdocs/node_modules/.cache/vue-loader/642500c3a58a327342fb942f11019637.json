{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/AccountAdvanced.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/AccountAdvanced.vue","mtime":1600155105014},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js","mtime":1600155105338},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCB7IAogIHNob3dSZXF1ZXN0U3VjY2VzcywKICBkZWVwQ2xvbmUsCiAgZ2V0SW5kZXhCeUtleSwKICBpc1BvcnQsCiAgY2hlY2tSYW5nZU9mTnVtYmVyLAogIG5vdENvbnRhaW5JbnZhbGlkLAogIGlzUG9ydFVzZWQKfSBmcm9tICJAL2pzL2NvbW1vbi5qcyI7CmltcG9ydCB7IGdldEl0ZW1CeUtleSB9IGZyb20gJy4uL2pzL2NvbW1vbic7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ29tbW9uUGFnZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VkQ2ZnRGF0YTp7fSwKICAgICAgc3VibWl0Q2ZnRGF0YTp7fSwKICAgICAgYXBpRGF0YToge30sCiAgICAgIGRhdGE6IHsKICAgICAgICBnZXREYXRhU3VjY2VzczogZmFsc2UsCiAgICAgIH0sCiAgICAgIEN1cnJlbnRBY2NvdW50OiAxLAogICAgICBhdWRpb0NvZGVjc0l0ZW1zOltdLAogICAgICBhdWRpb0NvZGVjc1RhcmdldEl0ZW1zOltdLAogICAgICB2aWRlb0NvZGVjc0l0ZW1zOltdLAogICAgICB2aWRlb0NvZGVjc1RhcmdldEl0ZW1zOltdLAogICAgICBjb2RlQml0UmF0ZUl0ZW1zMTpbCiAgICAgICAgeyBrZXk6ICc2NCcsIGxhYmVsOiAnNjQnIH0sCiAgICAgICAgeyBrZXk6ICcxMjgnLCBsYWJlbDogJzEyOCcgfSwKICAgICAgXSwKICAgICAgY29kZUJpdFJhdGVJdGVtczI6WwogICAgICAgIHsga2V5OiAnMTI4JywgbGFiZWw6ICcxMjgnIH0sCiAgICAgICAgeyBrZXk6ICcyNTYnLCBsYWJlbDogJzI1NicgfSwKICAgICAgICB7IGtleTogJzMyMCcsIGxhYmVsOiAnMzIwJyB9LAogICAgICAgIHsga2V5OiAnNTEyJywgbGFiZWw6ICc1MTInIH0sCiAgICAgIF0sCiAgICAgIGNvZGVCaXRSYXRlSXRlbXMzOlsKICAgICAgICB7IGtleTogJzUxMicsIGxhYmVsOiAnNTEyJyB9LAogICAgICAgIHsga2V5OiAnNzY4JywgbGFiZWw6ICc3NjgnIH0sCiAgICAgICAgeyBrZXk6ICcxMDI0JywgbGFiZWw6ICcxMDI0JyB9LAogICAgICAgIHsga2V5OiAnMTUzNicsIGxhYmVsOiAnMTUzNicgfSwKICAgICAgICB7IGtleTogJzIwNDgnLCBsYWJlbDogJzIwNDgnIH0sCiAgICAgIF0sCiAgICAgIGNvZGVQYXlMb2FkSXRlbXMxOltdLAogICAgICBjb2RlUGF5TG9hZEl0ZW1zMjpbXSwKICAgICAgYXVkaW9Db2RlY3NFbmFibGVJdGVtczpbXSwKICAgICAgYXVkaW9Db2RlY3NEaXNhYmxlSXRlbXM6W10sCiAgICAgIHZpZGVvQ29kZWNzRW5hYmxlSXRlbXM6W10sCiAgICAgIHZpZGVvQ29kZWNzRGlzYWJsZUl0ZW1zOltdLAogICAgICBPUFVTRW5hYmxlOiIiLAogICAgICBPUFVTRGlzYWJsZToiIiwKICAgICAgdXNlZFBvcnRJdGVtczpbXSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgZm9yICh2YXIgaT05MDsgaTwxMjA7IGkrKyl7CiAgICAgIGxldCBpdGVtMSA9IHsia2V5IjogKGktODkpLCAibGFiZWwiOiBpfTsKICAgICAgbGV0IGl0ZW0yID0geyJrZXkiOiAoaS05MCksICJsYWJlbCI6IGl9OwogICAgICB0aGlzLmNvZGVQYXlMb2FkSXRlbXMxLnB1c2goaXRlbTEpOwogICAgICB0aGlzLmNvZGVQYXlMb2FkSXRlbXMyLnB1c2goaXRlbTIpOwogICAgfQogICAgZ2V0RGF0YSh0aGlzLHRoaXMuQ3VycmVudEFjY291bnQpOwogIH0sCiAgbWV0aG9kczogewogICAgb25Db21tb25QYWdlRGF0YUNoYW5nZTogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGlmKGV2ZW50Lml0ZW1LZXkgPT0gImN1cnJlbnRBY2NvdW50Iil7CiAgICAgICAgdGhpcy5DdXJyZW50QWNjb3VudCA9IGV2ZW50Lm5ld1ZhbDsKICAgICAgfSBlbHNlIGlmKGV2ZW50Lml0ZW1LZXkgPT0gImF1ZGlvQ29kZWNzSXRlbXMiKXsKICAgICAgICB0aGlzLmF1ZGlvQ29kZWNzVGFyZ2V0SXRlbXMgPSBldmVudC5uZXdWYWw7CiAgICAgIH0gZWxzZSBpZihldmVudC5pdGVtS2V5ID09ICJ2aWRlb0NvZGVjc0l0ZW1zIil7CiAgICAgICAgdGhpcy52aWRlb0NvZGVjc1RhcmdldEl0ZW1zID0gZXZlbnQubmV3VmFsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7CiAgICAgIH0KICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgQ3VycmVudEFjY291bnQobmV3VmFsLCBvbGRWYWwpewogICAgICBnZXREYXRhKHRoaXMsbmV3VmFsKTsKICAgIH0sCiAgICBjaGFuZ2VkQ2ZnRGF0YTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpewogICAgICAgIC8v55uR5ZCsQ29kZeWPmOWMluagvOW8jwogICAgICAgIENoYW5nZUNvZGVjUmVzb2x1dGlvbk9wdGlvbih0aGlzLCJ2aWRlb0NvZGVjIiwiQ29uZmlnLkFjY291bnQiK3RoaXMuQ3VycmVudEFjY291bnQrIi5WaWRlbzAxLk1heEJSIixuZXdWYWxbJ0NvbmZpZy5BY2NvdW50Jyt0aGlzLkN1cnJlbnRBY2NvdW50KycuVmlkZW8wMS5Qcm9maWxlTGV2ZWwnXSk7CiAgICAgICAgQ2hhbmdlQ29kZWNSZXNvbHV0aW9uT3B0aW9uKHRoaXMsInZpZGVvQ29kZWMiLCJDb25maWcuQWNjb3VudCIrdGhpcy5DdXJyZW50QWNjb3VudCsiLlZpZGVvMDAuTWF4QlIiLG5ld1ZhbFsnQ29uZmlnLkFjY291bnQnK3RoaXMuQ3VycmVudEFjY291bnQrJy5WaWRlbzAwLlByb2ZpbGVMZXZlbCddKTsKICAgICAgICBDaGFuZ2VDb2RlY1Jlc29sdXRpb25PcHRpb24odGhpcywidmlkZW9Db2RlYyIsIkNvbmZpZy5BY2NvdW50Iit0aGlzLkN1cnJlbnRBY2NvdW50KyIuVmlkZW8wMy5NYXhCUiIsbmV3VmFsWydDb25maWcuQWNjb3VudCcrdGhpcy5DdXJyZW50QWNjb3VudCsnLlZpZGVvMDMuUHJvZmlsZUxldmVsJ10pOwoKICAgICAgICAvL+ebkeWQrE1XSSBTdWJzY3JpYmUgUGVyaW9kCiAgICAgICAgbGV0IGNvbnRlbnRLZXlJbmRleCA9IGdldEluZGV4QnlLZXkodGhpcy5kYXRhLmNvbnRlbnRzLCJzdWJzY3JpYmUiKTsKICAgICAgICBsZXQgaXRlbUtleUluZGV4ID0gZ2V0SW5kZXhCeUtleSh0aGlzLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtcywiQ29uZmlnLkFjY291bnQiK3RoaXMuQ3VycmVudEFjY291bnQrIi5TVUJTQ1JJQkUuU3Vic2NyaWJlTVdJRXhwaXJlIik7ICAKICAgICAgICBpZihuZXdWYWxbJ0NvbmZpZy5BY2NvdW50Jyt0aGlzLkN1cnJlbnRBY2NvdW50KycuU1VCU0NSSUJFLlN1YnNyaWJlTVdJJ10gPT0gMCl7CiAgICAgICAgICB0aGlzLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICB9IGVsc2V7CiAgICAgICAgICB0aGlzLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvL+ebkeWQrERUTUYgVHlwZQogICAgICAgIGNvbnRlbnRLZXlJbmRleCA9IGdldEluZGV4QnlLZXkodGhpcy5kYXRhLmNvbnRlbnRzLCJkdG1mIik7CiAgICAgICAgaXRlbUtleUluZGV4ID0gZ2V0SW5kZXhCeUtleSh0aGlzLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtcywiQ29uZmlnLkFjY291bnQiK3RoaXMuQ3VycmVudEFjY291bnQrIi5EVE1GLkluZm9UeXBlIik7ICAKICAgICAgICBpZihuZXdWYWxbJ0NvbmZpZy5BY2NvdW50Jyt0aGlzLkN1cnJlbnRBY2NvdW50KycuRFRNRi5UeXBlJ10gPj0gMyl7CiAgICAgICAgICB0aGlzLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgfSBlbHNlewogICAgICAgICAgdGhpcy5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbaXRlbUtleUluZGV4XS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgfSxkZWVwOiB0cnVlCiAgICB9LAogIH0KfTsKCmZ1bmN0aW9uIGdldERhdGEodm0sYWNjb3VudElkKSB7CiAgdm0uJGF4aW9zLmdldCgiYXBpL2FjY291bnRBZHZhbmNlZC9pbmZvP2FjY291bnRJZD0iK2FjY291bnRJZCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgIHZtLmdldERhdGFTdWNjZXNzID0gdHJ1ZTsKICAgIHZtLmFwaURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgdm0uY2hhbmdlZENmZ0RhdGEgPSBkZWVwQ2xvbmUocmVzcG9uc2UuZGF0YS5jb25maWdEYXRhKTsKCiAgICB2bS5BY2NvdW50SXRlbXMgPSBbXTsKICAgIGZvcih2YXIgaSA9IDE7IGkgPD0gdm0uYXBpRGF0YS5kYXRhLkFjY291bnQuQWNjb3VudE51bWJlcjsgaSsrKXsKICAgICAgbGV0IGl0ZW0gPSB7ImtleSI6IGksICJsYWJlbCI6ICJBY2NvdW50IitpfTsKICAgICAgdm0uQWNjb3VudEl0ZW1zLnB1c2goaXRlbSk7CiAgICB9CgogICAgdm0uYXVkaW9Db2RlY3NJdGVtcyA9IFtdOwogICAgdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtcyA9IFtdOwogICAgdmFyIGNvdW50ID0gMDsKICAgIGZvcih2YXIgaSA9IDA7IGkgPCB2bS5hcGlEYXRhLmRhdGEuQXVkaW9Db2RlY3MubGVuZ3RoOyBpKyspewogICAgICBpZih2bS5hcGlEYXRhLmRhdGEuQXVkaW9Db2RlY3NbaV0uQXVkaW9Db2Rlc0VuYWJsZSl7CiAgICAgICAgaWYodm0uYXBpRGF0YS5kYXRhLkF1ZGlvQ29kZWNzW2ldLkF1ZGlvQ29kZXNFbmFibGUgIT0gIk9QVVMiKXsKICAgICAgICAgIGxldCBhdWRpb0l0ZW0gPSB7ImtleSI6Y291bnQudG9TdHJpbmcoKSwidGl0bGUiOiB2bS5hcGlEYXRhLmRhdGEuQXVkaW9Db2RlY3NbaV0uQXVkaW9Db2Rlc0VuYWJsZX07CiAgICAgICAgICB2bS5hdWRpb0NvZGVjc0l0ZW1zLnB1c2goYXVkaW9JdGVtKTsKICAgICAgICAgIHZtLmF1ZGlvQ29kZWNzVGFyZ2V0SXRlbXMucHVzaChpLnRvU3RyaW5nKCkpOwogICAgICAgICAgY291bnQrKzsKICAgICAgICB9IGVsc2V7CiAgICAgICAgICB2bS5PUFVTRW5hYmxlID0gIk9QVVMiOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmKHZtLmFwaURhdGEuZGF0YS5BdWRpb0NvZGVjc1tpXS5BdWRpb0NvZGVzRGlzYWJsZSAhPSAiT1BVUyIpewogICAgICAgIGxldCBhdWRpb0l0ZW0gPSB7ImtleSI6Y291bnQudG9TdHJpbmcoKSwidGl0bGUiOiB2bS5hcGlEYXRhLmRhdGEuQXVkaW9Db2RlY3NbaV0uQXVkaW9Db2Rlc0Rpc2FibGV9OwogICAgICAgIHZtLmF1ZGlvQ29kZWNzSXRlbXMucHVzaChhdWRpb0l0ZW0pOwogICAgICAgIGNvdW50Kys7CiAgICAgIH0gZWxzZXsKICAgICAgICB2bS5PUFVTRGlzYWJsZSA9ICJPUFVTIjsKICAgICAgfQogICAgfQoKICAgIHZtLnZpZGVvQ29kZWNzSXRlbXMgPSBbXTsKICAgIHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMgPSBbXTsKICAgIGZvcih2YXIgaSA9IDA7IGkgPCB2bS5hcGlEYXRhLmRhdGEuVmlkZW9Db2RlY3MubGVuZ3RoOyBpKyspewogICAgICBpZih2bS5hcGlEYXRhLmRhdGEuVmlkZW9Db2RlY3NbaV0uVmlkZW9Db2Rlc0VuYWJsZSl7CiAgICAgICAgbGV0IHZpZGVvSXRlbSA9IHsia2V5IjppLnRvU3RyaW5nKCksInRpdGxlIjogdm0uYXBpRGF0YS5kYXRhLlZpZGVvQ29kZWNzW2ldLlZpZGVvQ29kZXNFbmFibGV9OwogICAgICAgIHZtLnZpZGVvQ29kZWNzSXRlbXMucHVzaCh2aWRlb0l0ZW0pOwogICAgICAgIHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMucHVzaChpLnRvU3RyaW5nKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIGxldCB2aWRlb0l0ZW0gPSB7ImtleSI6aS50b1N0cmluZygpLCJ0aXRsZSI6IHZtLmFwaURhdGEuZGF0YS5WaWRlb0NvZGVjc1tpXS5WaWRlb0NvZGVzRGlzYWJsZX07CiAgICAgICAgdm0udmlkZW9Db2RlY3NJdGVtcy5wdXNoKHZpZGVvSXRlbSk7CiAgICAgIH0gCiAgICB9CgogICAgLy9wb3J056uv5Y+jCiAgICB2bS51c2VkUG9ydEl0ZW1zID0gW107CiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLnNpcFBvcnRzLmxlbmd0aDsgaSsrKXsKICAgICAgbGV0IGl0ZW0gPSB7Im1pbiI6IHZtLmFwaURhdGEuZGF0YS5zaXBQb3J0c1tpXS5taW4sIm1heCI6IHZtLmFwaURhdGEuZGF0YS5zaXBQb3J0c1tpXS5tYXh9OwogICAgICB2bS51c2VkUG9ydEl0ZW1zLnB1c2goaXRlbSk7CiAgICB9CgogICAgY3JlYXRlUGFnZURhdGEodm0pOwogIH0pOwp9CgpmdW5jdGlvbiBDaGFuZ2VDb2RlY1Jlc29sdXRpb25PcHRpb24odm0sY29udGVudEtleSxpdGVtS2V5LGluZGV4KXsKICBsZXQgY29udGVudEtleUluZGV4ID0gZ2V0SW5kZXhCeUtleSh2bS5kYXRhLmNvbnRlbnRzLGNvbnRlbnRLZXkpOwogIGxldCBpdGVtS2V5SW5kZXggPSBnZXRJbmRleEJ5S2V5KHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtcyxpdGVtS2V5KTsKICBpZihpbmRleCA9PSAwKXsKICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLnNlbGVjdEl0ZW1zID0gdm0uY29kZUJpdFJhdGVJdGVtczE7CiAgfSBlbHNlIGlmIChpbmRleCA9PSAxKXsKICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLnNlbGVjdEl0ZW1zID0gdm0uY29kZUJpdFJhdGVJdGVtczI7CiAgfSBlbHNlewogICAgdm0uZGF0YS5jb250ZW50c1tjb250ZW50S2V5SW5kZXhdLml0ZW1zW2l0ZW1LZXlJbmRleF0uc2VsZWN0SXRlbXMgPSB2bS5jb2RlQml0UmF0ZUl0ZW1zMzsKICB9Cn0KCmZ1bmN0aW9uIHN1Ym1pdERhdGEodm0pIHsKICB2bS5kYXRhLnN1Ym1pdExvYWRpbmcgPSB0cnVlOwoKICBsZXQgcmVxdWVzdERhdGEgPSB7CiAgICB0YXJnZXQ6ICJhY2NvdW50QWR2YW5jZWQiLAogICAgYWN0aW9uOiAic2V0IiwKICAgIGNvbmZpZ0RhdGE6IHZtLnN1Ym1pdENmZ0RhdGEsCiAgICBkYXRhOiB7CiAgICAgICJBdWRpb0NvZGVjc0VuYWJsZSI6dm0uYXVkaW9Db2RlY3NFbmFibGVJdGVtcywKICAgICAgIkF1ZGlvQ29kZWNzRGlzYWJsZSI6dm0uYXVkaW9Db2RlY3NEaXNhYmxlSXRlbXMsCiAgICAgICJWaWRlb0NvZGVjc0VuYWJsZSI6dm0udmlkZW9Db2RlY3NFbmFibGVJdGVtcywKICAgICAgIlZpZGVvQ29kZWNzRGlzYWJsZSI6dm0udmlkZW9Db2RlY3NEaXNhYmxlSXRlbXMsCiAgICB9CiAgfTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOwogICAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldENvbW1pdERhdGEodm0pewogIHZtLnN1Ym1pdENmZ0RhdGEgPSB7fTsKICBmb3IgKHZhciBjaGFuZ2VkS2V5IGluIHZtLmNoYW5nZWRDZmdEYXRhKSB7CiAgICBpZih2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbY2hhbmdlZEtleV0gIT0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV0pewogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV0KICAgIH0KICB9CiAgc3VibWl0Q29kZWNzSXRlbSh2bSk7Cn0KCmZ1bmN0aW9uIHN1Ym1pdENvZGVjc0l0ZW0odm0pewogIHZtLmF1ZGlvQ29kZWNzRW5hYmxlSXRlbXMgPSBbXTsKICB2bS5hdWRpb0NvZGVjc0Rpc2FibGVJdGVtcyA9IFtdOwogIHZtLnZpZGVvQ29kZWNzRW5hYmxlSXRlbXMgPSBbXTsKICB2bS52aWRlb0NvZGVjc0Rpc2FibGVJdGVtcyA9IFtdOwogIC8vYXVkaW8KICBmb3IodmFyIGkgPSAwOyBpIDwgdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtcy5sZW5ndGg7IGkrKyl7CiAgICB2YXIgZW5hYmxlSXRlbSA9IHZtLmF1ZGlvQ29kZWNzSXRlbXNbdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtc1tpXV0udGl0bGU7CiAgICB2bS5hdWRpb0NvZGVjc0VuYWJsZUl0ZW1zLnB1c2goZW5hYmxlSXRlbSk7CiAgfQogIGZvcih2YXIgaSA9IDA7IGkgPCB2bS5hdWRpb0NvZGVjc0l0ZW1zLmxlbmd0aDsgaSsrKXsKICAgIGlmKCF2bS5hdWRpb0NvZGVjc1RhcmdldEl0ZW1zLmluY2x1ZGVzKHZtLmF1ZGlvQ29kZWNzSXRlbXNbaV0ua2V5KSl7CiAgICAgIHZhciBkaXNhYmxlSXRlbSA9IHZtLmF1ZGlvQ29kZWNzSXRlbXNbaV0udGl0bGU7CiAgICAgIHZtLmF1ZGlvQ29kZWNzRGlzYWJsZUl0ZW1zLnB1c2goZGlzYWJsZUl0ZW0pOwogICAgfQogIH0KICBpZih2bS5PUFVTRW5hYmxlICE9ICIiKXsKICAgIHZtLmF1ZGlvQ29kZWNzRW5hYmxlSXRlbXMucHVzaCh2bS5PUFVTRW5hYmxlKTsKICB9IGVsc2V7CiAgICB2bS5hdWRpb0NvZGVjc0Rpc2FibGVJdGVtcy5wdXNoKHZtLk9QVVNEaXNhYmxlKTsKICB9CgogIC8vdmlkZW8KICBmb3IodmFyIGkgPSAwOyBpIDwgdm0udmlkZW9Db2RlY3NUYXJnZXRJdGVtcy5sZW5ndGg7IGkrKyl7CiAgICB2YXIgZW5hYmxlSXRlbSA9IHZtLnZpZGVvQ29kZWNzSXRlbXNbdm0udmlkZW9Db2RlY3NUYXJnZXRJdGVtc1tpXV0udGl0bGU7CiAgICB2bS52aWRlb0NvZGVjc0VuYWJsZUl0ZW1zLnB1c2goZW5hYmxlSXRlbSk7CiAgfQogIGZvcih2YXIgaSA9IDA7IGkgPCB2bS52aWRlb0NvZGVjc0l0ZW1zLmxlbmd0aDsgaSsrKXsKICAgIGlmKCF2bS52aWRlb0NvZGVjc1RhcmdldEl0ZW1zLmluY2x1ZGVzKHZtLnZpZGVvQ29kZWNzSXRlbXNbaV0ua2V5KSl7CiAgICAgIHZhciBkaXNhYmxlSXRlbSA9IHZtLnZpZGVvQ29kZWNzSXRlbXNbaV0udGl0bGU7CiAgICAgIHZtLnZpZGVvQ29kZWNzRGlzYWJsZUl0ZW1zLnB1c2goZGlzYWJsZUl0ZW0pOwogICAgfQogIH0KfQoKZnVuY3Rpb24gY3JlYXRlUGFnZURhdGEodm0pIHsKICB2bS5kYXRhID0gewogICAgZ2V0RGF0YVN1Y2Nlc3M6IHRydWUsCiAgICBicmVhZENydW1iOiB7CiAgICAgIGZpcnN0VGl0bGU6IHZtLiR0KCJBY2NvdW50IiksCiAgICAgIHNlY29uZFRpdGxlOiB2bS4kdCgiQWR2YW5jZSIpLAogICAgfSwKICAgIG9uU3VibWl0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGdldENvbW1pdERhdGEodm0pOwogICAgICBpZiAoIWNoZWNrQ29tbWl0RGF0YSh2bSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc3VibWl0RGF0YSh2bSk7CiAgICB9LAogICAgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHsKICAgICAgdm0uZGF0YS5jYW5jZWxMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0RGF0YSh2bSx2bS5DdXJyZW50QWNjb3VudCk7CiAgICB9LAogICAgc3VibWl0TG9hZGluZzogZmFsc2UsCiAgICBjYW5jZWxMb2FkaW5nOiBmYWxzZSwKICAgIGNvbnRlbnRzOiBbXSwKICB9OwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVTaXBBY2NvdW50Q29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVBdWRpb0NvZGVjc0NvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlVmlkZW9Db2RlY3NDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVZpZGVvQ29kZWNDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVN1YnNjcmliZUNvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlRHRtZkNvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlQ2FsbENvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlRW5jcnlwdGlvbkNvbnRlbnQodm0pKTsKICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlTmF0Q29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVVc2VyQWdlbnRDb250ZW50KHZtKSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVNpcEFjY291bnRDb250ZW50KHZtKSB7CiAgbGV0IGNvbnRlbnQgPSB7CiAgICBrZXk6ICJzaXBBY2NvdW50IiwKICAgIHRpdGxlOiB2bS4kdCgiU0lQQWNjb3VudCIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIlNJUEFjY291bnQiKSwKICAgIGl0ZW1zOiBbCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkFjY291bnQiKSwKICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICBrZXk6ICJjdXJyZW50QWNjb3VudCIsCiAgICAgICAgdmFsdWU6IHZtLkN1cnJlbnRBY2NvdW50LAogICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5BY2NvdW50SXRlbXMsCiAgICAgIH0sCiAgICBdLAogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUF1ZGlvQ29kZWNzQ29udGVudCh2bSkgewogIGxldCBjb250ZW50ID0gewogICAga2V5OiAiYXVkaW9Db2RlY3MiLAogICAgdGl0bGU6IHZtLiR0KCJDb2RlY3MiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCIiKSwKICAgIGl0ZW1zOiBbCiAgICAgIHsKICAgICAgICB0eXBlOiAidHJhbnNmZXIiLAogICAgICAgIHNvdXJjZVRpdGxlOiB2bS4kdCgiRGlzYWJsZWRWaWRlb0NvZGVjcyIpLAogICAgICAgIHRhcmdldFRpdGxlOiB2bS4kdCgiRW5hYmxlZFZpZGVvQ29kZWNzIiksCiAgICAgICAga2V5OiAiYXVkaW9Db2RlY3NJdGVtcyIsCiAgICAgICAgbW9ja0l0ZW1zOiB2bS5hdWRpb0NvZGVjc0l0ZW1zLAogICAgICAgIHZhbHVlOiB2bS5hdWRpb0NvZGVjc1RhcmdldEl0ZW1zLAogICAgICAgIHNlbGVjdGVkS2V5czogW10sCiAgICAgIH0sCiAgICBdLAogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVZpZGVvQ29kZWNzQ29udGVudCh2bSkgewogIGxldCBjb250ZW50ID0gewogICAga2V5OiAidmlkZW9Db2RlY3MiLAogICAgdGl0bGU6IHZtLiR0KCJWaWRlb0NvZGVjcyIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIiIpLAogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIHR5cGU6ICJ0cmFuc2ZlciIsCiAgICAgICAgc291cmNlVGl0bGU6IHZtLiR0KCJEaXNhYmxlZFZpZGVvQ29kZWNzIiksCiAgICAgICAgdGFyZ2V0VGl0bGU6IHZtLiR0KCJFbmFibGVkVmlkZW9Db2RlY3MiKSwKICAgICAgICBrZXk6ICJ2aWRlb0NvZGVjc0l0ZW1zIiwKICAgICAgICBtb2NrSXRlbXM6IHZtLnZpZGVvQ29kZWNzSXRlbXMsCiAgICAgICAgdmFsdWU6IHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMsCiAgICAgICAgc2VsZWN0ZWRLZXlzOiBbXSwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlVmlkZW9Db2RlY0NvbnRlbnQodm0pIHsKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogInZpZGVvQ29kZWMiLAogICAgdGl0bGU6IHZtLiR0KCJWaWRlb0NvZGVjIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiIiksCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJOYW1lIiksCiAgICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgICBrZXk6ICJIMjYzIiwKICAgICAgICB2YWx1ZTogIkgyNjMiLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJSZXNvbHV0aW9uIiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuVmlkZW8wMS5Qcm9maWxlTGV2ZWwiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlZpZGVvMDEuUHJvZmlsZUxldmVsIl0sCiAgICAgICAgc2VsZWN0SXRlbXM6IFsKICAgICAgICAgIHsga2V5OiAwLCBsYWJlbDogJ1FDSUYnIH0sCiAgICAgICAgICB7IGtleTogMSwgbGFiZWw6ICdDSUYnIH0sCiAgICAgICAgICB7IGtleTogMywgbGFiZWw6ICc0Q0lGJyB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkJpdHJhdGVMYWJlbCIpLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlZpZGVvMDEuTWF4QlIiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlZpZGVvMDEuTWF4QlIiXSwKICAgICAgICBzZWxlY3RJdGVtczogW10sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlBheWxvYWQiKSwKICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5WaWRlbzAxLlBheWxvYWQiLAogICAgICAgIGRpc2FibGVkOnRydWUsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuVmlkZW8wMS5QYXlsb2FkIl0sCiAgICAgICAgc2VsZWN0SXRlbXM6IHZtLmNvZGVQYXlMb2FkSXRlbXMxLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJOYW1lIiksCiAgICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgICBrZXk6ICJIMjY0IiwKICAgICAgICB2YWx1ZTogIkgyNjQiLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJSZXNvbHV0aW9uIiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuVmlkZW8wMC5Qcm9maWxlTGV2ZWwiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlZpZGVvMDAuUHJvZmlsZUxldmVsIl0sCiAgICAgICAgc2VsZWN0SXRlbXM6IFsKICAgICAgICAgIHsga2V5OiAwLCBsYWJlbDogJ1FDSUYnIH0sCiAgICAgICAgICB7IGtleTogMSwgbGFiZWw6ICdDSUYnIH0sCiAgICAgICAgICB7IGtleTogMywgbGFiZWw6ICc0Q0lGJyB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkJpdHJhdGVMYWJlbCIpLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlZpZGVvMDAuTWF4QlIiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlZpZGVvMDAuTWF4QlIiXSwKICAgICAgICBzZWxlY3RJdGVtczogW10sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlBheWxvYWQiKSwKICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5WaWRlbzAwLlBheWxvYWQiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlZpZGVvMDAuUGF5bG9hZCJdLAogICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5jb2RlUGF5TG9hZEl0ZW1zMiwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiTmFtZSIpLAogICAgICAgIHR5cGU6ICJsYWJlbCIsCiAgICAgICAga2V5OiAiVlA4IiwKICAgICAgICB2YWx1ZTogIlZQOCIsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlJlc29sdXRpb24iKSwKICAgICAgICB0eXBlOiAic2VsZWN0IiwKICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5WaWRlbzAzLlByb2ZpbGVMZXZlbCIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuVmlkZW8wMy5Qcm9maWxlTGV2ZWwiXSwKICAgICAgICBzZWxlY3RJdGVtczogWwogICAgICAgICAgeyBrZXk6IDAsIGxhYmVsOiAnUUNJRicgfSwKICAgICAgICAgIHsga2V5OiAxLCBsYWJlbDogJ0NJRicgfSwKICAgICAgICAgIHsga2V5OiAzLCBsYWJlbDogJzRDSUYnIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiQml0cmF0ZUxhYmVsIiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuVmlkZW8wMy5NYXhCUiIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuVmlkZW8wMy5NYXhCUiJdLAogICAgICAgIHNlbGVjdEl0ZW1zOiBbXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiUGF5bG9hZCIpLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIGRpc2FibGVkOnRydWUsCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuVmlkZW8wMy5QYXlsb2FkIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5WaWRlbzAzLlBheWxvYWQiXSwKICAgICAgICBzZWxlY3RJdGVtczogdm0uY29kZVBheUxvYWRJdGVtczIsCiAgICAgIH0sCiAgICBdLAogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZUNvbnRlbnQodm0pIHsKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogInN1YnNjcmliZSIsCiAgICB0aXRsZTogdm0uJHQoIlN1YnNjcmliZSIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIiIpLAogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiTVdJU3Vic2NyaWJlIiksCiAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TVUJTQ1JJQkUuU3Vic3JpYmVNV0kiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlNVQlNDUklCRS5TdWJzcmliZU1XSSJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJNV0lTdWJzY3JpYmVQZXJpb2QiKSwKICAgICAgICB0eXBlOiAiaW5wdXQiLAogICAgICAgIHNob3dIaW50OnRydWUsCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICBoaW50Q29udGVudDp2bS4kdCgiKDEyMH42NTUzNVNlYykiKSwKICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TVUJTQ1JJQkUuU3Vic2NyaWJlTVdJRXhwaXJlIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TVUJTQ1JJQkUuU3Vic2NyaWJlTVdJRXhwaXJlIl0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlZvaWNlTWFpbE51bWJlciIpLAogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuVk9JQ0VNU0cuTnVtYmVyIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5WT0lDRU1TRy5OdW1iZXIiXSwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlRHRtZkNvbnRlbnQodm0pIHsKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogImR0bWYiLAogICAgdGl0bGU6IHZtLiR0KCJEVE1GIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiIiksCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJUeXBlIiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuRFRNRi5UeXBlIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5EVE1GLlR5cGUiXSwKICAgICAgICBzZWxlY3RJdGVtczpbCiAgICAgICAgICB7a2V5OiAxLCBsYWJlbDogIkluYmFuZCJ9LAogICAgICAgICAge2tleTogMiwgbGFiZWw6ICJSRkMyODMzIn0sCiAgICAgICAgICB7a2V5OiAzLCBsYWJlbDogIkluZm8ifSwKICAgICAgICAgIHtrZXk6IDQsIGxhYmVsOiAiSW5mbytJbmJhbmQifSwKICAgICAgICAgIHtrZXk6IDUsIGxhYmVsOiAiSW5mbytSRkMyODMzIn0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiSG93VG9JbmZvRFRNRiIpLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLkRUTUYuSW5mb1R5cGUiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLkRUTUYuSW5mb1R5cGUiXSwKICAgICAgICBzZWxlY3RJdGVtczpbCiAgICAgICAgICB7a2V5OiAwLCBsYWJlbDogIkRpc2FibGVkIn0sCiAgICAgICAgICB7a2V5OiAxLCBsYWJlbDogIkRUTUYifSwKICAgICAgICAgIHtrZXk6IDIsIGxhYmVsOiAiRFRNRi1SZWxheSJ9LAogICAgICAgICAge2tleTogMywgbGFiZWw6ICJUZWxlcGhvbmUtRXZlbnQifSwKICAgICAgICBdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJEVE1GUGF5bG9hZCIpLAogICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgc2hvd0hpbnQ6dHJ1ZSwKICAgICAgICBpc1dhcm46ZmFsc2UsCiAgICAgICAgaGludENvbnRlbnQ6dm0uJHQoIig5Nn4xMjcpIiksCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuRFRNRi5QYXlsb2FkIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5EVE1GLlBheWxvYWQiXSwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlQ2FsbENvbnRlbnQodm0pIHsKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogImNhbGwiLAogICAgdGl0bGU6IHZtLiR0KCJDYWxsIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiIiksCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJNYXhMb2NhbFNJUFBvcnQiKSwKICAgICAgICB0eXBlOiAiaW5wdXQiLAogICAgICAgIHNob3dIaW50OnRydWUsCiAgICAgICAgaGludENvbnRlbnQ6dm0uJHQoIigxMDI0fjY1NTM1KSIpLAogICAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgICAgd2FybkxhYmVsOiAiIiwKICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1heCIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuU0lQLkxpc3RlblBvcnRNYXgiXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiTWluTG9jYWxTSVBQb3J0IiksCiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBzaG93SGludDp0cnVlLAogICAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgICAgd2FybkxhYmVsOiAiIiwKICAgICAgICBoaW50Q29udGVudDp2bS4kdCgiKDEwMjR+NjU1MzUpIiksCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuU0lQLkxpc3RlblBvcnRNaW4iLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlNJUC5MaXN0ZW5Qb3J0TWluIl0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlBUaW1lIikrIihtcykiLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLkNBTEwuUHRpbWUiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLkNBTEwuUHRpbWUiXSwKICAgICAgICBzZWxlY3RJdGVtczpbCiAgICAgICAgICB7a2V5OiAwLCBsYWJlbDogIkRpc2FibGVkIn0sCiAgICAgICAgICB7a2V5OiAxMCwgbGFiZWw6IDEwfSwKICAgICAgICAgIHtrZXk6IDIwLCBsYWJlbDogMjB9LAogICAgICAgICAge2tleTogMzAsIGxhYmVsOiAzMH0sCiAgICAgICAgICB7a2V5OiA0MCwgbGFiZWw6IDQwfSwKICAgICAgICAgIHtrZXk6IDUwLCBsYWJlbDogNTB9LAogICAgICAgICAge2tleTogNjAsIGxhYmVsOiA2MH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiQXV0b0Fuc3dlciIpLAogICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuQVVUT19BTlNXRVIuRW5hYmxlIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5BVVRPX0FOU1dFUi5FbmFibGUiXSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiUHJldmVudFNJUEhhY2tpbmciKSwKICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLkNBTEwuUHJldmVudFNJUEhhY2tpbmciLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLkNBTEwuUHJldmVudFNJUEhhY2tpbmciXSwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlRW5jcnlwdGlvbkNvbnRlbnQodm0pIHsKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogImVuY3J5cHRpb24iLAogICAgdGl0bGU6IHZtLiR0KCJFbmNyeXB0aW9uIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiIiksCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJWb2ljZUVuY3J5IiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuRU5DUllQVElPTi5TUlRQRW5jcnlwdGlvbiIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuRU5DUllQVElPTi5TUlRQRW5jcnlwdGlvbiJdLAogICAgICAgIHNlbGVjdEl0ZW1zOiBbCiAgICAgICAgICB7a2V5OiAwLCBsYWJlbDogdm0uJHQoIkRpc2FibGVkIil9LAogICAgICAgICAge2tleTogMSwgbGFiZWw6IHZtLiR0KCJTUlRQQ29tcHVsc29yeSIpfSwKICAgICAgICAgIHtrZXk6IDIsIGxhYmVsOiB2bS4kdCgiU1JUUE9wdGlvbmFsIil9LAogICAgICAgICAge2tleTogMywgbGFiZWw6IHZtLiR0KCJaUlRQT3B0aW9uYWwiKX0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlTmF0Q29udGVudCh2bSkgewogIGxldCBjb250ZW50ID0gewogICAga2V5OiAibmF0IiwKICAgIHRpdGxlOiB2bS4kdCgiTkFUIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiIiksCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJVRFBLZWVwQWxpdmVNc2ciKSwKICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLk5BVC5VZHBLZWVwRW5hYmxlIiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5OQVQuVWRwS2VlcEVuYWJsZSJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJVRFBBbGl2ZU1zZ0ludGVydmFsIiksCiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBzaG93SGludDp0cnVlLAogICAgICAgIGlzV2FybjpmYWxzZSwKICAgICAgICBoaW50Q29udGVudDp2bS4kdCgiKDV+NjBTZWMpIiksCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuTkFULlVkcEtlZXBJbnRlcnZhbCIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuTkFULlVkcEtlZXBJbnRlcnZhbCJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJSUG9ydEVuYWJsZWQiKSwKICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLk5BVC5ScG9ydCIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuTkFULlJwb3J0Il0sCiAgICAgIH0sCiAgICBdLAogIH07CiAgcmV0dXJuIGNvbnRlbnQ7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVVzZXJBZ2VudENvbnRlbnQodm0pIHsKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogInVzZXJBZ2VudCIsCiAgICB0aXRsZTogdm0uJHQoIlVzZXJBZ2VudCIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIiIpLAogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiVXNlckFnZW50IiksCiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBpc1dhcm46IGZhbHNlLAogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLkdFTkVSQUwuVXNlckFnZW50IiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5HRU5FUkFMLlVzZXJBZ2VudCJdLAogICAgICB9LAogICAgXSwKICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjaGVja0NvbW1pdERhdGEodm0pIHsKICBsZXQgc3VjY2VzcyA9IHRydWU7CiAgLy9hdWRpb0NvZGVjcwogIGlmKHZtLmF1ZGlvQ29kZWNzVGFyZ2V0SXRlbXMubGVuZ3RoID09IDApewogICAgYWxlcnQodm0uJHQoIkVuYWJsZWRDb2RlY0VtcHR5V2FybmluZyIpKTsKICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICB9CgogIC8vdmlkZW9Db2RlY3MKICBpZih2bS52aWRlb0NvZGVjc1RhcmdldEl0ZW1zLmxlbmd0aCA9PSAwKXsKICAgIGFsZXJ0KHZtLiR0KCJFbmFibGVkQ29kZWNFbXB0eVdhcm5pbmciKSk7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQoKICAvL01heExvY2FsU0lQUG9ydAogIGlmKCFpc1BvcnQoTnVtYmVyKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1heCJdKSkgCiAgICB8fCBOdW1iZXIodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlNJUC5MaXN0ZW5Qb3J0TWF4Il0pIDwgMTAyNCl7CiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgIHZtLmRhdGEsCiAgICAgICAgImNhbGwiLAogICAgICAgICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1heCIKICAgICAgKTsKICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOwogICAgICBpdGVtLndhcm5MYWJlbCA9IHZtLiR0KCJpcyBub3QgUG9ydCIpOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQoKICAvL01pbkxvY2FsU0lQUG9ydAogIGlmKCFpc1BvcnQoTnVtYmVyKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1pbiJdKSkgCiAgICB8fCBOdW1iZXIodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlNJUC5MaXN0ZW5Qb3J0TWluIl0pIDwgMTAyNCl7CiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgIHZtLmRhdGEsCiAgICAgICAgImNhbGwiLAogICAgICAgICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1pbiIKICAgICAgKTsKICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOwogICAgICBpdGVtLndhcm5MYWJlbCA9IHZtLiR0KCJpcyBub3QgUG9ydCIpOwogICAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQoKICAvL01pbkxvY2FsU0lQUG9ydCA+IE1heExvY2FsU0lQUG9ydCAKICBpZigidW5kZWZpbmVkIiAhPSB0eXBlb2Yodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuU0lQLkxpc3RlblBvcnRNYXgiXSkgCiAgICAgIHx8ICJ1bmRlZmluZWQiICE9IHR5cGVvZih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1pbiJdKSl7CiAgICBpZigoTnVtYmVyKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1heCJdKS1OdW1iZXIodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlNJUC5MaXN0ZW5Qb3J0TWluIl0pKSA8IDApewogICAgICBsZXQgaXRlbTEgPSBnZXRJdGVtQnlLZXkoCiAgICAgICAgICB2bS5kYXRhLAogICAgICAgICAgImNhbGwiLAogICAgICAgICAgIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlNJUC5MaXN0ZW5Qb3J0TWF4IgogICAgICApOwogICAgICBpdGVtMS5pc1dhcm4gPSB0cnVlOwogICAgICBpdGVtMS53YXJuTGFiZWwgPSB2bS4kdCgiYWFhIik7CiAgICAgIGxldCBpdGVtMiA9IGdldEl0ZW1CeUtleSgKICAgICAgICAgIHZtLmRhdGEsCiAgICAgICAgICAiY2FsbCIsCiAgICAgICAgICAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuU0lQLkxpc3RlblBvcnRNaW4iCiAgICAgICk7CiAgICAgIGl0ZW0yLmlzV2FybiA9IHRydWU7CiAgICAgIGl0ZW0yLndhcm5MYWJlbCA9IHZtLiR0KCIiKTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogICAgaWYodHJ1ZSA9PSBpc1BvcnRVc2VkKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1pbiJdLHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1heCJdLHZtLnVzZWRQb3J0SXRlbXMpKXsKICAgICAgbGV0IGl0ZW0xID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgICAgdm0uZGF0YSwKICAgICAgICAgICJjYWxsIiwKICAgICAgICAgICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TSVAuTGlzdGVuUG9ydE1heCIKICAgICAgKTsKICAgICAgaXRlbTEuaXNXYXJuID0gdHJ1ZTsKICAgICAgaXRlbTEud2FybkxhYmVsID0gdm0uJHQoIldhcm5pbmdJbnZhbGlkTG9jYWxTSVBQb3J0U2V0dGluZyIpOwogICAgICBsZXQgaXRlbTIgPSBnZXRJdGVtQnlLZXkoCiAgICAgICAgICB2bS5kYXRhLAogICAgICAgICAgImNhbGwiLAogICAgICAgICAgIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlNJUC5MaXN0ZW5Qb3J0TWluIgogICAgICApOwogICAgICBpdGVtMi5pc1dhcm4gPSB0cnVlOwogICAgICBpdGVtMi53YXJuTGFiZWwgPSB2bS4kdCgiIik7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CgogIGlmKCJ1bmRlZmluZWQiICE9IHR5cGVvZih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5EVE1GLlBheWxvYWQiXSkpewogICAgaWYoIWNoZWNrUmFuZ2VPZk51bWJlcih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5EVE1GLlBheWxvYWQiXSwgOTYsIDEyNykpewogICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgKICAgICAgICB2bS5kYXRhLAogICAgICAgICJkdG1mIiwKICAgICAgICAiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuRFRNRi5QYXlsb2FkIgogICAgICApOwogICAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CgogIGlmKCJ1bmRlZmluZWQiICE9IHR5cGVvZih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5TVUJTQ1JJQkUuU3Vic2NyaWJlTVdJRXhwaXJlIl0pKXsKICAgIGlmKCFjaGVja1JhbmdlT2ZOdW1iZXIodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuU1VCU0NSSUJFLlN1YnNjcmliZU1XSUV4cGlyZSJdLCAxMjAsIDY1NTM1KSl7CiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgIHZtLmRhdGEsCiAgICAgICAgInN1YnNjcmliZSIsCiAgICAgICAgIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLlNVQlNDUklCRS5TdWJzY3JpYmVNV0lFeHBpcmUiCiAgICAgICk7CiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KCiAgaWYoInVuZGVmaW5lZCIgIT0gdHlwZW9mKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLk5BVC5VZHBLZWVwSW50ZXJ2YWwiXSkpewogICAgaWYoIWNoZWNrUmFuZ2VPZk51bWJlcih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5OQVQuVWRwS2VlcEludGVydmFsIl0sIDUsIDYwKSl7CiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgIHZtLmRhdGEsCiAgICAgICAgIm5hdCIsCiAgICAgICAgIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLk5BVC5VZHBLZWVwSW50ZXJ2YWwiCiAgICAgICk7CiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KCiAgaWYoInVuZGVmaW5lZCIgIT0gdHlwZW9mKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLkdFTkVSQUwuVXNlckFnZW50Il0pKXsKICAgIGlmKCFub3RDb250YWluSW52YWxpZCh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5HRU5FUkFMLlVzZXJBZ2VudCJdKSl7CiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICAgIHZtLmRhdGEsCiAgICAgICAgInVzZXJBZ2VudCIsCiAgICAgICAgIkNvbmZpZy5BY2NvdW50Iit2bS5DdXJyZW50QWNjb3VudCsiLkdFTkVSQUwuVXNlckFnZW50IgogICAgICApOwogICAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CiAgcmV0dXJuIHN1Y2Nlc3M7Cn0K"},{"version":3,"sources":["AccountAdvanced.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AccountAdvanced.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <CommonPage :data=\"data\" @onDataChange=\"onCommonPageDataChange($event)\"></CommonPage>\n  </div>\n</template>\n\n<script>\nimport CommonPage from \"@/components/CommonPage.vue\";\nimport { \n  showRequestSuccess,\n  deepClone,\n  getIndexByKey,\n  isPort,\n  checkRangeOfNumber,\n  notContainInvalid,\n  isPortUsed\n} from \"@/js/common.js\";\nimport { getItemByKey } from '../js/common';\n\nexport default {\n  components: {\n    CommonPage,\n  },\n  data() {\n    return {\n      changedCfgData:{},\n      submitCfgData:{},\n      apiData: {},\n      data: {\n        getDataSuccess: false,\n      },\n      CurrentAccount: 1,\n      audioCodecsItems:[],\n      audioCodecsTargetItems:[],\n      videoCodecsItems:[],\n      videoCodecsTargetItems:[],\n      codeBitRateItems1:[\n        { key: '64', label: '64' },\n        { key: '128', label: '128' },\n      ],\n      codeBitRateItems2:[\n        { key: '128', label: '128' },\n        { key: '256', label: '256' },\n        { key: '320', label: '320' },\n        { key: '512', label: '512' },\n      ],\n      codeBitRateItems3:[\n        { key: '512', label: '512' },\n        { key: '768', label: '768' },\n        { key: '1024', label: '1024' },\n        { key: '1536', label: '1536' },\n        { key: '2048', label: '2048' },\n      ],\n      codePayLoadItems1:[],\n      codePayLoadItems2:[],\n      audioCodecsEnableItems:[],\n      audioCodecsDisableItems:[],\n      videoCodecsEnableItems:[],\n      videoCodecsDisableItems:[],\n      OPUSEnable:\"\",\n      OPUSDisable:\"\",\n      usedPortItems:[],\n    };\n  },\n  created() {\n    for (var i=90; i<120; i++){\n      let item1 = {\"key\": (i-89), \"label\": i};\n      let item2 = {\"key\": (i-90), \"label\": i};\n      this.codePayLoadItems1.push(item1);\n      this.codePayLoadItems2.push(item2);\n    }\n    getData(this,this.CurrentAccount);\n  },\n  methods: {\n    onCommonPageDataChange: function (event) {\n      if(event.itemKey == \"currentAccount\"){\n        this.CurrentAccount = event.newVal;\n      } else if(event.itemKey == \"audioCodecsItems\"){\n        this.audioCodecsTargetItems = event.newVal;\n      } else if(event.itemKey == \"videoCodecsItems\"){\n        this.videoCodecsTargetItems = event.newVal;\n      } else {\n        this.changedCfgData[event.itemKey] = event.newVal;\n      }\n    },\n  },\n  watch: {\n    CurrentAccount(newVal, oldVal){\n      getData(this,newVal);\n    },\n    changedCfgData: {\n      handler: function (newVal, oldVal){\n        //监听Code变化格式\n        ChangeCodecResolutionOption(this,\"videoCodec\",\"Config.Account\"+this.CurrentAccount+\".Video01.MaxBR\",newVal['Config.Account'+this.CurrentAccount+'.Video01.ProfileLevel']);\n        ChangeCodecResolutionOption(this,\"videoCodec\",\"Config.Account\"+this.CurrentAccount+\".Video00.MaxBR\",newVal['Config.Account'+this.CurrentAccount+'.Video00.ProfileLevel']);\n        ChangeCodecResolutionOption(this,\"videoCodec\",\"Config.Account\"+this.CurrentAccount+\".Video03.MaxBR\",newVal['Config.Account'+this.CurrentAccount+'.Video03.ProfileLevel']);\n\n        //监听MWI Subscribe Period\n        let contentKeyIndex = getIndexByKey(this.data.contents,\"subscribe\");\n        let itemKeyIndex = getIndexByKey(this.data.contents[contentKeyIndex].items,\"Config.Account\"+this.CurrentAccount+\".SUBSCRIBE.SubscribeMWIExpire\");  \n        if(newVal['Config.Account'+this.CurrentAccount+'.SUBSCRIBE.SubsribeMWI'] == 0){\n          this.data.contents[contentKeyIndex].items[itemKeyIndex].disabled = true;\n        } else{\n          this.data.contents[contentKeyIndex].items[itemKeyIndex].disabled = false;\n        }\n\n        //监听DTMF Type\n        contentKeyIndex = getIndexByKey(this.data.contents,\"dtmf\");\n        itemKeyIndex = getIndexByKey(this.data.contents[contentKeyIndex].items,\"Config.Account\"+this.CurrentAccount+\".DTMF.InfoType\");  \n        if(newVal['Config.Account'+this.CurrentAccount+'.DTMF.Type'] >= 3){\n          this.data.contents[contentKeyIndex].items[itemKeyIndex].disabled = false;\n        } else{\n          this.data.contents[contentKeyIndex].items[itemKeyIndex].disabled = true;\n        }\n\n      },deep: true\n    },\n  }\n};\n\nfunction getData(vm,accountId) {\n  vm.$axios.get(\"api/accountAdvanced/info?accountId=\"+accountId).then((response) => {\n    vm.getDataSuccess = true;\n    vm.apiData = response.data;\n    vm.changedCfgData = deepClone(response.data.configData);\n\n    vm.AccountItems = [];\n    for(var i = 1; i <= vm.apiData.data.Account.AccountNumber; i++){\n      let item = {\"key\": i, \"label\": \"Account\"+i};\n      vm.AccountItems.push(item);\n    }\n\n    vm.audioCodecsItems = [];\n    vm.audioCodecsTargetItems = [];\n    var count = 0;\n    for(var i = 0; i < vm.apiData.data.AudioCodecs.length; i++){\n      if(vm.apiData.data.AudioCodecs[i].AudioCodesEnable){\n        if(vm.apiData.data.AudioCodecs[i].AudioCodesEnable != \"OPUS\"){\n          let audioItem = {\"key\":count.toString(),\"title\": vm.apiData.data.AudioCodecs[i].AudioCodesEnable};\n          vm.audioCodecsItems.push(audioItem);\n          vm.audioCodecsTargetItems.push(i.toString());\n          count++;\n        } else{\n          vm.OPUSEnable = \"OPUS\";\n        }\n      } else if(vm.apiData.data.AudioCodecs[i].AudioCodesDisable != \"OPUS\"){\n        let audioItem = {\"key\":count.toString(),\"title\": vm.apiData.data.AudioCodecs[i].AudioCodesDisable};\n        vm.audioCodecsItems.push(audioItem);\n        count++;\n      } else{\n        vm.OPUSDisable = \"OPUS\";\n      }\n    }\n\n    vm.videoCodecsItems = [];\n    vm.videoCodecsTargetItems = [];\n    for(var i = 0; i < vm.apiData.data.VideoCodecs.length; i++){\n      if(vm.apiData.data.VideoCodecs[i].VideoCodesEnable){\n        let videoItem = {\"key\":i.toString(),\"title\": vm.apiData.data.VideoCodecs[i].VideoCodesEnable};\n        vm.videoCodecsItems.push(videoItem);\n        vm.videoCodecsTargetItems.push(i.toString());\n      } else {\n        let videoItem = {\"key\":i.toString(),\"title\": vm.apiData.data.VideoCodecs[i].VideoCodesDisable};\n        vm.videoCodecsItems.push(videoItem);\n      } \n    }\n\n    //port端口\n    vm.usedPortItems = [];\n    for(var i = 0; i < vm.apiData.data.sipPorts.length; i++){\n      let item = {\"min\": vm.apiData.data.sipPorts[i].min,\"max\": vm.apiData.data.sipPorts[i].max};\n      vm.usedPortItems.push(item);\n    }\n\n    createPageData(vm);\n  });\n}\n\nfunction ChangeCodecResolutionOption(vm,contentKey,itemKey,index){\n  let contentKeyIndex = getIndexByKey(vm.data.contents,contentKey);\n  let itemKeyIndex = getIndexByKey(vm.data.contents[contentKeyIndex].items,itemKey);\n  if(index == 0){\n    vm.data.contents[contentKeyIndex].items[itemKeyIndex].selectItems = vm.codeBitRateItems1;\n  } else if (index == 1){\n    vm.data.contents[contentKeyIndex].items[itemKeyIndex].selectItems = vm.codeBitRateItems2;\n  } else{\n    vm.data.contents[contentKeyIndex].items[itemKeyIndex].selectItems = vm.codeBitRateItems3;\n  }\n}\n\nfunction submitData(vm) {\n  vm.data.submitLoading = true;\n\n  let requestData = {\n    target: \"accountAdvanced\",\n    action: \"set\",\n    configData: vm.submitCfgData,\n    data: {\n      \"AudioCodecsEnable\":vm.audioCodecsEnableItems,\n      \"AudioCodecsDisable\":vm.audioCodecsDisableItems,\n      \"VideoCodecsEnable\":vm.videoCodecsEnableItems,\n      \"VideoCodecsDisable\":vm.videoCodecsDisableItems,\n    }\n  };\n  vm.$axios.post(\"api\", requestData).then((response) => {\n    showRequestSuccess(vm);\n    vm.data.submitLoading = false;\n  });\n}\n\nfunction getCommitData(vm){\n  vm.submitCfgData = {};\n  for (var changedKey in vm.changedCfgData) {\n    if(vm.apiData.configData[changedKey] != vm.changedCfgData[changedKey]){\n      vm.submitCfgData[changedKey] = vm.changedCfgData[changedKey]\n    }\n  }\n  submitCodecsItem(vm);\n}\n\nfunction submitCodecsItem(vm){\n  vm.audioCodecsEnableItems = [];\n  vm.audioCodecsDisableItems = [];\n  vm.videoCodecsEnableItems = [];\n  vm.videoCodecsDisableItems = [];\n  //audio\n  for(var i = 0; i < vm.audioCodecsTargetItems.length; i++){\n    var enableItem = vm.audioCodecsItems[vm.audioCodecsTargetItems[i]].title;\n    vm.audioCodecsEnableItems.push(enableItem);\n  }\n  for(var i = 0; i < vm.audioCodecsItems.length; i++){\n    if(!vm.audioCodecsTargetItems.includes(vm.audioCodecsItems[i].key)){\n      var disableItem = vm.audioCodecsItems[i].title;\n      vm.audioCodecsDisableItems.push(disableItem);\n    }\n  }\n  if(vm.OPUSEnable != \"\"){\n    vm.audioCodecsEnableItems.push(vm.OPUSEnable);\n  } else{\n    vm.audioCodecsDisableItems.push(vm.OPUSDisable);\n  }\n\n  //video\n  for(var i = 0; i < vm.videoCodecsTargetItems.length; i++){\n    var enableItem = vm.videoCodecsItems[vm.videoCodecsTargetItems[i]].title;\n    vm.videoCodecsEnableItems.push(enableItem);\n  }\n  for(var i = 0; i < vm.videoCodecsItems.length; i++){\n    if(!vm.videoCodecsTargetItems.includes(vm.videoCodecsItems[i].key)){\n      var disableItem = vm.videoCodecsItems[i].title;\n      vm.videoCodecsDisableItems.push(disableItem);\n    }\n  }\n}\n\nfunction createPageData(vm) {\n  vm.data = {\n    getDataSuccess: true,\n    breadCrumb: {\n      firstTitle: vm.$t(\"Account\"),\n      secondTitle: vm.$t(\"Advance\"),\n    },\n    onSubmit: function () {\n      getCommitData(vm);\n      if (!checkCommitData(vm)) {\n        return;\n      }\n      submitData(vm);\n    },\n    onCancel: function () {\n      vm.data.cancelLoading = true;\n      getData(vm,vm.CurrentAccount);\n    },\n    submitLoading: false,\n    cancelLoading: false,\n    contents: [],\n  };\n  vm.data.contents.push(createSipAccountContent(vm));\n  vm.data.contents.push(createAudioCodecsContent(vm));\n  vm.data.contents.push(createVideoCodecsContent(vm));\n  vm.data.contents.push(createVideoCodecContent(vm));\n  vm.data.contents.push(createSubscribeContent(vm));\n  vm.data.contents.push(createDtmfContent(vm));\n  vm.data.contents.push(createCallContent(vm));\n  vm.data.contents.push(createEncryptionContent(vm));\n  vm.data.contents.push(createNatContent(vm));\n  vm.data.contents.push(createUserAgentContent(vm));\n}\n\nfunction createSipAccountContent(vm) {\n  let content = {\n    key: \"sipAccount\",\n    title: vm.$t(\"SIPAccount\"),\n    titleDescription: vm.$t(\"SIPAccount\"),\n    items: [\n      {\n        title: vm.$t(\"Account\"),\n        type: \"select\",\n        key: \"currentAccount\",\n        value: vm.CurrentAccount,\n        selectItems: vm.AccountItems,\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createAudioCodecsContent(vm) {\n  let content = {\n    key: \"audioCodecs\",\n    title: vm.$t(\"Codecs\"),\n    titleDescription: vm.$t(\"\"),\n    items: [\n      {\n        type: \"transfer\",\n        sourceTitle: vm.$t(\"DisabledVideoCodecs\"),\n        targetTitle: vm.$t(\"EnabledVideoCodecs\"),\n        key: \"audioCodecsItems\",\n        mockItems: vm.audioCodecsItems,\n        value: vm.audioCodecsTargetItems,\n        selectedKeys: [],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createVideoCodecsContent(vm) {\n  let content = {\n    key: \"videoCodecs\",\n    title: vm.$t(\"VideoCodecs\"),\n    titleDescription: vm.$t(\"\"),\n    items: [\n      {\n        type: \"transfer\",\n        sourceTitle: vm.$t(\"DisabledVideoCodecs\"),\n        targetTitle: vm.$t(\"EnabledVideoCodecs\"),\n        key: \"videoCodecsItems\",\n        mockItems: vm.videoCodecsItems,\n        value: vm.videoCodecsTargetItems,\n        selectedKeys: [],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createVideoCodecContent(vm) {\n  let content = {\n    key: \"videoCodec\",\n    title: vm.$t(\"VideoCodec\"),\n    titleDescription: vm.$t(\"\"),\n    items: [\n      {\n        title: vm.$t(\"Name\"),\n        type: \"label\",\n        key: \"H263\",\n        value: \"H263\",\n      },\n      {\n        title: vm.$t(\"Resolution\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".Video01.ProfileLevel\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".Video01.ProfileLevel\"],\n        selectItems: [\n          { key: 0, label: 'QCIF' },\n          { key: 1, label: 'CIF' },\n          { key: 3, label: '4CIF' },\n        ],\n      },\n      {\n        title: vm.$t(\"BitrateLabel\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".Video01.MaxBR\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".Video01.MaxBR\"],\n        selectItems: [],\n      },\n      {\n        title: vm.$t(\"Payload\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".Video01.Payload\",\n        disabled:true,\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".Video01.Payload\"],\n        selectItems: vm.codePayLoadItems1,\n      },\n      {\n        title: vm.$t(\"Name\"),\n        type: \"label\",\n        key: \"H264\",\n        value: \"H264\",\n      },\n      {\n        title: vm.$t(\"Resolution\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".Video00.ProfileLevel\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".Video00.ProfileLevel\"],\n        selectItems: [\n          { key: 0, label: 'QCIF' },\n          { key: 1, label: 'CIF' },\n          { key: 3, label: '4CIF' },\n        ],\n      },\n      {\n        title: vm.$t(\"BitrateLabel\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".Video00.MaxBR\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".Video00.MaxBR\"],\n        selectItems: [],\n      },\n      {\n        title: vm.$t(\"Payload\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".Video00.Payload\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".Video00.Payload\"],\n        selectItems: vm.codePayLoadItems2,\n      },\n      {\n        title: vm.$t(\"Name\"),\n        type: \"label\",\n        key: \"VP8\",\n        value: \"VP8\",\n      },\n      {\n        title: vm.$t(\"Resolution\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".Video03.ProfileLevel\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".Video03.ProfileLevel\"],\n        selectItems: [\n          { key: 0, label: 'QCIF' },\n          { key: 1, label: 'CIF' },\n          { key: 3, label: '4CIF' },\n        ],\n      },\n      {\n        title: vm.$t(\"BitrateLabel\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".Video03.MaxBR\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".Video03.MaxBR\"],\n        selectItems: [],\n      },\n      {\n        title: vm.$t(\"Payload\"),\n        type: \"select\",\n        disabled:true,\n        key: \"Config.Account\"+vm.CurrentAccount+\".Video03.Payload\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".Video03.Payload\"],\n        selectItems: vm.codePayLoadItems2,\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createSubscribeContent(vm) {\n  let content = {\n    key: \"subscribe\",\n    title: vm.$t(\"Subscribe\"),\n    titleDescription: vm.$t(\"\"),\n    items: [\n      {\n        title: vm.$t(\"MWISubscribe\"),\n        type: \"checkbox\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".SUBSCRIBE.SubsribeMWI\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".SUBSCRIBE.SubsribeMWI\"],\n      },\n      {\n        title: vm.$t(\"MWISubscribePeriod\"),\n        type: \"input\",\n        showHint:true,\n        isWarn: false,\n        hintContent:vm.$t(\"(120~65535Sec)\"),\n        key: \"Config.Account\"+vm.CurrentAccount+\".SUBSCRIBE.SubscribeMWIExpire\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".SUBSCRIBE.SubscribeMWIExpire\"],\n      },\n      {\n        title: vm.$t(\"VoiceMailNumber\"),\n        type: \"input\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".VOICEMSG.Number\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".VOICEMSG.Number\"],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createDtmfContent(vm) {\n  let content = {\n    key: \"dtmf\",\n    title: vm.$t(\"DTMF\"),\n    titleDescription: vm.$t(\"\"),\n    items: [\n      {\n        title: vm.$t(\"Type\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".DTMF.Type\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".DTMF.Type\"],\n        selectItems:[\n          {key: 1, label: \"Inband\"},\n          {key: 2, label: \"RFC2833\"},\n          {key: 3, label: \"Info\"},\n          {key: 4, label: \"Info+Inband\"},\n          {key: 5, label: \"Info+RFC2833\"},\n        ],\n      },\n      {\n        title: vm.$t(\"HowToInfoDTMF\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".DTMF.InfoType\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".DTMF.InfoType\"],\n        selectItems:[\n          {key: 0, label: \"Disabled\"},\n          {key: 1, label: \"DTMF\"},\n          {key: 2, label: \"DTMF-Relay\"},\n          {key: 3, label: \"Telephone-Event\"},\n        ],\n      },\n      {\n        title: vm.$t(\"DTMFPayload\"),\n        type: \"input\",\n        showHint:true,\n        isWarn:false,\n        hintContent:vm.$t(\"(96~127)\"),\n        key: \"Config.Account\"+vm.CurrentAccount+\".DTMF.Payload\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".DTMF.Payload\"],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createCallContent(vm) {\n  let content = {\n    key: \"call\",\n    title: vm.$t(\"Call\"),\n    titleDescription: vm.$t(\"\"),\n    items: [\n      {\n        title: vm.$t(\"MaxLocalSIPPort\"),\n        type: \"input\",\n        showHint:true,\n        hintContent:vm.$t(\"(1024~65535)\"),\n        isWarn: false,\n        warnLabel: \"\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\"],\n      },\n      {\n        title: vm.$t(\"MinLocalSIPPort\"),\n        type: \"input\",\n        showHint:true,\n        isWarn: false,\n        warnLabel: \"\",\n        hintContent:vm.$t(\"(1024~65535)\"),\n        key: \"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\"],\n      },\n      {\n        title: vm.$t(\"PTime\")+\"(ms)\",\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".CALL.Ptime\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".CALL.Ptime\"],\n        selectItems:[\n          {key: 0, label: \"Disabled\"},\n          {key: 10, label: 10},\n          {key: 20, label: 20},\n          {key: 30, label: 30},\n          {key: 40, label: 40},\n          {key: 50, label: 50},\n          {key: 60, label: 60},\n        ],\n      },\n      {\n        title: vm.$t(\"AutoAnswer\"),\n        type: \"checkbox\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".AUTO_ANSWER.Enable\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".AUTO_ANSWER.Enable\"],\n      },\n      {\n        title: vm.$t(\"PreventSIPHacking\"),\n        type: \"checkbox\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".CALL.PreventSIPHacking\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".CALL.PreventSIPHacking\"],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createEncryptionContent(vm) {\n  let content = {\n    key: \"encryption\",\n    title: vm.$t(\"Encryption\"),\n    titleDescription: vm.$t(\"\"),\n    items: [\n      {\n        title: vm.$t(\"VoiceEncry\"),\n        type: \"select\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".ENCRYPTION.SRTPEncryption\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".ENCRYPTION.SRTPEncryption\"],\n        selectItems: [\n          {key: 0, label: vm.$t(\"Disabled\")},\n          {key: 1, label: vm.$t(\"SRTPCompulsory\")},\n          {key: 2, label: vm.$t(\"SRTPOptional\")},\n          {key: 3, label: vm.$t(\"ZRTPOptional\")},\n        ],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createNatContent(vm) {\n  let content = {\n    key: \"nat\",\n    title: vm.$t(\"NAT\"),\n    titleDescription: vm.$t(\"\"),\n    items: [\n      {\n        title: vm.$t(\"UDPKeepAliveMsg\"),\n        type: \"checkbox\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".NAT.UdpKeepEnable\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".NAT.UdpKeepEnable\"],\n      },\n      {\n        title: vm.$t(\"UDPAliveMsgInterval\"),\n        type: \"input\",\n        showHint:true,\n        isWarn:false,\n        hintContent:vm.$t(\"(5~60Sec)\"),\n        key: \"Config.Account\"+vm.CurrentAccount+\".NAT.UdpKeepInterval\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".NAT.UdpKeepInterval\"],\n      },\n      {\n        title: vm.$t(\"RPortEnabled\"),\n        type: \"checkbox\",\n        key: \"Config.Account\"+vm.CurrentAccount+\".NAT.Rport\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".NAT.Rport\"],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createUserAgentContent(vm) {\n  let content = {\n    key: \"userAgent\",\n    title: vm.$t(\"UserAgent\"),\n    titleDescription: vm.$t(\"\"),\n    items: [\n      {\n        title: vm.$t(\"UserAgent\"),\n        type: \"input\",\n        isWarn: false,\n        key: \"Config.Account\"+vm.CurrentAccount+\".GENERAL.UserAgent\",\n        value: vm.apiData.configData[\"Config.Account\"+vm.CurrentAccount+\".GENERAL.UserAgent\"],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction checkCommitData(vm) {\n  let success = true;\n  //audioCodecs\n  if(vm.audioCodecsTargetItems.length == 0){\n    alert(vm.$t(\"EnabledCodecEmptyWarning\"));\n    success = false;\n  }\n\n  //videoCodecs\n  if(vm.videoCodecsTargetItems.length == 0){\n    alert(vm.$t(\"EnabledCodecEmptyWarning\"));\n    success = false;\n  }\n\n  //MaxLocalSIPPort\n  if(!isPort(Number(vm.changedCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\"])) \n    || Number(vm.changedCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\"]) < 1024){\n      let item = getItemByKey(\n        vm.data,\n        \"call\",\n        \"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\"\n      );\n      item.isWarn = true;\n      item.warnLabel = vm.$t(\"is not Port\");\n      success = false;\n  }\n\n  //MinLocalSIPPort\n  if(!isPort(Number(vm.changedCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\"])) \n    || Number(vm.changedCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\"]) < 1024){\n      let item = getItemByKey(\n        vm.data,\n        \"call\",\n        \"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\"\n      );\n      item.isWarn = true;\n      item.warnLabel = vm.$t(\"is not Port\");\n      success = false;\n  }\n\n  //MinLocalSIPPort > MaxLocalSIPPort \n  if(\"undefined\" != typeof(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\"]) \n      || \"undefined\" != typeof(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\"])){\n    if((Number(vm.changedCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\"])-Number(vm.changedCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\"])) < 0){\n      let item1 = getItemByKey(\n          vm.data,\n          \"call\",\n          \"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\"\n      );\n      item1.isWarn = true;\n      item1.warnLabel = vm.$t(\"aaa\");\n      let item2 = getItemByKey(\n          vm.data,\n          \"call\",\n          \"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\"\n      );\n      item2.isWarn = true;\n      item2.warnLabel = vm.$t(\"\");\n      success = false;\n    }\n    if(true == isPortUsed(vm.changedCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\"],vm.changedCfgData[\"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\"],vm.usedPortItems)){\n      let item1 = getItemByKey(\n          vm.data,\n          \"call\",\n          \"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMax\"\n      );\n      item1.isWarn = true;\n      item1.warnLabel = vm.$t(\"WarningInvalidLocalSIPPortSetting\");\n      let item2 = getItemByKey(\n          vm.data,\n          \"call\",\n          \"Config.Account\"+vm.CurrentAccount+\".SIP.ListenPortMin\"\n      );\n      item2.isWarn = true;\n      item2.warnLabel = vm.$t(\"\");\n      success = false;\n    }\n  }\n\n  if(\"undefined\" != typeof(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".DTMF.Payload\"])){\n    if(!checkRangeOfNumber(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".DTMF.Payload\"], 96, 127)){\n      let item = getItemByKey(\n        vm.data,\n        \"dtmf\",\n        \"Config.Account\"+vm.CurrentAccount+\".DTMF.Payload\"\n      );\n      item.isWarn = true;\n      success = false;\n    }\n  }\n\n  if(\"undefined\" != typeof(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".SUBSCRIBE.SubscribeMWIExpire\"])){\n    if(!checkRangeOfNumber(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".SUBSCRIBE.SubscribeMWIExpire\"], 120, 65535)){\n      let item = getItemByKey(\n        vm.data,\n        \"subscribe\",\n        \"Config.Account\"+vm.CurrentAccount+\".SUBSCRIBE.SubscribeMWIExpire\"\n      );\n      item.isWarn = true;\n      success = false;\n    }\n  }\n\n  if(\"undefined\" != typeof(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".NAT.UdpKeepInterval\"])){\n    if(!checkRangeOfNumber(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".NAT.UdpKeepInterval\"], 5, 60)){\n      let item = getItemByKey(\n        vm.data,\n        \"nat\",\n        \"Config.Account\"+vm.CurrentAccount+\".NAT.UdpKeepInterval\"\n      );\n      item.isWarn = true;\n      success = false;\n    }\n  }\n\n  if(\"undefined\" != typeof(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".GENERAL.UserAgent\"])){\n    if(!notContainInvalid(vm.submitCfgData[\"Config.Account\"+vm.CurrentAccount+\".GENERAL.UserAgent\"])){\n      let item = getItemByKey(\n        vm.data,\n        \"userAgent\",\n        \"Config.Account\"+vm.CurrentAccount+\".GENERAL.UserAgent\"\n      );\n      item.isWarn = true;\n      success = false;\n    }\n  }\n  return success;\n}\n</script>"]}]}