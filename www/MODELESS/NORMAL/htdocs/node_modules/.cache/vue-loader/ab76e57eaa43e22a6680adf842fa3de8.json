{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/PhoneApp.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/PhoneApp.vue","mtime":1600155105014},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js","mtime":1600155105338},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCB7CiAgc2hvd1JlcXVlc3RTdWNjZXNzLAogIGdldEluZGV4QnlLZXksCiAgZ2V0SXRlbUJ5S2V5LAogIGNoZWNrRmlsZUZvcm1hdCwKICBzaG93RXJyb3JJbmZvLAogIGRlZXBDbG9uZSwKfSBmcm9tICJAL2pzL2NvbW1vbi5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ29tbW9uUGFnZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VkQ2ZnRGF0YToge30sCiAgICAgIHN1Ym1pdENmZ0RhdGE6IHt9LAogICAgICBhcGlEYXRhOiB7fSwKICAgICAgZGF0YTogewogICAgICAgIGdldERhdGFTdWNjZXNzOiBmYWxzZSwKICAgICAgfSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgZ2V0RGF0YSh0aGlzKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2U6IGZ1bmN0aW9uIChldmVudCkgewogICAgICBpZiAoZXZlbnQuaXRlbUtleSAhPSAiYXBrRmlsZSIpIHsKICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOwogICAgICB9CiAgICB9LAogIH0sCn07CgpmdW5jdGlvbiBzdWJtaXREYXRhKHZtKSB7CiAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKCiAgbGV0IHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVBcHAiLAogICAgYWN0aW9uOiAic2V0IiwKICAgIGNvbmZpZ0RhdGE6IHZtLnN1Ym1pdENmZ0RhdGEsCiAgfTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOwogICAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldERhdGEodm0pIHsKICB2bS4kYXhpb3MuZ2V0KCJhcGkvcGhvbmVBcHAvaW5mbyIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICB2bS5nZXREYXRhU3VjY2VzcyA9IHRydWU7CiAgICB2bS5hcGlEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgIHZtLmNoYW5nZWRDZmdEYXRhID0gZGVlcENsb25lKHJlc3BvbnNlLmRhdGEuY29uZmlnRGF0YSk7CiAgICBjcmVhdGVQYWdlRGF0YSh2bSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldENvbW1pdERhdGEodm0pIHsKICB2bS5zdWJtaXRDZmdEYXRhID0ge307CiAgZm9yICh2YXIgY2hhbmdlZEtleSBpbiB2bS5jaGFuZ2VkQ2ZnRGF0YSkgewogICAgaWYgKHZtLmFwaURhdGEuY29uZmlnRGF0YVtjaGFuZ2VkS2V5XSAhPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XSkgewogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV07CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBjcmVhdGVQYWdlRGF0YSh2bSkgewogIHZtLmRhdGEgPSB7CiAgICBnZXREYXRhU3VjY2VzczogdHJ1ZSwKICAgIGJyZWFkQ3J1bWI6IHsKICAgICAgZmlyc3RUaXRsZTogdm0uJHQoIlBob25lIiksCiAgICAgIHNlY29uZFRpdGxlOiB2bS4kdCgiVGhpcmRQYXJ0eUFQSyIpLAogICAgfSwKICAgIG9uU3VibWl0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGdldENvbW1pdERhdGEodm0pOwogICAgICBpZiAoIWNoZWNrQ29tbWl0RGF0YSh2bSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc3VibWl0RGF0YSh2bSk7CiAgICB9LAogICAgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHsKICAgICAgdm0uZGF0YS5jYW5jZWxMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0RGF0YSh2bSk7CiAgICB9LAogICAgc3VibWl0TG9hZGluZzogZmFsc2UsCiAgICBjYW5jZWxMb2FkaW5nOiBmYWxzZSwKICAgIGNvbnRlbnRzOiBbXSwKICB9OwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVBcHBJbnN0YWxsQ29udGVudCh2bSkpOwogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVBcGtDZmdDb250ZW50KHZtKSk7CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZUdlbmVyYWxDb250ZW50KHZtKSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUFwcEluc3RhbGxDb250ZW50KHZtKSB7CiAgbGV0IGNvbnRlbnQgPSB7CiAgICBrZXk6ICJhcHBJbnN0YWxsIiwKICAgIHRpdGxlOiB2bS4kdCgiQXBwSW5zdGFsbCIpLAogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkFwcEluc3RhbGwiKSwKICAgIGl0ZW1zOiBbCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkFwcEZpbGVGb3JtYXQiKSwKICAgICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsCiAgICAgICAga2V5OiAiYXBrRmlsZSIsCiAgICAgICAgYWNjZXB0RmlsZVR5cGU6ICIuYXBrIiwKICAgICAgICBtb2RhbFRpdGxlOiB2bS4kdCgiQWxsb3dMaXN0SW1wb3J0SGludCIpLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICBmaWxlRGF0YToge30sCiAgICAgICAgICBmaWxlTmFtZTogdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpLAogICAgICAgIH0sCiAgICAgICAgaW1wb3J0QnRuTmFtZTogdm0uJHQoIkltcG9ydCIpLAogICAgICAgIG1vZGFsQ29uZmlybU5hbWU6IHZtLiR0KCJJbnN0YWxsIiksCiAgICAgICAgdXBsb2FkRnVuY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHVwbG9hZEFwcCh2bSk7CiAgICAgICAgfSwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gY3JlYXRlQXBrQ2ZnQ29udGVudCh2bSkgewogIGxldCBhcHBTZWxlY3RJdGVtcyA9IFtdOwogIGxldCBhcHBJdGVtcyA9IHZtLmFwaURhdGEuZGF0YS5hcGtMaXN0LnNwbGl0KCImIik7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBJdGVtcy5sZW5ndGg7IGkrKykgewogICAgaWYgKGFwcEl0ZW1zW2ldLmxlbmd0aCA9PSAwKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbGV0IGFyciA9IGFwcEl0ZW1zW2ldLnNwbGl0KCI9Iik7CiAgICB2YXIgc2VsZWN0SXRlbSA9IHsKICAgICAga2V5OiBhcnJbMV0sCiAgICAgIGxhYmVsOiBhcnJbMF0sCiAgICB9OwogICAgYXBwU2VsZWN0SXRlbXMucHVzaChzZWxlY3RJdGVtKTsKICB9CgogIGxldCBjb250ZW50ID0gewogICAga2V5OiAiYXBrQ29uZmlnIiwKICAgIHRpdGxlOiB2bS4kdCgiVGhpcmRBcGtDZmciKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJUaGlyZEFwa0NmZyIpLAogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiQVBQTmFtZSIpLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIGtleTogIkNvbmZpZy5JbmRvb3IuVEhJUkRQQVJUWUFQSy5QYWNrYWdlTmFtZSIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLlBhY2thZ2VOYW1lIl0sCiAgICAgICAgc2VsZWN0SXRlbXM6IGFwcFNlbGVjdEl0ZW1zLAogICAgICAgIGlzV2FybjogZmFsc2UsCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiRW1wdHlFcnIiKSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiQVBLVGltZUludGVydmFsIiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLlRpbWVJbnRlcnZhbCIsCiAgICAgICAgdmFsdWU6CiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuVEhJUkRQQVJUWUFQSy5UaW1lSW50ZXJ2YWwiXSwKICAgICAgICBzZWxlY3RJdGVtczogWwogICAgICAgICAgeyBrZXk6IDEwLCBsYWJlbDogMTAgfSwKICAgICAgICAgIHsga2V5OiAxNSwgbGFiZWw6IDE1IH0sCiAgICAgICAgICB7IGtleTogMzAsIGxhYmVsOiAzMCB9LAogICAgICAgICAgeyBrZXk6IDYwLCBsYWJlbDogNjAgfSwKICAgICAgICBdLAogICAgICAgIGhpbnRDb250ZW50OiAiKCAiICsgdm0uJHQoIlNlY29uZCIpICsgIiApIiwKICAgICAgICBzaG93SGludDogdHJ1ZSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiQVBLU3RhcnR1cEVuYWJsZSIpLAogICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLlN0YXJ0dXBFbmFibGUiLAogICAgICAgIHZhbHVlOgogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlRISVJEUEFSVFlBUEsuU3RhcnR1cEVuYWJsZSJdLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJUdXJuQmFja0FwcCIpLAogICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLlR1cm5CYWNrQXBrRW5hYmxlIiwKICAgICAgICB2YWx1ZToKICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsKICAgICAgICAgICAgIkNvbmZpZy5JbmRvb3IuVEhJUkRQQVJUWUFQSy5UdXJuQmFja0Fwa0VuYWJsZSIKICAgICAgICAgIF0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIlR1cm5CYWNrQXBwQWZ0ZXJBd2FrZW5pbmciKSwKICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgIGtleTogIkNvbmZpZy5JbmRvb3IuVEhJUkRQQVJUWUFQSy5Bd2FrZVJldHVybiIsCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLkF3YWtlUmV0dXJuIl0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkFQUEtlZXBBbGl2ZSIpLAogICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLkFQUEtlZXAtQWxpdmUiLAogICAgICAgIHZhbHVlOgogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlRISVJEUEFSVFlBUEsuQVBQS2VlcC1BbGl2ZSJdLAogICAgICB9LAogICAgXSwKICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiBjcmVhdGVHZW5lcmFsQ29udGVudCh2bSkgewogIGxldCBjb250ZW50ID0gewogICAga2V5OiAiZ2VuZXJhbCIsCiAgICB0aXRsZTogdm0uJHQoIkdlbmVyYWwiKSwKICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJHZW5lcmFsIiksCiAgICBpdGVtczogWwogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJUdXJuQmFja0FwcEFmdGVyQ2FsbGluZyIpLAogICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAga2V5OiAiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLlR1cm5CYWNrQXBrQWZ0ZXJDYWxsRW5hYmxlIiwKICAgICAgICB2YWx1ZToKICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsKICAgICAgICAgICAgIkNvbmZpZy5JbmRvb3IuVEhJUkRQQVJUWUFQSy5UdXJuQmFja0Fwa0FmdGVyQ2FsbEVuYWJsZSIKICAgICAgICAgIF0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogdm0uJHQoIkFQS1Nob3dBcHBJY29uIiksCiAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICBrZXk6ICJDb25maWcuSW5kb29yLlRISVJEUEFSVFlBUEsuU2hvd0FwcEljb24iLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuVEhJUkRQQVJUWUFQSy5TaG93QXBwSWNvbiJdLAogICAgICB9LAogICAgXSwKICB9OwogIHJldHVybiBjb250ZW50Owp9CgpmdW5jdGlvbiB1cGxvYWRBcHAodm0pIHsKICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiYXBwSW5zdGFsbCIsICJhcGtGaWxlIik7CiAgbGV0IGZpbGVOYW1lID0gaXRlbS52YWx1ZS5maWxlTmFtZTsKICBpZiAoZmlsZU5hbWUgPT0gIiIgfHwgZmlsZU5hbWUgPT0gdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpKSB7CiAgICByZXR1cm47CiAgfQogIC8v5LiK5LygCiAgaXRlbS5sb2FkaW5nID0gdHJ1ZTsKICBjb25zdCB1cERhdGEgPSBuZXcgRm9ybURhdGEoKTsKICB1cERhdGEuYXBwZW5kKCJmaWxlIiwgaXRlbS52YWx1ZS5maWxlRGF0YSk7CiAgYXhpb3MKICAgIC5wb3N0KCJhcGkvcGhvbmVBcHAvdXBsb2FkIiwgdXBEYXRhLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiLAogICAgICB9LAogICAgfSkKICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gLTEpIHsKICAgICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiQXBwVXBsb2FkRmFpbGVkIikpOwogICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gLTIpIHsKICAgICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiQXBwSW5zdGFsbEZhaWxlZCIpKTsKICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IDApIHsKICAgICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJBcHBJbnN0YWxsU3VjY2VzcyIpKTsKICAgICAgICBpdGVtLnZhbHVlLmZpbGVOYW1lID0gdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpOwogICAgICAgIGl0ZW0udmFsdWUuZmlsZURhdGEgPSB7fTsKICAgICAgfQogICAgICBpdGVtLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0pOwp9CgpmdW5jdGlvbiBjaGVja0NvbW1pdERhdGEodm0pIHsKICBsZXQgc3VjY2VzcyA9IHRydWU7CiAgaWYgKAogICAgKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuSW5kb29yLlRISVJEUEFSVFlBUEsuU3RhcnR1cEVuYWJsZSJdID09ICIxIiB8fAogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLkFQUEtlZXAtQWxpdmUiXSA9PSAiMSIpICYmCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLlBhY2thZ2VOYW1lIl0gPT0gIiIKICApIHsKICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KAogICAgICB2bS5kYXRhLAogICAgICAiYXBrQ29uZmlnIiwKICAgICAgIkNvbmZpZy5JbmRvb3IuVEhJUkRQQVJUWUFQSy5QYWNrYWdlTmFtZSIKICAgICk7CiAgICBpdGVtLmlzV2FybiA9IHRydWU7CiAgICBzdWNjZXNzID0gZmFsc2U7CiAgfQoKICAvL+S7heWPmOabtOWMheWQje+8jOayoeWPmOabtOS/nea0u++8jOS5n+mcgOimgeaPkOS6pOS/nea0u+S/oeaBrwogIGlmICgKICAgICJ1bmRlZmluZWQiICE9CiAgICB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLlBhY2thZ2VOYW1lIl0KICApIHsKICAgIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuVEhJUkRQQVJUWUFQSy5BUFBLZWVwLUFsaXZlIl0gPQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkluZG9vci5USElSRFBBUlRZQVBLLkFQUEtlZXAtQWxpdmUiXTsKICB9CgogIGlmICh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuSW5kb29yLlRISVJEUEFSVFlBUEsuQVBQS2VlcC1BbGl2ZSJdID09IDEpIHsKICAgIGlmICghY29uZmlybSh2bS4kdCgiTmVlZFJlc3RhcnRBcHAiKSkpIHsKICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgfQogIH0KCiAgcmV0dXJuIHN1Y2Nlc3M7Cn0K"},{"version":3,"sources":["PhoneApp.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"PhoneApp.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <CommonPage :data=\"data\" @onDataChange=\"onCommonPageDataChange($event)\"></CommonPage>\n</template>\n\n<script>\nimport CommonPage from \"@/components/CommonPage.vue\";\nimport {\n  showRequestSuccess,\n  getIndexByKey,\n  getItemByKey,\n  checkFileFormat,\n  showErrorInfo,\n  deepClone,\n} from \"@/js/common.js\";\n\nexport default {\n  components: {\n    CommonPage,\n  },\n  data() {\n    return {\n      changedCfgData: {},\n      submitCfgData: {},\n      apiData: {},\n      data: {\n        getDataSuccess: false,\n      },\n    };\n  },\n  created() {\n    getData(this);\n  },\n  methods: {\n    onCommonPageDataChange: function (event) {\n      if (event.itemKey != \"apkFile\") {\n        this.changedCfgData[event.itemKey] = event.newVal;\n      }\n    },\n  },\n};\n\nfunction submitData(vm) {\n  vm.data.submitLoading = true;\n\n  let requestData = {\n    target: \"phoneApp\",\n    action: \"set\",\n    configData: vm.submitCfgData,\n  };\n  vm.$axios.post(\"api\", requestData).then((response) => {\n    showRequestSuccess(vm);\n    vm.data.submitLoading = false;\n  });\n}\n\nfunction getData(vm) {\n  vm.$axios.get(\"api/phoneApp/info\").then((response) => {\n    vm.getDataSuccess = true;\n    vm.apiData = response.data;\n    vm.changedCfgData = deepClone(response.data.configData);\n    createPageData(vm);\n  });\n}\n\nfunction getCommitData(vm) {\n  vm.submitCfgData = {};\n  for (var changedKey in vm.changedCfgData) {\n    if (vm.apiData.configData[changedKey] != vm.changedCfgData[changedKey]) {\n      vm.submitCfgData[changedKey] = vm.changedCfgData[changedKey];\n    }\n  }\n}\n\nfunction createPageData(vm) {\n  vm.data = {\n    getDataSuccess: true,\n    breadCrumb: {\n      firstTitle: vm.$t(\"Phone\"),\n      secondTitle: vm.$t(\"ThirdPartyAPK\"),\n    },\n    onSubmit: function () {\n      getCommitData(vm);\n      if (!checkCommitData(vm)) {\n        return;\n      }\n      submitData(vm);\n    },\n    onCancel: function () {\n      vm.data.cancelLoading = true;\n      getData(vm);\n    },\n    submitLoading: false,\n    cancelLoading: false,\n    contents: [],\n  };\n  vm.data.contents.push(createAppInstallContent(vm));\n  vm.data.contents.push(createApkCfgContent(vm));\n  vm.data.contents.push(createGeneralContent(vm));\n}\n\nfunction createAppInstallContent(vm) {\n  let content = {\n    key: \"appInstall\",\n    title: vm.$t(\"AppInstall\"),\n    titleDescription: vm.$t(\"AppInstall\"),\n    items: [\n      {\n        title: vm.$t(\"AppFileFormat\"),\n        type: \"file-input\",\n        key: \"apkFile\",\n        acceptFileType: \".apk\",\n        modalTitle: vm.$t(\"AllowListImportHint\"),\n        loading: false,\n        value: {\n          fileData: {},\n          fileName: vm.$t(\"UpgradeFilePath\"),\n        },\n        importBtnName: vm.$t(\"Import\"),\n        modalConfirmName: vm.$t(\"Install\"),\n        uploadFunction: function () {\n          uploadApp(vm);\n        },\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createApkCfgContent(vm) {\n  let appSelectItems = [];\n  let appItems = vm.apiData.data.apkList.split(\"&\");\n  for (let i = 0; i < appItems.length; i++) {\n    if (appItems[i].length == 0) {\n      continue;\n    }\n    let arr = appItems[i].split(\"=\");\n    var selectItem = {\n      key: arr[1],\n      label: arr[0],\n    };\n    appSelectItems.push(selectItem);\n  }\n\n  let content = {\n    key: \"apkConfig\",\n    title: vm.$t(\"ThirdApkCfg\"),\n    titleDescription: vm.$t(\"ThirdApkCfg\"),\n    items: [\n      {\n        title: vm.$t(\"APPName\"),\n        type: \"select\",\n        key: \"Config.Indoor.THIRDPARTYAPK.PackageName\",\n        value: vm.apiData.configData[\"Config.Indoor.THIRDPARTYAPK.PackageName\"],\n        selectItems: appSelectItems,\n        isWarn: false,\n        warnLabel: vm.$t(\"EmptyErr\"),\n      },\n      {\n        title: vm.$t(\"APKTimeInterval\"),\n        type: \"select\",\n        key: \"Config.Indoor.THIRDPARTYAPK.TimeInterval\",\n        value:\n          vm.apiData.configData[\"Config.Indoor.THIRDPARTYAPK.TimeInterval\"],\n        selectItems: [\n          { key: 10, label: 10 },\n          { key: 15, label: 15 },\n          { key: 30, label: 30 },\n          { key: 60, label: 60 },\n        ],\n        hintContent: \"( \" + vm.$t(\"Second\") + \" )\",\n        showHint: true,\n      },\n      {\n        title: vm.$t(\"APKStartupEnable\"),\n        type: \"checkbox\",\n        key: \"Config.Indoor.THIRDPARTYAPK.StartupEnable\",\n        value:\n          vm.apiData.configData[\"Config.Indoor.THIRDPARTYAPK.StartupEnable\"],\n      },\n      {\n        title: vm.$t(\"TurnBackApp\"),\n        type: \"checkbox\",\n        key: \"Config.Indoor.THIRDPARTYAPK.TurnBackApkEnable\",\n        value:\n          vm.apiData.configData[\n            \"Config.Indoor.THIRDPARTYAPK.TurnBackApkEnable\"\n          ],\n      },\n      {\n        title: vm.$t(\"TurnBackAppAfterAwakening\"),\n        type: \"checkbox\",\n        key: \"Config.Indoor.THIRDPARTYAPK.AwakeReturn\",\n        value: vm.apiData.configData[\"Config.Indoor.THIRDPARTYAPK.AwakeReturn\"],\n      },\n      {\n        title: vm.$t(\"APPKeepAlive\"),\n        type: \"checkbox\",\n        key: \"Config.Indoor.THIRDPARTYAPK.APPKeep-Alive\",\n        value:\n          vm.apiData.configData[\"Config.Indoor.THIRDPARTYAPK.APPKeep-Alive\"],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction createGeneralContent(vm) {\n  let content = {\n    key: \"general\",\n    title: vm.$t(\"General\"),\n    titleDescription: vm.$t(\"General\"),\n    items: [\n      {\n        title: vm.$t(\"TurnBackAppAfterCalling\"),\n        type: \"checkbox\",\n        key: \"Config.Indoor.THIRDPARTYAPK.TurnBackApkAfterCallEnable\",\n        value:\n          vm.apiData.configData[\n            \"Config.Indoor.THIRDPARTYAPK.TurnBackApkAfterCallEnable\"\n          ],\n      },\n      {\n        title: vm.$t(\"APKShowAppIcon\"),\n        type: \"checkbox\",\n        key: \"Config.Indoor.THIRDPARTYAPK.ShowAppIcon\",\n        value: vm.apiData.configData[\"Config.Indoor.THIRDPARTYAPK.ShowAppIcon\"],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction uploadApp(vm) {\n  let item = getItemByKey(vm.data, \"appInstall\", \"apkFile\");\n  let fileName = item.value.fileName;\n  if (fileName == \"\" || fileName == vm.$t(\"UpgradeFilePath\")) {\n    return;\n  }\n  //上传\n  item.loading = true;\n  const upData = new FormData();\n  upData.append(\"file\", item.value.fileData);\n  axios\n    .post(\"api/phoneApp/upload\", upData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    })\n    .then((res) => {\n      if (res.data.retcode == -1) {\n        showErrorInfo(vm, vm.$t(\"AppUploadFailed\"));\n      } else if (res.data.retcode == -2) {\n        showErrorInfo(vm, vm.$t(\"AppInstallFailed\"));\n      } else if (res.data.retcode == 0) {\n        showRequestSuccess(vm, vm.$t(\"AppInstallSuccess\"));\n        item.value.fileName = vm.$t(\"UpgradeFilePath\");\n        item.value.fileData = {};\n      }\n      item.loading = false;\n    });\n}\n\nfunction checkCommitData(vm) {\n  let success = true;\n  if (\n    (vm.changedCfgData[\"Config.Indoor.THIRDPARTYAPK.StartupEnable\"] == \"1\" ||\n      vm.changedCfgData[\"Config.Indoor.THIRDPARTYAPK.APPKeep-Alive\"] == \"1\") &&\n    vm.changedCfgData[\"Config.Indoor.THIRDPARTYAPK.PackageName\"] == \"\"\n  ) {\n    let item = getItemByKey(\n      vm.data,\n      \"apkConfig\",\n      \"Config.Indoor.THIRDPARTYAPK.PackageName\"\n    );\n    item.isWarn = true;\n    success = false;\n  }\n\n  //仅变更包名，没变更保活，也需要提交保活信息\n  if (\n    \"undefined\" !=\n    typeof vm.submitCfgData[\"Config.Indoor.THIRDPARTYAPK.PackageName\"]\n  ) {\n    vm.submitCfgData[\"Config.Indoor.THIRDPARTYAPK.APPKeep-Alive\"] =\n      vm.changedCfgData[\"Config.Indoor.THIRDPARTYAPK.APPKeep-Alive\"];\n  }\n\n  if (vm.submitCfgData[\"Config.Indoor.THIRDPARTYAPK.APPKeep-Alive\"] == 1) {\n    if (!confirm(vm.$t(\"NeedRestartApp\"))) {\n      success = false;\n    }\n  }\n\n  return success;\n}\n</script>"]}]}