{"remainingRequest":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\PbxBasic.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\PbxBasic.vue","mtime":1624613275297},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1624613260275},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgQ29tbW9uUGFnZSBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uUGFnZS52dWUiOw0KaW1wb3J0IHsNCiAgc2hvd1JlcXVlc3RTdWNjZXNzLA0KICBkZWVwQ2xvbmUsDQogIGdldEl0ZW1CeUtleSwNCiAgZ2V0SW5kZXhCeUtleSwNCiAgc2hvd1dhcm5pbmdJbmZvLA0KICBzaG93RXJyb3JJbmZvLA0KICBpc1BvcnQNCn0gZnJvbSAiQC9qcy9jb21tb24uanMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBDb21tb25QYWdlLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBjaGFuZ2VkQ2ZnRGF0YToge30sDQogICAgICBzdWJtaXRDZmdEYXRhOiB7fSwNCiAgICAgIGFwaURhdGE6IHt9LA0KICAgICAgZGF0YTogew0KICAgICAgICBnZXREYXRhU3VjY2VzczogZmFsc2UsDQogICAgICB9LA0KICAgICAgaW50ZXJPYmo6IE9iamVjdCwNCiAgICAgIGRvdE51bUFycjpbMCwwXSwNCiAgICAgIGRvdFR4dEFycjpbIiIsIiJdLA0KICAgICAgdGltZUNudEFycjpbMCwwXSwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGdldERhdGEodGhpcyk7DQogICAgdGhpcy5pbnRlck9iaiA9IHNldEludGVydmFsKCgpID0+ew0KICAgICAgIGdldFBCWFN0YXR1cyh0aGlzKTsNCiAgICB9LCA1MDApOw0KICB9LA0KICBkZXN0cm95ZWQoKSB7DQogICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVyT2JqKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2U6IGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgc2V0Q2hhbmdlZERhdGEodGhpcywgZXZlbnQpOw0KICAgIH0sDQogIH0sDQp9Ow0KDQpmdW5jdGlvbiBzZXRDaGFuZ2VkRGF0YSh2bSwgZXZlbnQpIHsNCg0KfQ0KDQpmdW5jdGlvbiBnZXRQQlhTdGF0dXModm0pIHsNCiAgdm0uJGF4aW9zLmdldCgiYXBpL3BieEJhc2ljL2luZm8iKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgIHZtLmdldERhdGFTdWNjZXNzID0gdHJ1ZTsNCiAgICBPblN0YXR1c0FjdGlvbih2bSxyZXNwb25zZS5kYXRhLmRhdGEuUGJ4SW5mb3JtYXRpb24uU3RhdHVzKTsNCiAgICBzZXRQb3J0RW5hYmxlZCh2bSxyZXNwb25zZS5kYXRhLmRhdGEuUGJ4SW5mb3JtYXRpb24uU3RhdHVzKTsNCiAgfSk7DQp9DQoNCmZ1bmN0aW9uIE9uU3RhdHVzQWN0aW9uKHZtLHN0YXR1c1ZhbHVlKXsNCiAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgdm0uZGF0YSwNCiAgICAiUEJYQmFzaWNTZXR0aW5nIiwNCiAgICAiUGJ4U3RhdHVzIg0KICApOw0KICBpZihzdGF0dXNWYWx1ZSA9PSAiMyIpew0KICBpdGVtLnZhbHVlID0gdm0uJHQoIlBCWFN0YXR1c1N0YXJ0ZWQiKTsNCiAgICBjbGVhckludGVydmFsKHZtLmludGVyT2JqKTsNCiAgfSBlbHNlIGlmKHN0YXR1c1ZhbHVlID09ICIyIil7DQogICAgaWYodm0uZG90TnVtQXJyWzBdID49IDUpew0KICAgICAgdm0uZG90TnVtQXJyWzBdID0gMDsNCiAgICAgIHZtLmRvdFR4dEFyclswXSA9ICIiOw0KICAgIH0NCiAgICBpdGVtLnZhbHVlID0gdm0uJHQoIlBCWFN0YXR1c1N0YXJ0aW5nIikgKyB2bS5kb3RUeHRBcnJbMF07DQogICAgdm0uZG90VHh0QXJyWzBdICs9ICIuIjsNCiAgICB2bS5kb3ROdW1BcnJbMF0rKzsNCiAgICB2bS50aW1lQ250QXJyWzBdKys7DQogIH0gZWxzZSBpZihzdGF0dXNWYWx1ZSA9PSAiNCIpew0KICAgIGlmKHZtLmRvdE51bUFyclswXSA+PSA1KQ0KCQl7DQoJCQl2bS5kb3ROdW1BcnJbMF0gPSAwOw0KCQkJdm0uZG90VHh0QXJyWzBdID0gIiI7DQoJCX0NCgkJaXRlbS52YWx1ZSA9ICB2bS4kdCgiUEJYU3RhdHVzU3RvcHBpbmciKSArIHZtLmRvdFR4dEFyclswXTsNCgkJdm0uZG90VHh0QXJyWzBdICs9ICIuIjsNCgkJdm0uZG90TnVtQXJyWzBdKys7DQoJCXZtLnRpbWVDbnRBcnJbMF0rKzsNCiAgfSBlbHNlIGlmKHN0YXR1c1ZhbHVlID09ICIxIil7DQogICAgaXRlbS52YWx1ZSA9IHZtLiR0KCJQQlhTdGF0dXNTdG9wcGVkIik7DQogICAgY2xlYXJJbnRlcnZhbCh2bS5pbnRlck9iaik7DQogIH0gZWxzZSBpZihzdGF0dXNWYWx1ZSA9PSAiMCIpew0KICAgIGl0ZW0udmFsdWUgPSB2bS4kdCgiUEJYU3RhdHVzVW5SZWFkeSIpOw0KCQljbGVhckludGVydmFsKHZtLmludGVyT2JqKTsNCgl9IGVsc2V7DQogICAgaWYodm0uZG90TnVtQXJyWzFdID49IDUpew0KICAgICAgdm0uZG90TnVtQXJyWzFdID0gMDsNCiAgICAgIHZtLmRvdFR4dEFyclsxXSA9ICIiOw0KICAgIH0NCiAgICBpZih2bS50aW1lQ250QXJyWzFdID4gMjApew0KICAgICAgY2xlYXJJbnRlcnZhbCh2bS5pbnRlck9iaik7DQogICAgICB2bS5kb3ROdW1BcnJbMV0gPSB2bS50aW1lQ250QXJyWzFdID0gMDsNCiAgICAgIGl0ZW0udmFsdWUgPSB2bS4kdCgiVW5SZWdpc3RlcmVkIik7DQogICAgICB2bS5kb3RUeHRBcnJbMV0gPSAiIjsNCiAgICB9IGVsc2V7DQogICAgICBpdGVtLnZhbHVlID0gdm0uJHQoIlVuUmVnaXN0ZXJlZCIpOw0KICAgIH0NCiAgICB2bS5kb3RUeHRBcnJbMV0gKz0gIi4iOw0KICAgIHZtLmRvdE51bUFyclsxXSsrOw0KICAgIHZtLnRpbWVDbnRBcnJbMV0rKzsNCiAgfQ0KfQ0KDQpmdW5jdGlvbiBzdWJtaXREYXRhKHZtKSB7DQogIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IHRydWU7DQoNCiAgbGV0IGRhdGEgPSB7fTsNCiAgLy9tb2RlbA0KICBsZXQgbW9kZWxJdGVtID0gZ2V0SXRlbUJ5S2V5KA0KICAgIHZtLmRhdGEsDQogICAgIlBCWEJhc2ljU2V0dGluZyIsDQogICAgIlBieE1lZGlhTW9kZWwiDQogICk7DQogIGlmKG1vZGVsSXRlbS52YWx1ZSAhPSB2bS5hcGlEYXRhLmRhdGEuUGJ4SW5mb3JtYXRpb24uTWVkaWFNb2RlbCkgew0KICAgIHZtLmFwaURhdGEuZGF0YS5QYnhJbmZvcm1hdGlvbi5NZWRpYU1vZGVsID0gbW9kZWxJdGVtLnZhbHVlOw0KICAgIGRhdGFbIlBCWE1lZGlhTW9kZWwiXSA9IG1vZGVsSXRlbS52YWx1ZTsNCiAgfQ0KDQogIC8vc2VydmljZQ0KICBsZXQgc2VydmljZUl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgdm0uZGF0YSwNCiAgICAiUEJYQmFzaWNTZXR0aW5nIiwNCiAgICAiUGJ4U2VydmljZUVuYWJsZWQiDQogICk7DQogIGlmKHNlcnZpY2VJdGVtLnZhbHVlICE9IHZtLmFwaURhdGEuZGF0YS5QYnhJbmZvcm1hdGlvbi5QYnhTZXJ2aWNlKSB7DQogICAgdm0uYXBpRGF0YS5kYXRhLlBieEluZm9ybWF0aW9uLlBieFNlcnZpY2UgPSBzZXJ2aWNlSXRlbS52YWx1ZTsNCiAgICBkYXRhWyJQQlhTZXJ2aWNlIl0gPSBzZXJ2aWNlSXRlbS52YWx1ZTsNCiAgfQ0KDQogIC8vcG9ydA0KICBsZXQgcG9ydEl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgdm0uZGF0YSwNCiAgICAiUEJYQmFzaWNTZXR0aW5nIiwNCiAgICAiUGJ4UG9ydCINCiAgKTsNCiAgaWYocG9ydEl0ZW0udmFsdWUgIT0gdm0uYXBpRGF0YS5kYXRhLlBieEluZm9ybWF0aW9uLlBieFBvcnQpIHsNCiAgICB2bS5hcGlEYXRhLmRhdGEuUGJ4SW5mb3JtYXRpb24uUGJ4UG9ydCA9IHBvcnRJdGVtLnZhbHVlOw0KICAgIGRhdGFbIlBCWFBvcnQiXSA9IHBvcnRJdGVtLnZhbHVlOw0KICB9DQoNCiAgbGV0IHJlcXVlc3REYXRhID0gew0KICAgIHRhcmdldDogInBieEJhc2ljIiwNCiAgICBhY3Rpb246ICJzZXQiLA0KICAgIGNvbmZpZ0RhdGE6IHZtLnN1Ym1pdENmZ0RhdGEsDQogICAgZGF0YTogZGF0YSwNCiAgfTsNCg0KICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiByZXNwb25zZSkgew0KICAgICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtKTsNCiAgICB9DQogICAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiBnZXREYXRhKHZtKSB7DQogIHZtLiRheGlvcy5nZXQoImFwaS9wYnhCYXNpYy9pbmZvIikudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICB2bS5nZXREYXRhU3VjY2VzcyA9IHRydWU7DQogICAgdm0uYXBpRGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgdm0uY2hhbmdlZENmZ0RhdGEgPSBkZWVwQ2xvbmUocmVzcG9uc2UuZGF0YS5jb25maWdEYXRhKTsNCiAgICBjcmVhdGVQYWdlRGF0YSh2bSk7DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiBzZXRQb3J0RW5hYmxlZCh2bSxzdGF0dXNWYWx1ZSkgew0KICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICB2bS5kYXRhLA0KICAgICJQQlhCYXNpY1NldHRpbmciLA0KICAgICJQYnhQb3J0Ig0KICApOw0KICBpdGVtLmRpc2FibGVkID0gKHN0YXR1c1ZhbHVlID4gMSk7DQp9DQoNCmZ1bmN0aW9uIGdldENvbW1pdERhdGEodm0pIHsNCiAgdm0uc3VibWl0Q2ZnRGF0YSA9IHt9Ow0KICBmb3IgKHZhciBjaGFuZ2VkS2V5IGluIHZtLmNoYW5nZWRDZmdEYXRhKSB7DQogICAgaWYgKHZtLmFwaURhdGEuY29uZmlnRGF0YVtjaGFuZ2VkS2V5XSAhPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XSkgew0KICAgICAgdm0uc3VibWl0Q2ZnRGF0YVtjaGFuZ2VkS2V5XSA9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldOw0KICAgIH0NCiAgfQ0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVQYWdlRGF0YSh2bSkgew0KICB2bS5kYXRhID0gew0KICAgIGdldERhdGFTdWNjZXNzOiB0cnVlLA0KICAgIGJyZWFkQ3J1bWI6IHsNCiAgICAgIGZpcnN0VGl0bGU6IHZtLiR0KCJQQlgiKSwNCiAgICAgIHNlY29uZFRpdGxlOiB2bS4kdCgiUEJYQmFzaWMiKSwNCiAgICB9LA0KICAgIG9uU3VibWl0OiBmdW5jdGlvbiAoKSB7DQogICAgICBnZXRDb21taXREYXRhKHZtKTsNCiAgICAgIGlmICghY2hlY2tDb21taXREYXRhKHZtKSkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBzdWJtaXREYXRhKHZtKTsNCiAgICAgIHZtLmludGVyT2JqID0gc2V0SW50ZXJ2YWwoKCkgPT57DQogICAgICAgIGdldFBCWFN0YXR1cyh2bSk7DQogICAgICB9LCA1MDApOw0KICAgIH0sDQogICAgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7DQogICAgICBnZXREYXRhKHZtKTsNCiAgICB9LA0KICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLA0KICAgIGNhbmNlbExvYWRpbmc6IGZhbHNlLA0KICAgIGNvbnRlbnRzOiBbXSwNCiAgfTsNCg0KICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlUEJYQmFzaWNDb250ZW50KHZtKSk7DQogIGdldFBCWFRhYmxlRGF0YSh2bSwgMSk7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVBCWEJhc2ljQ29udGVudCh2bSkgew0KICAvL+a3u+WKoOahhg0KICBsZXQgYWRkTW9kYWxEYXRhID0gew0KICAgIHRpdGxlOiB2bS4kdCgiQWRkUEJYIiksDQogICAga2V5OiAtMSwNCiAgICBjYW5jZWxCdG5MYWJlbDogdm0uJHQoIkNhbmNlbCIpLA0KICAgIHN1Ym1pdEJ0bkxhYmVsOiB2bS4kdCgiU3VibWl0IiksDQogICAgdmlzaWJsZTogZmFsc2UsDQogICAgc2hvd0Zvb3RlcjogdHJ1ZSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlBCWFVzZXJOYW1lIiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGtleTogInVzZXJOYW1lIiwNCiAgICAgICAgdmFsdWU6ICIiLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQQlhVc2VybmFtZUVycm9yIiksDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUEJYVXNlcm5hbWVEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlBhc3N3b3JkTGFiZWwiKSwNCiAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAga2V5OiAicGFzc3dvcmQiLA0KICAgICAgICB2YWx1ZTogIiIsDQogICAgICAgIG1heExlbmd0aDogMzIsDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlBCWFBhc3N3b3JkRW1wdHkiKSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJQQlhQYXNzd29yZERlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUEJYRGlzcGxheU5hbWUiKSwNCiAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAga2V5OiAiZGlzcGxheU5hbWUiLA0KICAgICAgICB2YWx1ZTogIiIsDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICAgIG1heExlbmd0aDogMzIsDQogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlBCWERpc3BsYXlOYW1lRW1wdHkiKSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJQQlhEaXNwbGF5TmFtZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUEJYRW5hYmxlU3RhdHVzIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJwYnhTdGF0dXMiLA0KICAgICAgICB2YWx1ZTogIiIsDQogICAgICAgIGRlZmF1bHRWYWx1ZTogMCwNCiAgICAgICAgc2VsZWN0SXRlbXM6IFsNCiAgICAgICAgICB7IGtleTogMCwgbGFiZWw6IHZtLiR0KCJEaXNhYmxlZCIpIH0sDQogICAgICAgICAgeyBrZXk6IDEsIGxhYmVsOiB2bS4kdCgiRW5hYmxlZCIpIH0sDQogICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUEJYQWRkU3RhdHVzRGVzYyIpLA0KICAgICAgfSwNCiAgICBdLA0KICAgIG9uQ29uZmlybTogZnVuY3Rpb24gKCkgew0KICAgICAgb25DaGFuZ2VQQlgodm0pOw0KICAgIH0sDQogIH07DQoNCiAgLy90YWJsZSBoZWFkDQogIGxldCB0YWJsZUhlYWREYXRhID0gew0KICAgIGFkZE1vZGFsRGF0YTogYWRkTW9kYWxEYXRhLA0KICB9Ow0KDQogIC8vdGFibGUgZm9vdGVyDQogIGxldCB0YWJsZUZvb3RlckRhdGEgPSB7DQogICAgb25EZWxldGU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIG9uRGVsZXRlUEJYVXNlcih2bSwgInNlbGVjdCIpOw0KICAgIH0sDQogICAgb25EZWxldGVBbGw6IGZ1bmN0aW9uICgpIHsNCiAgICAgIG9uRGVsZXRlUEJYVXNlcih2bSwgImFsbCIpOw0KICAgIH0sDQogICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiAocGFnZSkgew0KICAgICAgZ2V0UEJYVGFibGVEYXRhKHZtLCBwYWdlKTsNCiAgICB9LA0KICAgIHN1bTogMCwNCiAgICBwYWdlTnVtYmVyOiAyMCwNCiAgICBjdXJQYWdlOiAwLA0KICAgIGRlbGV0ZURpc2FibGVkOiB0cnVlLA0KICAgIGRlbGV0ZUFsbERpc2FibGVkOiBmYWxzZSwNCiAgfTsNCg0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJQQlhCYXNpY1NldHRpbmciLA0KICAgIHRpdGxlOiB2bS4kdCgiUEJYQmFzaWNMYWJlbCIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJQQlhCYXNpY0Rlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlBCWFNlcnZpY2VFbmFibGUiKSwNCiAgICAgICAgdHlwZTogImNoZWNrYm94IiwNCiAgICAgICAga2V5OiAiUGJ4U2VydmljZUVuYWJsZWQiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5kYXRhLlBieEluZm9ybWF0aW9uLlBieFNlcnZpY2UsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUEJYU2VydmljZUVuYWJsZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUEJYU3RhdHVzIiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGtleTogIlBieFN0YXR1cyIsDQogICAgICAgIHZhbHVlOiAiIiwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJQQlhTdGF0dXNEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIk1lZGlhTW9kZWwiKSwNCiAgICAgICAgdHlwZTogInNlbGVjdCIsDQogICAgICAgIGtleTogIlBieE1lZGlhTW9kZWwiLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIk1lZGlhTW9kZWxEZXNjIiksDQogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmRhdGEuUGJ4SW5mb3JtYXRpb24uTWVkaWFNb2RlbCwNCiAgICAgICAgc2VsZWN0SXRlbXM6IFsNCiAgICAgICAgICB7IGtleTogMCwgbGFiZWw6IHZtLiR0KCJEZWZhdWx0IikgfSwNCiAgICAgICAgICB7IGtleTogMSwgbGFiZWw6IHZtLiR0KCJCeXBhc3MiKSB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJQQlhQb3J0IiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGtleTogIlBieFBvcnQiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5kYXRhLlBieEluZm9ybWF0aW9uLlBieFBvcnQsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUEJYUG9ydERlc2MiKSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgIH0sDQoNCiAgICAgIHsNCiAgICAgICAgdHlwZTogInRhYmxlIiwNCiAgICAgICAga2V5OiAicGJ4VXNlclRhYmxlIiwNCiAgICAgICAgc2hvd0hlYWQ6IHRydWUsDQogICAgICAgIHNob3dGb290ZXI6IHRydWUsDQogICAgICAgIHNob3dSb3dTZWxlY3Rpb246IHRydWUsDQogICAgICAgIHNlbGVjdGVkUm93S2V5czogW10sDQogICAgICAgIHRhYmxlSGVhZERhdGE6IHRhYmxlSGVhZERhdGEsDQogICAgICAgIHNob3dJbXBvcnQ6IGZhbHNlLA0KICAgICAgICB0YWJsZUZvb3RlckRhdGE6IHRhYmxlRm9vdGVyRGF0YSwNCiAgICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgICAgdGFibGVDb2x1bW5zOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogImxhYmVsIiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiSW5kZXgiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImluZGV4IiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImluZGV4IiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgd2lkdGg6ICIxMCUiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogImxhYmVsIiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiUEJYVXNlck5hbWUiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogInVzZXJOYW1lIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogInVzZXJOYW1lIiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgd2lkdGg6ICIxNSUiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogImxhYmVsIiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiUGFzc3dvcmRMYWJlbCIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAicGFzc3dvcmQiLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAicGFzc3dvcmQiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICB3aWR0aDogIjE1JSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAibGFiZWwiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJQQlhEaXNwbGF5TmFtZSIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAiZGlzcGxheU5hbWUiLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiZGlzcGxheU5hbWUiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICB3aWR0aDogIjMwJSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAic3R5bGUtbGFiZWwiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJQQlhFbmFibGVTdGF0dXMiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogInBieFN0YXR1cyIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJwYnhTdGF0dXMiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICB3aWR0aDogIjIwJSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAiZWRpdCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkVkaXRMYWJlbCIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAiZWRpdCIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJlZGl0IiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgd2lkdGg6ICIxMCUiLA0KICAgICAgICAgICAgb25FZGl0OiBmdW5jdGlvbiAoaW5kZXgsIGtleSkgew0KICAgICAgICAgICAgICBvblNldEVkaXRWYWx1ZShpbmRleCwga2V5LCB2bSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBnZXRQQlhUYWJsZURhdGEodm0sIHBhZ2UpIHsNCiAgdm0uJGF4aW9zLmdldCgiYXBpL3BieEJhc2ljL2dldD9wYWdlPSIgKyBwYWdlKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgIGxldCB0YWJsZURhdGEgPSBbXTsNCiAgICBsZXQgZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsNCg0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5wYnhVc2VyTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgbGV0IHN0YXR1c1ZhbHVlID0gIiI7DQogICAgICBsZXQgaXNSZWRDb2xvciA9IGZhbHNlOw0KICAgICAgaWYgKGRhdGEucGJ4VXNlckxpc3RbaV0uc3RhdHVzID09IDApew0KICAgICAgICBzdGF0dXNWYWx1ZSA9IHZtLiR0KCJEaXNhYmxlZCIpOw0KICAgICAgfSBlbHNlIGlmIChkYXRhLnBieFVzZXJMaXN0W2ldLnN0YXR1cyA9PSAxKSB7DQogICAgICAgIHN0YXR1c1ZhbHVlID0gdm0uJHQoIkNhbGxpbmciKTsNCiAgICAgIH0gZWxzZSBpZiAoZGF0YS5wYnhVc2VyTGlzdFtpXS5zdGF0dXMgPT0gMikgew0KICAgICAgICBzdGF0dXNWYWx1ZSA9IHZtLiR0KCJSZWdpc3RlcmVkIik7DQogICAgICB9IGVsc2UgaWYgKGRhdGEucGJ4VXNlckxpc3RbaV0uc3RhdHVzID09IDMpIHsNCiAgICAgICAgc3RhdHVzVmFsdWUgPSB2bS4kdCgiVW5SZWdpc3RlcmVkIik7DQogICAgICAgIGlzUmVkQ29sb3IgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgbGV0IGl0ZW0gPSB7DQogICAgICAgIGtleTogZGF0YS5wYnhVc2VyTGlzdFtpXS51c2VyTmFtZSwNCiAgICAgICAgaW5kZXg6IGkgKyAxLA0KICAgICAgICB1c2VyTmFtZTogZGF0YS5wYnhVc2VyTGlzdFtpXS51c2VyTmFtZSwNCiAgICAgICAgcGFzc3dvcmQ6IGRhdGEucGJ4VXNlckxpc3RbaV0ucGFzc3dvcmQsDQogICAgICAgIGRpc3BsYXlOYW1lOiBkYXRhLnBieFVzZXJMaXN0W2ldLmRpc3BsYXlOYW1lLA0KICAgICAgICBwYnhTdGF0dXM6IHsNCiAgICAgICAgICBpc1JlZExhYmVsOiBpc1JlZENvbG9yLA0KICAgICAgICAgIHZhbHVlOiBzdGF0dXNWYWx1ZSwNCiAgICAgICAgfSwNCiAgICAgICAgZWRpdDogaSwNCiAgICAgIH07DQogICAgICB0YWJsZURhdGEucHVzaChpdGVtKTsNCiAgICB9DQogICAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJQQlhCYXNpY1NldHRpbmciLCAicGJ4VXNlclRhYmxlIikudGFibGVEYXRhID0gdGFibGVEYXRhOw0KICAgIGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiUEJYQmFzaWNTZXR0aW5nIiwgInBieFVzZXJUYWJsZSIpLnRhYmxlRm9vdGVyRGF0YS5zdW0gPQ0KICAgICAgZGF0YS5zdW07DQogICAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJQQlhCYXNpY1NldHRpbmciLCAicGJ4VXNlclRhYmxlIikudGFibGVGb290ZXJEYXRhLnBhZ2VOdW1iZXIgPQ0KICAgICAgZGF0YS5wYWdlTnVtOw0KICAgIGdldEl0ZW1CeUtleSgNCiAgICAgIHZtLmRhdGEsDQogICAgICAiUEJYQmFzaWNTZXR0aW5nIiwNCiAgICAgICJwYnhVc2VyVGFibGUiDQogICAgKS50YWJsZUZvb3RlckRhdGEuY3VyUGFnZSA9IHBhZ2U7DQogICAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJQQlhCYXNpY1NldHRpbmciLCAicGJ4VXNlclRhYmxlIikuc2VsZWN0ZWRSb3dLZXlzID0gW107DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiBvbkNoYW5nZVBCWCh2bSkgew0KICBsZXQgYWRkTW9kYWxEYXRhID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJQQlhCYXNpY1NldHRpbmciLCAicGJ4VXNlclRhYmxlIikNCiAgICAudGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGE7DQogIGxldCB1c2VyTmFtZSA9DQogICAgYWRkTW9kYWxEYXRhLml0ZW1zW2dldEluZGV4QnlLZXkoYWRkTW9kYWxEYXRhLml0ZW1zLCAidXNlck5hbWUiKV07DQogIGxldCBwYXNzd29yZCA9DQogICAgYWRkTW9kYWxEYXRhLml0ZW1zW2dldEluZGV4QnlLZXkoYWRkTW9kYWxEYXRhLml0ZW1zLCAicGFzc3dvcmQiKV07DQogIGxldCBkaXNwbGF5TmFtZSA9DQogICAgYWRkTW9kYWxEYXRhLml0ZW1zW2dldEluZGV4QnlLZXkoYWRkTW9kYWxEYXRhLml0ZW1zLCAiZGlzcGxheU5hbWUiKV07DQogIGxldCBwYnhTdGF0dXMgPQ0KICAgIGFkZE1vZGFsRGF0YS5pdGVtc1tnZXRJbmRleEJ5S2V5KGFkZE1vZGFsRGF0YS5pdGVtcywgInBieFN0YXR1cyIpXTsNCg0KICBsZXQgZXJyRmxhZyA9IGZhbHNlOw0KICAvL3VzZXJuYW1lDQogIGlmICh1c2VyTmFtZS52YWx1ZSA9PSAiIiB8fCBpc05hTih1c2VyTmFtZS52YWx1ZSkgfHwgdXNlck5hbWUudmFsdWUubGVuZ3RoIDwgMiB8fCB1c2VyTmFtZS52YWx1ZS5sZW5ndGggPiA1KSB7DQogICAgdXNlck5hbWUuaXNXYXJuID0gdHJ1ZTsNCiAgICBlcnJGbGFnID0gdHJ1ZTsNCiAgfQ0KICAvL3Bhc3N3b3JkDQogIGlmIChwYXNzd29yZC52YWx1ZSA9PSAiIikgew0KICAgIHBhc3N3b3JkLmlzV2FybiA9IHRydWU7DQogICAgZXJyRmxhZyA9IHRydWU7DQogIH0NCiAgLy9kaXNwbGF5TmFtZQ0KICBpZiAoZGlzcGxheU5hbWUudmFsdWUgPT0gIiIpIHsNCiAgICBkaXNwbGF5TmFtZS5pc1dhcm4gPSB0cnVlOw0KICAgIGVyckZsYWcgPSB0cnVlOw0KICB9DQoNCiAgaWYgKGVyckZsYWcpIHsNCiAgICByZXR1cm47DQogIH0NCg0KDQogIGxldCBkYXRhID0gew0KICAgIHVzZXJOYW1lOiB1c2VyTmFtZS52YWx1ZSwNCiAgICBwYXNzd29yZDogcGFzc3dvcmQudmFsdWUsDQogICAgZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lLnZhbHVlLA0KICAgIHBieFN0YXR1czogcGJ4U3RhdHVzLnZhbHVlLA0KICB9Ow0KDQogIGxldCByZXF1ZXN0RGF0YSA9IHsNCiAgICB0YXJnZXQ6ICJwYnhCYXNpYyIsDQogICAgYWN0aW9uOiAiYWRkIiwNCiAgICBkYXRhOiBkYXRhLA0KICB9Ow0KICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgbGV0IHJldCA9IHJlc3BvbnNlLmRhdGEucmV0Y29kZTsNCiAgICBpZiAocmV0ID09IDApIHsNCiAgICAgIHVzZXJOYW1lLnZhbHVlID0gIiI7DQogICAgICBwYXNzd29yZC52YWx1ZSA9ICIiOw0KICAgICAgZGlzcGxheU5hbWUudmFsdWUgPSAiIjsNCiAgICAgIHBieFN0YXR1cy52YWx1ZSA9ICIiOw0KICAgICAgbGV0IHBhZ2UgPSAwOw0KICAgICAgbGV0IHRhYmxlSXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiUEJYQmFzaWNTZXR0aW5nIiwgInBieFVzZXJUYWJsZSIpOw0KICAgICAgcGFnZSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5wYWdlICsgMTsNCiAgICAgIGdldFBCWFRhYmxlRGF0YSh2bSwgcGFnZSk7DQogICAgICAvL+WFs+mXreeql+WPo+W5tuWxleekuuaIkOWKnw0KICAgICAgYWRkTW9kYWxEYXRhLnZpc2libGUgPSBmYWxzZTsNCiAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSk7DQogICAgfQ0KICB9KTsNCn0NCg0KZnVuY3Rpb24gb25TZXRFZGl0VmFsdWUoaW5kZXgsIGtleSwgdm0pIHsNCiAgbGV0IHRhYmxlSXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiUEJYQmFzaWNTZXR0aW5nIiwgInBieFVzZXJUYWJsZSIpOw0KICB0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXNbDQogICAgZ2V0SW5kZXhCeUtleSh0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXMsICJ1c2VyTmFtZSIpDQogIF0udmFsdWUgPSB0YWJsZUl0ZW0udGFibGVEYXRhW2luZGV4XS51c2VyTmFtZTsNCiAgdGFibGVJdGVtLnRhYmxlSGVhZERhdGEuYWRkTW9kYWxEYXRhLml0ZW1zWw0KICAgIGdldEluZGV4QnlLZXkodGFibGVJdGVtLnRhYmxlSGVhZERhdGEuYWRkTW9kYWxEYXRhLml0ZW1zLCAidXNlck5hbWUiKQ0KICBdLmRpc2FibGVkID0gdHJ1ZTsNCiAgdGFibGVJdGVtLnRhYmxlSGVhZERhdGEuYWRkTW9kYWxEYXRhLml0ZW1zWw0KICAgIGdldEluZGV4QnlLZXkodGFibGVJdGVtLnRhYmxlSGVhZERhdGEuYWRkTW9kYWxEYXRhLml0ZW1zLCAicGFzc3dvcmQiKQ0KICBdLnZhbHVlID0gdGFibGVJdGVtLnRhYmxlRGF0YVtpbmRleF0ucGFzc3dvcmQ7DQogIHRhYmxlSXRlbS50YWJsZUhlYWREYXRhLmFkZE1vZGFsRGF0YS5pdGVtc1sNCiAgICBnZXRJbmRleEJ5S2V5KHRhYmxlSXRlbS50YWJsZUhlYWREYXRhLmFkZE1vZGFsRGF0YS5pdGVtcywgImRpc3BsYXlOYW1lIikNCiAgXS52YWx1ZSA9IHRhYmxlSXRlbS50YWJsZURhdGFbaW5kZXhdLmRpc3BsYXlOYW1lOw0KICB0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXNbDQogICAgZ2V0SW5kZXhCeUtleSh0YWJsZUl0ZW0udGFibGVIZWFkRGF0YS5hZGRNb2RhbERhdGEuaXRlbXMsICJwYnhTdGF0dXMiKQ0KICBdLnZhbHVlID0gKHRhYmxlSXRlbS50YWJsZURhdGFbaW5kZXhdLnBieFN0YXR1cy52YWx1ZSA9PSB2bS4kdCgiRGlzYWJsZWQiKT8wOjEpOw0KfQ0KDQpmdW5jdGlvbiBvbkRlbGV0ZVBCWFVzZXIodm0sIHR5cGUpIHsNCiAgaWYgKA0KICAgICFjb25maXJtKA0KICAgICAgdHlwZSA9PSAiYWxsIiA/IHZtLiR0KCJEZWxldGVBbGxDb25maXJtIikgOiB2bS4kdCgiRGVsZXRlU2VsZWN0ZWRDb25maXJtIikNCiAgICApDQogICkgew0KICAgIHJldHVybjsNCiAgfQ0KICBsZXQgc2VsZWN0ZWRSb3dLZXlzID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJQQlhCYXNpY1NldHRpbmciLCAicGJ4VXNlclRhYmxlIikNCiAgICAuc2VsZWN0ZWRSb3dLZXlzOw0KICBsZXQgcmVxdWVzdERhdGEgPSB7DQogICAgdGFyZ2V0OiAicGJ4QmFzaWMiLA0KICAgIGFjdGlvbjogImRlbCIsDQogICAgZGF0YTogew0KICAgICAgdHlwZTogdHlwZSwNCiAgICAgIHVzZXJOYW1lczogc2VsZWN0ZWRSb3dLZXlzLA0KICAgIH0sDQogIH07DQogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOw0KICAgIGxldCB0YWJsZUZvb3RlckRhdGEgPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgIlBCWEJhc2ljU2V0dGluZyIsICJwYnhVc2VyVGFibGUiKQ0KICAgICAgLnRhYmxlRm9vdGVyRGF0YTsNCiAgICBpZiAodHlwZSAhPSAiYWxsIikgew0KICAgICAgbGV0IHN1bVBhZ2UgPSBNYXRoLmNlaWwoDQogICAgICAgICh0YWJsZUZvb3RlckRhdGEuc3VtIC0gc2VsZWN0ZWRSb3dLZXlzLmxlbmd0aCkgLw0KICAgICAgICAgIHRhYmxlRm9vdGVyRGF0YS5wYWdlTnVtYmVyDQogICAgICApOw0KICAgICAgc3VtUGFnZSA9IHN1bVBhZ2UgPT0gMCA/IDEgOiBzdW1QYWdlOw0KICAgICAgbGV0IHBhZ2UgPQ0KICAgICAgICB0YWJsZUZvb3RlckRhdGEuY3VyUGFnZSA+PSBzdW1QYWdlID8gc3VtUGFnZSA6IHRhYmxlRm9vdGVyRGF0YS5jdXJQYWdlOw0KICAgICAgZ2V0UEJYVGFibGVEYXRhKHZtLCBwYWdlKTsNCiAgICB9IGVsc2Ugew0KICAgICAgZ2V0UEJYVGFibGVEYXRhKHZtLCAxKTsNCiAgICB9DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiBjaGVja0NvbW1pdERhdGEodm0pIHsNCiAgbGV0IHN1Y2Nlc3MgPSB0cnVlOw0KICAvL3BvcnQNCiAgbGV0IHBvcnRJdGVtID0gZ2V0SXRlbUJ5S2V5KA0KICAgIHZtLmRhdGEsDQogICAgIlBCWEJhc2ljU2V0dGluZyIsDQogICAgIlBieFBvcnQiDQogICk7DQogIA0KICBpZihwb3J0SXRlbS52YWx1ZSAhPSB2bS5hcGlEYXRhLmRhdGEuUGJ4SW5mb3JtYXRpb24uUGJ4UG9ydCkgew0KICAgIGlmKCEoaXNQb3J0KHBvcnRJdGVtLnZhbHVlKSAmJiAocG9ydEl0ZW0udmFsdWU+PTEwMjQpKSl7DQogICAgICBwb3J0SXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgICAgcG9ydEl0ZW0ud2FybkxhYmVsID0gdm0uJHQoIlNlcnZlclBvcnRSYW5nZUVycm9yIik7DQogICAgICBzdWNjZXNzID0gZmFsc2U7DQogICAgfSBlbHNlIHsNCiAgICAgIHZhciB1c2VkcG9ydGxpc3QgPSB2bS5hcGlEYXRhLmRhdGEuUGJ4SW5mb3JtYXRpb24uVXNlZFBvcnQuc3BsaXQoIlxuIik7DQogICAgICBmb3IodmFyIGk9MDtpPHVzZWRwb3J0bGlzdC5sZW5ndGg7aSsrKXsNCiAgICAgICAgaWYodXNlZHBvcnRsaXN0W2ldPT1wb3J0SXRlbS52YWx1ZSl7DQogICAgICAgICAgcG9ydEl0ZW0uaXNXYXJuID0gdHJ1ZTsNCiAgICAgICAgICBwb3J0SXRlbS53YXJuTGFiZWwgPSB2bS4kdCgiV2FybmluZ1BvcnRVc2VkQWxyZWFkeSIpOw0KICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICByZXR1cm4gc3VjY2VzczsNCn0NCg0K"},{"version":3,"sources":["PbxBasic.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PbxBasic.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <CommonPage :data=\"data\" @onDataChange=\"onCommonPageDataChange($event)\"></CommonPage>\r\n</template>\r\n\r\n<script>\r\nimport CommonPage from \"@/components/CommonPage.vue\";\r\nimport {\r\n  showRequestSuccess,\r\n  deepClone,\r\n  getItemByKey,\r\n  getIndexByKey,\r\n  showWarningInfo,\r\n  showErrorInfo,\r\n  isPort\r\n} from \"@/js/common.js\";\r\n\r\nexport default {\r\n  components: {\r\n    CommonPage,\r\n  },\r\n  data() {\r\n    return {\r\n      changedCfgData: {},\r\n      submitCfgData: {},\r\n      apiData: {},\r\n      data: {\r\n        getDataSuccess: false,\r\n      },\r\n      interObj: Object,\r\n      dotNumArr:[0,0],\r\n      dotTxtArr:[\"\",\"\"],\r\n      timeCntArr:[0,0],\r\n    };\r\n  },\r\n  created() {\r\n    getData(this);\r\n    this.interObj = setInterval(() =>{\r\n       getPBXStatus(this);\r\n    }, 500);\r\n  },\r\n  destroyed() {\r\n    clearInterval(this.interObj);\r\n  },\r\n  methods: {\r\n    onCommonPageDataChange: function (event) {\r\n      setChangedData(this, event);\r\n    },\r\n  },\r\n};\r\n\r\nfunction setChangedData(vm, event) {\r\n\r\n}\r\n\r\nfunction getPBXStatus(vm) {\r\n  vm.$axios.get(\"api/pbxBasic/info\").then((response) => {\r\n    vm.getDataSuccess = true;\r\n    OnStatusAction(vm,response.data.data.PbxInformation.Status);\r\n    setPortEnabled(vm,response.data.data.PbxInformation.Status);\r\n  });\r\n}\r\n\r\nfunction OnStatusAction(vm,statusValue){\r\n  let item = getItemByKey(\r\n    vm.data,\r\n    \"PBXBasicSetting\",\r\n    \"PbxStatus\"\r\n  );\r\n  if(statusValue == \"3\"){\r\n  item.value = vm.$t(\"PBXStatusStarted\");\r\n    clearInterval(vm.interObj);\r\n  } else if(statusValue == \"2\"){\r\n    if(vm.dotNumArr[0] >= 5){\r\n      vm.dotNumArr[0] = 0;\r\n      vm.dotTxtArr[0] = \"\";\r\n    }\r\n    item.value = vm.$t(\"PBXStatusStarting\") + vm.dotTxtArr[0];\r\n    vm.dotTxtArr[0] += \".\";\r\n    vm.dotNumArr[0]++;\r\n    vm.timeCntArr[0]++;\r\n  } else if(statusValue == \"4\"){\r\n    if(vm.dotNumArr[0] >= 5)\r\n\t\t{\r\n\t\t\tvm.dotNumArr[0] = 0;\r\n\t\t\tvm.dotTxtArr[0] = \"\";\r\n\t\t}\r\n\t\titem.value =  vm.$t(\"PBXStatusStopping\") + vm.dotTxtArr[0];\r\n\t\tvm.dotTxtArr[0] += \".\";\r\n\t\tvm.dotNumArr[0]++;\r\n\t\tvm.timeCntArr[0]++;\r\n  } else if(statusValue == \"1\"){\r\n    item.value = vm.$t(\"PBXStatusStopped\");\r\n    clearInterval(vm.interObj);\r\n  } else if(statusValue == \"0\"){\r\n    item.value = vm.$t(\"PBXStatusUnReady\");\r\n\t\tclearInterval(vm.interObj);\r\n\t} else{\r\n    if(vm.dotNumArr[1] >= 5){\r\n      vm.dotNumArr[1] = 0;\r\n      vm.dotTxtArr[1] = \"\";\r\n    }\r\n    if(vm.timeCntArr[1] > 20){\r\n      clearInterval(vm.interObj);\r\n      vm.dotNumArr[1] = vm.timeCntArr[1] = 0;\r\n      item.value = vm.$t(\"UnRegistered\");\r\n      vm.dotTxtArr[1] = \"\";\r\n    } else{\r\n      item.value = vm.$t(\"UnRegistered\");\r\n    }\r\n    vm.dotTxtArr[1] += \".\";\r\n    vm.dotNumArr[1]++;\r\n    vm.timeCntArr[1]++;\r\n  }\r\n}\r\n\r\nfunction submitData(vm) {\r\n  vm.data.submitLoading = true;\r\n\r\n  let data = {};\r\n  //model\r\n  let modelItem = getItemByKey(\r\n    vm.data,\r\n    \"PBXBasicSetting\",\r\n    \"PbxMediaModel\"\r\n  );\r\n  if(modelItem.value != vm.apiData.data.PbxInformation.MediaModel) {\r\n    vm.apiData.data.PbxInformation.MediaModel = modelItem.value;\r\n    data[\"PBXMediaModel\"] = modelItem.value;\r\n  }\r\n\r\n  //service\r\n  let serviceItem = getItemByKey(\r\n    vm.data,\r\n    \"PBXBasicSetting\",\r\n    \"PbxServiceEnabled\"\r\n  );\r\n  if(serviceItem.value != vm.apiData.data.PbxInformation.PbxService) {\r\n    vm.apiData.data.PbxInformation.PbxService = serviceItem.value;\r\n    data[\"PBXService\"] = serviceItem.value;\r\n  }\r\n\r\n  //port\r\n  let portItem = getItemByKey(\r\n    vm.data,\r\n    \"PBXBasicSetting\",\r\n    \"PbxPort\"\r\n  );\r\n  if(portItem.value != vm.apiData.data.PbxInformation.PbxPort) {\r\n    vm.apiData.data.PbxInformation.PbxPort = portItem.value;\r\n    data[\"PBXPort\"] = portItem.value;\r\n  }\r\n\r\n  let requestData = {\r\n    target: \"pbxBasic\",\r\n    action: \"set\",\r\n    configData: vm.submitCfgData,\r\n    data: data,\r\n  };\r\n\r\n  vm.$axios.post(\"api\", requestData).then((response) => {\r\n    if (\"undefined\" != typeof response) {\r\n      showRequestSuccess(vm);\r\n    }\r\n    vm.data.submitLoading = false;\r\n  });\r\n}\r\n\r\nfunction getData(vm) {\r\n  vm.$axios.get(\"api/pbxBasic/info\").then((response) => {\r\n    vm.getDataSuccess = true;\r\n    vm.apiData = response.data;\r\n    vm.changedCfgData = deepClone(response.data.configData);\r\n    createPageData(vm);\r\n  });\r\n}\r\n\r\nfunction setPortEnabled(vm,statusValue) {\r\n  let item = getItemByKey(\r\n    vm.data,\r\n    \"PBXBasicSetting\",\r\n    \"PbxPort\"\r\n  );\r\n  item.disabled = (statusValue > 1);\r\n}\r\n\r\nfunction getCommitData(vm) {\r\n  vm.submitCfgData = {};\r\n  for (var changedKey in vm.changedCfgData) {\r\n    if (vm.apiData.configData[changedKey] != vm.changedCfgData[changedKey]) {\r\n      vm.submitCfgData[changedKey] = vm.changedCfgData[changedKey];\r\n    }\r\n  }\r\n}\r\n\r\nfunction createPageData(vm) {\r\n  vm.data = {\r\n    getDataSuccess: true,\r\n    breadCrumb: {\r\n      firstTitle: vm.$t(\"PBX\"),\r\n      secondTitle: vm.$t(\"PBXBasic\"),\r\n    },\r\n    onSubmit: function () {\r\n      getCommitData(vm);\r\n      if (!checkCommitData(vm)) {\r\n        return;\r\n      }\r\n      submitData(vm);\r\n      vm.interObj = setInterval(() =>{\r\n        getPBXStatus(vm);\r\n      }, 500);\r\n    },\r\n    onCancel: function () {\r\n      vm.data.cancelLoading = true;\r\n      getData(vm);\r\n    },\r\n    submitLoading: false,\r\n    cancelLoading: false,\r\n    contents: [],\r\n  };\r\n\r\n  vm.data.contents.push(createPBXBasicContent(vm));\r\n  getPBXTableData(vm, 1);\r\n}\r\n\r\nfunction createPBXBasicContent(vm) {\r\n  //添加框\r\n  let addModalData = {\r\n    title: vm.$t(\"AddPBX\"),\r\n    key: -1,\r\n    cancelBtnLabel: vm.$t(\"Cancel\"),\r\n    submitBtnLabel: vm.$t(\"Submit\"),\r\n    visible: false,\r\n    showFooter: true,\r\n    items: [\r\n      {\r\n        title: vm.$t(\"PBXUserName\"),\r\n        type: \"input\",\r\n        key: \"userName\",\r\n        value: \"\",\r\n        isWarn: false,\r\n        warnLabel: vm.$t(\"PBXUsernameError\"),\r\n        description: vm.$t(\"PBXUsernameDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"PasswordLabel\"),\r\n        type: \"input\",\r\n        key: \"password\",\r\n        value: \"\",\r\n        maxLength: 32,\r\n        isWarn: false,\r\n        warnLabel: vm.$t(\"PBXPasswordEmpty\"),\r\n        description: vm.$t(\"PBXPasswordDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"PBXDisplayName\"),\r\n        type: \"input\",\r\n        key: \"displayName\",\r\n        value: \"\",\r\n        isWarn: false,\r\n        maxLength: 32,\r\n        warnLabel: vm.$t(\"PBXDisplayNameEmpty\"),\r\n        description: vm.$t(\"PBXDisplayNameDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"PBXEnableStatus\"),\r\n        type: \"select\",\r\n        key: \"pbxStatus\",\r\n        value: \"\",\r\n        defaultValue: 0,\r\n        selectItems: [\r\n          { key: 0, label: vm.$t(\"Disabled\") },\r\n          { key: 1, label: vm.$t(\"Enabled\") },\r\n        ],\r\n        description: vm.$t(\"PBXAddStatusDesc\"),\r\n      },\r\n    ],\r\n    onConfirm: function () {\r\n      onChangePBX(vm);\r\n    },\r\n  };\r\n\r\n  //table head\r\n  let tableHeadData = {\r\n    addModalData: addModalData,\r\n  };\r\n\r\n  //table footer\r\n  let tableFooterData = {\r\n    onDelete: function () {\r\n      onDeletePBXUser(vm, \"select\");\r\n    },\r\n    onDeleteAll: function () {\r\n      onDeletePBXUser(vm, \"all\");\r\n    },\r\n    onPageChange: function (page) {\r\n      getPBXTableData(vm, page);\r\n    },\r\n    sum: 0,\r\n    pageNumber: 20,\r\n    curPage: 0,\r\n    deleteDisabled: true,\r\n    deleteAllDisabled: false,\r\n  };\r\n\r\n  let content = {\r\n    key: \"PBXBasicSetting\",\r\n    title: vm.$t(\"PBXBasicLabel\"),\r\n    titleDescription: vm.$t(\"PBXBasicDesc\"),\r\n    items: [\r\n      {\r\n        title: vm.$t(\"PBXServiceEnable\"),\r\n        type: \"checkbox\",\r\n        key: \"PbxServiceEnabled\",\r\n        value: vm.apiData.data.PbxInformation.PbxService,\r\n        description: vm.$t(\"PBXServiceEnableDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"PBXStatus\"),\r\n        type: \"input\",\r\n        key: \"PbxStatus\",\r\n        value: \"\",\r\n        description: vm.$t(\"PBXStatusDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"MediaModel\"),\r\n        type: \"select\",\r\n        key: \"PbxMediaModel\",\r\n        description: vm.$t(\"MediaModelDesc\"),\r\n        value: vm.apiData.data.PbxInformation.MediaModel,\r\n        selectItems: [\r\n          { key: 0, label: vm.$t(\"Default\") },\r\n          { key: 1, label: vm.$t(\"Bypass\") },\r\n        ],\r\n      },\r\n      {\r\n        title: vm.$t(\"PBXPort\"),\r\n        type: \"input\",\r\n        key: \"PbxPort\",\r\n        value: vm.apiData.data.PbxInformation.PbxPort,\r\n        description: vm.$t(\"PBXPortDesc\"),\r\n        isWarn: false,\r\n      },\r\n\r\n      {\r\n        type: \"table\",\r\n        key: \"pbxUserTable\",\r\n        showHead: true,\r\n        showFooter: true,\r\n        showRowSelection: true,\r\n        selectedRowKeys: [],\r\n        tableHeadData: tableHeadData,\r\n        showImport: false,\r\n        tableFooterData: tableFooterData,\r\n        tableData: [],\r\n        tableColumns: [\r\n          {\r\n            type: \"label\",\r\n            title: vm.$t(\"Index\"),\r\n            dataIndex: \"index\",\r\n            scopedSlots: { customRender: \"index\" },\r\n            align: \"center\",\r\n            width: \"10%\",\r\n          },\r\n          {\r\n            type: \"label\",\r\n            title: vm.$t(\"PBXUserName\"),\r\n            dataIndex: \"userName\",\r\n            scopedSlots: { customRender: \"userName\" },\r\n            align: \"center\",\r\n            width: \"15%\",\r\n          },\r\n          {\r\n            type: \"label\",\r\n            title: vm.$t(\"PasswordLabel\"),\r\n            dataIndex: \"password\",\r\n            scopedSlots: { customRender: \"password\" },\r\n            align: \"center\",\r\n            width: \"15%\",\r\n          },\r\n          {\r\n            type: \"label\",\r\n            title: vm.$t(\"PBXDisplayName\"),\r\n            dataIndex: \"displayName\",\r\n            scopedSlots: { customRender: \"displayName\" },\r\n            align: \"center\",\r\n            width: \"30%\",\r\n          },\r\n          {\r\n            type: \"style-label\",\r\n            title: vm.$t(\"PBXEnableStatus\"),\r\n            dataIndex: \"pbxStatus\",\r\n            scopedSlots: { customRender: \"pbxStatus\" },\r\n            align: \"center\",\r\n            width: \"20%\",\r\n          },\r\n          {\r\n            type: \"edit\",\r\n            title: vm.$t(\"EditLabel\"),\r\n            dataIndex: \"edit\",\r\n            scopedSlots: { customRender: \"edit\" },\r\n            align: \"center\",\r\n            width: \"10%\",\r\n            onEdit: function (index, key) {\r\n              onSetEditValue(index, key, vm);\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n  };\r\n  return content;\r\n}\r\n\r\nfunction getPBXTableData(vm, page) {\r\n  vm.$axios.get(\"api/pbxBasic/get?page=\" + page).then((response) => {\r\n    let tableData = [];\r\n    let data = response.data.data;\r\n\r\n    for (let i = 0; i < data.pbxUserList.length; i++) {\r\n      let statusValue = \"\";\r\n      let isRedColor = false;\r\n      if (data.pbxUserList[i].status == 0){\r\n        statusValue = vm.$t(\"Disabled\");\r\n      } else if (data.pbxUserList[i].status == 1) {\r\n        statusValue = vm.$t(\"Calling\");\r\n      } else if (data.pbxUserList[i].status == 2) {\r\n        statusValue = vm.$t(\"Registered\");\r\n      } else if (data.pbxUserList[i].status == 3) {\r\n        statusValue = vm.$t(\"UnRegistered\");\r\n        isRedColor = true;\r\n      }\r\n      let item = {\r\n        key: data.pbxUserList[i].userName,\r\n        index: i + 1,\r\n        userName: data.pbxUserList[i].userName,\r\n        password: data.pbxUserList[i].password,\r\n        displayName: data.pbxUserList[i].displayName,\r\n        pbxStatus: {\r\n          isRedLabel: isRedColor,\r\n          value: statusValue,\r\n        },\r\n        edit: i,\r\n      };\r\n      tableData.push(item);\r\n    }\r\n    getItemByKey(vm.data, \"PBXBasicSetting\", \"pbxUserTable\").tableData = tableData;\r\n    getItemByKey(vm.data, \"PBXBasicSetting\", \"pbxUserTable\").tableFooterData.sum =\r\n      data.sum;\r\n    getItemByKey(vm.data, \"PBXBasicSetting\", \"pbxUserTable\").tableFooterData.pageNumber =\r\n      data.pageNum;\r\n    getItemByKey(\r\n      vm.data,\r\n      \"PBXBasicSetting\",\r\n      \"pbxUserTable\"\r\n    ).tableFooterData.curPage = page;\r\n    getItemByKey(vm.data, \"PBXBasicSetting\", \"pbxUserTable\").selectedRowKeys = [];\r\n  });\r\n}\r\n\r\nfunction onChangePBX(vm) {\r\n  let addModalData = getItemByKey(vm.data, \"PBXBasicSetting\", \"pbxUserTable\")\r\n    .tableHeadData.addModalData;\r\n  let userName =\r\n    addModalData.items[getIndexByKey(addModalData.items, \"userName\")];\r\n  let password =\r\n    addModalData.items[getIndexByKey(addModalData.items, \"password\")];\r\n  let displayName =\r\n    addModalData.items[getIndexByKey(addModalData.items, \"displayName\")];\r\n  let pbxStatus =\r\n    addModalData.items[getIndexByKey(addModalData.items, \"pbxStatus\")];\r\n\r\n  let errFlag = false;\r\n  //username\r\n  if (userName.value == \"\" || isNaN(userName.value) || userName.value.length < 2 || userName.value.length > 5) {\r\n    userName.isWarn = true;\r\n    errFlag = true;\r\n  }\r\n  //password\r\n  if (password.value == \"\") {\r\n    password.isWarn = true;\r\n    errFlag = true;\r\n  }\r\n  //displayName\r\n  if (displayName.value == \"\") {\r\n    displayName.isWarn = true;\r\n    errFlag = true;\r\n  }\r\n\r\n  if (errFlag) {\r\n    return;\r\n  }\r\n\r\n\r\n  let data = {\r\n    userName: userName.value,\r\n    password: password.value,\r\n    displayName: displayName.value,\r\n    pbxStatus: pbxStatus.value,\r\n  };\r\n\r\n  let requestData = {\r\n    target: \"pbxBasic\",\r\n    action: \"add\",\r\n    data: data,\r\n  };\r\n  vm.$axios.post(\"api\", requestData).then((response) => {\r\n    let ret = response.data.retcode;\r\n    if (ret == 0) {\r\n      userName.value = \"\";\r\n      password.value = \"\";\r\n      displayName.value = \"\";\r\n      pbxStatus.value = \"\";\r\n      let page = 0;\r\n      let tableItem = getItemByKey(vm.data, \"PBXBasicSetting\", \"pbxUserTable\");\r\n      page = response.data.data.page + 1;\r\n      getPBXTableData(vm, page);\r\n      //关闭窗口并展示成功\r\n      addModalData.visible = false;\r\n      showRequestSuccess(vm);\r\n    }\r\n  });\r\n}\r\n\r\nfunction onSetEditValue(index, key, vm) {\r\n  let tableItem = getItemByKey(vm.data, \"PBXBasicSetting\", \"pbxUserTable\");\r\n  tableItem.tableHeadData.addModalData.items[\r\n    getIndexByKey(tableItem.tableHeadData.addModalData.items, \"userName\")\r\n  ].value = tableItem.tableData[index].userName;\r\n  tableItem.tableHeadData.addModalData.items[\r\n    getIndexByKey(tableItem.tableHeadData.addModalData.items, \"userName\")\r\n  ].disabled = true;\r\n  tableItem.tableHeadData.addModalData.items[\r\n    getIndexByKey(tableItem.tableHeadData.addModalData.items, \"password\")\r\n  ].value = tableItem.tableData[index].password;\r\n  tableItem.tableHeadData.addModalData.items[\r\n    getIndexByKey(tableItem.tableHeadData.addModalData.items, \"displayName\")\r\n  ].value = tableItem.tableData[index].displayName;\r\n  tableItem.tableHeadData.addModalData.items[\r\n    getIndexByKey(tableItem.tableHeadData.addModalData.items, \"pbxStatus\")\r\n  ].value = (tableItem.tableData[index].pbxStatus.value == vm.$t(\"Disabled\")?0:1);\r\n}\r\n\r\nfunction onDeletePBXUser(vm, type) {\r\n  if (\r\n    !confirm(\r\n      type == \"all\" ? vm.$t(\"DeleteAllConfirm\") : vm.$t(\"DeleteSelectedConfirm\")\r\n    )\r\n  ) {\r\n    return;\r\n  }\r\n  let selectedRowKeys = getItemByKey(vm.data, \"PBXBasicSetting\", \"pbxUserTable\")\r\n    .selectedRowKeys;\r\n  let requestData = {\r\n    target: \"pbxBasic\",\r\n    action: \"del\",\r\n    data: {\r\n      type: type,\r\n      userNames: selectedRowKeys,\r\n    },\r\n  };\r\n  vm.$axios.post(\"api\", requestData).then((response) => {\r\n    showRequestSuccess(vm);\r\n    let tableFooterData = getItemByKey(vm.data, \"PBXBasicSetting\", \"pbxUserTable\")\r\n      .tableFooterData;\r\n    if (type != \"all\") {\r\n      let sumPage = Math.ceil(\r\n        (tableFooterData.sum - selectedRowKeys.length) /\r\n          tableFooterData.pageNumber\r\n      );\r\n      sumPage = sumPage == 0 ? 1 : sumPage;\r\n      let page =\r\n        tableFooterData.curPage >= sumPage ? sumPage : tableFooterData.curPage;\r\n      getPBXTableData(vm, page);\r\n    } else {\r\n      getPBXTableData(vm, 1);\r\n    }\r\n  });\r\n}\r\n\r\nfunction checkCommitData(vm) {\r\n  let success = true;\r\n  //port\r\n  let portItem = getItemByKey(\r\n    vm.data,\r\n    \"PBXBasicSetting\",\r\n    \"PbxPort\"\r\n  );\r\n  \r\n  if(portItem.value != vm.apiData.data.PbxInformation.PbxPort) {\r\n    if(!(isPort(portItem.value) && (portItem.value>=1024))){\r\n      portItem.isWarn = true;\r\n      portItem.warnLabel = vm.$t(\"ServerPortRangeError\");\r\n      success = false;\r\n    } else {\r\n      var usedportlist = vm.apiData.data.PbxInformation.UsedPort.split(\"\\n\");\r\n      for(var i=0;i<usedportlist.length;i++){\r\n        if(usedportlist[i]==portItem.value){\r\n          portItem.isWarn = true;\r\n          portItem.warnLabel = vm.$t(\"WarningPortUsedAlready\");\r\n          success = false;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return success;\r\n}\r\n\r\n</script>"]}]}