{"remainingRequest":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\AccountAdvanced.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\AccountAdvanced.vue","mtime":1625715617934},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1624613273395},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1624613260275},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ29tbW9uUGFnZSBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uUGFnZS52dWUiOw0KaW1wb3J0IHsNCiAgc2hvd1JlcXVlc3RTdWNjZXNzLA0KICBkZWVwQ2xvbmUsDQogIGdldEluZGV4QnlLZXksDQogIGlzUG9ydCwNCiAgY2hlY2tSYW5nZU9mTnVtYmVyLA0KICBub3RDb250YWluSW52YWxpZCwNCiAgaXNQb3J0VXNlZCwNCn0gZnJvbSAiQC9qcy9jb21tb24uanMiOw0KaW1wb3J0IHsgZ2V0SXRlbUJ5S2V5IH0gZnJvbSAiLi4vanMvY29tbW9uIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgQ29tbW9uUGFnZSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY2hhbmdlZENmZ0RhdGE6IHt9LA0KICAgICAgc3VibWl0Q2ZnRGF0YToge30sDQogICAgICBhcGlEYXRhOiB7fSwNCiAgICAgIGRhdGE6IHsNCiAgICAgICAgZ2V0RGF0YVN1Y2Nlc3M6IGZhbHNlLA0KICAgICAgfSwNCiAgICAgIEN1cnJlbnRBY2NvdW50OiAxLA0KICAgICAgYXVkaW9Db2RlY3NJdGVtczogW10sDQogICAgICBhdWRpb0NvZGVjc1RhcmdldEl0ZW1zOiBbXSwNCiAgICAgIHZpZGVvQ29kZWNzSXRlbXM6IFtdLA0KICAgICAgdmlkZW9Db2RlY3NUYXJnZXRJdGVtczogW10sDQogICAgICBjb2RlQml0UmF0ZUl0ZW1zMTogWw0KICAgICAgICB7IGtleTogIjY0IiwgbGFiZWw6ICI2NCIgfSwNCiAgICAgICAgeyBrZXk6ICIxMjgiLCBsYWJlbDogIjEyOCIgfSwNCiAgICAgIF0sDQogICAgICBjb2RlQml0UmF0ZUl0ZW1zMjogWw0KICAgICAgICB7IGtleTogIjEyOCIsIGxhYmVsOiAiMTI4IiB9LA0KICAgICAgICB7IGtleTogIjI1NiIsIGxhYmVsOiAiMjU2IiB9LA0KICAgICAgICB7IGtleTogIjMyMCIsIGxhYmVsOiAiMzIwIiB9LA0KICAgICAgICB7IGtleTogIjUxMiIsIGxhYmVsOiAiNTEyIiB9LA0KICAgICAgXSwNCiAgICAgIGNvZGVCaXRSYXRlSXRlbXMzOiBbDQogICAgICAgIHsga2V5OiAiNTEyIiwgbGFiZWw6ICI1MTIiIH0sDQogICAgICAgIHsga2V5OiAiNzY4IiwgbGFiZWw6ICI3NjgiIH0sDQogICAgICAgIHsga2V5OiAiMTAyNCIsIGxhYmVsOiAiMTAyNCIgfSwNCiAgICAgICAgeyBrZXk6ICIxNTM2IiwgbGFiZWw6ICIxNTM2IiB9LA0KICAgICAgICB7IGtleTogIjIwNDgiLCBsYWJlbDogIjIwNDgiIH0sDQogICAgICBdLA0KICAgICAgY29kZVBheUxvYWRJdGVtczE6IFtdLA0KICAgICAgY29kZVBheUxvYWRJdGVtczI6IFtdLA0KICAgICAgYXVkaW9Db2RlY3NFbmFibGVJdGVtczogW10sDQogICAgICBhdWRpb0NvZGVjc0Rpc2FibGVJdGVtczogW10sDQogICAgICB2aWRlb0NvZGVjc0VuYWJsZUl0ZW1zOiBbXSwNCiAgICAgIHZpZGVvQ29kZWNzRGlzYWJsZUl0ZW1zOiBbXSwNCiAgICAgIE9QVVNFbmFibGU6ICIiLA0KICAgICAgT1BVU0Rpc2FibGU6ICIiLA0KICAgICAgdXNlZFBvcnRJdGVtczogW10sDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBmb3IgKHZhciBpID0gOTA7IGkgPCAxMjA7IGkrKykgew0KICAgICAgbGV0IGl0ZW0xID0geyBrZXk6IGkgLSA4OSwgbGFiZWw6IGkgfTsNCiAgICAgIGxldCBpdGVtMiA9IHsga2V5OiBpIC0gOTAsIGxhYmVsOiBpIH07DQogICAgICB0aGlzLmNvZGVQYXlMb2FkSXRlbXMxLnB1c2goaXRlbTEpOw0KICAgICAgdGhpcy5jb2RlUGF5TG9hZEl0ZW1zMi5wdXNoKGl0ZW0yKTsNCiAgICB9DQogICAgZ2V0RGF0YSh0aGlzLCB0aGlzLkN1cnJlbnRBY2NvdW50KTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2U6IGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgaWYgKGV2ZW50Lml0ZW1LZXkgPT0gImN1cnJlbnRBY2NvdW50Iikgew0KICAgICAgICB0aGlzLkN1cnJlbnRBY2NvdW50ID0gZXZlbnQubmV3VmFsOw0KICAgICAgfSBlbHNlIGlmIChldmVudC5pdGVtS2V5ID09ICJhdWRpb0NvZGVjc0l0ZW1zIikgew0KICAgICAgICB0aGlzLmF1ZGlvQ29kZWNzVGFyZ2V0SXRlbXMgPSBldmVudC5uZXdWYWw7DQogICAgICB9IGVsc2UgaWYgKGV2ZW50Lml0ZW1LZXkgPT0gInZpZGVvQ29kZWNzSXRlbXMiKSB7DQogICAgICAgIHRoaXMudmlkZW9Db2RlY3NUYXJnZXRJdGVtcyA9IGV2ZW50Lm5ld1ZhbDsNCiAgICAgIH0gZWxzZSBpZihldmVudC5pdGVtS2V5ID09ICJDb25maWcuQWNjb3VudCIgKyB0aGlzLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAxLlByb2ZpbGVMZXZlbCIpew0KICAgICAgICBDaGFuZ2VDb2RlY1Jlc29sdXRpb25PcHRpb24odGhpcywidmlkZW9Db2RlYyIsIkNvbmZpZy5BY2NvdW50IiArIHRoaXMuQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDEuTWF4QlIiLCBldmVudC5uZXdWYWwpOw0KICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOw0KICAgICAgfSBlbHNlIGlmKGV2ZW50Lml0ZW1LZXkgPT0gIkNvbmZpZy5BY2NvdW50IiArIHRoaXMuQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDAuUHJvZmlsZUxldmVsIil7DQogICAgICAgIENoYW5nZUNvZGVjUmVzb2x1dGlvbk9wdGlvbih0aGlzLCJ2aWRlb0NvZGVjIiwiQ29uZmlnLkFjY291bnQiICsgdGhpcy5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMC5NYXhCUiIsIGV2ZW50Lm5ld1ZhbCk7DQogICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7DQogICAgICB9IGVsc2UgaWYoZXZlbnQuaXRlbUtleSA9PSAiQ29uZmlnLkFjY291bnQiICsgdGhpcy5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMy5Qcm9maWxlTGV2ZWwiKXsNCiAgICAgICAgQ2hhbmdlQ29kZWNSZXNvbHV0aW9uT3B0aW9uKHRoaXMsInZpZGVvQ29kZWMiLCJDb25maWcuQWNjb3VudCIgKyB0aGlzLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAzLk1heEJSIiwgZXZlbnQubmV3VmFsKTsNCiAgICAgICAgdGhpcy5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGV2ZW50Lm5ld1ZhbDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7DQogICAgICB9DQogICAgICBjaGVja1BvcnRXYXJuKHRoaXMpOw0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgQ3VycmVudEFjY291bnQobmV3VmFsLCBvbGRWYWwpIHsNCiAgICAgIGdldERhdGEodGhpcywgbmV3VmFsKTsNCiAgICB9LA0KICAgIGNoYW5nZWRDZmdEYXRhOiB7DQogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHsNCiAgICAgICAgLy/nm5HlkKxNV0kgU3Vic2NyaWJlIFBlcmlvZA0KICAgICAgICBsZXQgY29udGVudEtleUluZGV4ID0gZ2V0SW5kZXhCeUtleSh0aGlzLmRhdGEuY29udGVudHMsICJzdWJzY3JpYmUiKTsNCiAgICAgICAgbGV0IGl0ZW1LZXlJbmRleCA9IGdldEluZGV4QnlLZXkoDQogICAgICAgICAgdGhpcy5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXMsDQogICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArDQogICAgICAgICAgICB0aGlzLkN1cnJlbnRBY2NvdW50ICsNCiAgICAgICAgICAgICIuU1VCU0NSSUJFLlN1YnNjcmliZU1XSUV4cGlyZSINCiAgICAgICAgKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIG5ld1ZhbFsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB0aGlzLkN1cnJlbnRBY2NvdW50ICsgIi5TVUJTQ1JJQkUuU3Vic3JpYmVNV0kiDQogICAgICAgICAgXSA9PSAwDQogICAgICAgICkgew0KICAgICAgICAgIHRoaXMuZGF0YS5jb250ZW50c1tjb250ZW50S2V5SW5kZXhdLml0ZW1zWw0KICAgICAgICAgICAgaXRlbUtleUluZGV4DQogICAgICAgICAgXS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbDQogICAgICAgICAgICBpdGVtS2V5SW5kZXgNCiAgICAgICAgICBdLmRpc2FibGVkID0gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAvL+ebkeWQrERUTUYgVHlwZQ0KICAgICAgICBjb250ZW50S2V5SW5kZXggPSBnZXRJbmRleEJ5S2V5KHRoaXMuZGF0YS5jb250ZW50cywgImR0bWYiKTsNCiAgICAgICAgaXRlbUtleUluZGV4ID0gZ2V0SW5kZXhCeUtleSgNCiAgICAgICAgICB0aGlzLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtcywNCiAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdGhpcy5DdXJyZW50QWNjb3VudCArICIuRFRNRi5JbmZvVHlwZSINCiAgICAgICAgKTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIG5ld1ZhbFsiQ29uZmlnLkFjY291bnQiICsgdGhpcy5DdXJyZW50QWNjb3VudCArICIuRFRNRi5UeXBlIl0gPj0gMw0KICAgICAgICApIHsNCiAgICAgICAgICB0aGlzLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1sNCiAgICAgICAgICAgIGl0ZW1LZXlJbmRleA0KICAgICAgICAgIF0uZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1sNCiAgICAgICAgICAgIGl0ZW1LZXlJbmRleA0KICAgICAgICAgIF0uZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICB9LA0KICB9LA0KfTsNCg0KZnVuY3Rpb24gY2hlY2tQb3J0V2Fybih2bSkgew0KICBsZXQgaXRlbTEgPSBnZXRJdGVtQnlLZXkoDQogICAgdm0uZGF0YSwNCiAgICAiY2FsbCIsDQogICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCINCiAgKTsNCiAgbGV0IGl0ZW0yID0gZ2V0SXRlbUJ5S2V5KA0KICAgIHZtLmRhdGEsDQogICAgImNhbGwiLA0KICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iDQogICk7DQogIGlmIChpdGVtMS5pc1dhcm4gPT0gZmFsc2UgJiYgaXRlbTIuaXNXYXJuID09IGZhbHNlKSB7DQogICAgcmV0dXJuOw0KICB9DQoNCiAgaWYgKA0KICAgIDAgPT0NCiAgICAgIGlzUG9ydFVzZWQoDQogICAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWw0KICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iDQogICAgICAgIF0sDQogICAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWw0KICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNYXgiDQogICAgICAgIF0sDQogICAgICAgIHZtLnVzZWRQb3J0SXRlbXMNCiAgICAgICkgJiYNCiAgICBOdW1iZXIoDQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsNCiAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCINCiAgICAgIF0NCiAgICApIC0NCiAgICAgIE51bWJlcigNCiAgICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbDQogICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1pbiINCiAgICAgICAgXQ0KICAgICAgKSA+PQ0KICAgICAgMA0KICApIHsNCiAgICBpdGVtMS5pc1dhcm4gPSBmYWxzZTsNCiAgICBpdGVtMi5pc1dhcm4gPSBmYWxzZTsNCiAgICByZXR1cm47DQogIH0NCn0NCg0KZnVuY3Rpb24gZ2V0RGF0YSh2bSwgYWNjb3VudElkKSB7DQogIHZtLiRheGlvcw0KICAgIC5nZXQoImFwaS9hY2NvdW50QWR2YW5jZWQvaW5mbz9hY2NvdW50SWQ9IiArIGFjY291bnRJZCkNCiAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgIGlmKHJlc3BvbnNlLmRhdGEucmV0Y29kZSA9PSAtMSl7DQogICAgICAgIHZtLmRhdGE9IHsNCiAgICAgICAgICBzaG93Tm9QZXJtaXNzaW9uOiB0cnVlLA0KICAgICAgICB9Ow0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB2bS5hcGlEYXRhID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhID0gZGVlcENsb25lKHJlc3BvbnNlLmRhdGEuY29uZmlnRGF0YSk7DQoNCiAgICAgIHZtLkFjY291bnRJdGVtcyA9IFtdOw0KICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gdm0uYXBpRGF0YS5kYXRhLkFjY291bnQuQWNjb3VudE51bWJlcjsgaSsrKSB7DQogICAgICAgIGxldCBpdGVtID0geyBrZXk6IGksIGxhYmVsOiB2bS4kdCgiQWNjb3VudCIpICsgaSB9Ow0KICAgICAgICB2bS5BY2NvdW50SXRlbXMucHVzaChpdGVtKTsNCiAgICAgIH0NCg0KICAgICAgdm0uYXVkaW9Db2RlY3NJdGVtcyA9IFtdOw0KICAgICAgdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtcyA9IFtdOw0KICAgICAgdmFyIGNvdW50ID0gMDsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLkF1ZGlvQ29kZWNzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmICh2bS5hcGlEYXRhLmRhdGEuQXVkaW9Db2RlY3NbaV0uQXVkaW9Db2Rlc0VuYWJsZSkgew0KICAgICAgICAgIGlmICh2bS5hcGlEYXRhLmRhdGEuQXVkaW9Db2RlY3NbaV0uQXVkaW9Db2Rlc0VuYWJsZSAhPSAiT1BVUyIpIHsNCiAgICAgICAgICAgIGxldCBhdWRpb0l0ZW0gPSB7DQogICAgICAgICAgICAgIGtleTogY291bnQudG9TdHJpbmcoKSwNCiAgICAgICAgICAgICAgdGl0bGU6IHZtLmFwaURhdGEuZGF0YS5BdWRpb0NvZGVjc1tpXS5BdWRpb0NvZGVzRW5hYmxlLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHZtLmF1ZGlvQ29kZWNzSXRlbXMucHVzaChhdWRpb0l0ZW0pOw0KICAgICAgICAgICAgdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtcy5wdXNoKGkudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBjb3VudCsrOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB2bS5PUFVTRW5hYmxlID0gIk9QVVMiOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh2bS5hcGlEYXRhLmRhdGEuQXVkaW9Db2RlY3NbaV0uQXVkaW9Db2Rlc0Rpc2FibGUgIT0gIk9QVVMiKSB7DQogICAgICAgICAgbGV0IGF1ZGlvSXRlbSA9IHsNCiAgICAgICAgICAgIGtleTogY291bnQudG9TdHJpbmcoKSwNCiAgICAgICAgICAgIHRpdGxlOiB2bS5hcGlEYXRhLmRhdGEuQXVkaW9Db2RlY3NbaV0uQXVkaW9Db2Rlc0Rpc2FibGUsDQogICAgICAgICAgfTsNCiAgICAgICAgICB2bS5hdWRpb0NvZGVjc0l0ZW1zLnB1c2goYXVkaW9JdGVtKTsNCiAgICAgICAgICBjb3VudCsrOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZtLk9QVVNEaXNhYmxlID0gIk9QVVMiOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHZtLnZpZGVvQ29kZWNzSXRlbXMgPSBbXTsNCiAgICAgIHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMgPSBbXTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLlZpZGVvQ29kZWNzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmICh2bS5hcGlEYXRhLmRhdGEuVmlkZW9Db2RlY3NbaV0uVmlkZW9Db2Rlc0VuYWJsZSkgew0KICAgICAgICAgIGxldCB2aWRlb0l0ZW0gPSB7DQogICAgICAgICAgICBrZXk6IGkudG9TdHJpbmcoKSwNCiAgICAgICAgICAgIHRpdGxlOiB2bS5hcGlEYXRhLmRhdGEuVmlkZW9Db2RlY3NbaV0uVmlkZW9Db2Rlc0VuYWJsZSwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIHZtLnZpZGVvQ29kZWNzSXRlbXMucHVzaCh2aWRlb0l0ZW0pOw0KICAgICAgICAgIHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMucHVzaChpLnRvU3RyaW5nKCkpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGxldCB2aWRlb0l0ZW0gPSB7DQogICAgICAgICAgICBrZXk6IGkudG9TdHJpbmcoKSwNCiAgICAgICAgICAgIHRpdGxlOiB2bS5hcGlEYXRhLmRhdGEuVmlkZW9Db2RlY3NbaV0uVmlkZW9Db2Rlc0Rpc2FibGUsDQogICAgICAgICAgfTsNCiAgICAgICAgICB2bS52aWRlb0NvZGVjc0l0ZW1zLnB1c2godmlkZW9JdGVtKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvL3BvcnTnq6/lj6MNCiAgICAgIHZtLnVzZWRQb3J0SXRlbXMgPSBbXTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLnNpcFBvcnRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGxldCBpdGVtID0gew0KICAgICAgICAgIG1pbjogdm0uYXBpRGF0YS5kYXRhLnNpcFBvcnRzW2ldLm1pbiwNCiAgICAgICAgICBtYXg6IHZtLmFwaURhdGEuZGF0YS5zaXBQb3J0c1tpXS5tYXgsDQogICAgICAgIH07DQogICAgICAgIHZtLnVzZWRQb3J0SXRlbXMucHVzaChpdGVtKTsNCiAgICAgIH0NCg0KICAgICAgY3JlYXRlUGFnZURhdGEodm0pOw0KDQogICAgICAvL1ZpZGVvQ29kZVZhbHVlDQogICAgICBnZXRWaWRlb0NvZGVjQml0cmF0ZVZhbHVlKHZtLCAidmlkZW9Db2RlYyIsICJDb25maWcuQWNjb3VudCIgKyBhY2NvdW50SWQgKyAiLlZpZGVvMDEuTWF4QlIiLHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgYWNjb3VudElkICsgIi5WaWRlbzAxLlByb2ZpbGVMZXZlbCJdLHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkFjY291bnQiICsgYWNjb3VudElkICsgIi5WaWRlbzAxLk1heEJSIl0pOw0KICAgICAgZ2V0VmlkZW9Db2RlY0JpdHJhdGVWYWx1ZSh2bSwgInZpZGVvQ29kZWMiLCAiQ29uZmlnLkFjY291bnQiICsgYWNjb3VudElkICsgIi5WaWRlbzAwLk1heEJSIix2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIGFjY291bnRJZCArICIuVmlkZW8wMC5Qcm9maWxlTGV2ZWwiXSx2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIGFjY291bnRJZCArICIuVmlkZW8wMC5NYXhCUiJdKTsNCiAgICAgIGdldFZpZGVvQ29kZWNCaXRyYXRlVmFsdWUodm0sICJ2aWRlb0NvZGVjIiwgIkNvbmZpZy5BY2NvdW50IiArIGFjY291bnRJZCArICIuVmlkZW8wMy5NYXhCUiIsdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyBhY2NvdW50SWQgKyAiLlZpZGVvMDMuUHJvZmlsZUxldmVsIl0sdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQWNjb3VudCIgKyBhY2NvdW50SWQgKyAiLlZpZGVvMDMuTWF4QlIiXSk7DQogICAgfSk7DQp9DQoNCmZ1bmN0aW9uIGdldFZpZGVvQ29kZWNCaXRyYXRlVmFsdWUodm0sY29udGVudEtleSwgaXRlbUtleSwgaW5kZXgscmVzb2x1dGlvblZhbHVlKXsNCiAgbGV0IGNvbnRlbnRLZXlJbmRleCA9IGdldEluZGV4QnlLZXkodm0uZGF0YS5jb250ZW50cywgY29udGVudEtleSk7DQogIGxldCBpdGVtS2V5SW5kZXggPSBnZXRJbmRleEJ5S2V5KA0KICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtcywNCiAgICBpdGVtS2V5DQogICk7DQogIGlmKGluZGV4ID09IDApew0KICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLnNlbGVjdEl0ZW1zID0NCiAgICAgIHZtLmNvZGVCaXRSYXRlSXRlbXMxOw0KICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLnZhbHVlID0gcmVzb2x1dGlvblZhbHVlLnRvU3RyaW5nKCk7DQogIH0gZWxzZSBpZihpbmRleCA9PSAxKXsNCiAgICB2bS5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbaXRlbUtleUluZGV4XS5zZWxlY3RJdGVtcyA9DQogICAgICB2bS5jb2RlQml0UmF0ZUl0ZW1zMjsNCiAgICB2bS5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbaXRlbUtleUluZGV4XS52YWx1ZSA9IHJlc29sdXRpb25WYWx1ZS50b1N0cmluZygpOw0KICB9IGVsc2V7DQogICAgdm0uZGF0YS5jb250ZW50c1tjb250ZW50S2V5SW5kZXhdLml0ZW1zW2l0ZW1LZXlJbmRleF0uc2VsZWN0SXRlbXMgPQ0KICAgICAgdm0uY29kZUJpdFJhdGVJdGVtczM7DQogICAgdm0uZGF0YS5jb250ZW50c1tjb250ZW50S2V5SW5kZXhdLml0ZW1zW2l0ZW1LZXlJbmRleF0udmFsdWUgPSByZXNvbHV0aW9uVmFsdWUudG9TdHJpbmcoKTsNCiAgfQ0KfQ0KDQpmdW5jdGlvbiBDaGFuZ2VDb2RlY1Jlc29sdXRpb25PcHRpb24odm0sIGNvbnRlbnRLZXksIGl0ZW1LZXksIGluZGV4KSB7DQogIGxldCBjb250ZW50S2V5SW5kZXggPSBnZXRJbmRleEJ5S2V5KHZtLmRhdGEuY29udGVudHMsIGNvbnRlbnRLZXkpOw0KICBsZXQgaXRlbUtleUluZGV4ID0gZ2V0SW5kZXhCeUtleSgNCiAgICB2bS5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXMsDQogICAgaXRlbUtleQ0KICApOw0KICBpZiAoaW5kZXggPT0gMCkgew0KICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLnNlbGVjdEl0ZW1zID0NCiAgICAgIHZtLmNvZGVCaXRSYXRlSXRlbXMxOw0KICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLnZhbHVlID0gIjY0IjsNCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVtpdGVtS2V5XSA9ICI2NCI7DQogIH0gZWxzZSBpZiAoaW5kZXggPT0gMSkgew0KICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLnNlbGVjdEl0ZW1zID0NCiAgICAgIHZtLmNvZGVCaXRSYXRlSXRlbXMyOw0KICAgIHZtLmRhdGEuY29udGVudHNbY29udGVudEtleUluZGV4XS5pdGVtc1tpdGVtS2V5SW5kZXhdLnZhbHVlID0gIjEyOCI7DQogICAgdm0uY2hhbmdlZENmZ0RhdGFbaXRlbUtleV0gPSAiMTI4IjsNCiAgfSBlbHNlIHsNCiAgICB2bS5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbaXRlbUtleUluZGV4XS5zZWxlY3RJdGVtcyA9DQogICAgICB2bS5jb2RlQml0UmF0ZUl0ZW1zMzsNCiAgICB2bS5kYXRhLmNvbnRlbnRzW2NvbnRlbnRLZXlJbmRleF0uaXRlbXNbaXRlbUtleUluZGV4XS52YWx1ZSA9ICI1MTIiOw0KICAgIHZtLmNoYW5nZWRDZmdEYXRhW2l0ZW1LZXldID0gIjUxMiI7DQogIH0NCn0NCg0KZnVuY3Rpb24gc3VibWl0RGF0YSh2bSkgew0KICB2bS5kYXRhLnN1Ym1pdExvYWRpbmcgPSB0cnVlOw0KDQogIGxldCByZXF1ZXN0RGF0YSA9IHsNCiAgICB0YXJnZXQ6ICJhY2NvdW50QWR2YW5jZWQiLA0KICAgIGFjdGlvbjogInNldCIsDQogICAgY29uZmlnRGF0YTogdm0uc3VibWl0Q2ZnRGF0YSwNCiAgICBkYXRhOiB7DQogICAgICBBdWRpb0NvZGVjc0VuYWJsZTogdm0uYXVkaW9Db2RlY3NFbmFibGVJdGVtcywNCiAgICAgIEF1ZGlvQ29kZWNzRGlzYWJsZTogdm0uYXVkaW9Db2RlY3NEaXNhYmxlSXRlbXMsDQogICAgICBWaWRlb0NvZGVjc0VuYWJsZTogdm0udmlkZW9Db2RlY3NFbmFibGVJdGVtcywNCiAgICAgIFZpZGVvQ29kZWNzRGlzYWJsZTogdm0udmlkZW9Db2RlY3NEaXNhYmxlSXRlbXMsDQogICAgfSwNCiAgfTsNCiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgcmVzcG9uc2UpIHsNCiAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSk7DQogICAgfQ0KICAgIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOw0KICB9KTsNCn0NCg0KZnVuY3Rpb24gZ2V0Q29tbWl0RGF0YSh2bSkgew0KICB2bS5zdWJtaXRDZmdEYXRhID0ge307DQogIGZvciAodmFyIGNoYW5nZWRLZXkgaW4gdm0uY2hhbmdlZENmZ0RhdGEpIHsNCiAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhW2NoYW5nZWRLZXldICE9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldKSB7DQogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV07DQogICAgfQ0KICB9DQogIHN1Ym1pdENvZGVjc0l0ZW0odm0pOw0KfQ0KDQpmdW5jdGlvbiBzdWJtaXRDb2RlY3NJdGVtKHZtKSB7DQogIHZtLmF1ZGlvQ29kZWNzRW5hYmxlSXRlbXMgPSBbXTsNCiAgdm0uYXVkaW9Db2RlY3NEaXNhYmxlSXRlbXMgPSBbXTsNCiAgdm0udmlkZW9Db2RlY3NFbmFibGVJdGVtcyA9IFtdOw0KICB2bS52aWRlb0NvZGVjc0Rpc2FibGVJdGVtcyA9IFtdOw0KICAvL2F1ZGlvDQogIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtcy5sZW5ndGg7IGkrKykgew0KICAgIHZhciBlbmFibGVJdGVtID0gdm0uYXVkaW9Db2RlY3NJdGVtc1t2bS5hdWRpb0NvZGVjc1RhcmdldEl0ZW1zW2ldXS50aXRsZTsNCiAgICB2bS5hdWRpb0NvZGVjc0VuYWJsZUl0ZW1zLnB1c2goZW5hYmxlSXRlbSk7DQogIH0NCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5hdWRpb0NvZGVjc0l0ZW1zLmxlbmd0aDsgaSsrKSB7DQogICAgaWYgKCF2bS5hdWRpb0NvZGVjc1RhcmdldEl0ZW1zLmluY2x1ZGVzKHZtLmF1ZGlvQ29kZWNzSXRlbXNbaV0ua2V5KSkgew0KICAgICAgdmFyIGRpc2FibGVJdGVtID0gdm0uYXVkaW9Db2RlY3NJdGVtc1tpXS50aXRsZTsNCiAgICAgIHZtLmF1ZGlvQ29kZWNzRGlzYWJsZUl0ZW1zLnB1c2goZGlzYWJsZUl0ZW0pOw0KICAgIH0NCiAgfQ0KICBpZiAodm0uT1BVU0VuYWJsZSAhPSAiIikgew0KICAgIHZtLmF1ZGlvQ29kZWNzRW5hYmxlSXRlbXMucHVzaCh2bS5PUFVTRW5hYmxlKTsNCiAgfSBlbHNlIHsNCiAgICB2bS5hdWRpb0NvZGVjc0Rpc2FibGVJdGVtcy5wdXNoKHZtLk9QVVNEaXNhYmxlKTsNCiAgfQ0KDQogIC8vdmlkZW8NCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS52aWRlb0NvZGVjc1RhcmdldEl0ZW1zLmxlbmd0aDsgaSsrKSB7DQogICAgdmFyIGVuYWJsZUl0ZW0gPSB2bS52aWRlb0NvZGVjc0l0ZW1zW3ZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXNbaV1dLnRpdGxlOw0KICAgIHZtLnZpZGVvQ29kZWNzRW5hYmxlSXRlbXMucHVzaChlbmFibGVJdGVtKTsNCiAgfQ0KICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLnZpZGVvQ29kZWNzSXRlbXMubGVuZ3RoOyBpKyspIHsNCiAgICBpZiAoIXZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMuaW5jbHVkZXModm0udmlkZW9Db2RlY3NJdGVtc1tpXS5rZXkpKSB7DQogICAgICB2YXIgZGlzYWJsZUl0ZW0gPSB2bS52aWRlb0NvZGVjc0l0ZW1zW2ldLnRpdGxlOw0KICAgICAgdm0udmlkZW9Db2RlY3NEaXNhYmxlSXRlbXMucHVzaChkaXNhYmxlSXRlbSk7DQogICAgfQ0KICB9DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVBhZ2VEYXRhKHZtKSB7DQogIHZtLmRhdGEgPSB7DQogICAgZ2V0RGF0YVN1Y2Nlc3M6IHRydWUsDQogICAgYnJlYWRDcnVtYjogew0KICAgICAgZmlyc3RUaXRsZTogdm0uJHQoIkFjY291bnQiKSwNCiAgICAgIHNlY29uZFRpdGxlOiB2bS4kdCgiQWR2YW5jZSIpLA0KICAgIH0sDQogICAgb25TdWJtaXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGdldENvbW1pdERhdGEodm0pOw0KICAgICAgaWYgKCFjaGVja0NvbW1pdERhdGEodm0pKSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHN1Ym1pdERhdGEodm0pOw0KICAgIH0sDQogICAgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7DQogICAgICBnZXREYXRhKHZtLCB2bS5DdXJyZW50QWNjb3VudCk7DQogICAgfSwNCiAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZSwNCiAgICBjYW5jZWxMb2FkaW5nOiBmYWxzZSwNCiAgICBjb250ZW50czogW10sDQogIH07DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVTaXBBY2NvdW50Q29udGVudCh2bSkpOw0KICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlQXVkaW9Db2RlY3NDb250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVWaWRlb0NvZGVjc0NvbnRlbnQodm0pKTsNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVZpZGVvQ29kZWNDb250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVTdWJzY3JpYmVDb250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVEdG1mQ29udGVudCh2bSkpOw0KICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlQ2FsbENvbnRlbnQodm0pKTsNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZUVuY3J5cHRpb25Db250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVOYXRDb250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVVc2VyQWdlbnRDb250ZW50KHZtKSk7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVNpcEFjY291bnRDb250ZW50KHZtKSB7DQogIGxldCBjb250ZW50ID0gew0KICAgIGtleTogInNpcEFjY291bnQiLA0KICAgIHRpdGxlOiB2bS4kdCgiU0lQQWNjb3VudCIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJBZFNJUEFjY291bnREZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJBY2NvdW50IiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJjdXJyZW50QWNjb3VudCIsDQogICAgICAgIHZhbHVlOiB2bS5DdXJyZW50QWNjb3VudCwNCiAgICAgICAgc2VsZWN0SXRlbXM6IHZtLkFjY291bnRJdGVtcywNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBZEFjY291bnREZXNjIiksDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVBdWRpb0NvZGVjc0NvbnRlbnQodm0pIHsNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAiYXVkaW9Db2RlY3MiLA0KICAgIHRpdGxlOiB2bS4kdCgiQ29kZWNzIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkF1ZGlvQ29kZWNzRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHR5cGU6ICJ0cmFuc2ZlciIsDQogICAgICAgIHNvdXJjZVRpdGxlOiB2bS4kdCgiRGlzYWJsZWRWaWRlb0NvZGVjcyIpLA0KICAgICAgICB0YXJnZXRUaXRsZTogdm0uJHQoIkVuYWJsZWRWaWRlb0NvZGVjcyIpLA0KICAgICAgICBrZXk6ICJhdWRpb0NvZGVjc0l0ZW1zIiwNCiAgICAgICAgbW9ja0l0ZW1zOiB2bS5hdWRpb0NvZGVjc0l0ZW1zLA0KICAgICAgICB2YWx1ZTogdm0uYXVkaW9Db2RlY3NUYXJnZXRJdGVtcywNCiAgICAgICAgc2VsZWN0ZWRLZXlzOiBbXSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVZpZGVvQ29kZWNzQ29udGVudCh2bSkgew0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJ2aWRlb0NvZGVjcyIsDQogICAgdGl0bGU6IHZtLiR0KCJWaWRlb0NvZGVjcyIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJWaWRlb0NvZGVjc0Rlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0eXBlOiAidHJhbnNmZXIiLA0KICAgICAgICBzb3VyY2VUaXRsZTogdm0uJHQoIkRpc2FibGVkVmlkZW9Db2RlY3MiKSwNCiAgICAgICAgdGFyZ2V0VGl0bGU6IHZtLiR0KCJFbmFibGVkVmlkZW9Db2RlY3MiKSwNCiAgICAgICAga2V5OiAidmlkZW9Db2RlY3NJdGVtcyIsDQogICAgICAgIG1vY2tJdGVtczogdm0udmlkZW9Db2RlY3NJdGVtcywNCiAgICAgICAgdmFsdWU6IHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMsDQogICAgICAgIHNlbGVjdGVkS2V5czogW10sDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVWaWRlb0NvZGVjQ29udGVudCh2bSkgew0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJ2aWRlb0NvZGVjIiwNCiAgICB0aXRsZTogdm0uJHQoIlZpZGVvQ29kZWMiKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiVmlkZW9Db2RlRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiTmFtZSIpLA0KICAgICAgICB0eXBlOiAibGFiZWwiLA0KICAgICAgICBrZXk6ICJIMjYzIiwNCiAgICAgICAgdmFsdWU6ICJIMjYzIiwNCiAgICAgICAgc2hvd0Rlc2NyaXB0aW9uOiB0cnVlLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlZpZGVvTmFtZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUmVzb2x1dGlvbiIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDEuUHJvZmlsZUxldmVsIiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAxLlByb2ZpbGVMZXZlbCINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogWw0KICAgICAgICAgIHsga2V5OiAwLCBsYWJlbDogIlFDSUYiIH0sDQogICAgICAgICAgeyBrZXk6IDEsIGxhYmVsOiAiQ0lGIiB9LA0KICAgICAgICAgIHsga2V5OiAzLCBsYWJlbDogIjRDSUYiIH0sDQogICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUmVzb2x1dGlvbkRlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiQml0cmF0ZUxhYmVsIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMS5NYXhCUiIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMS5NYXhCUiINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogW10sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQml0cmF0ZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUGF5bG9hZCIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDEuUGF5bG9hZCIsDQogICAgICAgIGRpc2FibGVkOiB0cnVlLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDEuUGF5bG9hZCINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogdm0uY29kZVBheUxvYWRJdGVtczEsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUGF5bG9hZERlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiTmFtZSIpLA0KICAgICAgICB0eXBlOiAibGFiZWwiLA0KICAgICAgICBrZXk6ICJIMjY0IiwNCiAgICAgICAgdmFsdWU6ICJIMjY0IiwNCiAgICAgICAgc2hvd0Rlc2NyaXB0aW9uOiB0cnVlLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlZpZGVvTmFtZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUmVzb2x1dGlvbiIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDAuUHJvZmlsZUxldmVsIiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAwLlByb2ZpbGVMZXZlbCINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogWw0KICAgICAgICAgIHsga2V5OiAwLCBsYWJlbDogIlFDSUYiIH0sDQogICAgICAgICAgeyBrZXk6IDEsIGxhYmVsOiAiQ0lGIiB9LA0KICAgICAgICAgIHsga2V5OiAyLCBsYWJlbDogIlZHQSIgfSwNCiAgICAgICAgICB7IGtleTogMywgbGFiZWw6ICI0Q0lGIiB9LA0KICAgICAgICAgIHsga2V5OiA0LCBsYWJlbDogIjcyMFAiIH0sDQogICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUmVzb2x1dGlvbkRlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiQml0cmF0ZUxhYmVsIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMC5NYXhCUiIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMC5NYXhCUiINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogW10sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQml0cmF0ZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUGF5bG9hZCIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDAuUGF5bG9hZCIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMC5QYXlsb2FkIg0KICAgICAgICAgIF0sDQogICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5jb2RlUGF5TG9hZEl0ZW1zMiwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJQYXlsb2FkRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJOYW1lIiksDQogICAgICAgIHR5cGU6ICJsYWJlbCIsDQogICAgICAgIGtleTogIlZQOCIsDQogICAgICAgIHZhbHVlOiAiVlA4IiwNCiAgICAgICAgc2hvd0Rlc2NyaXB0aW9uOiB0cnVlLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlZpZGVvTmFtZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUmVzb2x1dGlvbiIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDMuUHJvZmlsZUxldmVsIiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAzLlByb2ZpbGVMZXZlbCINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogWw0KICAgICAgICAgIHsga2V5OiAwLCBsYWJlbDogIlFDSUYiIH0sDQogICAgICAgICAgeyBrZXk6IDEsIGxhYmVsOiAiQ0lGIiB9LA0KICAgICAgICAgIHsga2V5OiAyLCBsYWJlbDogIlZHQSIgfSwNCiAgICAgICAgICB7IGtleTogMywgbGFiZWw6ICI0Q0lGIiB9LA0KICAgICAgICAgIHsga2V5OiA0LCBsYWJlbDogIjcyMFAiIH0sDQogICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUmVzb2x1dGlvbkRlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiQml0cmF0ZUxhYmVsIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMy5NYXhCUiIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVmlkZW8wMy5NYXhCUiINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogW10sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQml0cmF0ZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUGF5bG9hZCIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAgZGlzYWJsZWQ6IHRydWUsDQogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WaWRlbzAzLlBheWxvYWQiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlZpZGVvMDMuUGF5bG9hZCINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogdm0uY29kZVBheUxvYWRJdGVtczIsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUGF5bG9hZERlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZUNvbnRlbnQodm0pIHsNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAic3Vic2NyaWJlIiwNCiAgICB0aXRsZTogdm0uJHQoIlN1YnNjcmliZSIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJTdWJzY3JpYmVEZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJNV0lTdWJzY3JpYmUiKSwNCiAgICAgICAgdHlwZTogImNoZWNrYm94IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNVQlNDUklCRS5TdWJzcmliZU1XSSIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU1VCU0NSSUJFLlN1YnNyaWJlTVdJIg0KICAgICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiTVdJU3Vic2NyaWJlRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJNV0lTdWJzY3JpYmVQZXJpb2QiKSwNCiAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAgc2hvd0hpbnQ6IHRydWUsDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiKDEyMH42NTUzNVNlYykiKSwNCiAgICAgICAga2V5Og0KICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKw0KICAgICAgICAgIHZtLkN1cnJlbnRBY2NvdW50ICsNCiAgICAgICAgICAiLlNVQlNDUklCRS5TdWJzY3JpYmVNV0lFeHBpcmUiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsNCiAgICAgICAgICAgICAgdm0uQ3VycmVudEFjY291bnQgKw0KICAgICAgICAgICAgICAiLlNVQlNDUklCRS5TdWJzY3JpYmVNV0lFeHBpcmUiDQogICAgICAgICAgXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJNV0lQZXJpb2REZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlZvaWNlTWFpbE51bWJlciIpLA0KICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuVk9JQ0VNU0cuTnVtYmVyIiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5WT0lDRU1TRy5OdW1iZXIiDQogICAgICAgICAgXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJWb2ljZU1haWxEZXNjIiksDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVEdG1mQ29udGVudCh2bSkgew0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJkdG1mIiwNCiAgICB0aXRsZTogdm0uJHQoIkRUTUYiKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiRFRNRkRlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlR5cGUiKSwNCiAgICAgICAgdHlwZTogInNlbGVjdCIsDQogICAgICAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5EVE1GLlR5cGUiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkRUTUYuVHlwZSINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogWw0KICAgICAgICAgIHsga2V5OiAxLCBsYWJlbDogIkluYmFuZCIgfSwNCiAgICAgICAgICB7IGtleTogMiwgbGFiZWw6ICJSRkMyODMzIiB9LA0KICAgICAgICAgIHsga2V5OiAzLCBsYWJlbDogIkluZm8iIH0sDQogICAgICAgICAgeyBrZXk6IDQsIGxhYmVsOiAiSW5mbytJbmJhbmQiIH0sDQogICAgICAgICAgeyBrZXk6IDUsIGxhYmVsOiAiSW5mbytSRkMyODMzIiB9LA0KICAgICAgICBdLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkRUTUZUeXBlRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJIb3dUb0luZm9EVE1GIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuRFRNRi5JbmZvVHlwZSIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuRFRNRi5JbmZvVHlwZSINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogWw0KICAgICAgICAgIHsga2V5OiAwLCBsYWJlbDogIkRpc2FibGVkIiB9LA0KICAgICAgICAgIHsga2V5OiAxLCBsYWJlbDogIkRUTUYiIH0sDQogICAgICAgICAgeyBrZXk6IDIsIGxhYmVsOiAiRFRNRi1SZWxheSIgfSwNCiAgICAgICAgICB7IGtleTogMywgbGFiZWw6ICJUZWxlcGhvbmUtRXZlbnQiIH0sDQogICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiSG93VG9EVE1GRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJEVE1GUGF5bG9hZCIpLA0KICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICBzaG93SGludDogdHJ1ZSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCIoOTZ+MTI3KSIpLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuRFRNRi5QYXlsb2FkIiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5EVE1GLlBheWxvYWQiDQogICAgICAgICAgXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJEVE1GUGF5bG9hZERlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZUNhbGxDb250ZW50KHZtKSB7DQogIGxldCBjb250ZW50ID0gew0KICAgIGtleTogImNhbGwiLA0KICAgIHRpdGxlOiB2bS4kdCgiQ2FsbCIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJDYWxsRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiTWF4TG9jYWxTSVBQb3J0IiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIHNob3dIaW50OiB0cnVlLA0KICAgICAgICBoaW50Q29udGVudDogdm0uJHQoIigxMDI0fjY1NTM1KSIpLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNYXgiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWF4Ig0KICAgICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiTWF4U0lQUG9ydERlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiTWluTG9jYWxTSVBQb3J0IiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIHNob3dIaW50OiB0cnVlLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICBoaW50Q29udGVudDogdm0uJHQoIigxMDI0fjY1NTM1KSIpLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWluIg0KICAgICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiTWluU0lQUG9ydERlc2MiKSwNCiAgICAgIH0sDQogICAgICAvLyB7DQogICAgICAvLyAgIHRpdGxlOiB2bS4kdCgiUFRpbWUiKSArICIobXMpIiwNCiAgICAgIC8vICAgdHlwZTogInNlbGVjdCIsDQogICAgICAvLyAgIGtleTogIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5DQUxMLlB0aW1lIiwNCiAgICAgIC8vICAgdmFsdWU6DQogICAgICAvLyAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgLy8gICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5DQUxMLlB0aW1lIg0KICAgICAgLy8gICAgIF0sDQogICAgICAvLyAgIHNlbGVjdEl0ZW1zOiBbDQogICAgICAvLyAgICAgeyBrZXk6IDAsIGxhYmVsOiAiRGlzYWJsZWQiIH0sDQogICAgICAvLyAgICAgeyBrZXk6IDEwLCBsYWJlbDogMTAgfSwNCiAgICAgIC8vICAgICB7IGtleTogMjAsIGxhYmVsOiAyMCB9LA0KICAgICAgLy8gICAgIHsga2V5OiAzMCwgbGFiZWw6IDMwIH0sDQogICAgICAvLyAgICAgeyBrZXk6IDQwLCBsYWJlbDogNDAgfSwNCiAgICAgIC8vICAgICB7IGtleTogNTAsIGxhYmVsOiA1MCB9LA0KICAgICAgLy8gICAgIHsga2V5OiA2MCwgbGFiZWw6IDYwIH0sDQogICAgICAvLyAgIF0sDQogICAgICAvLyAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUFRpbWVEZXNjIiksDQogICAgICAvLyB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIkF1dG9BbnN3ZXIiKSwNCiAgICAgICAgdHlwZTogImNoZWNrYm94IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkFVVE9fQU5TV0VSLkVuYWJsZSIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuQVVUT19BTlNXRVIuRW5hYmxlIg0KICAgICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b0Fuc3dlckRlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUHJldmVudFNJUEhhY2tpbmciKSwNCiAgICAgICAgdHlwZTogImNoZWNrYm94IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkNBTEwuUHJldmVudFNJUEhhY2tpbmciLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkNBTEwuUHJldmVudFNJUEhhY2tpbmciDQogICAgICAgICAgXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJTSVBIYWNraW5nRGVzYyIpLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlRW5jcnlwdGlvbkNvbnRlbnQodm0pIHsNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAiZW5jcnlwdGlvbiIsDQogICAgdGl0bGU6IHZtLiR0KCJFbmNyeXB0aW9uIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkVuY3J5cHRpb25EZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJWb2ljZUVuY3J5IiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6DQogICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5FTkNSWVBUSU9OLlNSVFBFbmNyeXB0aW9uIiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5FTkNSWVBUSU9OLlNSVFBFbmNyeXB0aW9uIg0KICAgICAgICAgIF0sDQogICAgICAgIHNlbGVjdEl0ZW1zOiBbDQogICAgICAgICAgeyBrZXk6IDAsIGxhYmVsOiB2bS4kdCgiRGlzYWJsZWQiKSB9LA0KICAgICAgICAgIHsga2V5OiAxLCBsYWJlbDogdm0uJHQoIlNSVFBDb21wdWxzb3J5IikgfSwNCiAgICAgICAgICB7IGtleTogMiwgbGFiZWw6IHZtLiR0KCJTUlRQT3B0aW9uYWwiKSB9LA0KICAgICAgICAgIHsga2V5OiAzLCBsYWJlbDogdm0uJHQoIlpSVFBPcHRpb25hbCIpIH0sDQogICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiVm9pY2VFbmNyeXB0aW9uRGVzYyIpLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlTmF0Q29udGVudCh2bSkgew0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJuYXQiLA0KICAgIHRpdGxlOiB2bS4kdCgiTkFUIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIk5BVERlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlVEUEtlZXBBbGl2ZU1zZyIpLA0KICAgICAgICB0eXBlOiAiY2hlY2tib3giLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuTkFULlVkcEtlZXBFbmFibGUiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLk5BVC5VZHBLZWVwRW5hYmxlIg0KICAgICAgICAgIF0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiVURQS2VlcEFsaXZlRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJVRFBBbGl2ZU1zZ0ludGVydmFsIiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIHNob3dIaW50OiB0cnVlLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICBoaW50Q29udGVudDogdm0uJHQoIig1fjYwU2VjKSIpLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuTkFULlVkcEtlZXBJbnRlcnZhbCIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuTkFULlVkcEtlZXBJbnRlcnZhbCINCiAgICAgICAgICBdLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlVEUEFsaXZlTXNnSW50ZXJ2YWxEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlJQb3J0RW5hYmxlZCIpLA0KICAgICAgICB0eXBlOiAiY2hlY2tib3giLA0KICAgICAgICBrZXk6ICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuTkFULlJwb3J0IiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5OQVQuUnBvcnQiDQogICAgICAgICAgXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJSUG9ydERlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVVzZXJBZ2VudENvbnRlbnQodm0pIHsNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAidXNlckFnZW50IiwNCiAgICB0aXRsZTogdm0uJHQoIlVzZXJBZ2VudCIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJVc2VyQWdlbnREZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJVc2VyQWdlbnQiKSwNCiAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgICAga2V5OiAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkdFTkVSQUwuVXNlckFnZW50IiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5HRU5FUkFMLlVzZXJBZ2VudCINCiAgICAgICAgICBdLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlVzZXJBZ2VudERlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNoZWNrQ29tbWl0RGF0YSh2bSkgew0KICBsZXQgc3VjY2VzcyA9IHRydWU7DQogIC8vYXVkaW9Db2RlY3MNCiAgaWYgKHZtLmF1ZGlvQ29kZWNzVGFyZ2V0SXRlbXMubGVuZ3RoID09IDApIHsNCiAgICBhbGVydCh2bS4kdCgiRW5hYmxlZENvZGVjRW1wdHlXYXJuaW5nIikpOw0KICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgfQ0KDQogIC8vdmlkZW9Db2RlY3MNCiAgaWYgKHZtLnZpZGVvQ29kZWNzVGFyZ2V0SXRlbXMubGVuZ3RoID09IDApIHsNCiAgICBhbGVydCh2bS4kdCgiRW5hYmxlZENvZGVjRW1wdHlXYXJuaW5nIikpOw0KICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgfQ0KDQogIHZhciBtYXhMb2NhbFBvcnRFcnJGbGFnID0gZmFsc2U7DQogIHZhciBtaW5Mb2NhbFBvcnRFcnJGbGFnID0gZmFsc2U7DQogIC8vTWF4TG9jYWxTSVBQb3J0DQogIGlmICgNCiAgICAhaXNQb3J0KA0KICAgICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsNCiAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWF4Ig0KICAgICAgICBdDQogICAgKSB8fA0KICAgIE51bWJlcigNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWw0KICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWF4Ig0KICAgICAgXQ0KICAgICkgPCAxMDI0DQogICkgew0KICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KA0KICAgICAgdm0uZGF0YSwNCiAgICAgICJjYWxsIiwNCiAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNYXgiDQogICAgKTsNCiAgICBpdGVtLmlzV2FybiA9IHRydWU7DQogICAgaXRlbS53YXJuTGFiZWwgPSB2bS4kdCgiTWF4TWluU0lQUG9ydFJhbmdlRXJyb3IiKTsNCiAgICBtYXhMb2NhbFBvcnRFcnJGbGFnID0gdHJ1ZTsNCiAgICBzdWNjZXNzID0gZmFsc2U7DQogIH0NCg0KICAvL01pbkxvY2FsU0lQUG9ydA0KICBpZiAoDQogICAgIWlzUG9ydCgNCiAgICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbDQogICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1pbiINCiAgICAgICAgXQ0KICAgICkgfHwNCiAgICBOdW1iZXIoDQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsNCiAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1pbiINCiAgICAgIF0NCiAgICApIDwgMTAyNA0KICApIHsNCiAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICAgIHZtLmRhdGEsDQogICAgICAiY2FsbCIsDQogICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLlNJUC5MaXN0ZW5Qb3J0TWluIg0KICAgICk7DQogICAgaXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgIGl0ZW0ud2FybkxhYmVsID0gdm0uJHQoIk1heE1pblNJUFBvcnRSYW5nZUVycm9yIik7DQogICAgbWluTG9jYWxQb3J0RXJyRmxhZyA9IHRydWU7DQogICAgc3VjY2VzcyA9IGZhbHNlOw0KICB9DQoNCiAgLy9NaW5Mb2NhbFNJUFBvcnQgPiBNYXhMb2NhbFNJUFBvcnQNCiAgaWYgKA0KICAgICJ1bmRlZmluZWQiICE9DQogICAgICB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsNCiAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCINCiAgICAgIF0gfHwNCiAgICAidW5kZWZpbmVkIiAhPQ0KICAgICAgdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbDQogICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iDQogICAgICBdDQogICkgew0KICAgIGlmICgNCiAgICAgIE51bWJlcigNCiAgICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbDQogICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCINCiAgICAgICAgXQ0KICAgICAgKSAtDQogICAgICAgIE51bWJlcigNCiAgICAgICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iDQogICAgICAgICAgXQ0KICAgICAgICApIDwNCiAgICAgIDANCiAgICApIHsNCiAgICAgIGlmICghbWF4TG9jYWxQb3J0RXJyRmxhZykgew0KICAgICAgICBsZXQgaXRlbTEgPSBnZXRJdGVtQnlLZXkoDQogICAgICAgICAgdm0uZGF0YSwNCiAgICAgICAgICAiY2FsbCIsDQogICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCINCiAgICAgICAgKTsNCiAgICAgICAgaXRlbTEuaXNXYXJuID0gdHJ1ZTsNCiAgICAgICAgaXRlbTEud2FybkxhYmVsID0gdm0uJHQoIk1heExlc3NNaW5Mb2NhbFNJUFBvcnRFcnJvciIpOw0KICAgICAgICBtYXhMb2NhbFBvcnRFcnJGbGFnID0gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIGlmICghbWluTG9jYWxQb3J0RXJyRmxhZykgew0KICAgICAgICBsZXQgaXRlbTIgPSBnZXRJdGVtQnlLZXkoDQogICAgICAgICAgdm0uZGF0YSwNCiAgICAgICAgICAiY2FsbCIsDQogICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1pbiINCiAgICAgICAgKTsNCiAgICAgICAgaXRlbTIuaXNXYXJuID0gdHJ1ZTsNCiAgICAgICAgaXRlbTIud2FybkxhYmVsID0gdm0uJHQoIk1heExlc3NNaW5Mb2NhbFNJUFBvcnRFcnJvciIpOw0KICAgICAgICBtaW5Mb2NhbFBvcnRFcnJGbGFnID0gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICB9DQogICAgdmFyIGlzUG9ydFVzZWRWYWx1ZSA9IGlzUG9ydFVzZWQoDQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsNCiAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1pbiINCiAgICAgIF0sDQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsNCiAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCINCiAgICAgIF0sDQogICAgICB2bS51c2VkUG9ydEl0ZW1zDQogICAgKTsNCiAgICBpZiAoMyA9PSBpc1BvcnRVc2VkVmFsdWUpIHsNCiAgICAgIGlmICghbWF4TG9jYWxQb3J0RXJyRmxhZykgew0KICAgICAgICBsZXQgaXRlbTEgPSBnZXRJdGVtQnlLZXkoDQogICAgICAgICAgdm0uZGF0YSwNCiAgICAgICAgICAiY2FsbCIsDQogICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1heCINCiAgICAgICAgKTsNCiAgICAgICAgaXRlbTEuaXNXYXJuID0gdHJ1ZTsNCiAgICAgICAgaXRlbTEud2FybkxhYmVsID0gdm0uJHQoIldhcm5pbmdQb3J0VXNlZEFscmVhZHkiKTsNCiAgICAgICAgbWF4TG9jYWxQb3J0RXJyRmxhZyA9IHRydWU7DQogICAgICB9DQogICAgICBpZiAoIW1pbkxvY2FsUG9ydEVyckZsYWcpIHsNCiAgICAgICAgbGV0IGl0ZW0yID0gZ2V0SXRlbUJ5S2V5KA0KICAgICAgICAgIHZtLmRhdGEsDQogICAgICAgICAgImNhbGwiLA0KICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNaW4iDQogICAgICAgICk7DQogICAgICAgIGl0ZW0yLmlzV2FybiA9IHRydWU7DQogICAgICAgIGl0ZW0yLndhcm5MYWJlbCA9IHZtLiR0KCJXYXJuaW5nUG9ydFVzZWRBbHJlYWR5Iik7DQogICAgICAgIG1pbkxvY2FsUG9ydEVyckZsYWcgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgIH0gZWxzZSBpZiAoMiA9PSBpc1BvcnRVc2VkVmFsdWUgJiYgIW1heExvY2FsUG9ydEVyckZsYWcpIHsNCiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KA0KICAgICAgICB2bS5kYXRhLA0KICAgICAgICAiY2FsbCIsDQogICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU0lQLkxpc3RlblBvcnRNYXgiDQogICAgICApOw0KICAgICAgaXRlbS53YXJuTGFiZWwgPSB2bS4kdCgiV2FybmluZ1BvcnRVc2VkQWxyZWFkeSIpOw0KICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgICAgbWF4TG9jYWxQb3J0RXJyRmxhZyA9IHRydWU7DQogICAgICBzdWNjZXNzID0gZmFsc2U7DQogICAgfSBlbHNlIGlmICgxID09IGlzUG9ydFVzZWRWYWx1ZSAmJiAhbWluTG9jYWxQb3J0RXJyRmxhZykgew0KICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgICAgIHZtLmRhdGEsDQogICAgICAgICJjYWxsIiwNCiAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TSVAuTGlzdGVuUG9ydE1pbiINCiAgICAgICk7DQogICAgICBpdGVtLmlzV2FybiA9IHRydWU7DQogICAgICBpdGVtLndhcm5MYWJlbCA9IHZtLiR0KCJXYXJuaW5nUG9ydFVzZWRBbHJlYWR5Iik7DQogICAgICBtaW5Mb2NhbFBvcnRFcnJGbGFnID0gdHJ1ZTsNCiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICB9DQogIH0NCg0KICBpZiAoDQogICAgInVuZGVmaW5lZCIgIT0NCiAgICB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsNCiAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuRFRNRi5QYXlsb2FkIg0KICAgIF0NCiAgKSB7DQogICAgaWYgKA0KICAgICAgIWNoZWNrUmFuZ2VPZk51bWJlcigNCiAgICAgICAgdm0uc3VibWl0Q2ZnRGF0YVsNCiAgICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkRUTUYuUGF5bG9hZCINCiAgICAgICAgXSwNCiAgICAgICAgOTYsDQogICAgICAgIDEyNw0KICAgICAgKQ0KICAgICkgew0KICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgICAgIHZtLmRhdGEsDQogICAgICAgICJkdG1mIiwNCiAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5EVE1GLlBheWxvYWQiDQogICAgICApOw0KICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgICAgaXRlbS53YXJuTGFiZWwgPSB2bS4kdCgiRFRNRlBheWxvYWRSYW5nZUVycm9yIik7DQogICAgICBzdWNjZXNzID0gZmFsc2U7DQogICAgfQ0KICB9DQoNCiAgaWYodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TVUJTQ1JJQkUuU3Vic3JpYmVNV0kiXSA9PSAxKXsNCiAgICBpZiAoDQogICAgICAidW5kZWZpbmVkIiAhPQ0KICAgICAgdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbDQogICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU1VCU0NSSUJFLlN1YnNjcmliZU1XSUV4cGlyZSINCiAgICAgIF0NCiAgICApIHsNCiAgICAgIGlmICgNCiAgICAgICAgIWNoZWNrUmFuZ2VPZk51bWJlcigNCiAgICAgICAgICB2bS5zdWJtaXRDZmdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5TVUJTQ1JJQkUuU3Vic2NyaWJlTVdJRXhwaXJlIg0KICAgICAgICAgIF0sDQogICAgICAgICAgMTIwLA0KICAgICAgICAgIDY1NTM1DQogICAgICAgICkNCiAgICAgICkgew0KICAgICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICAgICAgICB2bS5kYXRhLA0KICAgICAgICAgICJzdWJzY3JpYmUiLA0KICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuU1VCU0NSSUJFLlN1YnNjcmliZU1XSUV4cGlyZSINCiAgICAgICAgKTsNCiAgICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgICAgICBpdGVtLndhcm5MYWJlbCA9IHZtLiR0KCJTdWJzY3JpYmVQZXJpb2RSYW5nZUVycm9yIik7DQogICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBpZigidW5kZWZpbmVkIiAhPSB0eXBlb2Yodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkFjY291bnQiK3ZtLkN1cnJlbnRBY2NvdW50KyIuVk9JQ0VNU0cuTnVtYmVyIl0pKXsNCiAgICAgIGlmKCFub3RDb250YWluSW52YWxpZCh2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5WT0lDRU1TRy5OdW1iZXIiXSkpew0KICAgICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICAgICAgICB2bS5kYXRhLA0KICAgICAgICAgICJzdWJzY3JpYmUiLA0KICAgICAgICAgICJDb25maWcuQWNjb3VudCIrdm0uQ3VycmVudEFjY291bnQrIi5WT0lDRU1TRy5OdW1iZXIiDQogICAgICAgICk7DQogICAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsNCiAgICAgICAgaXRlbS53YXJuTGFiZWwgPSB2bS4kdCgiVm9pY2VNYWlsTnVtYmVyVW52YWxpZCIpOw0KICAgICAgICBzdWNjZXNzID0gZmFsc2U7DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgaWYgKA0KICAgICJ1bmRlZmluZWQiICE9DQogICAgdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbDQogICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLk5BVC5VZHBLZWVwSW50ZXJ2YWwiDQogICAgXQ0KICApIHsNCiAgICBpZiAoDQogICAgICAhY2hlY2tSYW5nZU9mTnVtYmVyKA0KICAgICAgICB2bS5zdWJtaXRDZmdEYXRhWw0KICAgICAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuTkFULlVkcEtlZXBJbnRlcnZhbCINCiAgICAgICAgXSwNCiAgICAgICAgNSwNCiAgICAgICAgNjANCiAgICAgICkNCiAgICApIHsNCiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KA0KICAgICAgICB2bS5kYXRhLA0KICAgICAgICAibmF0IiwNCiAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5OQVQuVWRwS2VlcEludGVydmFsIg0KICAgICAgKTsNCiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsNCiAgICAgIGl0ZW0ud2FybkxhYmVsID0gdm0uJHQoIlVEUEFsaXZlTWVzc2FnZVJhbmdlRXJyb3IiKTsNCiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICB9DQogIH0NCg0KICBpZiAoDQogICAgInVuZGVmaW5lZCIgIT0NCiAgICB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsNCiAgICAgICJDb25maWcuQWNjb3VudCIgKyB2bS5DdXJyZW50QWNjb3VudCArICIuR0VORVJBTC5Vc2VyQWdlbnQiDQogICAgXQ0KICApIHsNCiAgICBpZiAoDQogICAgICAhbm90Q29udGFpbkludmFsaWQoDQogICAgICAgIHZtLnN1Ym1pdENmZ0RhdGFbDQogICAgICAgICAgIkNvbmZpZy5BY2NvdW50IiArIHZtLkN1cnJlbnRBY2NvdW50ICsgIi5HRU5FUkFMLlVzZXJBZ2VudCINCiAgICAgICAgXQ0KICAgICAgKQ0KICAgICkgew0KICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgICAgIHZtLmRhdGEsDQogICAgICAgICJ1c2VyQWdlbnQiLA0KICAgICAgICAiQ29uZmlnLkFjY291bnQiICsgdm0uQ3VycmVudEFjY291bnQgKyAiLkdFTkVSQUwuVXNlckFnZW50Ig0KICAgICAgKTsNCiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsNCiAgICAgIGl0ZW0ud2FybkxhYmVsID0gdm0uJHQoIlVzZXJBZ2VudFVudmFsaWQiKTsNCiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICB9DQogIH0NCiAgcmV0dXJuIHN1Y2Nlc3M7DQp9DQo="},null]}