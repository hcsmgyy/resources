{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/components/ModalFileInput.vue?vue&type=style&index=0&id=1071859e&lang=less&scoped=true&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/components/ModalFileInput.vue","mtime":1600155105018},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/css-loader/dist/cjs.js","mtime":1600155105054},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1600155105414},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/postcss-loader/src/index.js","mtime":1600155105458},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/less-loader/dist/cjs.js","mtime":1600155105078},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYWstbW9kYWwtZmlsZS1pbnB1dC1kaXYgewogIHBhZGRpbmctbGVmdDogMTUzcHg7CiAgZm9udC1zaXplOiAxNnB4OwogIG1hcmdpbi10b3A6IDI1cHg7Cn0KCi5hay1tb2RhbC1maWxlLWlucHV0LXRpdGxlLWxhYmVsIHsKICBtYXgtd2lkdGg6IDcwMHB4OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBvdmVyZmxvdzogaGlkZGVuOwogIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgcGFkZGluZy10b3A6IDRweDsKICBtYXJnaW4tYm90dG9tOiAyNnB4OwogIGNvbG9yOiAjMzMzMzMzOwp9CgouYWstbW9kYWwtZmlsZS1pbnB1dC1oaW50LWxhYmVsIHsKICBjb2xvcjogIzlhOWE5YTsKICBtYXJnaW4tbGVmdDogMTBweDsKICBwYWRkaW5nLXRvcDogNHB4Owp9CgouYWstbW9kYWwtZmlsZS1pbnB1dC1maWxlLW5hbWUgewogIHdpZHRoOiAzODBweDsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDIwMSwgMjAxLCAyMDEsIDEpOwogIGJvcmRlci1yYWRpdXM6IDNweDsKICBoZWlnaHQ6IDMycHg7CiAgYmFja2dyb3VuZDogcmdiYSgyNDksIDI0OSwgMjQ5LCAxKTsKICBjb2xvcjogIzk5OTk5OTsKICBmb250LXNpemU6IDE2cHg7CiAgcGFkZGluZy1sZWZ0OiAxNnB4OwogIGZvbnQtd2VpZ2h0OiA0MDA7Cn0KCi5hay1tb2RhbC1maWxlLWlucHV0LWZpbGUtYnV0dG9uIHsKICBmbG9hdDogcmlnaHQ7CiAgd2lkdGg6IDExMHB4OwogIGJvcmRlci1yYWRpdXM6IDNweDsKICBib3JkZXI6IG5vbmU7CiAgYmFja2dyb3VuZDogIzAwODdmNzsKICBmb250LXNpemU6IDE2cHg7CiAgY29sb3I6ICNmZmZmZmY7CiAgaGVpZ2h0OiAzMHB4ICFpbXBvcnRhbnQ7Cn0KCi5hay1tb2RhbC1maWxlLWlucHV0LWZpbGUtbmFtZSA+IGxhYmVsIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWFyZ2luLXRvcDogMnB4OwogIG1heC13aWR0aDogMjUwcHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwp9CgovZGVlcC8uYW50LWJ0bjpob3ZlciwKLmFudC1idG46Zm9jdXMsCi5hbnQtYnRuOmFjdGl2ZSwKLmFudC1idG4uYWN0aXZlIHsKICBiYWNrZ3JvdW5kOiAjMDA4N2Y3OwogIGNvbG9yOiAjZmZmZmZmOwp9CgouYWstbW9kYWwtZmlsZS1pbnB1dC1idG4gewogIHdpZHRoOiAxMjBweDsKICBiYWNrZ3JvdW5kOiAjMDA4N2Y3OwogIGNvbG9yOiAjZmZmZmZmOwogIGZvbnQtc2l6ZTogMTZweDsKICBtYXJnaW4tbGVmdDogMzBweDsKfQo="},{"version":3,"sources":["ModalFileInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalFileInput.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"ak-modal-file-input-div\">\n    <div>\n      <label class=\"ak-modal-file-input-title-label\">{{labelTitle}}</label>\n    </div>\n    <div :style=\"{display:'flex'}\">\n      <div class=\"ak-modal-file-input-file-name\">\n        <label>{{value.fileName}}</label>\n        <a-upload\n          name=\"file\"\n          :showUploadList=\"false\"\n          :accept=\"acceptFileType\"\n          :beforeUpload=\"beforeUpload\"\n          :style=\"{float:'right'}\"\n        >\n          <a-button type=\"file\" class=\"ak-modal-file-input-file-button\">{{$t('UpgradeFile')}}</a-button>\n        </a-upload>\n      </div>\n      <a-button\n        type=\"primary\"\n        class=\"ak-modal-file-input-btn\"\n        @click=\"onCancel\"\n        :disabled=\"importBtnDisabled\"\n      >{{ importBtnName }}</a-button>\n\n      <Popover\n        :showDescription=\"showDescription\"\n        :descriptionContent=\"descriptionContent\"\n        :style=\"{paddingLeft:'50px'}\"\n      ></Popover>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Popover from \"@/components/Popover.vue\";\nimport { checkFileFormat, showErrorInfo } from \"@/js/common.js\";\nexport default {\n  components: {\n    Popover,\n  },\n  props: {\n    showDescription: { type: Boolean, default: false },\n    descriptionContent: String,\n    labelTitle: String,\n    acceptFileType: { type: String, default: \"\" },\n    importBtnName: { type: String, default: \"Import\" },\n    uploadFunction: {\n      type: Function,\n      default: function () {\n        console.log(\"click import\");\n      },\n    },\n    value: Object,\n    maxSize: { type: Number, default: 50 * 1024 * 1024 },\n    imgResolutionWidth: { type: Number, default: -1 },\n    imgResolutionHeight: { type: Number, default: -1 },\n  },\n  methods: {\n    beforeUpload: function (info) {\n      //check format\n      let acceptTypes = this.acceptFileType.split(\",\");\n      let checkSuccess = false;\n      for (let i = 0; i < acceptTypes.length; i++) {\n        if (checkFileFormat(info.name, acceptTypes[i], acceptTypes[i].length)) {\n          checkSuccess = true;\n        }\n      }\n      if (!checkSuccess) {\n        showErrorInfo(this, this.$t(\"FileFormatWarning\"));\n        return false;\n      }\n      //check file size\n      if (this.maxSize > 0 && info.size > this.maxSize) {\n        showErrorInfo(this, this.$t(\"UploadingFileTooLargeWarning\"));\n        return false;\n      }\n      //check file name\n      if (info.name.length > 127) {\n        showErrorInfo(this, this.$t(\"WarningFileNameTooLong\"));\n        return false;\n      }\n\n      //check img resolution\n      if (\n        (checkFileFormat(info.name, \".PNG\", 4) ||\n          checkFileFormat(info.name, \".JPG\", 4) ||\n          checkFileFormat(info.name, \".JPEG\", 5)) &&\n        this.imgResolutionWidth > 0 &&\n        this.imgResolutionHeight > 0\n      ) {\n        var reader = new FileReader();\n        reader.readAsDataURL(info);\n        var vm = this;\n        reader.onload = function () {\n          var img = new Image();\n          img.src = reader.result;\n          img.onload = function () {\n            if (\n              img.width > vm.imgResolutionWidth ||\n              img.height > vm.imgResolutionHeight\n            ) {\n              showErrorInfo(vm, vm.$t(\"ImageResolutionErr\"));\n              return false;\n            } else {\n              info.height = img.height;\n              info.width = img.width;\n              vm.fileData = info;\n              vm.value.fileName = info.name;\n              vm.onChange();\n              return false;\n            }\n          };\n          img.onerror = function () {\n            //图片加载错误\n            showErrorInfo(vm, vm.$t(\"FileFormatWarning\"));\n            return false;\n          };\n        };\n      } else {\n        //done\n        this.fileData = info;\n        this.value.fileName = info.name;\n        this.onChange();\n        return false;\n      }\n    },\n    onChange: function () {\n      let data = {\n        fileName: this.value.fileName,\n        fileData: this.fileData,\n      };\n      this.$emit(\"change\", data);\n    },\n    onCancel: function () {\n      this.value.fileName = this.$t(\"UpgradeFilePath\");\n      this.fileData = {};\n      this.onChange();\n    },\n  },\n  data() {\n    return {\n      // fileName: this.$t(\"UpgradeFilePath\"),\n      fileData: {},\n      importBtnDisabled: true,\n    };\n  },\n  watch: {\n    value(newVal, oldVal) {\n      let fileName = newVal.fileName;\n      if (fileName != \"\" && fileName != this.$t(\"UpgradeFilePath\")) {\n        this.importBtnDisabled = false;\n      } else {\n        this.importBtnDisabled = true;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.ak-modal-file-input-div {\n  padding-left: 153px;\n  font-size: 16px;\n  margin-top: 25px;\n}\n\n.ak-modal-file-input-title-label {\n  max-width: 700px;\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding-top: 4px;\n  margin-bottom: 26px;\n  color: #333333;\n}\n\n.ak-modal-file-input-hint-label {\n  color: #9a9a9a;\n  margin-left: 10px;\n  padding-top: 4px;\n}\n\n.ak-modal-file-input-file-name {\n  width: 380px;\n  border: 1px solid rgba(201, 201, 201, 1);\n  border-radius: 3px;\n  height: 32px;\n  background: rgba(249, 249, 249, 1);\n  color: #999999;\n  font-size: 16px;\n  padding-left: 16px;\n  font-weight: 400;\n}\n\n.ak-modal-file-input-file-button {\n  float: right;\n  width: 110px;\n  border-radius: 3px;\n  border: none;\n  background: #0087f7;\n  font-size: 16px;\n  color: #ffffff;\n  height: 30px !important;\n}\n\n.ak-modal-file-input-file-name > label {\n  display: inline-block;\n  margin-top: 2px;\n  max-width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/deep/.ant-btn:hover,\n.ant-btn:focus,\n.ant-btn:active,\n.ant-btn.active {\n  background: #0087f7;\n  color: #ffffff;\n}\n\n.ak-modal-file-input-btn {\n  width: 120px;\n  background: #0087f7;\n  color: #ffffff;\n  font-size: 16px;\n  margin-left: 30px;\n}\n</style>"]}]}