{"remainingRequest":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\PhoneRelay.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\PhoneRelay.vue","mtime":1625712892498},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1624613260275},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgQ29tbW9uUGFnZSBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uUGFnZS52dWUiOw0KaW1wb3J0IHsNCiAgc2hvd1JlcXVlc3RTdWNjZXNzLA0KICBkZWVwQ2xvbmUsDQogIG5vdENvbnRhaW5JbnZhbGlkLA0KICBnZXRJdGVtQnlLZXksDQogIGNoZWNrSXBBZGRyLA0KfSBmcm9tICJAL2pzL2NvbW1vbi5qcyI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIENvbW1vblBhZ2UsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHN0YXR1c0l0ZW1zOiBbDQogICAgICAgIHsga2V5OiAwLCBsYWJlbDogdGhpcy4kdCgiRGlzYWJsZWQiKSB9LA0KICAgICAgICB7IGtleTogMSwgbGFiZWw6IHRoaXMuJHQoIkVuYWJsZWQiKSB9LA0KICAgICAgXSwNCiAgICAgIGNoYW5nZWRDZmdEYXRhOiB7fSwNCiAgICAgIHN1Ym1pdENmZ0RhdGE6IHt9LA0KICAgICAgYXBpRGF0YToge30sDQogICAgICBkYXRhOiB7DQogICAgICAgIGdldERhdGFTdWNjZXNzOiBmYWxzZSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBnZXREYXRhKHRoaXMpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgb25Db21tb25QYWdlRGF0YUNoYW5nZTogZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICBzZXRDaGFuZ2VkRGF0YSh0aGlzLCBldmVudCk7DQogICAgICAvL+eVjOmdouWPmOWMlg0KICAgICAgaGFuZGxlclBhZ2VDaGFuZ2VkKHRoaXMpOw0KICAgIH0sDQogIH0sDQp9Ow0KDQpsZXQgc2hvd0RlbEFsbEJ0biA9IGZhbHNlOw0KDQpmdW5jdGlvbiBzZXRDaGFuZ2VkRGF0YSh2bSwgZXZlbnQpIHsNCiAgaWYgKA0KICAgIGV2ZW50LmNvbnRlbnRLZXkgPT0gInJlbGF5U2V0dGluZyIgfHwNCiAgICBldmVudC5jb250ZW50S2V5ID09ICJvcGVuUmVsYXlWaWFIdHRwIiB8fA0KICAgIGV2ZW50LmNvbnRlbnRLZXkgPT0gInJlbW90ZUNvbnRyb2wiIHx8DQogICAgZXZlbnQuY29udGVudEtleSA9PSAid2ViUmVsYXkiDQogICkgew0KICAgIHZtLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOw0KICB9IGVsc2UgaWYgKA0KICAgIGV2ZW50LmNvbnRlbnRLZXkgPT0gInNvZnRrZXlJblRhbGtpbmciICYmDQogICAgZXZlbnQuaXRlbUtleSA9PSAic29mdGtleUluVGFsa2luZyINCiAgKSB7DQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudC5uZXdWYWwubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuVGFsa2luZ1N0YXR1cyIgKyAoaSArIDEpXSA9DQogICAgICAgIGV2ZW50Lm5ld1ZhbFtpXS5zdGF0dXMudmFsdWU7DQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsNCiAgICAgICAgIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5UYWxraW5nQ29sRGlzcGxheU5hbWUiICsgKGkgKyAxKQ0KICAgICAgXSA9IGV2ZW50Lm5ld1ZhbFtpXS5kaXNwbGF5TmFtZS52YWx1ZTsNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuVGFsa2luZ1JlbGF5VHlwZSIgKyAoaSArIDEpXSA9DQogICAgICAgIGV2ZW50Lm5ld1ZhbFtpXS50eXBlLnZhbHVlOw0KICAgIH0NCiAgfSBlbHNlIGlmICgNCiAgICBldmVudC5jb250ZW50S2V5ID09ICJzb2Z0a2V5SW5Ib21lT3JNb3JlIiAmJg0KICAgIGV2ZW50Lml0ZW1LZXkgPT0gInNvZnRrZXlJbkhvbWVPck1vcmUiDQogICkgew0KICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuSWRsZVN0YXR1cyJdID0NCiAgICAgIGV2ZW50Lm5ld1ZhbFswXS5zdGF0dXMudmFsdWU7DQogICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5JZGxlRGlzcGxheU5hbWUiXSA9DQogICAgICBldmVudC5uZXdWYWxbMF0uZGlzcGxheU5hbWUudmFsdWU7DQogICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5JZGxlUmVsYXlUeXBlIl0gPQ0KICAgICAgZXZlbnQubmV3VmFsWzBdLnR5cGUudmFsdWU7DQogIH0gZWxzZSBpZiAoDQogICAgZXZlbnQuY29udGVudEtleSA9PSAic29mdGtleUluQ2FsbFByZXZpZXciICYmDQogICAgZXZlbnQuaXRlbUtleSA9PSAic29mdGtleUluQ2FsbFByZXZpZXciDQogICkgew0KICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuSW5jb21pbmdTdGF0dXMiXSA9DQogICAgICBldmVudC5uZXdWYWxbMF0uc3RhdHVzLnZhbHVlOw0KICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuSW5jb21pbmdEaXNwbGF5TmFtZSJdID0NCiAgICAgIGV2ZW50Lm5ld1ZhbFswXS5kaXNwbGF5TmFtZS52YWx1ZTsNCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkluY29taW5nUmVsYXlUeXBlIl0gPQ0KICAgICAgZXZlbnQubmV3VmFsWzBdLnR5cGUudmFsdWU7DQogIH0gZWxzZSBpZiAoDQogICAgZXZlbnQuY29udGVudEtleSA9PSAic29mdGtleUluTW9uaXRvciIgJiYNCiAgICBldmVudC5pdGVtS2V5ID09ICJzb2Z0a2V5SW5Nb25pdG9yIg0KICApIHsNCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLk1vbml0b3JTdGF0dXMiXSA9DQogICAgICBldmVudC5uZXdWYWxbMF0uc3RhdHVzLnZhbHVlOw0KICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuTW9uaXRvckRpc3BsYXlOYW1lIl0gPQ0KICAgICAgZXZlbnQubmV3VmFsWzBdLmRpc3BsYXlOYW1lLnZhbHVlOw0KICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuTW9uaXRvclJlbGF5VHlwZSJdID0NCiAgICAgIGV2ZW50Lm5ld1ZhbFswXS50eXBlLnZhbHVlOw0KICB9IGVsc2UgaWYgKA0KICAgIGV2ZW50LmNvbnRlbnRLZXkgPT0gInJlbW90ZVJlbGF5QnlIdHRwIiAmJg0KICAgIGV2ZW50Lml0ZW1LZXkgPT0gInJlbW90ZVJlbGF5QnlIdHRwIiAmJg0KICAgIGV2ZW50LnRhYmxlT3BlcmF0ZVR5cGUgIT0gInNlbGVjdGlvbiINCiAgKSB7DQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudC5uZXdWYWwubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVNT1RFUkVMQVkuUmVtb3RlSVAiICsgaV0gPQ0KICAgICAgICBldmVudC5uZXdWYWxbaV0ucmVtb3RlSXAudmFsdWU7DQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTU9URVJFTEFZLlJlbW90ZVVSTCIgKyBpXSA9DQogICAgICAgIGV2ZW50Lm5ld1ZhbFtpXS5yZW1vdGVBZGRyZXNzLnZhbHVlOw0KICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRU1PVEVSRUxBWS5SZW1vdGVVc2VyIiArIGldID0NCiAgICAgICAgZXZlbnQubmV3VmFsW2ldLnVzZXJuYW1lLnZhbHVlOw0KICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRU1PVEVSRUxBWS5SZW1vdGVQYXNzd2QiICsgaV0gPQ0KICAgICAgICBldmVudC5uZXdWYWxbaV0ucGFzc3dvcmQudmFsdWU7DQogICAgICBsZXQgZG9vck51bSA9ICIiOw0KICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBldmVudC5uZXdWYWxbaV0uZG9vck51bS52YWx1ZS5sZW5ndGg7IGorKykgew0KICAgICAgICBkb29yTnVtICs9IGV2ZW50Lm5ld1ZhbFtpXS5kb29yTnVtLnZhbHVlW2pdOw0KICAgICAgICBpZiAoaiAhPSBldmVudC5uZXdWYWxbaV0uZG9vck51bS52YWx1ZS5sZW5ndGggLSAxKSB7DQogICAgICAgICAgZG9vck51bSArPSAiLCI7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWw0KICAgICAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTU9URVJFTEFZLlJlbW90ZURvb3JOdW0iICsgaQ0KICAgICAgXSA9IGRvb3JOdW07DQogICAgfQ0KICB9IGVsc2UgaWYgKA0KICAgIGV2ZW50LmNvbnRlbnRLZXkgPT0gIndlYlJlbGF5QWN0aW9uU2V0dGluZyIgJiYNCiAgICBldmVudC5pdGVtS2V5ID09ICJ3ZWJSZWxheUFjdGlvblNldHRpbmciDQogICkgew0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXZlbnQubmV3VmFsLmxlbmd0aDsgaSsrKSB7DQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLldFQlJFTEFZLldlYlJlbGF5SVAiICsgaV0gPQ0KICAgICAgICBldmVudC5uZXdWYWxbaV0uaXAudmFsdWU7DQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLldFQlJFTEFZLldlYlJlbGF5U0lQIiArIGldID0NCiAgICAgICAgZXZlbnQubmV3VmFsW2ldLnNpcC52YWx1ZTsNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuV0VCUkVMQVkuV2ViQWN0aW9uIiArIGldID0NCiAgICAgICAgZXZlbnQubmV3VmFsW2ldLmFjdGlvbi52YWx1ZTsNCiAgICB9DQogIH0NCg0KICBpZihldmVudC5pdGVtS2V5ID09ICJyZW1vdGVSZWxheUJ5SHR0cCIpew0KICAgIGxldCBzZWxlY3RSb3cgPSBnZXRJdGVtQnlLZXkoDQogICAgICB2bS5kYXRhLA0KICAgICAgInJlbW90ZVJlbGF5QnlIdHRwIiwNCiAgICAgICJyZW1vdGVSZWxheUJ5SHR0cCINCiAgICApLnNlbGVjdGVkUm93S2V5czsNCiAgICBpZihzZWxlY3RSb3cubGVuZ3RoID4gMCl7DQogICAgICBnZXRJdGVtQnlLZXkoDQogICAgICAgIHZtLmRhdGEsDQogICAgICAgICJyZW1vdGVSZWxheUJ5SHR0cCIsDQogICAgICAgICJyZW1vdGVSZWxheUJ5SHR0cERlbCINCiAgICAgICkuZGVsRGlzYWJsZWQgPSBmYWxzZTsNCiAgICB9IGVsc2V7DQogICAgICBnZXRJdGVtQnlLZXkoDQogICAgICAgIHZtLmRhdGEsDQogICAgICAgICJyZW1vdGVSZWxheUJ5SHR0cCIsDQogICAgICAgICJyZW1vdGVSZWxheUJ5SHR0cERlbCINCiAgICAgICkuZGVsRGlzYWJsZWQgPSB0cnVlOw0KICAgIH0NCiAgfQ0KfQ0KDQpmdW5jdGlvbiBoYW5kbGVyUGFnZUNoYW5nZWQodm0pIHsNCiAgaWYgKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuUmVsYXlPbldlYiJdID09IDApIHsNCiAgICBnZXRJdGVtQnlLZXkoDQogICAgICB2bS5kYXRhLA0KICAgICAgIm9wZW5SZWxheVZpYUh0dHAiLA0KICAgICAgIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5SZWxheU9uV2ViVXNlciINCiAgICApLmRpc2FibGVkID0gdHJ1ZTsNCiAgICBnZXRJdGVtQnlLZXkoDQogICAgICB2bS5kYXRhLA0KICAgICAgIm9wZW5SZWxheVZpYUh0dHAiLA0KICAgICAgIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5SZWxheU9uV2ViUHdkIg0KICAgICkuZGlzYWJsZWQgPSB0cnVlOw0KICB9IGVsc2Ugew0KICAgIGdldEl0ZW1CeUtleSgNCiAgICAgIHZtLmRhdGEsDQogICAgICAib3BlblJlbGF5VmlhSHR0cCIsDQogICAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLlJlbGF5T25XZWJVc2VyIg0KICAgICkuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICBnZXRJdGVtQnlLZXkoDQogICAgICB2bS5kYXRhLA0KICAgICAgIm9wZW5SZWxheVZpYUh0dHAiLA0KICAgICAgIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5SZWxheU9uV2ViUHdkIg0KICAgICkuZGlzYWJsZWQgPSBmYWxzZTsNCiAgfQ0KICBnZXRJdGVtQnlLZXkoDQogICAgdm0uZGF0YSwNCiAgICAicmVsYXlTZXR0aW5nIiwNCiAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkRUTUZDb2RlMiINCiAgKS5pc0hpZGUgPSB2bS5hcGlEYXRhLmRhdGEuc3VwcG9ydFRocmVlRHRtZiAhPSAxOw0KICBnZXRJdGVtQnlLZXkoDQogICAgdm0uZGF0YSwNCiAgICAicmVsYXlTZXR0aW5nIiwNCiAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkRUTUZDb2RlMyINCiAgKS5pc0hpZGUgPSB2bS5hcGlEYXRhLmRhdGEuc3VwcG9ydFRocmVlRHRtZiAhPSAxOw0KDQogIGlmKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuUmVtb3RlQ29udHJvbCJdID09IDApew0KICAgIGdldEl0ZW1CeUtleSgNCiAgICAgIHZtLmRhdGEsDQogICAgICAicmVsYXlTZXR0aW5nIiwNCiAgICAgICJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuTG9jYWxEVE1GIg0KICAgICkuZGlzYWJsZWQgPSB0cnVlOw0KICB9IGVsc2V7DQogICAgZ2V0SXRlbUJ5S2V5KA0KICAgICAgdm0uZGF0YSwNCiAgICAgICJyZWxheVNldHRpbmciLA0KICAgICAgIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5Mb2NhbERUTUYiDQogICAgKS5kaXNhYmxlZCA9IGZhbHNlOw0KICB9DQogIGlmKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuUmVtb3RlQ29udHJvbDIiXSA9PSAwKXsNCiAgICBnZXRJdGVtQnlLZXkoDQogICAgICB2bS5kYXRhLA0KICAgICAgInJlbGF5U2V0dGluZyIsDQogICAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkxvY2FsRFRNRjIiDQogICAgKS5kaXNhYmxlZCA9IHRydWU7DQogIH0gZWxzZXsNCiAgICBnZXRJdGVtQnlLZXkoDQogICAgICB2bS5kYXRhLA0KICAgICAgInJlbGF5U2V0dGluZyIsDQogICAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkxvY2FsRFRNRjIiDQogICAgKS5kaXNhYmxlZCA9IGZhbHNlOw0KICB9DQp9DQoNCmZ1bmN0aW9uIHN1Ym1pdERhdGEodm0pIHsNCiAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsNCg0KICBsZXQgcmVxdWVzdERhdGEgPSB7DQogICAgdGFyZ2V0OiAicGhvbmVSZWxheSIsDQogICAgYWN0aW9uOiAic2V0IiwNCiAgICBjb25maWdEYXRhOiB2bS5zdWJtaXRDZmdEYXRhLA0KICB9Ow0KICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiByZXNwb25zZSkgew0KICAgICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtKTsNCiAgICB9DQogICAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7DQogICAgZ2V0RGF0YSh2bSk7DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiBnZXREYXRhKHZtKSB7DQogIHZtLiRheGlvcy5nZXQoImFwaS9waG9uZVJlbGF5L2luZm8iKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgIHZtLmdldERhdGFTdWNjZXNzID0gdHJ1ZTsNCiAgICB2bS5hcGlEYXRhID0gcmVzcG9uc2UuZGF0YTsNCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YSA9IGRlZXBDbG9uZShyZXNwb25zZS5kYXRhLmNvbmZpZ0RhdGEpOw0KICAgIGNyZWF0ZVBhZ2VEYXRhKHZtKTsNCiAgICBoYW5kbGVyUGFnZUNoYW5nZWQodm0pOw0KICAgIGlmKHNob3dEZWxBbGxCdG4pew0KICAgICAgZ2V0SXRlbUJ5S2V5KA0KICAgICAgICB2bS5kYXRhLA0KICAgICAgICAicmVtb3RlUmVsYXlCeUh0dHAiLA0KICAgICAgICAicmVtb3RlUmVsYXlCeUh0dHBEZWwiDQogICAgICApLmRlbEFsbERpc2FibGVkID0gZmFsc2U7DQogICAgfSBlbHNlew0KICAgICAgZ2V0SXRlbUJ5S2V5KA0KICAgICAgICB2bS5kYXRhLA0KICAgICAgICAicmVtb3RlUmVsYXlCeUh0dHAiLA0KICAgICAgICAicmVtb3RlUmVsYXlCeUh0dHBEZWwiDQogICAgICApLmRlbEFsbERpc2FibGVkID0gdHJ1ZTsNCiAgICB9DQogICAgc2hvd0RlbEFsbEJ0biA9IGZhbHNlOw0KICB9KTsNCn0NCg0KZnVuY3Rpb24gZ2V0Q29tbWl0RGF0YSh2bSkgew0KICB2bS5zdWJtaXRDZmdEYXRhID0ge307DQogIGZvciAodmFyIGNoYW5nZWRLZXkgaW4gdm0uY2hhbmdlZENmZ0RhdGEpIHsNCiAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhW2NoYW5nZWRLZXldICE9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldKSB7DQogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV07DQogICAgfQ0KICB9DQp9DQoNCmZ1bmN0aW9uIGNoZWNrQ29tbWl0RGF0YSh2bSkgew0KICByZXR1cm4gKA0KICAgIGNoZWNrUmVtb3RlQ29udHJvbCh2bSkgJiYNCiAgICBjaGVja1JlbW90ZVJlbGF5SHR0cCh2bSkgJiYNCiAgICBjaGVja1dlYlJlbGF5KHZtKSAmJg0KICAgIGNoZWNrV2ViUmVsYXlBY3Rpb25TZXR0aW5nKHZtKQ0KICApOw0KfQ0KDQpmdW5jdGlvbiBjaGVja1dlYlJlbGF5QWN0aW9uU2V0dGluZyh2bSkgew0KICBsZXQgc3VjY2VzcyA9IHRydWU7DQogIGZvciAobGV0IGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLndlYlJlbGF5QWN0aW9uTWF4TnVtOyBpKyspIHsNCiAgICBsZXQgdGFibGVEYXRhID0gZ2V0SXRlbUJ5S2V5KA0KICAgICAgdm0uZGF0YSwNCiAgICAgICJ3ZWJSZWxheUFjdGlvblNldHRpbmciLA0KICAgICAgIndlYlJlbGF5QWN0aW9uU2V0dGluZyINCiAgICApLnRhYmxlRGF0YTsNCiAgICB0YWJsZURhdGFbaV0uaXAuaXNXYXJuID0gZmFsc2U7DQogICAgdGFibGVEYXRhW2ldLnNpcC5pc1dhcm4gPSBmYWxzZTsNCiAgICB0YWJsZURhdGFbaV0uYWN0aW9uLmlzV2FybiA9IGZhbHNlOw0KICAgIGlmICgNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuV0VCUkVMQVkuV2ViUmVsYXlJUCIgKyBpXSA9PSAiIiAmJg0KICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5XRUJSRUxBWS5XZWJSZWxheVNJUCIgKyBpXSA9PSAiIiAmJg0KICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5XRUJSRUxBWS5XZWJBY3Rpb24iICsgaV0gIT0gIiINCiAgICApIHsNCiAgICAgIHRhYmxlRGF0YVtpXS5pcC5pc1dhcm4gPSB0cnVlOw0KICAgICAgdGFibGVEYXRhW2ldLnNpcC5pc1dhcm4gPSB0cnVlOw0KICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgIH0NCiAgICBpZiAoDQogICAgICAodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5XRUJSRUxBWS5XZWJSZWxheUlQIiArIGldICE9ICIiIHx8DQogICAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuV0VCUkVMQVkuV2ViUmVsYXlTSVAiICsgaV0gIT0NCiAgICAgICAgICAiIikgJiYNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuV0VCUkVMQVkuV2ViQWN0aW9uIiArIGldID09ICIiDQogICAgKSB7DQogICAgICB0YWJsZURhdGFbaV0uYWN0aW9uLmlzV2FybiA9IHRydWU7DQogICAgICBzdWNjZXNzID0gZmFsc2U7DQogICAgfQ0KICB9DQogIHJldHVybiBzdWNjZXNzOw0KfQ0KDQpmdW5jdGlvbiBjaGVja1dlYlJlbGF5KHZtKSB7DQogIGxldCBzdWNjZXNzID0gdHJ1ZTsNCiAgaWYgKA0KICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuV0VCUkVMQVkuSXBBZGRyZXNzIl0gIT0gIiIgJiYNCiAgICAhY2hlY2tJcEFkZHIodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5XRUJSRUxBWS5JcEFkZHJlc3MiXSkNCiAgKSB7DQogICAgZ2V0SXRlbUJ5S2V5KA0KICAgICAgdm0uZGF0YSwNCiAgICAgICJ3ZWJSZWxheSIsDQogICAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLldFQlJFTEFZLklwQWRkcmVzcyINCiAgICApLmlzV2FybiA9IHRydWU7DQogICAgc3VjY2VzcyA9IGZhbHNlOw0KICB9DQogIHJldHVybiBzdWNjZXNzOw0KfQ0KDQpmdW5jdGlvbiBjaGVja1JlbW90ZVJlbGF5SHR0cCh2bSkgew0KICBsZXQgc3VjY2VzcyA9IHRydWU7DQogIGZvciAobGV0IGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLm1heFJlbW90ZVJlbGF5TnVtOyBpKyspIHsNCiAgICBpZiAoDQogICAgICAodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRU1PVEVSRUxBWS5SZW1vdGVVUkwiICsgaV0gIT0NCiAgICAgICAgIiIgfHwNCiAgICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRU1PVEVSRUxBWS5SZW1vdGVVc2VyIiArIGldICE9DQogICAgICAgICAgIiIpICYmDQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTU9URVJFTEFZLlJlbW90ZUlQIiArIGldID09ICIiDQogICAgKSB7DQogICAgICBsZXQgdGFibGVEYXRhID0gZ2V0SXRlbUJ5S2V5KA0KICAgICAgICB2bS5kYXRhLA0KICAgICAgICAicmVtb3RlUmVsYXlCeUh0dHAiLA0KICAgICAgICAicmVtb3RlUmVsYXlCeUh0dHAiDQogICAgICApLnRhYmxlRGF0YTsNCiAgICAgIHRhYmxlRGF0YVtpXS5yZW1vdGVJcC5pc1dhcm4gPSB0cnVlOw0KICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KICByZXR1cm4gc3VjY2VzczsNCn0NCg0KZnVuY3Rpb24gY2hlY2tSZW1vdGVDb250cm9sKHZtKSB7DQogIGxldCBzdWNjZXNzID0gdHJ1ZTsNCiAgaWYgKA0KICAgICFub3RDb250YWluSW52YWxpZCgNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuRmVhdHVyZXMuUkVNT1RFQ09OVFJPTC5BY3Rpb25VUklBbGxvd0lQTGlzdCJdDQogICAgKQ0KICApIHsNCiAgICBnZXRJdGVtQnlLZXkoDQogICAgICB2bS5kYXRhLA0KICAgICAgInJlbW90ZUNvbnRyb2wiLA0KICAgICAgIkNvbmZpZy5GZWF0dXJlcy5SRU1PVEVDT05UUk9MLkFjdGlvblVSSUFsbG93SVBMaXN0Ig0KICAgICkuaXNXYXJuID0gdHJ1ZTsNCiAgICBzdWNjZXNzID0gZmFsc2U7DQogIH0NCiAgcmV0dXJuIHN1Y2Nlc3M7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVBhZ2VEYXRhKHZtKSB7DQogIHZtLmRhdGEgPSB7DQogICAgZ2V0RGF0YVN1Y2Nlc3M6IHRydWUsDQogICAgYnJlYWRDcnVtYjogew0KICAgICAgZmlyc3RUaXRsZTogdm0uJHQoIlBob25lIiksDQogICAgICBzZWNvbmRUaXRsZTogdm0uJHQoIlJlbGF5IiksDQogICAgfSwNCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKCFjaGVja0NvbW1pdERhdGEodm0pKSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGdldENvbW1pdERhdGEodm0pOw0KICAgICAgc3VibWl0RGF0YSh2bSk7DQogICAgfSwNCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gKCkgew0KICAgICAgdm0uZGF0YS5jYW5jZWxMb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGdldERhdGEodm0pOw0KICAgIH0sDQogICAgc3VibWl0TG9hZGluZzogZmFsc2UsDQogICAgY2FuY2VsTG9hZGluZzogZmFsc2UsDQogICAgY29udGVudHM6IFtdLA0KICB9Ow0KDQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVSZWxheVNldHRpbmdDb250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVSZW1vdGVDb250cm9sQ29udGVudCh2bSkpOw0KICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlT3BlblJlbGF5VmlhSHR0cENvbnRlbnQodm0pKTsNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVNvZnRrZXlJblRhbGtpbmdDb250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVTb2Z0a2V5SW5Ib21lT3JNb3JlQ29udGVudCh2bSkpOw0KICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlU29mdGtleUluTW9uaXRvckNvbnRlbnQodm0pKTsNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVNvZnRrZXlJbkNhbGxQcmV2aWV3Q29udGVudCh2bSkpOw0KICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlUmVtb3RlUmVsYXlCeUh0dHBDb250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVXZWJSZWxheUNvbnRlbnQodm0pKTsNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVdlYlJlbGF5QWN0aW9uU2V0dGluZ0NvbnRlbnQodm0pKTsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlV2ViUmVsYXlBY3Rpb25TZXR0aW5nQ29udGVudCh2bSkgew0KICAvL3RhYmxlIGRhdGENCiAgbGV0IHRhYmxlRGF0YSA9IFtdOw0KICBmb3IgKGxldCBpID0gMDsgaSA8IHZtLmFwaURhdGEuZGF0YS53ZWJSZWxheUFjdGlvbk1heE51bTsgaSsrKSB7DQogICAgbGV0IGl0ZW0gPSB7DQogICAgICBrZXk6IGksDQogICAgICBhY3Rpb25JZDogdm0uJHQoIldlYlJlbGF5Q29sSWQiKSArICIgIiArIChpICsgMSksDQogICAgICBpcDogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5XRUJSRUxBWS5XZWJSZWxheUlQIiArIGldLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJWYWx1ZUVtcHR5V2FybmluZyIpLA0KICAgICAgfSwNCiAgICAgIHNpcDogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5XRUJSRUxBWS5XZWJSZWxheVNJUCIgKyBpXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiVmFsdWVFbXB0eVdhcm5pbmciKSwNCiAgICAgIH0sDQogICAgICBhY3Rpb246IHsNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuV0VCUkVMQVkuV2ViQWN0aW9uIiArIGldLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJWYWx1ZUVtcHR5V2FybmluZyIpLA0KICAgICAgfSwNCiAgICB9Ow0KICAgIHRhYmxlRGF0YS5wdXNoKGl0ZW0pOw0KICB9DQogIC8vY29udGVudA0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJ3ZWJSZWxheUFjdGlvblNldHRpbmciLA0KICAgIHRpdGxlOiB2bS4kdCgiV2ViUmVsYXlBY3Rpb25TZXR0aW5nIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIldlYlJlbGF5QWN0aW9uRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHR5cGU6ICJ0YWJsZSIsDQogICAgICAgIGtleTogIndlYlJlbGF5QWN0aW9uU2V0dGluZyIsDQogICAgICAgIHRhYmxlQ29sdW1uczogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJsYWJlbCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIldlYlJlbGF5Q29sSWQiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImFjdGlvbklkIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImFjdGlvbklkIiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgc2VsZWN0SXRlbXM6IHZtLnN0YXR1c0l0ZW1zLA0KICAgICAgICAgICAgd2lkdGg6ICIxMCUiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiSVAiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImlwIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImlwIiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgd2lkdGg6ICIzMCUiLA0KICAgICAgICAgICAgbWF4TGVuZ3RoOiAzMiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIlNJUCIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAic2lwIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogInNpcCIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMzAlIiwNCiAgICAgICAgICAgIG1heExlbmd0aDogMzIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJXZWJSZWxheUNvbEFjdGlvbiIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAiYWN0aW9uIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImFjdGlvbiIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMzAlIiwNCiAgICAgICAgICAgIG1heExlbmd0aDogMTI3LA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIHRhYmxlRGF0YTogdGFibGVEYXRhLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlV2ViUmVsYXlDb250ZW50KHZtKSB7DQogIGxldCBjb250ZW50ID0gew0KICAgIGtleTogIndlYlJlbGF5IiwNCiAgICB0aXRsZTogdm0uJHQoIldlYlJlbGF5IiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIldlYlJlbGF5RGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiV2ViUmVsYXlJUEFkZHJlc3MiKSwNCiAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkRvb3JTZXR0aW5nLldFQlJFTEFZLklwQWRkcmVzcyIsDQogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5XRUJSRUxBWS5JcEFkZHJlc3MiXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiSXBGb3JtYXRFcnJvciIpLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIldlYlJlbGF5SVBEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIldlYlJlbGF5VXNlciIpLA0KICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICBrZXk6ICJDb25maWcuRG9vclNldHRpbmcuV0VCUkVMQVkuVXNlck5hbWUiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuV0VCUkVMQVkuVXNlck5hbWUiXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJXZWJSZWxheVVzZXJuYW1lRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJXZWJSZWxheVB3ZCIpLA0KICAgICAgICBpbnB1dFR5cGU6ICJwYXNzd29yZCIsDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGtleTogIkNvbmZpZy5Eb29yU2V0dGluZy5XRUJSRUxBWS5QYXNzd2QiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuV0VCUkVMQVkuUGFzc3dkIl0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiV2ViUmVsYXlQYXNzRGVzYyIpLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlUmVtb3RlUmVsYXlCeUh0dHBDb250ZW50KHZtKSB7DQogIC8vZG9vcm51bSBpdGVtcw0KICBsZXQgZG9vck51bUl0ZW1zID0gW107DQogIGZvciAobGV0IGkgPSAxOyBpIDw9IDQ7IGkrKykgew0KICAgIGxldCBpdGVtID0gew0KICAgICAga2V5OiBpLA0KICAgICAgbGFiZWw6IGksDQogICAgfTsNCiAgICBkb29yTnVtSXRlbXMucHVzaChpdGVtKTsNCiAgfQ0KICAvL3RhYmxlZGF0YQ0KICBsZXQgdGFibGVEYXRhID0gW107DQogIGZvciAobGV0IGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLm1heFJlbW90ZVJlbGF5TnVtOyBpKyspIHsNCiAgICBsZXQgaXRlbSA9IHsNCiAgICAgIGtleTogaSwNCiAgICAgIGluZGV4OiBpICsgMSwNCiAgICAgIHJlbW90ZUlwOiB7DQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTU9URVJFTEFZLlJlbW90ZUlQIiArIGldLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJWYWx1ZUVtcHR5V2FybmluZyIpLA0KICAgICAgfSwNCiAgICAgIHJlbW90ZUFkZHJlc3M6IHsNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVNT1RFUkVMQVkuUmVtb3RlVVJMIiArIGldLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgfSwNCiAgICAgIHVzZXJuYW1lOiB7DQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuRG9vclNldHRpbmcuUkVNT1RFUkVMQVkuUmVtb3RlVXNlciIgKyBpDQogICAgICAgICAgXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICBwYXNzd29yZDogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTU9URVJFTEFZLlJlbW90ZVBhc3N3ZCIgKyBpDQogICAgICAgICAgXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICBkb29yTnVtOiB7DQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTU9URVJFTEFZLlJlbW90ZURvb3JOdW0iICsgaV0ucmVwbGFjZSgvKF5zKil8KHMqJCkvZywgIiIpLmxlbmd0aD09MCA/IFtdIDogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVNT1RFUkVMQVkuUmVtb3RlRG9vck51bSIgKyBpXS5zcGxpdCgiLCIpLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgfSwNCiAgICB9Ow0KICAgIGlmKGl0ZW0ucmVtb3RlSXAudmFsdWUgIT0gIiIpew0KICAgICAgc2hvd0RlbEFsbEJ0biA9IHRydWU7DQogICAgfQ0KICAgIHRhYmxlRGF0YS5wdXNoKGl0ZW0pOw0KICB9DQoNCiAgLy9jb250ZW50DQogIGxldCBjb250ZW50ID0gew0KICAgIGtleTogInJlbW90ZVJlbGF5QnlIdHRwIiwNCiAgICB0aXRsZTogdm0uJHQoIlJlbW90ZVJlbGF5U2V0dGluZyIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJSZW1vdGVSZWxheUJ5SHR0cERlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0eXBlOiAidGFibGUiLA0KICAgICAgICBrZXk6ICJyZW1vdGVSZWxheUJ5SHR0cCIsDQogICAgICAgIHNob3dSb3dTZWxlY3Rpb246IHRydWUsDQogICAgICAgIHNlbGVjdGVkUm93S2V5czogW10sDQogICAgICAgIGdldENoZWNrYm94UHJvcHNEaXNhYmxlOiBmdW5jdGlvbihyZWNvcmQpew0KICAgICAgICAgIHJldHVybiBjaGVja1JlbW90ZVJlbGF5SHR0cERpc2FibGUocmVjb3JkKTsNCiAgICAgICAgfSwNCiAgICAgICAgdGFibGVDb2x1bW5zOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogImxhYmVsIiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiSW5kZXgiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImluZGV4IiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImluZGV4IiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgd2lkdGg6ICI3JSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJSZW1vdGVSZWxheUlQIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJyZW1vdGVJcCIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJyZW1vdGVJcCIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMTglIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIlJlbW90ZVJlbGF5VVJMIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJyZW1vdGVBZGRyZXNzIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogInJlbW90ZUFkZHJlc3MiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICB3aWR0aDogIjE4JSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJSZWxheVVzZXJOYW1lIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJ1c2VybmFtZSIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJ1c2VybmFtZSIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMTglIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIlBhc3N3b3JkIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJwYXNzd29yZCIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJwYXNzd29yZCIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMTglIiwNCiAgICAgICAgICAgIGlucHV0VHlwZTogInBhc3N3b3JkIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJEb29yTnVtIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJkb29yTnVtIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImRvb3JOdW0iIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICB3aWR0aDogIjE4JSIsDQogICAgICAgICAgICBtb2RlOiAibXVsdGlwbGUiLA0KICAgICAgICAgICAgc2VsZWN0SXRlbXM6IGRvb3JOdW1JdGVtcywNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgICB0YWJsZURhdGE6IHRhYmxlRGF0YSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHR5cGU6ICJkZWxldGUtYnV0dG9uIiwNCiAgICAgICAga2V5OiAicmVtb3RlUmVsYXlCeUh0dHBEZWwiLA0KICAgICAgICBvbkRlbDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIG9uRGVsUmVsYXlCeUh0dHAodm0pOw0KICAgICAgICB9LA0KICAgICAgICBvbkRlbEFsbDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIG9uRGVsQWxsUmVsYXlCeUh0dHAodm0pOw0KICAgICAgICB9LA0KICAgICAgICBkZWxMb2FkaW5nOiBmYWxzZSwNCiAgICAgICAgZGVsQWxsTG9hZGluZzogZmFsc2UsDQogICAgICAgIGRlbERpc2FibGVkOiB0cnVlLA0KICAgICAgICBkZWxBbGxEaXNhYmxlZDogdHJ1ZSwNCiAgICAgIH0NCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY2hlY2tSZW1vdGVSZWxheUh0dHBEaXNhYmxlKHJlY29yZCl7DQogIGlmKHJlY29yZC5yZW1vdGVJcC52YWx1ZSA9PT0gIiIpew0KICAgIHZhciBvYmplY3QgPSB7ZGlzYWJsZWQ6dHJ1ZX07DQogICAgcmVjb3JkLnByb3BzID0gb2JqZWN0Ow0KICB9DQogIHJldHVybiByZWNvcmQ7DQp9DQoNCmZ1bmN0aW9uIG9uRGVsUmVsYXlCeUh0dHAodm0pew0KICBsZXQgZGVsRGF0YSA9IHt9Ow0KICBsZXQgc2VsZWN0Um93ID0gZ2V0SXRlbUJ5S2V5KA0KICAgICAgdm0uZGF0YSwNCiAgICAgICJyZW1vdGVSZWxheUJ5SHR0cCIsDQogICAgICAicmVtb3RlUmVsYXlCeUh0dHAiDQogICAgKS5zZWxlY3RlZFJvd0tleXM7DQogIA0KICBmb3IodmFyIGkgPSAwOyBpIDwgc2VsZWN0Um93Lmxlbmd0aDsgaSsrKXsNCiAgICBkZWxEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVNT1RFUkVMQVkuUmVtb3RlSVAiICsgc2VsZWN0Um93W2ldXSA9ICIiOw0KICAgIGRlbERhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRU1PVEVSRUxBWS5SZW1vdGVVUkwiICsgc2VsZWN0Um93W2ldXSA9ICIiOw0KICAgIGRlbERhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRU1PVEVSRUxBWS5SZW1vdGVVc2VyIiArIHNlbGVjdFJvd1tpXV0gPSAiIjsNCiAgICBkZWxEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVNT1RFUkVMQVkuUmVtb3RlUGFzc3dkIiArIHNlbGVjdFJvd1tpXV0gPSAiIjsNCiAgICBkZWxEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVNT1RFUkVMQVkuUmVtb3RlRG9vck51bSIgKyBzZWxlY3RSb3dbaV1dID0gIjEsMiwzLDQiOw0KICB9DQogIGlmIChjb25maXJtKHZtLiR0KCJEZWxldGVTZWxlY3RlZENvbmZpcm0iKSkpIHsNCiAgICBsZXQgcmVxdWVzdERhdGEgPSB7DQogICAgICB0YXJnZXQ6ICJwaG9uZVJlbGF5IiwNCiAgICAgIGFjdGlvbjogInNldCIsDQogICAgICBjb25maWdEYXRhOiBkZWxEYXRhLA0KICAgIH07DQogICAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtKTsNCiAgICAgIGdldERhdGEodm0pOw0KICAgIH0pOw0KICB9DQp9DQoNCmZ1bmN0aW9uIG9uRGVsQWxsUmVsYXlCeUh0dHAodm0pew0KICBsZXQgZGVsQWxsRGF0YSA9IHt9Ow0KICBmb3IodmFyIGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLm1heFJlbW90ZVJlbGF5TnVtOyBpKyspew0KICAgIGRlbEFsbERhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRU1PVEVSRUxBWS5SZW1vdGVJUCIgKyBpXSA9ICIiOw0KICAgIGRlbEFsbERhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRU1PVEVSRUxBWS5SZW1vdGVVUkwiICsgaV0gPSAiIjsNCiAgICBkZWxBbGxEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVNT1RFUkVMQVkuUmVtb3RlVXNlciIgKyBpXSA9ICIiOw0KICAgIGRlbEFsbERhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRU1PVEVSRUxBWS5SZW1vdGVQYXNzd2QiICsgaV0gPSAiIjsNCiAgICBkZWxBbGxEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVNT1RFUkVMQVkuUmVtb3RlRG9vck51bSIgKyBpXSA9ICIxLDIsMyw0IjsNCiAgfQ0KICBpZiAoY29uZmlybSh2bS4kdCgiRGVsZXRlQWxsQ29uZmlybSIpKSkgew0KICAgIGxldCByZXF1ZXN0RGF0YSA9IHsNCiAgICAgIHRhcmdldDogInBob25lUmVsYXkiLA0KICAgICAgYWN0aW9uOiAic2V0IiwNCiAgICAgIGNvbmZpZ0RhdGE6IGRlbEFsbERhdGEsDQogICAgfTsNCiAgICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOw0KICAgICAgZ2V0RGF0YSh2bSk7DQogICAgfSk7DQogIH0NCn0NCg0KZnVuY3Rpb24gY3JlYXRlU29mdGtleUluQ2FsbFByZXZpZXdDb250ZW50KHZtKSB7DQogIC8vdGFibGUgZGF0YQ0KICBsZXQgdGFibGVEYXRhID0gWw0KICAgIHsNCiAgICAgIGtleTogMCwNCiAgICAgIHN0YXR1czogew0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuSW5jb21pbmdTdGF0dXMiXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICBkaXNwbGF5TmFtZTogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5JbmNvbWluZ0Rpc3BsYXlOYW1lIl0sDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICB9LA0KICAgICAgdHlwZTogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5JbmNvbWluZ1JlbGF5VHlwZSJdLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgfSwNCiAgICB9LA0KICBdOw0KICAvL3R5cGUgaXRlbXMNCiAgbGV0IHR5cGVJdGVtcyA9IFtdOw0KICBpZiAodm0uYXBpRGF0YS5kYXRhLnN1cHBvcnRSZWxheUIgPT0gMSkgew0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDAsIGxhYmVsOiB2bS4kdCgiTG9jYWxSZWxheSIpICsgIjEiIH0pOw0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDEsIGxhYmVsOiB2bS4kdCgiTG9jYWxSZWxheSIpICsgIjIiIH0pOw0KICAgIH0gZWxzZSB7DQogICAgICB0eXBlSXRlbXMucHVzaCh7IGtleTogMCwgbGFiZWw6IHZtLiR0KCJMb2NhbFJlbGF5IikgfSk7DQogICAgfQ0KICB0eXBlSXRlbXMucHVzaCh7IGtleTogMywgbGFiZWw6IHZtLiR0KCJSZW1vdGVSZWxheUhUVFAiKSB9KTsNCiAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDQsIGxhYmVsOiB2bS4kdCgiV2ViUmVsYXlBY3Rpb24iKSB9KTsNCiAgaWYgKHZtLmFwaURhdGEuZGF0YS5jb25uZWN0TW9kZSA9PSAyKSB7DQogICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDE2LCBsYWJlbDogdm0uJHQoIkNvbmZpZ09uQ2xvdWQiKSB9KTsNCiAgfQ0KICAvL2NvbnRlbnQNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAic29mdGtleUluQ2FsbFByZXZpZXciLA0KICAgIHRpdGxlOiB2bS4kdCgiQ2FsbFByZXZpZXdQYWdlVGl0bGUiKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiU29mdGtleUluQ2FsbERlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0eXBlOiAidGFibGUiLA0KICAgICAgICBrZXk6ICJzb2Z0a2V5SW5DYWxsUHJldmlldyIsDQogICAgICAgIHRhYmxlQ29sdW1uczogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJTdGF0dXMiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogInN0YXR1cyIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJzdGF0dXMiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICBzZWxlY3RJdGVtczogdm0uc3RhdHVzSXRlbXMsDQogICAgICAgICAgICB3aWR0aDogIjMwJSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJEaXNwbGF5TmFtZSIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAiZGlzcGxheU5hbWUiLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiZGlzcGxheU5hbWUiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICB3aWR0aDogIjMwJSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiVHlwZSIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAidHlwZSIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJ0eXBlIiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgc2VsZWN0SXRlbXM6IHR5cGVJdGVtcywNCiAgICAgICAgICAgIHdpZHRoOiAiNDAlIiwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgICB0YWJsZURhdGE6IHRhYmxlRGF0YSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVNvZnRrZXlJbk1vbml0b3JDb250ZW50KHZtKSB7DQogIC8vdGFibGUgZGF0YQ0KICBsZXQgdGFibGVEYXRhID0gWw0KICAgIHsNCiAgICAgIGtleTogMCwNCiAgICAgIHN0YXR1czogew0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuTW9uaXRvclN0YXR1cyJdLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgfSwNCiAgICAgIGRpc3BsYXlOYW1lOiB7DQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLk1vbml0b3JEaXNwbGF5TmFtZSJdLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgfSwNCiAgICAgIHR5cGU6IHsNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuTW9uaXRvclJlbGF5VHlwZSJdLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgfSwNCiAgICB9LA0KICBdOw0KICAvL3R5cGUgaXRlbXMNCiAgbGV0IHR5cGVJdGVtcyA9IFtdOw0KICBpZiAodm0uYXBpRGF0YS5kYXRhLnN1cHBvcnRSZWxheUIgPT0gMSkgew0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDAsIGxhYmVsOiB2bS4kdCgiTG9jYWxSZWxheSIpICsgIjEiIH0pOw0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDEsIGxhYmVsOiB2bS4kdCgiTG9jYWxSZWxheSIpICsgIjIiIH0pOw0KICAgIH0gZWxzZSB7DQogICAgICB0eXBlSXRlbXMucHVzaCh7IGtleTogMCwgbGFiZWw6IHZtLiR0KCJMb2NhbFJlbGF5IikgfSk7DQogICAgfQ0KICB0eXBlSXRlbXMucHVzaCh7IGtleTogMywgbGFiZWw6IHZtLiR0KCJSZW1vdGVSZWxheUhUVFAiKSB9KTsNCiAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDQsIGxhYmVsOiB2bS4kdCgiV2ViUmVsYXlBY3Rpb24iKSB9KTsNCiAgaWYgKHZtLmFwaURhdGEuZGF0YS5jb25uZWN0TW9kZSA9PSAyKSB7DQogICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDE2LCBsYWJlbDogdm0uJHQoIkNvbmZpZ09uQ2xvdWQiKSB9KTsNCiAgfQ0KICAvL2NvbnRlbnQNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAic29mdGtleUluTW9uaXRvciIsDQogICAgdGl0bGU6IHZtLiR0KCJNb25pdG9yUGFnZVRpdGxlIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIlNvZnRLZXlJbk1vbml0b3JEZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdHlwZTogInRhYmxlIiwNCiAgICAgICAga2V5OiAic29mdGtleUluTW9uaXRvciIsDQogICAgICAgIHRhYmxlQ29sdW1uczogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJTdGF0dXMiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogInN0YXR1cyIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJzdGF0dXMiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICBzZWxlY3RJdGVtczogdm0uc3RhdHVzSXRlbXMsDQogICAgICAgICAgICB3aWR0aDogIjMwJSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJEaXNwbGF5TmFtZSIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAiZGlzcGxheU5hbWUiLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiZGlzcGxheU5hbWUiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICB3aWR0aDogIjMwJSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiVHlwZSIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAidHlwZSIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJ0eXBlIiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgc2VsZWN0SXRlbXM6IHR5cGVJdGVtcywNCiAgICAgICAgICAgIHdpZHRoOiAiNDAlIiwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgICB0YWJsZURhdGE6IHRhYmxlRGF0YSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVNvZnRrZXlJbkhvbWVPck1vcmVDb250ZW50KHZtKSB7DQogIC8vdGFibGUgZGF0YQ0KICBsZXQgdGFibGVEYXRhID0gWw0KICAgIHsNCiAgICAgIGtleTogMCwNCiAgICAgIHN0YXR1czogew0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuSWRsZVN0YXR1cyJdLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICBkaXNhYmxlZDogdHJ1ZSwNCiAgICAgIH0sDQogICAgICBkaXNwbGF5TmFtZTogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5JZGxlRGlzcGxheU5hbWUiXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICB0eXBlOiB7DQogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5JZGxlUmVsYXlUeXBlIl0sDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICB9LA0KICAgIH0sDQogIF07DQogIC8vdHlwZSBpdGVtcw0KICBsZXQgdHlwZUl0ZW1zID0gW107DQogIGZvciAobGV0IGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLm1heFJlbW90ZVJlbGF5TnVtOyBpKyspIHsNCiAgICBsZXQgaXRlbSA9IHsNCiAgICAgIGtleTogaSArIDEsDQogICAgICBsYWJlbDogdm0uJHQoIlJlbW90ZVJlbGF5SFRUUCIpICsgKGkgKyAxKSwNCiAgICB9Ow0KICAgIHR5cGVJdGVtcy5wdXNoKGl0ZW0pOw0KICB9DQogIC8vY29udGVudA0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJzb2Z0a2V5SW5Ib21lT3JNb3JlIiwNCiAgICB0aXRsZTogdm0uJHQoIkhvbWVPck1vcmVQYWdlVGl0bGUiKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiU29mdGtleUluSG9tZURlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0eXBlOiAidGFibGUiLA0KICAgICAgICBrZXk6ICJzb2Z0a2V5SW5Ib21lT3JNb3JlIiwNCiAgICAgICAgdGFibGVDb2x1bW5zOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogInNlbGVjdCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIlN0YXR1cyIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAic3RhdHVzIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogInN0YXR1cyIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5zdGF0dXNJdGVtcywNCiAgICAgICAgICAgIHdpZHRoOiAiMzAlIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkRpc3BsYXlOYW1lIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJkaXNwbGF5TmFtZSIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJkaXNwbGF5TmFtZSIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMzAlIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJUeXBlIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJ0eXBlIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogInR5cGUiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICBzZWxlY3RJdGVtczogdHlwZUl0ZW1zLA0KICAgICAgICAgICAgd2lkdGg6ICI0MCUiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIHRhYmxlRGF0YTogdGFibGVEYXRhLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlU29mdGtleUluVGFsa2luZ0NvbnRlbnQodm0pIHsNCiAgLy90eXBlIGl0ZW1zDQogIGxldCB0eXBlSXRlbXMgPSBbXTsNCiAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDMsIGxhYmVsOiB2bS4kdCgiUmVtb3RlUmVsYXlIVFRQIikgfSk7DQogIGlmICh2bS5hcGlEYXRhLmRhdGEubWF4UmVsYXlTb2Z0a2V5TnVtID09IDMpIHsNCiAgICBpZiAodm0uYXBpRGF0YS5kYXRhLnN1cHBvcnRUaHJlZUR0bWYgPT0gMSkgew0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDIsIGxhYmVsOiB2bS4kdCgiUmVtb3RlUmVsYXlEVE1GIikgKyAiMSIgfSk7DQogICAgICB0eXBlSXRlbXMucHVzaCh7IGtleTogMTQsIGxhYmVsOiB2bS4kdCgiUmVtb3RlUmVsYXlEVE1GIikgKyAiMiIgfSk7DQogICAgICB0eXBlSXRlbXMucHVzaCh7IGtleTogMTUsIGxhYmVsOiB2bS4kdCgiUmVtb3RlUmVsYXlEVE1GIikgKyAiMyIgfSk7DQogICAgfSBlbHNlIHsNCiAgICAgIHR5cGVJdGVtcy5wdXNoKHsga2V5OiAyLCBsYWJlbDogdm0uJHQoIlJlbW90ZVJlbGF5RFRNRiIpIH0pOw0KICAgIH0NCiAgICBpZiAodm0uYXBpRGF0YS5kYXRhLnN1cHBvcnRSZWxheUIgPT0gMSkgew0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDAsIGxhYmVsOiB2bS4kdCgiTG9jYWxSZWxheSIpICsgIjEiIH0pOw0KICAgICAgdHlwZUl0ZW1zLnB1c2goeyBrZXk6IDEsIGxhYmVsOiB2bS4kdCgiTG9jYWxSZWxheSIpICsgIjIiIH0pOw0KICAgIH0gZWxzZSB7DQogICAgICB0eXBlSXRlbXMucHVzaCh7IGtleTogMCwgbGFiZWw6IHZtLiR0KCJMb2NhbFJlbGF5IikgfSk7DQogICAgfQ0KICB9IGVsc2Ugew0KICAgIHR5cGVJdGVtcy5wdXNoKHsga2V5OiAyLCBsYWJlbDogdm0uJHQoIlJlbW90ZVJlbGF5RFRNRiIpIH0pOw0KICAgIHR5cGVJdGVtcy5wdXNoKHsga2V5OiAwLCBsYWJlbDogdm0uJHQoIkxvY2FsUmVsYXkiKSB9KTsNCiAgfQ0KICB0eXBlSXRlbXMucHVzaCh7IGtleTogNCwgbGFiZWw6IHZtLiR0KCJXZWJSZWxheUFjdGlvblZhbHVlIikgfSk7DQogIGlmICh2bS5hcGlEYXRhLmRhdGEuY29ubmVjdE1vZGUgPT0gMikgew0KICAgIHR5cGVJdGVtcy5wdXNoKHsga2V5OiAxNiwgbGFiZWw6IHZtLiR0KCJDb25maWdPbkNsb3VkIikgfSk7DQogIH0NCiAgLy90YWJsZSBkYXRhDQogIGxldCB0YWJsZURhdGEgPSBbXTsNCiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2bS5hcGlEYXRhLmRhdGEubWF4UmVsYXlTb2Z0a2V5TnVtOyBpKyspIHsNCiAgICBsZXQgaXRlbSA9IHsNCiAgICAgIGtleTogaSwNCiAgICAgIGtleUxhYmVsOiB2bS4kdCgiS2V5IikgKyAoaSArIDEpLA0KICAgICAgc3RhdHVzOiB7DQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuVGFsa2luZ1N0YXR1cyIgKyAoaSArIDEpDQogICAgICAgICAgXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICBkaXNwbGF5TmFtZTogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLlRhbGtpbmdDb2xEaXNwbGF5TmFtZSIgKyAoaSArIDEpDQogICAgICAgICAgXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICB0eXBlOiB7DQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuVGFsa2luZ1JlbGF5VHlwZSIgKyAoaSArIDEpDQogICAgICAgICAgXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgIH0sDQogICAgfTsNCiAgICB0YWJsZURhdGEucHVzaChpdGVtKTsNCiAgfQ0KICAvL2NvbnRlbnQNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAic29mdGtleUluVGFsa2luZyIsDQogICAgdGl0bGU6IHZtLiR0KCJTb2Z0S2V5SW5UYWxraW5nIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIlNvZnRrZXlJblRhbGtEZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdHlwZTogInRhYmxlIiwNCiAgICAgICAga2V5OiAic29mdGtleUluVGFsa2luZyIsDQogICAgICAgIHRhYmxlQ29sdW1uczogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJsYWJlbCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIktleSIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAia2V5TGFiZWwiLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAia2V5TGFiZWwiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICB3aWR0aDogIjEwJSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiU3RhdHVzIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJzdGF0dXMiLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAic3RhdHVzIiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgc2VsZWN0SXRlbXM6IHZtLnN0YXR1c0l0ZW1zLA0KICAgICAgICAgICAgd2lkdGg6ICIzMCUiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiRGlzcGxheU5hbWUiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImRpc3BsYXlOYW1lIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImRpc3BsYXlOYW1lIiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgd2lkdGg6ICIzMCUiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogInNlbGVjdCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIlR5cGUiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogInR5cGUiLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAidHlwZSIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHNlbGVjdEl0ZW1zOiB0eXBlSXRlbXMsDQogICAgICAgICAgICB3aWR0aDogIjMwJSIsDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgICAgdGFibGVEYXRhOiB0YWJsZURhdGEsDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVPcGVuUmVsYXlWaWFIdHRwQ29udGVudCh2bSkgew0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJvcGVuUmVsYXlWaWFIdHRwIiwNCiAgICB0aXRsZTogdm0uJHQoIk9wZW5SZWxheVNldHRpbmciKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiT3BlblJlbGF5VmlhRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiU3dpdGNoIiksDQogICAgICAgIHR5cGU6ICJjaGVja2JveCIsDQogICAgICAgIGtleTogIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5SZWxheU9uV2ViIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLlJlbGF5T25XZWIiXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJTd2l0Y2hEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlJlbW90ZVJlbGF5VXNlciIpLA0KICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICBrZXk6ICJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuUmVsYXlPbldlYlVzZXIiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuUmVsYXlPbldlYlVzZXIiXSwNCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlJlbGF5VXNlcm5hbWVEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlJlbW90ZVJlbGF5UGFzc3dkIiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGtleTogIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5SZWxheU9uV2ViUHdkIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLlJlbGF5T25XZWJQd2QiXSwNCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLA0KICAgICAgICBpbnB1dFR5cGU6ICJwYXNzd29yZCIsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUmVsYXlQYXNzd29yZERlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVJlbW90ZUNvbnRyb2xDb250ZW50KHZtKSB7DQogIGxldCBjb250ZW50ID0gew0KICAgIGtleTogInJlbW90ZUNvbnRyb2wiLA0KICAgIHRpdGxlOiB2bS4kdCgiUmVtb3RlQ29udHJvbCIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJSZW1vdGVDb250cm9sbGVyVGlEZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJBbGxvd2VkQWNjZXNzSVBMaXN0IiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGtleTogIkNvbmZpZy5GZWF0dXJlcy5SRU1PVEVDT05UUk9MLkFjdGlvblVSSUFsbG93SVBMaXN0IiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWw0KICAgICAgICAgICAgIkNvbmZpZy5GZWF0dXJlcy5SRU1PVEVDT05UUk9MLkFjdGlvblVSSUFsbG93SVBMaXN0Ig0KICAgICAgICAgIF0sDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlBsZWFzZUNoZWNrQWxhcm1TdWJtaXREYXRhIiksDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQWxsb3dBY2Nlc3NJUERlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZVJlbGF5U2V0dGluZ0NvbnRlbnQodm0pIHsNCiAgLy9kZWxheSBpdGVtcw0KICBsZXQgZGVsYXlJdGVtcyA9IFtdOw0KICBmb3IgKGxldCBpID0gMDsgaSA8PSA2MDsgaSsrKSB7DQogICAgbGV0IGl0ZW0gPSB7DQogICAgICBrZXk6IGksDQogICAgICBsYWJlbDogaSwNCiAgICB9Ow0KICAgIGRlbGF5SXRlbXMucHVzaChpdGVtKTsNCiAgfQ0KICBkZWxheUl0ZW1zLnB1c2goeyBrZXk6IC0xLCBsYWJlbDogdm0uJHQoIk5ldmVyIikgfSk7DQoNCiAgLy9yZWxheSB0eXBlDQogIGxldCByZWxheVR5cGVJdGVtcyA9IFtdOw0KICByZWxheVR5cGVJdGVtcy5wdXNoKHsga2V5OiAwLCBsYWJlbDogdm0uJHQoIk9wZW5Eb29yIikgfSk7DQogIGlmICh2bS5hcGlEYXRhLmRhdGEuY2hpbWVCZWxsVHlwZSA9PSAxKSB7DQogICAgcmVsYXlUeXBlSXRlbXMucHVzaCh7IGtleTogMSwgbGFiZWw6IHZtLiR0KCJFeHRlbnNpb25TcGVha2VyIikgfSk7DQogIH0gZWxzZSBpZiAodm0uYXBpRGF0YS5kYXRhLmNoaW1lQmVsbFR5cGUgPT0gMikgew0KICAgIHJlbGF5VHlwZUl0ZW1zLnB1c2goeyBrZXk6IDIsIGxhYmVsOiB2bS4kdCgiQ2hpbWVCZWxsIikgfSk7DQogIH0gZWxzZSB7DQogICAgcmVsYXlUeXBlSXRlbXMucHVzaCh7IGtleTogMiwgbGFiZWw6IHZtLiR0KCJDaGltZUJlbGwiKSB9KTsNCiAgICBpZiAodm0uYXBpRGF0YS5kYXRhLnN1cHBvcnRIaWRlU09TQWN0aW9uICE9IDEpIHsNCiAgICAgIHJlbGF5VHlwZUl0ZW1zLnB1c2goeyBrZXk6IDMsIGxhYmVsOiB2bS4kdCgiU09TQWN0aW9uIikgfSk7DQogICAgfQ0KICB9DQoNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAicmVsYXlTZXR0aW5nIiwNCiAgICB0aXRsZTogdm0uJHQoIlJlbGF5U2V0dGluZyIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJSZWxheVNldHRpbmdEZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJMb2NhbFJlbGF5IikgKyAiMSIsDQogICAgICAgIHR5cGU6ICJsYWJlbCIsDQogICAgICAgIGtleTogImxvY2FsUmVsYXkxIiwNCiAgICAgICAgdmFsdWU6ICIiLA0KICAgICAgICB0aXRsZUJvbGQ6IHRydWUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlJlbGF5RGVsYXlOYW1lMSIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkRlbGF5MSIsDQogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5EZWxheTEiXSwNCiAgICAgICAgc2VsZWN0SXRlbXM6IGRlbGF5SXRlbXMsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUmVsYXlEZWxheURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiTG9jYWxSZWxheVR5cGVOYW1lMSIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkxvY2FsUmVsYXlUeXBlMSIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkxvY2FsUmVsYXlUeXBlMSJdLA0KICAgICAgICBzZWxlY3RJdGVtczogcmVsYXlUeXBlSXRlbXMsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiUmVsYXlUeXBlRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJSZW1vdGVDb250cm9sIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuUmVtb3RlQ29udHJvbCIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLlJlbW90ZUNvbnRyb2wiXSwNCiAgICAgICAgc2VsZWN0SXRlbXM6IHZtLnN0YXR1c0l0ZW1zLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlJlbW90ZUNvbnRyb2xEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIkRUTUYiKSwNCiAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkxvY2FsRFRNRiIsDQogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5Mb2NhbERUTUYiXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJSZWxheURUTUZEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIkxvY2FsUmVsYXkiKSArICIyIiwNCiAgICAgICAgdHlwZTogImxhYmVsIiwNCiAgICAgICAga2V5OiAibG9jYWxSZWxheTIiLA0KICAgICAgICB2YWx1ZTogIiIsDQogICAgICAgIHRpdGxlQm9sZDogdHJ1ZSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiUmVsYXlEZWxheU5hbWUyIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuRGVsYXkyIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkRlbGF5MiJdLA0KICAgICAgICBzZWxlY3RJdGVtczogZGVsYXlJdGVtcywNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJSZWxheURlbGF5RGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJMb2NhbFJlbGF5VHlwZU5hbWUyIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuTG9jYWxSZWxheVR5cGUyIiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuTG9jYWxSZWxheVR5cGUyIl0sDQogICAgICAgIHNlbGVjdEl0ZW1zOiByZWxheVR5cGVJdGVtcywNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJSZWxheVR5cGVEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlJlbW90ZUNvbnRyb2wiKSwNCiAgICAgICAgdHlwZTogInNlbGVjdCIsDQogICAgICAgIGtleTogIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5SZW1vdGVDb250cm9sMiIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLlJlbW90ZUNvbnRyb2wyIl0sDQogICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5zdGF0dXNJdGVtcywNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJSZW1vdGVDb250cm9sRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJEVE1GIiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGtleTogIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5Mb2NhbERUTUYyIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkxvY2FsRFRNRjIiXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJSZWxheURUTUZEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlJlbW90ZVJlbGF5IiksDQogICAgICAgIHR5cGU6ICJsYWJlbCIsDQogICAgICAgIGtleTogInJlbW90ZVJlbGF5IiwNCiAgICAgICAgdmFsdWU6ICIiLA0KICAgICAgICB0aXRsZUJvbGQ6IHRydWUsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIkRUTUYiKSArICIxICIgKyB2bS4kdCgiQ29kZSIpLA0KICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICBrZXk6ICJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuRFRNRkNvZGUiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuRFRNRkNvZGUiXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJEVE1GQ29kZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiRFRNRiIpICsgIjIgIiArIHZtLiR0KCJDb2RlIiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGtleTogIkNvbmZpZy5Eb29yU2V0dGluZy5SRUxBWS5EVE1GQ29kZTIiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuRFRNRkNvZGUyIl0sDQogICAgICAgIGlzSGlkZTogZmFsc2UsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiRFRNRkNvZGVEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIkRUTUYiKSArICIzICIgKyB2bS4kdCgiQ29kZSIpLA0KICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICBrZXk6ICJDb25maWcuRG9vclNldHRpbmcuUkVMQVkuRFRNRkNvZGUzIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLlJFTEFZLkRUTUZDb2RlMyJdLA0KICAgICAgICBpc0hpZGU6IGZhbHNlLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkRUTUZDb2RlRGVzYyIpLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg=="},null]}