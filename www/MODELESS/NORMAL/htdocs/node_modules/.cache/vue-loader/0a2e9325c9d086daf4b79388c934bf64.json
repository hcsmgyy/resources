{"remainingRequest":"G:\\LocalCode\\advance_indoor\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\LocalCode\\advance_indoor\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\PhoneDisplaySetting.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\LocalCode\\advance_indoor\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\PhoneDisplaySetting.vue","mtime":1624613275300},{"path":"G:\\LocalCode\\advance_indoor\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"G:\\LocalCode\\advance_indoor\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1624613260275},{"path":"G:\\LocalCode\\advance_indoor\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"G:\\LocalCode\\advance_indoor\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgQ29tbW9uUGFnZSBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uUGFnZS52dWUiOw0KaW1wb3J0IHsNCiAgc2hvd1JlcXVlc3RTdWNjZXNzLA0KICBkZWVwQ2xvbmUsDQogIGNoZWNrRmlsZUZvcm1hdCwNCiAgc2hvd0Vycm9ySW5mbywNCiAgZ2V0SXRlbUJ5S2V5LA0KICBnZXRDb250ZW50QnlLZXksDQp9IGZyb20gIkAvanMvY29tbW9uLmpzIjsNCmltcG9ydCB7IGdldE9wdGlvbnNCeUxhYmVsIH0gZnJvbSAiQC9qcy9jb21tb25LZXlzLmpzIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgQ29tbW9uUGFnZSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgd2FsbHBhcGVyRmlsZUl0ZW1zOiBbXSwNCiAgICAgIHdhbGxwYXBlckZpbGVJdGVtc0NhbGw6IFtdLA0KICAgICAgc2NyZWVuU2F2ZXJUeXBlSXRlbXM6IFtdLA0KICAgICAgc2NyZWVuU2F2ZXJQaWN0dXJlSXRlbXM6IFtdLA0KICAgICAgc2NyZWVuU2F2ZXJWaWRlb0l0ZW1zOiBbXSwNCiAgICAgIHR5cGVJdGVtczogW10sDQogICAgICB0eXBlMkl0ZW1zOiBbXSwNCiAgICAgIGFwcFNlbGVjdEl0ZW1zOiBbXSwNCiAgICAgIGNoYW5nZWRDZmdEYXRhOiB7fSwNCiAgICAgIHN1Ym1pdENmZ0RhdGE6IHt9LA0KICAgICAgYXBpRGF0YToge30sDQogICAgICBkYXRhOiB7DQogICAgICAgIGdldERhdGFTdWNjZXNzOiBmYWxzZSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBnZXREYXRhKHRoaXMpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgb25Db21tb25QYWdlRGF0YUNoYW5nZTogZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICBzZXRDaGFuZ2VkRGF0YSh0aGlzLCBldmVudCk7DQogICAgICAvL+eVjOmdouWPmOWMlg0KICAgICAgaGFuZGxlclBhZ2VDaGFuZ2VkKHRoaXMsIGV2ZW50KTsNCiAgICB9LA0KICB9LA0KfTsNCg0KZnVuY3Rpb24gc2V0Q2hhbmdlZERhdGEodm0sIGV2ZW50KSB7DQogIGlmIChldmVudC5jb250ZW50S2V5ID09ICJob21lcGFnZSIgJiYgZXZlbnQuaXRlbUtleSA9PSAiaG9tZXBhZ2UiKSB7DQogICAgbGV0IHRhYmxlRGF0YSA9IGV2ZW50Lm5ld1ZhbDsNCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYmxlRGF0YS5sZW5ndGg7IGkrKykgew0KICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLkRpc3BsYXlUeXBlIl0gPQ0KICAgICAgICB0YWJsZURhdGFbaV0udHlwZS52YWx1ZTsNCiAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5MQUJFTCJdID0NCiAgICAgICAgdGFibGVEYXRhW2ldLmxhYmVsLnZhbHVlOw0KICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLlZhbHVlIl0gPQ0KICAgICAgICB0YWJsZURhdGFbaV0udmFsdWUudmFsdWU7DQoNCiAgICAgIGlmIChldmVudC5uZXdWYWxbaV0uaWNvbi5maWxlTmFtZSAhPSBldmVudC5vbGRWYWxbaV0uaWNvbi5maWxlTmFtZSkgew0KICAgICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMUFSRUEiICsgKGkgKyAxKSArICIuSUNPTiJdID0NCiAgICAgICAgICB0YWJsZURhdGFbaV0uaWNvbi5maWxlTmFtZSA9PSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikNCiAgICAgICAgICAgID8gIiINCiAgICAgICAgICAgIDogdGFibGVEYXRhW2ldLmljb24uZmlsZU5hbWU7DQogICAgICB9DQogICAgfQ0KICB9IGVsc2UgaWYgKGV2ZW50LmNvbnRlbnRLZXkgPT0gIm1vcmVwYWdlIiAmJiBldmVudC5pdGVtS2V5ID09ICJtb3JlcGFnZSIpIHsNCiAgICBsZXQgdGFibGVEYXRhID0gZXZlbnQubmV3VmFsOw0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFibGVEYXRhLmxlbmd0aDsgaSsrKSB7DQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKGkgKyAxKSArICIuRGlzcGxheVR5cGUiXSA9DQogICAgICAgIHRhYmxlRGF0YVtpXS50eXBlLnZhbHVlOw0KICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChpICsgMSkgKyAiLkxBQkVMIl0gPQ0KICAgICAgICB0YWJsZURhdGFbaV0ubGFiZWwudmFsdWU7DQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKGkgKyAxKSArICIuVmFsdWUiXSA9DQogICAgICAgIHRhYmxlRGF0YVtpXS52YWx1ZS52YWx1ZTsNCg0KICAgICAgaWYgKGV2ZW50Lm5ld1ZhbFtpXS5pY29uLmZpbGVOYW1lICE9IGV2ZW50Lm9sZFZhbFtpXS5pY29uLmZpbGVOYW1lKSB7DQogICAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoaSArIDEpICsgIi5JQ09OIl0gPQ0KICAgICAgICAgIHRhYmxlRGF0YVtpXS5pY29uLmZpbGVOYW1lID09IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKQ0KICAgICAgICAgICAgPyAiIg0KICAgICAgICAgICAgOiB0YWJsZURhdGFbaV0uaWNvbi5maWxlTmFtZTsNCiAgICAgIH0NCiAgICB9DQogIH0gZWxzZSBpZiAoZXZlbnQuY29udGVudEtleSA9PSAidGhlbWVTZXR0aW5nIikgew0KICAgIGxldCB3YWxscGFwZXJJdGVtcyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAid2FsbHBhcGVyIiwgIkNvbmZpZy5TZXR0aW5ncy5MT0dPLldhbGxwYXBlciIpOw0KICAgIHdhbGxwYXBlckl0ZW1zLnZhbHVlID0gIi9zZGNhcmQvUGljdHVyZXMvd2FsbHBhcGVyL2RlZmF1bHQvNy5qcGciOw0KICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuU2V0dGluZ3MuTE9HTy5XYWxscGFwZXIiXSA9ICIvc2RjYXJkL1BpY3R1cmVzL3dhbGxwYXBlci9kZWZhdWx0LzcuanBnIjsNCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGV2ZW50Lm5ld1ZhbDsNCiAgfSBlbHNlIHsNCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGV2ZW50Lm5ld1ZhbDsNCiAgfQ0KfQ0KDQpmdW5jdGlvbiBoYW5kbGVyUGFnZUNoYW5nZWQodm0sIGV2ZW50KSB7DQogIC8vdGhlbWUNCiAgbGV0IHRoZW1lRGF0YSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAidGhlbWVTZXR0aW5nIiwgIkNvbmZpZy5TZXR0aW5ncy5ESVNQTEFZU1RZTEUuSWRsZVN0eWxlIik7DQogIGxldCB3YWxscGFwZXJJdGVtcyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAid2FsbHBhcGVyIiwgIkNvbmZpZy5TZXR0aW5ncy5MT0dPLldhbGxwYXBlciIpOw0KICBsZXQgaG9tZVBhZ2VDb250ZW50ID0gZ2V0Q29udGVudEJ5S2V5KHZtLmRhdGEsICJob21lcGFnZSIpOw0KICBsZXQgbW9yZVBhZ2VDb250ZW50ID0gZ2V0Q29udGVudEJ5S2V5KHZtLmRhdGEsICJtb3JlcGFnZSIpOw0KICBpZiAodGhlbWVEYXRhLnZhbHVlID09IDQpIHsNCiAgICB3YWxscGFwZXJJdGVtcy5zZWxlY3RJdGVtcyA9IHZtLndhbGxwYXBlckZpbGVJdGVtczsNCiAgICAvL+aNouWbvueJhw0KICAgIGhvbWVQYWdlQ29udGVudC5pbWdOYW1lID0gImhvbWVfcGFnZV9kZWZhdWx0LnBuZyI7DQogICAgbW9yZVBhZ2VDb250ZW50LmltZ05hbWUgPSAibW9yZV9wYWdlX2RlZmF1bHQucG5nIjsNCiAgfSBlbHNlIHsNCiAgICB3YWxscGFwZXJJdGVtcy5zZWxlY3RJdGVtcyA9IHZtLndhbGxwYXBlckZpbGVJdGVtc0NhbGw7DQogICAgaG9tZVBhZ2VDb250ZW50LmltZ05hbWUgPSAiaG9tZV9wYWdlX2NhbGwucG5nIjsNCiAgICBtb3JlUGFnZUNvbnRlbnQuaW1nTmFtZSA9ICJtb3JlX3BhZ2VfY2FsbC5wbmciOw0KICB9DQogIC8vaG9tZXBhZ2UNCiAgbGV0IGhvbWVwYWdlSXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiaG9tZXBhZ2UiLCAiaG9tZXBhZ2UiKTsNCiAgbGV0IGhvbWVwYWdlVGFibGVEYXRhID0gaG9tZXBhZ2VJdGVtLnRhYmxlRGF0YTsNCiAgZm9yIChsZXQgaSA9IDA7IGkgPCBob21lcGFnZVRhYmxlRGF0YS5sZW5ndGg7IGkrKykgew0KICAgIC8vdHlwZeaYr+WQpuebuOWQjA0KICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLnR5cGUuaXNXYXJuID0gZmFsc2U7DQogICAgZm9yIChsZXQgaiA9IDA7IGogPCBob21lcGFnZVRhYmxlRGF0YS5sZW5ndGg7IGorKykgew0KICAgICAgaWYgKA0KICAgICAgICBpICE9IGogJiYNCiAgICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbal0udHlwZS52YWx1ZSA9PSBob21lcGFnZVRhYmxlRGF0YVtpXS50eXBlLnZhbHVlICYmDQogICAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2pdLnR5cGUudmFsdWUgIT0NCiAgICAgICAgICBnZXRBcmVhVHlwZUJ5TGFiZWwoIkN1c3RvbSBBUEsiLCB2bSkgJiYNCiAgICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkJyb3dzZXIiLCB2bSkgJiYNCiAgICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIk4vQSIsIHZtKQ0KICAgICAgKSB7DQogICAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLnR5cGUuaXNXYXJuID0gdHJ1ZTsNCiAgICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbal0udHlwZS5pc1dhcm4gPSB0cnVlOw0KICAgICAgfQ0KICAgIH0NCiAgICAvL2ljb27mmL7npLrkuI7lkKYNCiAgICBpZiAoaG9tZXBhZ2VUYWJsZURhdGFbaV0udHlwZS52YWx1ZSA9PSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkRORCIsIHZtKSkgew0KICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0uaWNvbi5pc1Nob3cgPSBmYWxzZTsNCiAgICB9IGVsc2Ugew0KICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0uaWNvbi5pc1Nob3cgPSB0cnVlOw0KICAgIH0NCiAgICAvL2xhYmVs5piv5ZCm56aB55SoDQogICAgaWYgKA0KICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0udHlwZS52YWx1ZSA9PSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkRORCIsIHZtKSB8fA0KICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0udHlwZS52YWx1ZSA9PSBnZXRBcmVhVHlwZUJ5TGFiZWwoIlVubG9jayIsIHZtKQ0KICAgICkgew0KICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0ubGFiZWwuZGlzYWJsZWQgPSB0cnVlOw0KICAgIH0gZWxzZSB7DQogICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS5sYWJlbC5kaXNhYmxlZCA9IGZhbHNlOw0KICAgIH0NCiAgICAvL3ZhbHVl5piv5ZCm56aB55SoDQogICAgaWYgKA0KICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0udHlwZS52YWx1ZSA9PSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkN1c3RvbSBBUEsiLCB2bSkgfHwNCiAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJCcm93c2VyIiwgdm0pDQogICAgKSB7DQogICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS5kaXNhYmxlZCA9IGZhbHNlOw0KICAgIH0gZWxzZSB7DQogICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS5kaXNhYmxlZCA9IHRydWU7DQogICAgfQ0KICAgIC8vdmFsdWXlgLznmoRpbnB1dOWSjHNlbGVjdOahhuWPmOaNog0KICAgIGlmICgNCiAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJDdXN0b20gQVBLIiwgdm0pDQogICAgKSB7DQogICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS5pdGVtVHlwZSA9ICJzZWxlY3QiOw0KICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0udmFsdWUuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS5pc1dhcm49ZmFsc2U7DQogICAgfSBlbHNlIHsNCiAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLnZhbHVlLml0ZW1UeXBlID0gImlucHV0IjsNCiAgICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS5pc1dhcm4gPSBmYWxzZTsNCiAgICB9DQoNCiAgICAvL3R5cGXlj5jljJbml7ZsYWJlbOWAvOabtOaWsO+8jHZhbHVl5YC85pu05pawDQogICAgaWYgKA0KICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIGV2ZW50ICYmDQogICAgICBldmVudC5pdGVtS2V5ID09ICJob21lcGFnZSIgJiYNCiAgICAgIGV2ZW50LmNvbnRlbnRLZXkgPT0gImhvbWVwYWdlIg0KICAgICkgew0KICAgICAgaWYgKGV2ZW50Lm5ld1ZhbFtpXS50eXBlLnZhbHVlICE9IGV2ZW50Lm9sZFZhbFtpXS50eXBlLnZhbHVlKSB7DQogICAgICAgIGlmICgNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkluZG9vci5QQUdFMUFSRUEiICsgKGkgKyAxKSArICIuTEFCRUwiDQogICAgICAgICAgXSAhPSAiIiAmJg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5EaXNwbGF5VHlwZSINCiAgICAgICAgICBdID09IGV2ZW50Lm5ld1ZhbFtpXS50eXBlLnZhbHVlDQogICAgICAgICkgew0KICAgICAgICAgIHRhYmxlRGF0YVtpXS5sYWJlbC52YWx1ZSA9DQogICAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAgICJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5MQUJFTCINCiAgICAgICAgICAgIF07DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0ubGFiZWwudmFsdWUgPSBnZXRPcHRpb25zQnlMYWJlbCgNCiAgICAgICAgICAgIHZtLA0KICAgICAgICAgICAgZ2V0QXJlYVR5cGVCeUtleShob21lcGFnZVRhYmxlRGF0YVtpXS50eXBlLnZhbHVlLCB2bSkNCiAgICAgICAgICApOw0KICAgICAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5MQUJFTCJdID0NCiAgICAgICAgICAgIGhvbWVwYWdlVGFibGVEYXRhW2ldLmxhYmVsLnZhbHVlOw0KICAgICAgICB9DQogICAgICAgIGlmICgNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkluZG9vci5QQUdFMUFSRUEiICsgKGkgKyAxKSArICIuRGlzcGxheVR5cGUiDQogICAgICAgICAgXSA9PSBldmVudC5uZXdWYWxbaV0udHlwZS52YWx1ZQ0KICAgICAgICApIHsNCiAgICAgICAgICBob21lcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS52YWx1ZSA9DQogICAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAgICJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5WYWx1ZSINCiAgICAgICAgICAgIF07DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaG9tZXBhZ2VUYWJsZURhdGFbaV0udmFsdWUudmFsdWUgPSAiIjsNCiAgICAgICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMUFSRUEiICsgKGkgKyAxKSArICIuVmFsdWUiXSA9DQogICAgICAgICAgICAiIjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICAvL21vcmVwYWdlDQogIGxldCBtb3JlcGFnZUl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgIm1vcmVwYWdlIiwgIm1vcmVwYWdlIik7DQogIGxldCBtb3JlcGFnZVRhYmxlRGF0YSA9IG1vcmVwYWdlSXRlbS50YWJsZURhdGE7DQogIGZvciAobGV0IGkgPSAwOyBpIDwgbW9yZXBhZ2VUYWJsZURhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAvL3R5cGXmmK/lkKbnm7jlkIwNCiAgICBtb3JlcGFnZVRhYmxlRGF0YVtpXS50eXBlLmlzV2FybiA9IGZhbHNlOw0KICAgIGZvciAobGV0IGogPSAwOyBqIDwgbW9yZXBhZ2VUYWJsZURhdGEubGVuZ3RoOyBqKyspIHsNCiAgICAgIGlmICgNCiAgICAgICAgaSAhPSBqICYmDQogICAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2pdLnR5cGUudmFsdWUgPT0gbW9yZXBhZ2VUYWJsZURhdGFbaV0udHlwZS52YWx1ZSAmJg0KICAgICAgICBtb3JlcGFnZVRhYmxlRGF0YVtqXS50eXBlLnZhbHVlICE9DQogICAgICAgICAgZ2V0QXJlYVR5cGVCeUxhYmVsKCJDdXN0b20gQVBLIiwgdm0pICYmDQogICAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2pdLnR5cGUudmFsdWUgIT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJCcm93c2VyIiwgdm0pICYmDQogICAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2pdLnR5cGUudmFsdWUgIT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJOL0EiLCB2bSkNCiAgICAgICkgew0KICAgICAgICBtb3JlcGFnZVRhYmxlRGF0YVtpXS50eXBlLmlzV2FybiA9IHRydWU7DQogICAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2pdLnR5cGUuaXNXYXJuID0gdHJ1ZTsNCiAgICAgIH0NCiAgICB9DQogICAgLy9pY29u5pi+56S65LiO5ZCmDQogICAgaWYgKG1vcmVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJETkQiLCB2bSkpIHsNCiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLmljb24uaXNTaG93ID0gZmFsc2U7DQogICAgfSBlbHNlIHsNCiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLmljb24uaXNTaG93ID0gdHJ1ZTsNCiAgICB9DQogICAgLy9sYWJlbOaYr+WQpuemgeeUqA0KICAgIGlmICgNCiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJETkQiLCB2bSkgfHwNCiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJVbmxvY2siLCB2bSkNCiAgICApIHsNCiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLmxhYmVsLmRpc2FibGVkID0gdHJ1ZTsNCiAgICB9IGVsc2Ugew0KICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbaV0ubGFiZWwuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICB9DQogICAgLy92YWx1ZeaYr+WQpuemgeeUqA0KICAgIGlmICgNCiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJDdXN0b20gQVBLIiwgdm0pIHx8DQogICAgICBtb3JlcGFnZVRhYmxlRGF0YVtpXS50eXBlLnZhbHVlID09IGdldEFyZWFUeXBlQnlMYWJlbCgiQnJvd3NlciIsIHZtKQ0KICAgICkgew0KICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbaV0udmFsdWUuZGlzYWJsZWQgPSBmYWxzZTsNCiAgICB9IGVsc2Ugew0KICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbaV0udmFsdWUuZGlzYWJsZWQgPSB0cnVlOw0KICAgIH0NCiAgICAvL3ZhbHVl5YC855qEaW5wdXTlkoxzZWxlY3TmoYblj5jmjaINCiAgICBpZiAoDQogICAgICBtb3JlcGFnZVRhYmxlRGF0YVtpXS50eXBlLnZhbHVlID09IGdldEFyZWFUeXBlQnlMYWJlbCgiQ3VzdG9tIEFQSyIsIHZtKQ0KICAgICkgew0KICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbaV0udmFsdWUuaXRlbVR5cGUgPSAic2VsZWN0IjsNCiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLnZhbHVlLmRpc2FibGVkID0gZmFsc2U7DQogICAgICBtb3JlcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS5pc1dhcm49ZmFsc2U7DQogICAgfSBlbHNlIHsNCiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLnZhbHVlLml0ZW1UeXBlID0gImlucHV0IjsNCiAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLnZhbHVlLmlzV2Fybj1mYWxzZTsNCiAgICB9DQoNCiAgICAvL3R5cGXlj5jljJbml7ZsYWJlbOWAvOabtOaWsO+8jHZhbHVl5YC85pu05pawDQogICAgaWYgKA0KICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIGV2ZW50ICYmDQogICAgICBldmVudC5pdGVtS2V5ID09ICJtb3JlcGFnZSIgJiYNCiAgICAgIGV2ZW50LmNvbnRlbnRLZXkgPT0gIm1vcmVwYWdlIg0KICAgICkgew0KICAgICAgaWYgKGV2ZW50Lm5ld1ZhbFtpXS50eXBlLnZhbHVlICE9IGV2ZW50Lm9sZFZhbFtpXS50eXBlLnZhbHVlKSB7DQogICAgICAgIGlmICgNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKGkgKyAxKSArICIuTEFCRUwiDQogICAgICAgICAgXSAhPSAiIiAmJg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoaSArIDEpICsgIi5EaXNwbGF5VHlwZSINCiAgICAgICAgICBdID09IGV2ZW50Lm5ld1ZhbFtpXS50eXBlLnZhbHVlDQogICAgICAgICkgew0KICAgICAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLmxhYmVsLnZhbHVlID0NCiAgICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICAgIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChpICsgMSkgKyAiLkxBQkVMIg0KICAgICAgICAgICAgXTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBtb3JlcGFnZVRhYmxlRGF0YVtpXS5sYWJlbC52YWx1ZSA9IGdldE9wdGlvbnNCeUxhYmVsKA0KICAgICAgICAgICAgdm0sDQogICAgICAgICAgICBnZXRBcmVhVHlwZUJ5S2V5KG1vcmVwYWdlVGFibGVEYXRhW2ldLnR5cGUudmFsdWUsIHZtKQ0KICAgICAgICAgICk7DQogICAgICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChpICsgMSkgKyAiLkxBQkVMIl0gPQ0KICAgICAgICAgICAgbW9yZXBhZ2VUYWJsZURhdGFbaV0ubGFiZWwudmFsdWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKA0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoaSArIDEpICsgIi5EaXNwbGF5VHlwZSINCiAgICAgICAgICBdID09IGV2ZW50Lm5ld1ZhbFtpXS50eXBlLnZhbHVlDQogICAgICAgICkgew0KICAgICAgICAgIG1vcmVwYWdlVGFibGVEYXRhW2ldLnZhbHVlLnZhbHVlID0NCiAgICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICAgIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChpICsgMSkgKyAiLlZhbHVlIg0KICAgICAgICAgICAgXTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBtb3JlcGFnZVRhYmxlRGF0YVtpXS52YWx1ZS52YWx1ZSA9ICIiOw0KICAgICAgICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoaSArIDEpICsgIi5WYWx1ZSJdID0NCiAgICAgICAgICAgICIiOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQogIC8vd2FsbCBwYXBhZXINCiAgbGV0IHdhbGxQYXBlckZpbGVJdGVtID0gZ2V0SXRlbUJ5S2V5KA0KICAgIHZtLmRhdGEsDQogICAgIndhbGxwYXBlciIsDQogICAgIkNvbmZpZy5TZXR0aW5ncy5MT0dPLldhbGxwYXBlciINCiAgKTsNCiAgd2FsbFBhcGVyRmlsZUl0ZW0uZGVsRGlzYWJsZWQgPSBmYWxzZTsNCiAgbGV0IHdhbGxwYXBlckRlZmF1bHRQaWN0dXJlID0gdm0uYXBpRGF0YS5kYXRhLndhbGxwYXBlckRlZmF1bHRGaWxlcy5zcGxpdCgiXG4iKTsNCiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YWxscGFwZXJEZWZhdWx0UGljdHVyZS5sZW5ndGg7IGkrKykgew0KICAgIHZhciB3YWxscGFwZXJQaWN0dXJlID0gdm0uYXBpRGF0YS5kYXRhLndhbGxwYXBlclBhdGggKyAiZGVmYXVsdC8iICt3YWxscGFwZXJEZWZhdWx0UGljdHVyZVtpXTsNCiAgICBpZih3YWxsUGFwZXJGaWxlSXRlbS52YWx1ZSA9PSB3YWxscGFwZXJQaWN0dXJlKXsNCiAgICAgIHdhbGxQYXBlckZpbGVJdGVtLmRlbERpc2FibGVkID0gdHJ1ZTsNCiAgICAgIGJyZWFrOw0KICAgIH0NCiAgfQ0KfQ0KDQpmdW5jdGlvbiBnZXRBcmVhVHlwZUJ5TGFiZWwobGFiZWwsIHZtKSB7DQogIGxldCB0eXBlcyA9IHZtLmFwaURhdGEuZGF0YS5QYWdlMURpc3BsYXlUeXBlczsNCiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0eXBlcy5sZW5ndGg7IGkrKykgew0KICAgIGlmICh0eXBlc1tpXS5sYWJlbCA9PSBsYWJlbCkgew0KICAgICAgcmV0dXJuIHR5cGVzW2ldLmtleTsNCiAgICB9DQogIH0NCiAgcmV0dXJuIC0xOw0KfQ0KDQpmdW5jdGlvbiBnZXRBcmVhVHlwZUJ5S2V5KGtleSwgdm0pIHsNCiAgbGV0IHR5cGVzID0gdm0uYXBpRGF0YS5kYXRhLlBhZ2UxRGlzcGxheVR5cGVzOw0KICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7DQogICAgaWYgKHR5cGVzW2ldLmtleSA9PSBrZXkpIHsNCiAgICAgIHJldHVybiB0eXBlc1tpXS5sYWJlbDsNCiAgICB9DQogIH0NCiAgcmV0dXJuIC0xOw0KfQ0KDQpmdW5jdGlvbiBzdWJtaXREYXRhKHZtKSB7DQogIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IHRydWU7DQoNCiAgbGV0IHJlcXVlc3REYXRhID0gew0KICAgIHRhcmdldDogInBob25lRGlzcGxheVNldHRpbmciLA0KICAgIGFjdGlvbjogInNldCIsDQogICAgY29uZmlnRGF0YTogdm0uc3VibWl0Q2ZnRGF0YSwNCiAgfTsNCiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgcmVzcG9uc2UpIHsNCiAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSk7DQogICAgfQ0KICAgIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOw0KICB9KTsNCn0NCg0KZnVuY3Rpb24gZ2V0RGF0YSh2bSkgew0KICB2bS4kYXhpb3MuZ2V0KCJhcGkvcGhvbmVEaXNwbGF5U2V0dGluZy9pbmZvIikudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICB2bS5nZXREYXRhU3VjY2VzcyA9IHRydWU7DQogICAgdm0uYXBpRGF0YSA9IHJlc3BvbnNlLmRhdGE7DQogICAgdm0uY2hhbmdlZENmZ0RhdGEgPSBkZWVwQ2xvbmUocmVzcG9uc2UuZGF0YS5jb25maWdEYXRhKTsNCiAgICBjcmVhdGVQYWdlRGF0YSh2bSk7DQogICAgaGFuZGxlclBhZ2VDaGFuZ2VkKHZtKTsNCiAgfSk7DQp9DQoNCmZ1bmN0aW9uIGdldENvbW1pdERhdGEodm0pIHsNCiAgdm0uc3VibWl0Q2ZnRGF0YSA9IHt9Ow0KICBmb3IgKHZhciBjaGFuZ2VkS2V5IGluIHZtLmNoYW5nZWRDZmdEYXRhKSB7DQogICAgaWYgKCAodm0uYXBpRGF0YS5jb25maWdEYXRhW2NoYW5nZWRLZXldICE9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldKSB8fCBjaGFuZ2VkS2V5ID09ICJDb25maWcuU2V0dGluZ3MuTE9HTy5XYWxscGFwZXIiKSB7DQogICAgICB2bS5zdWJtaXRDZmdEYXRhW2NoYW5nZWRLZXldID0gdm0uY2hhbmdlZENmZ0RhdGFbY2hhbmdlZEtleV07DQogICAgfQ0KICB9DQp9DQoNCmZ1bmN0aW9uIGNoZWNrQ29tbWl0RGF0YSh2bSkgew0KICByZXR1cm4gY2hlY2tIb21lcGFnZURhdGEodm0pICYmIGNoZWNrTW9yZXBhZ2VEYXRhKHZtKTsNCn0NCg0KZnVuY3Rpb24gY2hlY2tNb3JlcGFnZURhdGEodm0pIHsNCiAgbGV0IHN1Y2Nlc3MgPSB0cnVlOw0KICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAibW9yZXBhZ2UiLCAibW9yZXBhZ2UiKTsNCiAgbGV0IHRhYmxlRGF0YSA9IGl0ZW0udGFibGVEYXRhOw0KICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYmxlRGF0YS5sZW5ndGg7IGkrKykgew0KICAgIC8vdHlwZeaYr+WQpuebuOWQjA0KICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGFibGVEYXRhLmxlbmd0aDsgaisrKSB7DQogICAgICBpZiAoDQogICAgICAgIGkgIT0gaiAmJg0KICAgICAgICB0YWJsZURhdGFbal0udHlwZS52YWx1ZSA9PSB0YWJsZURhdGFbaV0udHlwZS52YWx1ZSAmJg0KICAgICAgICB0YWJsZURhdGFbal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkN1c3RvbSBBUEsiLCB2bSkgJiYNCiAgICAgICAgdGFibGVEYXRhW2pdLnR5cGUudmFsdWUgIT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJCcm93c2VyIiwgdm0pICYmDQogICAgICAgIHRhYmxlRGF0YVtqXS50eXBlLnZhbHVlICE9IGdldEFyZWFUeXBlQnlMYWJlbCgiTi9BIiwgdm0pDQogICAgICApIHsNCiAgICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0NCiAgICBpZih0YWJsZURhdGFbaV0udHlwZS52YWx1ZSA9PSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkN1c3RvbSBBUEsiLCB2bSkgfHwNCiAgICAgICAgdGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJCcm93c2VyIiwgdm0pDQogICAgICApew0KICAgICAgICBpZih0YWJsZURhdGFbaV0udmFsdWUudmFsdWUgPT0gIiIpew0KICAgICAgICAgIHRhYmxlRGF0YVtpXS52YWx1ZS5pc1dhcm4gPSB0cnVlOw0KICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICB9DQogIHJldHVybiBzdWNjZXNzOw0KfQ0KDQpmdW5jdGlvbiBjaGVja0hvbWVwYWdlRGF0YSh2bSkgew0KICBsZXQgc3VjY2VzcyA9IHRydWU7DQogIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJob21lcGFnZSIsICJob21lcGFnZSIpOw0KICBsZXQgdGFibGVEYXRhID0gaXRlbS50YWJsZURhdGE7DQogIGZvciAobGV0IGkgPSAwOyBpIDwgdGFibGVEYXRhLmxlbmd0aDsgaSsrKSB7DQogICAgLy90eXBl5piv5ZCm55u45ZCMDQogICAgZm9yIChsZXQgaiA9IDA7IGogPCB0YWJsZURhdGEubGVuZ3RoOyBqKyspIHsNCiAgICAgIGlmICgNCiAgICAgICAgaSAhPSBqICYmDQogICAgICAgIHRhYmxlRGF0YVtqXS50eXBlLnZhbHVlID09IHRhYmxlRGF0YVtpXS50eXBlLnZhbHVlICYmDQogICAgICAgIHRhYmxlRGF0YVtqXS50eXBlLnZhbHVlICE9IGdldEFyZWFUeXBlQnlMYWJlbCgiQ3VzdG9tIEFQSyIsIHZtKSAmJg0KICAgICAgICB0YWJsZURhdGFbal0udHlwZS52YWx1ZSAhPSBnZXRBcmVhVHlwZUJ5TGFiZWwoIkJyb3dzZXIiLCB2bSkgJiYNCiAgICAgICAgdGFibGVEYXRhW2pdLnR5cGUudmFsdWUgIT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJOL0EiLCB2bSkNCiAgICAgICkgew0KICAgICAgICBzdWNjZXNzID0gZmFsc2U7DQogICAgICB9DQogICAgfQ0KDQogICAgaWYodGFibGVEYXRhW2ldLnR5cGUudmFsdWUgPT0gZ2V0QXJlYVR5cGVCeUxhYmVsKCJDdXN0b20gQVBLIiwgdm0pIHx8DQogICAgICAgIHRhYmxlRGF0YVtpXS50eXBlLnZhbHVlID09IGdldEFyZWFUeXBlQnlMYWJlbCgiQnJvd3NlciIsIHZtKQ0KICAgICl7DQogICAgICBpZih0YWJsZURhdGFbaV0udmFsdWUudmFsdWUgPT0gIiIpew0KICAgICAgICB0YWJsZURhdGFbaV0udmFsdWUuaXNXYXJuID0gdHJ1ZTsNCiAgICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICByZXR1cm4gc3VjY2VzczsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlU2VsZWN0SXRlbXModm0pIHsNCiAgLy9hcGtsaXN0DQogIHZtLmFwcFNlbGVjdEl0ZW1zID0gW107DQogIGxldCBhcHBJdGVtcyA9IHZtLmFwaURhdGEuZGF0YS5hcGtMaXN0LnNwbGl0KCImIik7DQogIGlmICh2bS5hcGlEYXRhLmRhdGEuYXBrTGlzdCA9PSAibnVsbCIpIHsNCiAgICB2bS5hcHBTZWxlY3RJdGVtcy5wdXNoKHsga2V5OiAiIiwgbGFiZWw6ICIiIH0pOw0KICB9IGVsc2Ugew0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXBwSXRlbXMubGVuZ3RoOyBpKyspIHsNCiAgICAgIGlmIChhcHBJdGVtc1tpXS5sZW5ndGggPT0gMCkgew0KICAgICAgICBjb250aW51ZTsNCiAgICAgIH0NCiAgICAgIGxldCBhcnIgPSBhcHBJdGVtc1tpXS5zcGxpdCgiPSIpOw0KICAgICAgdmFyIHNlbGVjdEl0ZW0gPSB7DQogICAgICAgIGtleTogYXJyWzFdLA0KICAgICAgICBsYWJlbDogYXJyWzBdLA0KICAgICAgfTsNCiAgICAgIHZtLmFwcFNlbGVjdEl0ZW1zLnB1c2goc2VsZWN0SXRlbSk7DQogICAgfQ0KICB9DQoNCiAgLy9wYWdlMSB0eXBlIHNlbGVjdCBpdGVtcw0KICB2bS50eXBlSXRlbXMgPSBbXTsNCiAgbGV0IHR5cGVzID0gdm0uYXBpRGF0YS5kYXRhLlBhZ2UxRGlzcGxheVR5cGVzOw0KICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aC0xOyBpKyspIHsNCiAgICBsZXQgaXRlbSA9IHsNCiAgICAgIGtleTogdHlwZXNbaV0ua2V5LA0KICAgICAgbGFiZWw6IGdldE9wdGlvbnNCeUxhYmVsKHZtLCB0eXBlc1tpXS5sYWJlbCksDQogICAgfTsNCiAgICB2bS50eXBlSXRlbXMucHVzaChpdGVtKTsNCiAgfQ0KDQogIC8vcGFnZTIgdHlwZSBzZWxlY3QgaXRlbXMNCiAgdm0udHlwZTJJdGVtcyA9IFtdOw0KICBsZXQgdHlwZXMyID0gdm0uYXBpRGF0YS5kYXRhLlBhZ2UxRGlzcGxheVR5cGVzOw0KICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVzMi5sZW5ndGg7IGkrKykgew0KICAgIGxldCBpdGVtID0gew0KICAgICAga2V5OiB0eXBlc1tpXS5rZXksDQogICAgICBsYWJlbDogZ2V0T3B0aW9uc0J5TGFiZWwodm0sIHR5cGVzW2ldLmxhYmVsKSwNCiAgICB9Ow0KICAgIHZtLnR5cGUySXRlbXMucHVzaChpdGVtKTsNCiAgfQ0KDQogIC8vc2NyZWVuIHBpY3R1cmUNCiAgdm0uc2NyZWVuU2F2ZXJWaWRlb0l0ZW1zID0gW107DQogIHZtLnNjcmVlblNhdmVyUGljdHVyZUl0ZW1zID0gW107DQogIGxldCBzY3JlZW5TYXZlciA9IHZtLmFwaURhdGEuZGF0YS5zY3JlZW5TYXZlckZpbGVzLnNwbGl0KCJcbiIpOw0KICBmb3IgKGxldCBpID0gMDsgaSA8IHNjcmVlblNhdmVyLmxlbmd0aDsgaSsrKSB7DQogICAgaWYgKHNjcmVlblNhdmVyW2ldICE9ICIiKSB7DQogICAgICBsZXQgaXRlbSA9IHsNCiAgICAgICAga2V5OiBzY3JlZW5TYXZlcltpXSwNCiAgICAgICAgbGFiZWw6IHNjcmVlblNhdmVyW2ldLA0KICAgICAgfTsNCiAgICAgIGlmICgNCiAgICAgICAgY2hlY2tGaWxlRm9ybWF0KHNjcmVlblNhdmVyW2ldLCAiLkpQRyIsIDQpIHx8DQogICAgICAgIGNoZWNrRmlsZUZvcm1hdChzY3JlZW5TYXZlcltpXSwgIi5KUEVHIiwgNSkgfHwNCiAgICAgICAgY2hlY2tGaWxlRm9ybWF0KHNjcmVlblNhdmVyW2ldLCAiLlBORyIsIDQpDQogICAgICApIHsNCiAgICAgICAgdm0uc2NyZWVuU2F2ZXJQaWN0dXJlSXRlbXMucHVzaChpdGVtKTsNCiAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgIGNoZWNrRmlsZUZvcm1hdChzY3JlZW5TYXZlcltpXSwgIi5NUDQiLCA0KSB8fA0KICAgICAgICBjaGVja0ZpbGVGb3JtYXQoc2NyZWVuU2F2ZXJbaV0sICIuV01WIiwgNCkgfHwNCiAgICAgICAgY2hlY2tGaWxlRm9ybWF0KHNjcmVlblNhdmVyW2ldLCAiLkFWSSIsIDQpDQogICAgICApIHsNCiAgICAgICAgdm0uc2NyZWVuU2F2ZXJWaWRlb0l0ZW1zLnB1c2goaXRlbSk7DQogICAgICB9DQogICAgfQ0KICB9DQogIC8vc2NyZWVuIHNhdmVyIHR5cGVzDQogIHZtLnNjcmVlblNhdmVyVHlwZUl0ZW1zID0gW107DQogIGlmICh2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5Eb29yU2V0dGluZy5DT05ORUNULlNlcnZlck1vZGUiXSA9PSAxKSB7DQogICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7IGtleTogMCwgbGFiZWw6IHZtLiR0KCJTRE1DIikgfSk7DQogICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7IGtleTogMiwgbGFiZWw6IHZtLiR0KCJTRE1DTG9jYWxQaWN0dXJlcyIpIH0pOw0KICB9DQogIHZtLnNjcmVlblNhdmVyVHlwZUl0ZW1zLnB1c2goeyBrZXk6IDEsIGxhYmVsOiB2bS4kdCgiTG9jYWxQaWN0dXJlcyIpIH0pOw0KICB2bS5zY3JlZW5TYXZlclR5cGVJdGVtcy5wdXNoKHsga2V5OiA2LCBsYWJlbDogdm0uJHQoIkNsb2NrIikgfSk7DQogIGlmICh2bS5hcGlEYXRhLmRhdGEuaGFzQWtGYWNlICE9ICIiKSB7DQogICAgaWYgKHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkRvb3JTZXR0aW5nLkNPTk5FQ1QuU2VydmVyTW9kZSJdID09IDEpIHsNCiAgICAgIHZtLnNjcmVlblNhdmVyVHlwZUl0ZW1zLnB1c2goeyBrZXk6IDMsIGxhYmVsOiB2bS4kdCgiU0RNQ1ZpZGVvcyIpIH0pOw0KICAgICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7IGtleTogNSwgbGFiZWw6IHZtLiR0KCJTRE1DTG9jYWxWaWRlb3MiKSB9KTsNCiAgICB9DQogICAgdm0uc2NyZWVuU2F2ZXJUeXBlSXRlbXMucHVzaCh7IGtleTogNCwgbGFiZWw6IHZtLiR0KCJMb2NhbFZpZGVvcyIpIH0pOw0KICB9DQogIC8vd2FsbHBhcGVyIGZpbGVzDQogIHZtLndhbGxwYXBlckZpbGVJdGVtc0NhbGwgPSBbXTsNCiAgdm0ud2FsbHBhcGVyRmlsZUl0ZW1zID0gW107DQogIGxldCB3YWxscGVwZXJEZWZhdWx0RmlsZXMgPSB2bS5hcGlEYXRhLmRhdGEud2FsbHBhcGVyRGVmYXVsdEZpbGVzLnNwbGl0KCJcbiIpOw0KICBmb3IgKGxldCBpID0gMDsgaSA8IHdhbGxwZXBlckRlZmF1bHRGaWxlcy5sZW5ndGg7IGkrKykgew0KICAgIGxldCBpdGVtID0gew0KICAgICAga2V5OiB2bS5hcGlEYXRhLmRhdGEud2FsbHBhcGVyUGF0aCArICJkZWZhdWx0LyIgKyB3YWxscGVwZXJEZWZhdWx0RmlsZXNbaV0sDQogICAgICBsYWJlbDogd2FsbHBlcGVyRGVmYXVsdEZpbGVzW2ldLA0KICAgIH07DQogICAgaWYgKHdhbGxwZXBlckRlZmF1bHRGaWxlc1tpXSAhPSAiIikgew0KICAgICAgdm0ud2FsbHBhcGVyRmlsZUl0ZW1zLnB1c2goaXRlbSk7DQogICAgICBpZiAoISh3YWxscGVwZXJEZWZhdWx0RmlsZXNbaV0gPT0gIjEuanBnIiB8fCB3YWxscGVwZXJEZWZhdWx0RmlsZXNbaV0gPT0gIjQuanBnIikpIHsNCiAgICAgICAgdm0ud2FsbHBhcGVyRmlsZUl0ZW1zQ2FsbC5wdXNoKGl0ZW0pOw0KICAgICAgfSANCiAgICB9IA0KICB9DQogIGxldCB3YWxscGVwZXJGaWxlcyA9IHZtLmFwaURhdGEuZGF0YS53YWxscGFwZXJGaWxlcy5zcGxpdCgiXG4iKTsNCiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YWxscGVwZXJGaWxlcy5sZW5ndGg7IGkrKykgew0KICAgIGlmICh3YWxscGVwZXJGaWxlc1tpXSAhPSAiIiAmJiANCiAgICAgIChjaGVja0ZpbGVGb3JtYXQod2FsbHBlcGVyRmlsZXNbaV0sICIuUE5HIiwgNCkgfHwNCiAgICAgICAgICBjaGVja0ZpbGVGb3JtYXQod2FsbHBlcGVyRmlsZXNbaV0sICIuSlBHIiwgNCkgfHwNCiAgICAgICAgICBjaGVja0ZpbGVGb3JtYXQod2FsbHBlcGVyRmlsZXNbaV0sICIuSlBFRyIsIDUpKSkgew0KICAgICAgbGV0IGl0ZW0gPSB7DQogICAgICAgIGtleTogdm0uYXBpRGF0YS5kYXRhLndhbGxwYXBlclBhdGggKyB3YWxscGVwZXJGaWxlc1tpXSwNCiAgICAgICAgbGFiZWw6IHdhbGxwZXBlckZpbGVzW2ldLA0KICAgICAgfTsNCiAgICAgIHZtLndhbGxwYXBlckZpbGVJdGVtcy5wdXNoKGl0ZW0pOw0KICAgICAgdm0ud2FsbHBhcGVyRmlsZUl0ZW1zQ2FsbC5wdXNoKGl0ZW0pOw0KICAgIH0NCiAgfQ0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVQYWdlRGF0YSh2bSkgew0KICB2bS5kYXRhID0gew0KICAgIGdldERhdGFTdWNjZXNzOiB0cnVlLA0KICAgIGJyZWFkQ3J1bWI6IHsNCiAgICAgIGZpcnN0VGl0bGU6IHZtLiR0KCJQaG9uZSIpLA0KICAgICAgc2Vjb25kVGl0bGU6IHZtLiR0KCJEaXNwbGF5U2V0dGluZyIpLA0KICAgIH0sDQogICAgb25TdWJtaXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghY2hlY2tDb21taXREYXRhKHZtKSkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBnZXRDb21taXREYXRhKHZtKTsNCiAgICAgIHN1Ym1pdERhdGEodm0pOw0KICAgIH0sDQogICAgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZtLmRhdGEuY2FuY2VsTG9hZGluZyA9IHRydWU7DQogICAgICBnZXREYXRhKHZtKTsNCiAgICB9LA0KICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLA0KICAgIGNhbmNlbExvYWRpbmc6IGZhbHNlLA0KICAgIGNvbnRlbnRzOiBbXSwNCiAgfTsNCg0KICBjcmVhdGVTZWxlY3RJdGVtcyh2bSk7DQoNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVRoZW1lQ29udGVudCh2bSkpOw0KICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlSG9tZXBhZ2VDb250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVNb3JlcGFnZUNvbnRlbnQodm0pKTsNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVNjcmVlblNhdmVyQ29udGVudCh2bSkpOw0KICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlV2FsbHBhcGFlckNvbnRlbnQodm0pKTsNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZUJvb3RMb2dvQ29udGVudCh2bSkpOw0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVUaGVtZUNvbnRlbnQodm0pIHsNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAidGhlbWVTZXR0aW5nIiwNCiAgICB0aXRsZTogdm0uJHQoIlRoZW1lTGFiZWwiKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiVGhlbWVTZXR0aW5nRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiVGhlbWVMYWJlbCIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLlNldHRpbmdzLkRJU1BMQVlTVFlMRS5JZGxlU3R5bGUiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuU2V0dGluZ3MuRElTUExBWVNUWUxFLklkbGVTdHlsZSJdID09ICIiID8gNCA6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuU2V0dGluZ3MuRElTUExBWVNUWUxFLklkbGVTdHlsZSJdLA0KICAgICAgICBzZWxlY3RJdGVtczogWw0KICAgICAgICAgIHsga2V5OiA0LCBsYWJlbDogIkRlZmF1bHQiIH0sDQogICAgICAgICAgeyBrZXk6IDUsIGxhYmVsOiAiQ2FsbCBMaXN0IiB9LA0KICAgICAgICBdLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlRoZW1lU2V0dGluZ0Rlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZUJvb3RMb2dvQ29udGVudCh2bSkgew0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJib290TG9nbyIsDQogICAgdGl0bGU6IHZtLiR0KCJCb290TG9nbyIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJCb290TG9nb0Rlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIkJvb3RMb2dvIiksDQogICAgICAgIHR5cGU6ICJmaWxlLWlucHV0IiwNCiAgICAgICAga2V5OiAiYm9vdExvZ29VcGxvYWQiLA0KICAgICAgICBhY2NlcHRGaWxlVHlwZTogIi56aXAsLnBuZyIsDQogICAgICAgIG1vZGFsVGl0bGU6IHZtLiR0KCJCb290TG9nb0Zvcm1hdDEyODAiKSwNCiAgICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICAgIHZhbHVlOiB7DQogICAgICAgICAgZmlsZURhdGE6IHt9LA0KICAgICAgICAgIGZpbGVOYW1lOiB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIiksDQogICAgICAgIH0sDQogICAgICAgIGltcG9ydEJ0bk5hbWU6IHZtLiR0KCJJbXBvcnQiKSwNCiAgICAgICAgbW9kYWxDb25maXJtTmFtZTogdm0uJHQoIlVwbG9hZCIpLA0KICAgICAgICBpbWdSZXNvbHV0aW9uV2lkdGg6IDEyODAsDQogICAgICAgIGltZ1Jlc29sdXRpb25IZWlnaHQ6IDgwMCwNCiAgICAgICAgdXBsb2FkRnVuY3Rpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB1cGxvYWRGaWxlKHZtLCAiYm9vdExvZ28iLCAiYm9vdExvZ29VcGxvYWQiKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNTaG93RXhwb3J0OiB0cnVlLA0KICAgICAgICBleHBvcnRCdG5OYW1lOiB2bS4kdCgiUmVzZXQiKSwNCiAgICAgICAgZXhwb3J0QnRuSWNvbjogImljb25yZXNldCIsDQogICAgICAgIG9uRXhwb3J0OiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgb25EZWxGaWxlKHZtLCAiIiwgImJvb3RMb2dvIiwgImJvb3RMb2dvVXBsb2FkIik7DQogICAgICAgIH0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQm9vdExvZ29EZXNjIiksDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVXYWxscGFwYWVyQ29udGVudCh2bSkgew0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJ3YWxscGFwZXIiLA0KICAgIHRpdGxlOiB2bS4kdCgiV2FsbHBhcGVyIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIldhbGxwYXBlckRlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIldhbGxwYXBlciIpLA0KICAgICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsDQogICAgICAgIGtleTogIndhbGxwYXBlclVwbG9hZCIsDQogICAgICAgIGFjY2VwdEZpbGVUeXBlOiAiLmpwZywuanBlZywucG5nIiwNCiAgICAgICAgbW9kYWxUaXRsZTogdm0uJHQoIldhbGxwYXBlckZvcm1hdDEyODAiKSwNCiAgICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICAgIHZhbHVlOiB7DQogICAgICAgICAgZmlsZURhdGE6IHt9LA0KICAgICAgICAgIGZpbGVOYW1lOiB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIiksDQogICAgICAgIH0sDQogICAgICAgIGltcG9ydEJ0bk5hbWU6IHZtLiR0KCJJbXBvcnQiKSwNCiAgICAgICAgbW9kYWxDb25maXJtTmFtZTogdm0uJHQoIlVwbG9hZCIpLA0KICAgICAgICBpbWdSZXNvbHV0aW9uV2lkdGg6IDEyODAsDQogICAgICAgIGltZ1Jlc29sdXRpb25IZWlnaHQ6IDgwMCwNCiAgICAgICAgdXBsb2FkRnVuY3Rpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB1cGxvYWRGaWxlKHZtLCAid2FsbHBhcGVyIiwgIndhbGxwYXBlclVwbG9hZCIpOw0KICAgICAgICB9LA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIldhbGxwYXBlckRlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiV2FsbHBhcGVyRmlsZXMiKSwNCiAgICAgICAgdHlwZTogInNlbGVjdCIsDQogICAgICAgIGtleTogIkNvbmZpZy5TZXR0aW5ncy5MT0dPLldhbGxwYXBlciIsDQogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5MT0dPLldhbGxwYXBlciJdLA0KICAgICAgICBzZWxlY3RJdGVtczogdm0ud2FsbHBhcGVyRmlsZUl0ZW1zLA0KICAgICAgICBzaG93QnRuOiB0cnVlLA0KICAgICAgICBvbkRlbDogZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgICAgaWYgKHZhbHVlICE9ICIiKSB7DQogICAgICAgICAgICBvbkRlbEZpbGUodm0sIHZhbHVlLCAid2FsbHBhcGVyIiwgIndhbGxwYXBlckRlbCIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICAgIGRlbERpc2FibGVkOiBmYWxzZSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJXYWxscGFwZXJGaWxlRGVzYyIpLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlU2NyZWVuU2F2ZXJDb250ZW50KHZtKSB7DQogIGxldCBjb250ZW50ID0gew0KICAgIGtleTogInNjcmVlblNhdmVyIiwNCiAgICB0aXRsZTogdm0uJHQoIlNjcmVlblNhdmVyU2V0dGluZyIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJTY3JlZW5TZXR0aW5nRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiU2NyZWVuU2F2ZXJQaWN0dXJlcyIpLA0KICAgICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsDQogICAgICAgIGtleTogInNjcmVlblNhdmVyUGljdHVyZSIsDQogICAgICAgIGFjY2VwdEZpbGVUeXBlOiAiLmpwZywucG5nLC5qcGVnIiwNCiAgICAgICAgbW9kYWxUaXRsZTogdm0uJHQoIlNjcmVlblNhdmVyRm9ybWF0IiksDQogICAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgICB2YWx1ZTogew0KICAgICAgICAgIGZpbGVEYXRhOiB7fSwNCiAgICAgICAgICBmaWxlTmFtZTogdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpLA0KICAgICAgICB9LA0KICAgICAgICBpbXBvcnRCdG5OYW1lOiB2bS4kdCgiSW1wb3J0IiksDQogICAgICAgIG1vZGFsQ29uZmlybU5hbWU6IHZtLiR0KCJVcGxvYWQiKSwNCiAgICAgICAgdXBsb2FkRnVuY3Rpb246IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB1cGxvYWRGaWxlKHZtLCAic2NyZWVuU2F2ZXIiLCAic2NyZWVuU2F2ZXJQaWN0dXJlIik7DQogICAgICAgIH0sDQogICAgICAgIG1heFNpemU6IDIgKiAxMDI0ICogMTAyNCwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJTY3JlZW5QaWN0dXJlRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJTY3JlZW5TYXZlclZpZGVvcyIpLA0KICAgICAgICBpc0hpZGU6IHZtLmFwaURhdGEuZGF0YS5oYXNBa0ZhY2UgPT0gIiIsDQogICAgICAgIHR5cGU6ICJmaWxlLWlucHV0IiwNCiAgICAgICAga2V5OiAic2NyZWVuU2F2ZXJWaWRlbyIsDQogICAgICAgIGFjY2VwdEZpbGVUeXBlOiAiLm1wNCwud212LC5hdmkiLA0KICAgICAgICBtb2RhbFRpdGxlOiB2bS4kdCgiU2NyZWVuU2F2ZXJWaWRlb0Zvcm1hdCIpLA0KICAgICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgICAgdmFsdWU6IHsNCiAgICAgICAgICBmaWxlRGF0YToge30sDQogICAgICAgICAgZmlsZU5hbWU6IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKSwNCiAgICAgICAgfSwNCiAgICAgICAgaW1wb3J0QnRuTmFtZTogdm0uJHQoIkltcG9ydCIpLA0KICAgICAgICBtb2RhbENvbmZpcm1OYW1lOiB2bS4kdCgiVXBsb2FkIiksDQogICAgICAgIHVwbG9hZEZ1bmN0aW9uOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgdXBsb2FkRmlsZSh2bSwgInNjcmVlblNhdmVyIiwgInNjcmVlblNhdmVyVmlkZW8iKTsNCiAgICAgICAgfSwNCiAgICAgICAgbWF4U2l6ZTogNTAwICogMTAyNCAqIDEwMjQsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiU2NyZWVuVmlkZW9EZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlBpY3R1cmVGaWxlcyIpLA0KICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAga2V5OiAicGljdHVyZUZpbGUiLA0KICAgICAgICB2YWx1ZTogDQogICAgICAgICAgdm0uc2NyZWVuU2F2ZXJQaWN0dXJlSXRlbXMubGVuZ3RoID09IDANCiAgICAgICAgICAgID8gIiINCiAgICAgICAgICAgIDogdm0uc2NyZWVuU2F2ZXJQaWN0dXJlSXRlbXNbMF0ua2V5LA0KICAgICAgICBzZWxlY3RJdGVtczogdm0uc2NyZWVuU2F2ZXJQaWN0dXJlSXRlbXMsDQogICAgICAgIHNob3dCdG46IHRydWUsDQogICAgICAgIG9uRGVsOiBmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgICAgICBpZiAodmFsdWUgIT0gIiIpIHsNCiAgICAgICAgICAgIG9uRGVsRmlsZSh2bSwgdmFsdWUsICJzY3JlZW5TYXZlciIsICJwaWN0dXJlRmlsZSIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICAgIGRlbERpc2FibGVkOiB2bS5zY3JlZW5TYXZlclBpY3R1cmVJdGVtcy5sZW5ndGggPD0gMiwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJQaWN0dXJlRmlsZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiVmlkZW9GaWxlcyIpLA0KICAgICAgICBpc0hpZGU6IHZtLmFwaURhdGEuZGF0YS5oYXNBa0ZhY2UgPT0gIiIsDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJ2aWRlb0ZpbGUiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5zY3JlZW5TYXZlclZpZGVvSXRlbXMubGVuZ3RoID09IDANCiAgICAgICAgICAgID8gIiINCiAgICAgICAgICAgIDogdm0uc2NyZWVuU2F2ZXJWaWRlb0l0ZW1zWzBdLmtleSwNCiAgICAgICAgc2VsZWN0SXRlbXM6IHZtLnNjcmVlblNhdmVyVmlkZW9JdGVtcywNCiAgICAgICAgc2hvd0J0bjogdHJ1ZSwNCiAgICAgICAgb25EZWw6IGZ1bmN0aW9uICh2YWx1ZSkgew0KICAgICAgICAgIGlmICh2YWx1ZSAhPSAiIikgew0KICAgICAgICAgICAgb25EZWxGaWxlKHZtLCB2YWx1ZSwgInNjcmVlblNhdmVyIiwgInZpZGVvRmlsZSIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICAgIGRlbERpc2FibGVkOiB2bS5zY3JlZW5TYXZlclZpZGVvSXRlbXMubGVuZ3RoID09IDAsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiVmlkZW9GaWxlRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJTY3JlZW5TYXZlclR5cGUiKSwNCiAgICAgICAgdHlwZTogInNlbGVjdCIsDQogICAgICAgIGtleTogIkNvbmZpZy5TZXR0aW5ncy5TQ1JFRU5TQVZFUi5TY3JlZXNhdmVyVHlwZSIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLlNldHRpbmdzLlNDUkVFTlNBVkVSLlNjcmVlc2F2ZXJUeXBlIl0sDQogICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5zY3JlZW5TYXZlclR5cGVJdGVtcywNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJTY3JlZW5TYXZlclR5cGVEZXNjIiksDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVNb3JlcGFnZUNvbnRlbnQodm0pIHsNCiAgLy90YWJsZSBkYXRhDQogIGxldCB0YWJsZURhdGEgPSBbXTsNCiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2bS5hcGlEYXRhLmRhdGEucGFnZTJOdW07IGkrKykgew0KICAgIGxldCBpdGVtID0gew0KICAgICAga2V5OiBpLA0KICAgICAgYXJlYTogdm0uJHQoIkFyZWEiKSArIChpICsgMSksDQogICAgICB0eXBlOiB7DQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsNCiAgICAgICAgICAgICJDb25maWcuSW5kb29yLlBBR0UyQVJFQSIgKyAoaSArIDEpICsgIi5EaXNwbGF5VHlwZSINCiAgICAgICAgICBdLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJQbGVhc2VDaGVja011bHRpcGxpY2l0eSIpLA0KICAgICAgfSwNCiAgICAgIHZhbHVlOiB7DQogICAgICAgIHZhbHVlOg0KICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKGkgKyAxKSArICIuVmFsdWUiXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiV2FybkludmFpbGRFbXB0eUVycm9yIiksDQogICAgICAgIGRpc2FibGVkOiB0cnVlLA0KICAgICAgICBpdGVtVHlwZTogImlucHV0IiwNCiAgICAgIH0sDQogICAgICBsYWJlbDogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChpICsgMSkgKyAiLkxBQkVMIl0sDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICAgIHdhcm5MYWJlbDogIiIsDQogICAgICAgIGRpc2FibGVkOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICBpY29uOiB7DQogICAgICAgIGZpbGVEYXRhOiB7fSwNCiAgICAgICAgLy8gZmlsZU5hbWU6IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKSwNCiAgICAgICAgZmlsZU5hbWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkluZG9vci5QQUdFMkFSRUEiICsgKGkgKyAxKSArICIuSUNPTiJdID09ICIiID8gdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTJBUkVBIiArIChpICsgMSkgKyAiLklDT04iXSwNCiAgICAgICAgaXNTaG93OiB0cnVlLA0KICAgICAgfSwNCiAgICB9Ow0KICAgIHRhYmxlRGF0YS5wdXNoKGl0ZW0pOw0KICB9DQogIC8vY29udGVudA0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJtb3JlcGFnZSIsDQogICAgdGl0bGU6IHZtLiR0KCJQYWdlMkRpc3BsYXkiKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiTW9yZVBhZ2VEaXNwbGF5RGVzYyIpLA0KICAgIHNob3dFeGFtcGxlOiB0cnVlLA0KICAgIGltZ05hbWU6ICJtb3JlX3BhZ2VfZGVmYXVsdC5wbmciLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHR5cGU6ICJ0YWJsZSIsDQogICAgICAgIGtleTogIm1vcmVwYWdlIiwNCiAgICAgICAgdGFibGVEYXRhOiB0YWJsZURhdGEsDQogICAgICAgIHRhYmxlQ29sdW1uczogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJsYWJlbCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkFyZWEiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImFyZWEiLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiYXJlYSIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMTElIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJUeXBlIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJ0eXBlIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogInR5cGUiIH0sDQogICAgICAgICAgICBzZWxlY3RJdGVtczogdm0udHlwZTJJdGVtcywNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMTglIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIlZhbHVlIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJ2YWx1ZSIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJ2YWx1ZSIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMTglIiwNCiAgICAgICAgICAgIG1heExlbmd0aDogMTI3LA0KICAgICAgICAgICAgc2VsZWN0SXRlbXM6IHZtLmFwcFNlbGVjdEl0ZW1zLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiTGFiZWwiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImxhYmVsIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImxhYmVsIiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgd2lkdGg6ICIxOCUiLA0KICAgICAgICAgICAgbWF4TGVuZ3RoOiAxMjcsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkljb25MYWJlbCIpICsgIigiICsgdm0uJHQoIk1heEljb25TaXplIikgKyAiOjEwMCoxMDApIiwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImljb24iLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiaWNvbiIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMzUlIiwNCiAgICAgICAgICAgIGJ0bk5hbWU6IHZtLiR0KCJEZWxldGVMYWJlbCIpLA0KICAgICAgICAgICAgYWNjZXB0RmlsZVR5cGU6ICIuanBnLC5wbmcsLmpwZWciLA0KICAgICAgICAgICAgdXBsb2FkOiBmdW5jdGlvbiAoZmlsZURhdGEsIGluZGV4KSB7DQogICAgICAgICAgICAgIHJldHVybiB1cGxvYWRJY29uKGZpbGVEYXRhLCBpbmRleCwgdm0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlSG9tZXBhZ2VDb250ZW50KHZtKSB7DQogIC8vZGF0YQ0KICBsZXQgdGFibGVEYXRhID0gW107DQogIGZvciAobGV0IGkgPSAwOyBpIDwgdm0uYXBpRGF0YS5kYXRhLnBhZ2UxTnVtOyBpKyspIHsNCiAgICBsZXQgaXRlbSA9IHsNCiAgICAgIGtleTogaSwNCiAgICAgIGFyZWE6IHZtLiR0KCJBcmVhIikgKyAoaSArIDEpLA0KICAgICAgdHlwZTogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkluZG9vci5QQUdFMUFSRUEiICsgKGkgKyAxKSArICIuRGlzcGxheVR5cGUiDQogICAgICAgICAgXSwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiUGxlYXNlQ2hlY2tNdWx0aXBsaWNpdHkiKSwNCiAgICAgIH0sDQogICAgICB2YWx1ZTogew0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLlZhbHVlIl0sDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIldhcm5JbnZhaWxkRW1wdHlFcnJvciIpLA0KICAgICAgICBkaXNhYmxlZDogdHJ1ZSwNCiAgICAgICAgaXRlbVR5cGU6ICJpbnB1dCIsDQogICAgICB9LA0KICAgICAgbGFiZWw6IHsNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5MQUJFTCJdLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICB3YXJuTGFiZWw6ICIiLA0KICAgICAgICBkaXNhYmxlZDogZmFsc2UsDQogICAgICB9LA0KICAgICAgaWNvbjogew0KICAgICAgICBmaWxlRGF0YToge30sDQogICAgICAgIGZpbGVOYW1lOiB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIiksDQogICAgICAgIGZpbGVOYW1lOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5JbmRvb3IuUEFHRTFBUkVBIiArIChpICsgMSkgKyAiLklDT04iXSA9PSAiIiA/IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuSW5kb29yLlBBR0UxQVJFQSIgKyAoaSArIDEpICsgIi5JQ09OIl0sDQogICAgICAgIGlzU2hvdzogdHJ1ZSwNCiAgICAgIH0sDQogICAgfTsNCiAgICB0YWJsZURhdGEucHVzaChpdGVtKTsNCiAgfQ0KICAvL2NvbnRlbnQNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAiaG9tZXBhZ2UiLA0KICAgIHRpdGxlOiB2bS4kdCgiUGFnZTFEaXNwbGF5IiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkhvbWVQYWdlRGlzcGxheURlc2MiKSwNCiAgICBzaG93RXhhbXBsZTogdHJ1ZSwNCiAgICBpbWdOYW1lOiAiaG9tZV9wYWdlX2RlZmF1bHQucG5nIiwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0eXBlOiAidGFibGUiLA0KICAgICAgICBrZXk6ICJob21lcGFnZSIsDQogICAgICAgIHRhYmxlRGF0YTogdGFibGVEYXRhLA0KICAgICAgICB0YWJsZUNvbHVtbnM6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAibGFiZWwiLA0KICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJBcmVhIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJhcmVhIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImFyZWEiIH0sDQogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgICB3aWR0aDogIjExJSIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAic2VsZWN0IiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiVHlwZSIpLA0KICAgICAgICAgICAgZGF0YUluZGV4OiAidHlwZSIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJ0eXBlIiB9LA0KICAgICAgICAgICAgc2VsZWN0SXRlbXM6IHZtLnR5cGVJdGVtcywNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMTglIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIlZhbHVlIiksDQogICAgICAgICAgICBkYXRhSW5kZXg6ICJ2YWx1ZSIsDQogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJ2YWx1ZSIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMTglIiwNCiAgICAgICAgICAgIG1heExlbmd0aDogMTI3LA0KICAgICAgICAgICAgc2VsZWN0SXRlbXM6IHZtLmFwcFNlbGVjdEl0ZW1zLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiTGFiZWwiKSwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImxhYmVsIiwNCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogImxhYmVsIiB9LA0KICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgICAgd2lkdGg6ICIxOCUiLA0KICAgICAgICAgICAgbWF4TGVuZ3RoOiAxMjcsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsDQogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkljb25MYWJlbCIpICsgIigiICsgdm0uJHQoIk1heEljb25TaXplIikgKyAiOjEwMCoxMDApIiwNCiAgICAgICAgICAgIGRhdGFJbmRleDogImljb24iLA0KICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiaWNvbiIgfSwNCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMzUlIiwNCiAgICAgICAgICAgIGJ0bk5hbWU6IHZtLiR0KCJEZWxldGVMYWJlbCIpLA0KICAgICAgICAgICAgYWNjZXB0RmlsZVR5cGU6ICIuanBnLC5wbmcsLmpwZWciLA0KICAgICAgICAgICAgdXBsb2FkOiBmdW5jdGlvbiAoZmlsZURhdGEsIGluZGV4KSB7DQogICAgICAgICAgICAgIHJldHVybiB1cGxvYWRJY29uKGZpbGVEYXRhLCBpbmRleCwgdm0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gdXBsb2FkSWNvbihmaWxlRGF0YSwgaW5kZXgsIHZtKSB7DQogIGxldCBmaWxlTmFtZSA9IGZpbGVEYXRhLm5hbWU7DQogIGlmIChmaWxlTmFtZSA9PSAiIiB8fCBmaWxlTmFtZSA9PSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikpIHsNCiAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiRmlsZUVtcHR5V2FybmluZyIpKTsNCiAgICByZXR1cm47DQogIH0NCg0KICAvL+ehruiupOWbvueJh+WIhui+qOeOhw0KICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZURhdGEpOw0KICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsNCiAgICBpbWcuc3JjID0gcmVhZGVyLnJlc3VsdDsNCiAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkgew0KICAgICAgLy/liIbovqjnjofotoXlh7oNCiAgICAgIGlmIChpbWcud2lkdGggPiAxMDAgfHwgaW1nLmhlaWdodCA+IDEwMCkgew0KICAgICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiSW1hZ2VSZXNvbHV0aW9uRXJyIikpOw0KICAgICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiaG9tZXBhZ2UiLCAiaG9tZXBhZ2UiKTsNCiAgICAgICAgaXRlbS50YWJsZURhdGFbaW5kZXhdLmljb24gPSB7DQogICAgICAgICAgZmlsZURhdGE6IHt9LA0KICAgICAgICAgIGZpbGVOYW1lOiB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIiksDQogICAgICAgIH07DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIC8v5q2j5bi45LiK5LygDQogICAgICBjb25zdCB1cERhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgIHVwRGF0YS5hcHBlbmQoImZpbGUiLCBmaWxlRGF0YSk7DQogICAgICBheGlvcw0KICAgICAgICAucG9zdCgiYXBpL3Bob25lRGlzcGxheVNldHRpbmcvdXBsb2FkP3R5cGU9YXJlYUljb24iLCB1cERhdGEsIHsNCiAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiLA0KICAgICAgICAgIH0sDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHt9KTsNCiAgICB9Ow0KICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24gKCkgew0KICAgICAgLy/lm77niYfliqDovb3plJnor68NCiAgICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJGaWxlRm9ybWF0V2FybmluZyIpKTsNCiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJob21lcGFnZSIsICJob21lcGFnZSIpOw0KICAgICAgaXRlbS50YWJsZURhdGFbaW5kZXhdLmljb24gPSB7DQogICAgICAgIGZpbGVEYXRhOiB7fSwNCiAgICAgICAgZmlsZU5hbWU6IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKSwNCiAgICAgIH07DQogICAgfTsNCiAgfTsNCn0NCg0KZnVuY3Rpb24gdXBsb2FkRmlsZSh2bSwgY29udGVudEtleSwgaXRlbUtleSkgew0KICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCBjb250ZW50S2V5LCBpdGVtS2V5KTsNCiAgbGV0IGZpbGVOYW1lID0gaXRlbS52YWx1ZS5maWxlTmFtZTsNCiAgaWYgKGZpbGVOYW1lID09ICIiIHx8IGZpbGVOYW1lID09IHZtLiR0KCJVcGdyYWRlRmlsZVBhdGgiKSkgew0KICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJGaWxlRW1wdHlXYXJuaW5nIikpOw0KICAgIHJldHVybjsNCiAgfQ0KICBsZXQgY29uZmlybVRleHQgPSB2bS4kdCgiSW1wb3J0V2FsbHBhcGVyV2FybmluZyIpOw0KICBpZiAoY29udGVudEtleSA9PSAic2NyZWVuU2F2ZXIiKSB7DQogICAgY29uZmlybVRleHQgPSB2bS4kdCgiSW1wb3J0U2NyZWVuU2F2ZXJXYXJuaW5nIik7DQogIH0gZWxzZSBpZiAoY29udGVudEtleSA9PSAiYm9vdExvZ28iKSB7DQogICAgY29uZmlybVRleHQgPSB2bS4kdCgiVXBsb2FkTG9nb1dhcm5pbmciKTsNCiAgfQ0KICBpdGVtLnZpc2libGUgPSB0cnVlOw0KICBpZiAoY29uZmlybShjb25maXJtVGV4dCkpIHsNCiAgICAvL+S4iuS8oA0KICAgIGl0ZW0ubG9hZGluZyA9IHRydWU7DQogICAgY29uc3QgdXBEYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgdXBEYXRhLmFwcGVuZCgiZmlsZSIsIGl0ZW0udmFsdWUuZmlsZURhdGEpOw0KICAgIGxldCBhcGlVcmwgPSAiYXBpL3Bob25lRGlzcGxheVNldHRpbmcvdXBsb2FkP3R5cGU9IiArIGl0ZW1LZXk7DQogICAgaWYgKGl0ZW1LZXkgPT0gImJvb3RMb2dvVXBsb2FkIikgew0KICAgICAgYXBpVXJsICs9DQogICAgICAgICImd2lkdGg9IiArDQogICAgICAgIGl0ZW0udmFsdWUuZmlsZURhdGEud2lkdGggKw0KICAgICAgICAiJmhlaWdodD0iICsNCiAgICAgICAgaXRlbS52YWx1ZS5maWxlRGF0YS5oZWlnaHQ7DQogICAgfQ0KICAgIGF4aW9zDQogICAgICAucG9zdChhcGlVcmwsIHVwRGF0YSwgew0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiwNCiAgICAgICAgfSwNCiAgICAgIH0pDQogICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IC0xKSB7DQogICAgICAgICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkZpbGVVcGxvYWRGYWlsZWRXYXJuaW5nIikpOw0KICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gMCkgew0KICAgICAgICAgIGdldERhdGEodm0pOw0KICAgICAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSwgdm0uJHQoIlVwbG9hZEZpbGVGaW5pc2hlZCIpKTsNCiAgICAgICAgICBpdGVtLnZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICBpdGVtLnZhbHVlLmZpbGVOYW1lID0gdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpOw0KICAgICAgICAgIGl0ZW0udmFsdWUuZmlsZURhdGEgPSB7fTsNCiAgICAgICAgfQ0KICAgICAgICBpdGVtLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0pOw0KICB9DQp9DQoNCmZ1bmN0aW9uIG9uRGVsRmlsZSh2bSwgdmFsdWUsIGNvbnRlbnRLZXksIGl0ZW1LZXkpIHsNCiAgbGV0IHJlYWxJdGVtS2V5ID0NCiAgICBpdGVtS2V5ID09ICJ3YWxscGFwZXJEZWwiID8gIkNvbmZpZy5TZXR0aW5ncy5MT0dPLldhbGxwYXBlciIgOiBpdGVtS2V5Ow0KICBsZXQgcmVxdWVzdERhdGEgPSB7DQogICAgdGFyZ2V0OiAicGhvbmVEaXNwbGF5U2V0dGluZyIsDQogICAgYWN0aW9uOiAiZGVsIiwNCiAgICBkYXRhOiB7DQogICAgICBmaWxlTmFtZTogdmFsdWUsDQogICAgICB0eXBlOiBpdGVtS2V5LA0KICAgIH0sDQogIH07DQogIGlmIChpdGVtS2V5ID09ICJib290TG9nb1VwbG9hZCIpIHsNCiAgICBpZiAoIWNvbmZpcm0odm0uJHQoIkRlbGV0ZUxvZ29Db25maXJtIikpKSB7DQogICAgICByZXR1cm47DQogICAgfQ0KICB9IGVsc2Ugew0KICAgIGlmICghY29uZmlybSh2bS4kdCgiRGVsZXRlU2VsZWN0ZWRDb25maXJtIikpKSB7DQogICAgICByZXR1cm47DQogICAgfQ0KICB9DQogIGdldEl0ZW1CeUtleSh2bS5kYXRhLCBjb250ZW50S2V5LCByZWFsSXRlbUtleSkubG9hZGluZyA9IHRydWU7DQogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgY29udGVudEtleSwgcmVhbEl0ZW1LZXkpLmxvYWRpbmcgPSBmYWxzZTsNCiAgICBnZXREYXRhKHZtKTsNCiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0pOw0KICB9KTsNCn0NCg=="},{"version":3,"sources":["PhoneDisplaySetting.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PhoneDisplaySetting.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <CommonPage :data=\"data\" @onDataChange=\"onCommonPageDataChange($event)\"></CommonPage>\r\n</template>\r\n\r\n<script>\r\nimport CommonPage from \"@/components/CommonPage.vue\";\r\nimport {\r\n  showRequestSuccess,\r\n  deepClone,\r\n  checkFileFormat,\r\n  showErrorInfo,\r\n  getItemByKey,\r\n  getContentByKey,\r\n} from \"@/js/common.js\";\r\nimport { getOptionsByLabel } from \"@/js/commonKeys.js\";\r\n\r\nexport default {\r\n  components: {\r\n    CommonPage,\r\n  },\r\n  data() {\r\n    return {\r\n      wallpaperFileItems: [],\r\n      wallpaperFileItemsCall: [],\r\n      screenSaverTypeItems: [],\r\n      screenSaverPictureItems: [],\r\n      screenSaverVideoItems: [],\r\n      typeItems: [],\r\n      type2Items: [],\r\n      appSelectItems: [],\r\n      changedCfgData: {},\r\n      submitCfgData: {},\r\n      apiData: {},\r\n      data: {\r\n        getDataSuccess: false,\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    getData(this);\r\n  },\r\n  methods: {\r\n    onCommonPageDataChange: function (event) {\r\n      setChangedData(this, event);\r\n      //界面变化\r\n      handlerPageChanged(this, event);\r\n    },\r\n  },\r\n};\r\n\r\nfunction setChangedData(vm, event) {\r\n  if (event.contentKey == \"homepage\" && event.itemKey == \"homepage\") {\r\n    let tableData = event.newVal;\r\n    for (let i = 0; i < tableData.length; i++) {\r\n      vm.changedCfgData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".DisplayType\"] =\r\n        tableData[i].type.value;\r\n      vm.changedCfgData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".LABEL\"] =\r\n        tableData[i].label.value;\r\n      vm.changedCfgData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".Value\"] =\r\n        tableData[i].value.value;\r\n\r\n      if (event.newVal[i].icon.fileName != event.oldVal[i].icon.fileName) {\r\n        vm.changedCfgData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".ICON\"] =\r\n          tableData[i].icon.fileName == vm.$t(\"UpgradeFilePath\")\r\n            ? \"\"\r\n            : tableData[i].icon.fileName;\r\n      }\r\n    }\r\n  } else if (event.contentKey == \"morepage\" && event.itemKey == \"morepage\") {\r\n    let tableData = event.newVal;\r\n    for (let i = 0; i < tableData.length; i++) {\r\n      vm.changedCfgData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".DisplayType\"] =\r\n        tableData[i].type.value;\r\n      vm.changedCfgData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".LABEL\"] =\r\n        tableData[i].label.value;\r\n      vm.changedCfgData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".Value\"] =\r\n        tableData[i].value.value;\r\n\r\n      if (event.newVal[i].icon.fileName != event.oldVal[i].icon.fileName) {\r\n        vm.changedCfgData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".ICON\"] =\r\n          tableData[i].icon.fileName == vm.$t(\"UpgradeFilePath\")\r\n            ? \"\"\r\n            : tableData[i].icon.fileName;\r\n      }\r\n    }\r\n  } else if (event.contentKey == \"themeSetting\") {\r\n    let wallpaperItems = getItemByKey(vm.data, \"wallpaper\", \"Config.Settings.LOGO.Wallpaper\");\r\n    wallpaperItems.value = \"/sdcard/Pictures/wallpaper/default/7.jpg\";\r\n    vm.changedCfgData[\"Config.Settings.LOGO.Wallpaper\"] = \"/sdcard/Pictures/wallpaper/default/7.jpg\";\r\n    vm.changedCfgData[event.itemKey] = event.newVal;\r\n  } else {\r\n    vm.changedCfgData[event.itemKey] = event.newVal;\r\n  }\r\n}\r\n\r\nfunction handlerPageChanged(vm, event) {\r\n  //theme\r\n  let themeData = getItemByKey(vm.data, \"themeSetting\", \"Config.Settings.DISPLAYSTYLE.IdleStyle\");\r\n  let wallpaperItems = getItemByKey(vm.data, \"wallpaper\", \"Config.Settings.LOGO.Wallpaper\");\r\n  let homePageContent = getContentByKey(vm.data, \"homepage\");\r\n  let morePageContent = getContentByKey(vm.data, \"morepage\");\r\n  if (themeData.value == 4) {\r\n    wallpaperItems.selectItems = vm.wallpaperFileItems;\r\n    //换图片\r\n    homePageContent.imgName = \"home_page_default.png\";\r\n    morePageContent.imgName = \"more_page_default.png\";\r\n  } else {\r\n    wallpaperItems.selectItems = vm.wallpaperFileItemsCall;\r\n    homePageContent.imgName = \"home_page_call.png\";\r\n    morePageContent.imgName = \"more_page_call.png\";\r\n  }\r\n  //homepage\r\n  let homepageItem = getItemByKey(vm.data, \"homepage\", \"homepage\");\r\n  let homepageTableData = homepageItem.tableData;\r\n  for (let i = 0; i < homepageTableData.length; i++) {\r\n    //type是否相同\r\n    homepageTableData[i].type.isWarn = false;\r\n    for (let j = 0; j < homepageTableData.length; j++) {\r\n      if (\r\n        i != j &&\r\n        homepageTableData[j].type.value == homepageTableData[i].type.value &&\r\n        homepageTableData[j].type.value !=\r\n          getAreaTypeByLabel(\"Custom APK\", vm) &&\r\n        homepageTableData[j].type.value != getAreaTypeByLabel(\"Browser\", vm) &&\r\n        homepageTableData[j].type.value != getAreaTypeByLabel(\"N/A\", vm)\r\n      ) {\r\n        homepageTableData[i].type.isWarn = true;\r\n        homepageTableData[j].type.isWarn = true;\r\n      }\r\n    }\r\n    //icon显示与否\r\n    if (homepageTableData[i].type.value == getAreaTypeByLabel(\"DND\", vm)) {\r\n      homepageTableData[i].icon.isShow = false;\r\n    } else {\r\n      homepageTableData[i].icon.isShow = true;\r\n    }\r\n    //label是否禁用\r\n    if (\r\n      homepageTableData[i].type.value == getAreaTypeByLabel(\"DND\", vm) ||\r\n      homepageTableData[i].type.value == getAreaTypeByLabel(\"Unlock\", vm)\r\n    ) {\r\n      homepageTableData[i].label.disabled = true;\r\n    } else {\r\n      homepageTableData[i].label.disabled = false;\r\n    }\r\n    //value是否禁用\r\n    if (\r\n      homepageTableData[i].type.value == getAreaTypeByLabel(\"Custom APK\", vm) ||\r\n      homepageTableData[i].type.value == getAreaTypeByLabel(\"Browser\", vm)\r\n    ) {\r\n      homepageTableData[i].value.disabled = false;\r\n    } else {\r\n      homepageTableData[i].value.disabled = true;\r\n    }\r\n    //value值的input和select框变换\r\n    if (\r\n      homepageTableData[i].type.value == getAreaTypeByLabel(\"Custom APK\", vm)\r\n    ) {\r\n      homepageTableData[i].value.itemType = \"select\";\r\n      homepageTableData[i].value.disabled = false;\r\n       homepageTableData[i].value.isWarn=false;\r\n    } else {\r\n      homepageTableData[i].value.itemType = \"input\";\r\n       homepageTableData[i].value.isWarn = false;\r\n    }\r\n\r\n    //type变化时label值更新，value值更新\r\n    if (\r\n      \"undefined\" != typeof event &&\r\n      event.itemKey == \"homepage\" &&\r\n      event.contentKey == \"homepage\"\r\n    ) {\r\n      if (event.newVal[i].type.value != event.oldVal[i].type.value) {\r\n        if (\r\n          vm.apiData.configData[\r\n            \"Config.Indoor.PAGE1AREA\" + (i + 1) + \".LABEL\"\r\n          ] != \"\" &&\r\n          vm.apiData.configData[\r\n            \"Config.Indoor.PAGE1AREA\" + (i + 1) + \".DisplayType\"\r\n          ] == event.newVal[i].type.value\r\n        ) {\r\n          tableData[i].label.value =\r\n            vm.apiData.configData[\r\n              \"Config.Indoor.PAGE1AREA\" + (i + 1) + \".LABEL\"\r\n            ];\r\n        } else {\r\n          homepageTableData[i].label.value = getOptionsByLabel(\r\n            vm,\r\n            getAreaTypeByKey(homepageTableData[i].type.value, vm)\r\n          );\r\n          vm.changedCfgData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".LABEL\"] =\r\n            homepageTableData[i].label.value;\r\n        }\r\n        if (\r\n          vm.apiData.configData[\r\n            \"Config.Indoor.PAGE1AREA\" + (i + 1) + \".DisplayType\"\r\n          ] == event.newVal[i].type.value\r\n        ) {\r\n          homepageTableData[i].value.value =\r\n            vm.apiData.configData[\r\n              \"Config.Indoor.PAGE1AREA\" + (i + 1) + \".Value\"\r\n            ];\r\n        } else {\r\n          homepageTableData[i].value.value = \"\";\r\n          vm.changedCfgData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".Value\"] =\r\n            \"\";\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //morepage\r\n  let morepageItem = getItemByKey(vm.data, \"morepage\", \"morepage\");\r\n  let morepageTableData = morepageItem.tableData;\r\n  for (let i = 0; i < morepageTableData.length; i++) {\r\n    //type是否相同\r\n    morepageTableData[i].type.isWarn = false;\r\n    for (let j = 0; j < morepageTableData.length; j++) {\r\n      if (\r\n        i != j &&\r\n        morepageTableData[j].type.value == morepageTableData[i].type.value &&\r\n        morepageTableData[j].type.value !=\r\n          getAreaTypeByLabel(\"Custom APK\", vm) &&\r\n        morepageTableData[j].type.value != getAreaTypeByLabel(\"Browser\", vm) &&\r\n        morepageTableData[j].type.value != getAreaTypeByLabel(\"N/A\", vm)\r\n      ) {\r\n        morepageTableData[i].type.isWarn = true;\r\n        morepageTableData[j].type.isWarn = true;\r\n      }\r\n    }\r\n    //icon显示与否\r\n    if (morepageTableData[i].type.value == getAreaTypeByLabel(\"DND\", vm)) {\r\n      morepageTableData[i].icon.isShow = false;\r\n    } else {\r\n      morepageTableData[i].icon.isShow = true;\r\n    }\r\n    //label是否禁用\r\n    if (\r\n      morepageTableData[i].type.value == getAreaTypeByLabel(\"DND\", vm) ||\r\n      morepageTableData[i].type.value == getAreaTypeByLabel(\"Unlock\", vm)\r\n    ) {\r\n      morepageTableData[i].label.disabled = true;\r\n    } else {\r\n      morepageTableData[i].label.disabled = false;\r\n    }\r\n    //value是否禁用\r\n    if (\r\n      morepageTableData[i].type.value == getAreaTypeByLabel(\"Custom APK\", vm) ||\r\n      morepageTableData[i].type.value == getAreaTypeByLabel(\"Browser\", vm)\r\n    ) {\r\n      morepageTableData[i].value.disabled = false;\r\n    } else {\r\n      morepageTableData[i].value.disabled = true;\r\n    }\r\n    //value值的input和select框变换\r\n    if (\r\n      morepageTableData[i].type.value == getAreaTypeByLabel(\"Custom APK\", vm)\r\n    ) {\r\n      morepageTableData[i].value.itemType = \"select\";\r\n      morepageTableData[i].value.disabled = false;\r\n      morepageTableData[i].value.isWarn=false;\r\n    } else {\r\n      morepageTableData[i].value.itemType = \"input\";\r\n      morepageTableData[i].value.isWarn=false;\r\n    }\r\n\r\n    //type变化时label值更新，value值更新\r\n    if (\r\n      \"undefined\" != typeof event &&\r\n      event.itemKey == \"morepage\" &&\r\n      event.contentKey == \"morepage\"\r\n    ) {\r\n      if (event.newVal[i].type.value != event.oldVal[i].type.value) {\r\n        if (\r\n          vm.apiData.configData[\r\n            \"Config.Indoor.PAGE2AREA\" + (i + 1) + \".LABEL\"\r\n          ] != \"\" &&\r\n          vm.apiData.configData[\r\n            \"Config.Indoor.PAGE2AREA\" + (i + 1) + \".DisplayType\"\r\n          ] == event.newVal[i].type.value\r\n        ) {\r\n          morepageTableData[i].label.value =\r\n            vm.apiData.configData[\r\n              \"Config.Indoor.PAGE2AREA\" + (i + 1) + \".LABEL\"\r\n            ];\r\n        } else {\r\n          morepageTableData[i].label.value = getOptionsByLabel(\r\n            vm,\r\n            getAreaTypeByKey(morepageTableData[i].type.value, vm)\r\n          );\r\n          vm.changedCfgData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".LABEL\"] =\r\n            morepageTableData[i].label.value;\r\n        }\r\n        if (\r\n          vm.apiData.configData[\r\n            \"Config.Indoor.PAGE2AREA\" + (i + 1) + \".DisplayType\"\r\n          ] == event.newVal[i].type.value\r\n        ) {\r\n          morepageTableData[i].value.value =\r\n            vm.apiData.configData[\r\n              \"Config.Indoor.PAGE2AREA\" + (i + 1) + \".Value\"\r\n            ];\r\n        } else {\r\n          morepageTableData[i].value.value = \"\";\r\n          vm.changedCfgData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".Value\"] =\r\n            \"\";\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //wall papaer\r\n  let wallPaperFileItem = getItemByKey(\r\n    vm.data,\r\n    \"wallpaper\",\r\n    \"Config.Settings.LOGO.Wallpaper\"\r\n  );\r\n  wallPaperFileItem.delDisabled = false;\r\n  let wallpaperDefaultPicture = vm.apiData.data.wallpaperDefaultFiles.split(\"\\n\");\r\n  for (let i = 0; i < wallpaperDefaultPicture.length; i++) {\r\n    var wallpaperPicture = vm.apiData.data.wallpaperPath + \"default/\" +wallpaperDefaultPicture[i];\r\n    if(wallPaperFileItem.value == wallpaperPicture){\r\n      wallPaperFileItem.delDisabled = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nfunction getAreaTypeByLabel(label, vm) {\r\n  let types = vm.apiData.data.Page1DisplayTypes;\r\n  for (let i = 0; i < types.length; i++) {\r\n    if (types[i].label == label) {\r\n      return types[i].key;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\nfunction getAreaTypeByKey(key, vm) {\r\n  let types = vm.apiData.data.Page1DisplayTypes;\r\n  for (let i = 0; i < types.length; i++) {\r\n    if (types[i].key == key) {\r\n      return types[i].label;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\nfunction submitData(vm) {\r\n  vm.data.submitLoading = true;\r\n\r\n  let requestData = {\r\n    target: \"phoneDisplaySetting\",\r\n    action: \"set\",\r\n    configData: vm.submitCfgData,\r\n  };\r\n  vm.$axios.post(\"api\", requestData).then((response) => {\r\n    if (\"undefined\" != typeof response) {\r\n      showRequestSuccess(vm);\r\n    }\r\n    vm.data.submitLoading = false;\r\n  });\r\n}\r\n\r\nfunction getData(vm) {\r\n  vm.$axios.get(\"api/phoneDisplaySetting/info\").then((response) => {\r\n    vm.getDataSuccess = true;\r\n    vm.apiData = response.data;\r\n    vm.changedCfgData = deepClone(response.data.configData);\r\n    createPageData(vm);\r\n    handlerPageChanged(vm);\r\n  });\r\n}\r\n\r\nfunction getCommitData(vm) {\r\n  vm.submitCfgData = {};\r\n  for (var changedKey in vm.changedCfgData) {\r\n    if ( (vm.apiData.configData[changedKey] != vm.changedCfgData[changedKey]) || changedKey == \"Config.Settings.LOGO.Wallpaper\") {\r\n      vm.submitCfgData[changedKey] = vm.changedCfgData[changedKey];\r\n    }\r\n  }\r\n}\r\n\r\nfunction checkCommitData(vm) {\r\n  return checkHomepageData(vm) && checkMorepageData(vm);\r\n}\r\n\r\nfunction checkMorepageData(vm) {\r\n  let success = true;\r\n  let item = getItemByKey(vm.data, \"morepage\", \"morepage\");\r\n  let tableData = item.tableData;\r\n  for (let i = 0; i < tableData.length; i++) {\r\n    //type是否相同\r\n    for (let j = 0; j < tableData.length; j++) {\r\n      if (\r\n        i != j &&\r\n        tableData[j].type.value == tableData[i].type.value &&\r\n        tableData[j].type.value != getAreaTypeByLabel(\"Custom APK\", vm) &&\r\n        tableData[j].type.value != getAreaTypeByLabel(\"Browser\", vm) &&\r\n        tableData[j].type.value != getAreaTypeByLabel(\"N/A\", vm)\r\n      ) {\r\n        success = false;\r\n      }\r\n    }\r\n    if(tableData[i].type.value == getAreaTypeByLabel(\"Custom APK\", vm) ||\r\n        tableData[i].type.value == getAreaTypeByLabel(\"Browser\", vm)\r\n      ){\r\n        if(tableData[i].value.value == \"\"){\r\n          tableData[i].value.isWarn = true;\r\n          success = false;\r\n        }\r\n      }\r\n  }\r\n  return success;\r\n}\r\n\r\nfunction checkHomepageData(vm) {\r\n  let success = true;\r\n  let item = getItemByKey(vm.data, \"homepage\", \"homepage\");\r\n  let tableData = item.tableData;\r\n  for (let i = 0; i < tableData.length; i++) {\r\n    //type是否相同\r\n    for (let j = 0; j < tableData.length; j++) {\r\n      if (\r\n        i != j &&\r\n        tableData[j].type.value == tableData[i].type.value &&\r\n        tableData[j].type.value != getAreaTypeByLabel(\"Custom APK\", vm) &&\r\n        tableData[j].type.value != getAreaTypeByLabel(\"Browser\", vm) &&\r\n        tableData[j].type.value != getAreaTypeByLabel(\"N/A\", vm)\r\n      ) {\r\n        success = false;\r\n      }\r\n    }\r\n\r\n    if(tableData[i].type.value == getAreaTypeByLabel(\"Custom APK\", vm) ||\r\n        tableData[i].type.value == getAreaTypeByLabel(\"Browser\", vm)\r\n    ){\r\n      if(tableData[i].value.value == \"\"){\r\n        tableData[i].value.isWarn = true;\r\n        success = false;\r\n      }\r\n    }\r\n  }\r\n  return success;\r\n}\r\n\r\nfunction createSelectItems(vm) {\r\n  //apklist\r\n  vm.appSelectItems = [];\r\n  let appItems = vm.apiData.data.apkList.split(\"&\");\r\n  if (vm.apiData.data.apkList == \"null\") {\r\n    vm.appSelectItems.push({ key: \"\", label: \"\" });\r\n  } else {\r\n    for (let i = 0; i < appItems.length; i++) {\r\n      if (appItems[i].length == 0) {\r\n        continue;\r\n      }\r\n      let arr = appItems[i].split(\"=\");\r\n      var selectItem = {\r\n        key: arr[1],\r\n        label: arr[0],\r\n      };\r\n      vm.appSelectItems.push(selectItem);\r\n    }\r\n  }\r\n\r\n  //page1 type select items\r\n  vm.typeItems = [];\r\n  let types = vm.apiData.data.Page1DisplayTypes;\r\n  for (let i = 0; i < types.length-1; i++) {\r\n    let item = {\r\n      key: types[i].key,\r\n      label: getOptionsByLabel(vm, types[i].label),\r\n    };\r\n    vm.typeItems.push(item);\r\n  }\r\n\r\n  //page2 type select items\r\n  vm.type2Items = [];\r\n  let types2 = vm.apiData.data.Page1DisplayTypes;\r\n  for (let i = 0; i < types2.length; i++) {\r\n    let item = {\r\n      key: types[i].key,\r\n      label: getOptionsByLabel(vm, types[i].label),\r\n    };\r\n    vm.type2Items.push(item);\r\n  }\r\n\r\n  //screen picture\r\n  vm.screenSaverVideoItems = [];\r\n  vm.screenSaverPictureItems = [];\r\n  let screenSaver = vm.apiData.data.screenSaverFiles.split(\"\\n\");\r\n  for (let i = 0; i < screenSaver.length; i++) {\r\n    if (screenSaver[i] != \"\") {\r\n      let item = {\r\n        key: screenSaver[i],\r\n        label: screenSaver[i],\r\n      };\r\n      if (\r\n        checkFileFormat(screenSaver[i], \".JPG\", 4) ||\r\n        checkFileFormat(screenSaver[i], \".JPEG\", 5) ||\r\n        checkFileFormat(screenSaver[i], \".PNG\", 4)\r\n      ) {\r\n        vm.screenSaverPictureItems.push(item);\r\n      } else if (\r\n        checkFileFormat(screenSaver[i], \".MP4\", 4) ||\r\n        checkFileFormat(screenSaver[i], \".WMV\", 4) ||\r\n        checkFileFormat(screenSaver[i], \".AVI\", 4)\r\n      ) {\r\n        vm.screenSaverVideoItems.push(item);\r\n      }\r\n    }\r\n  }\r\n  //screen saver types\r\n  vm.screenSaverTypeItems = [];\r\n  if (vm.apiData.configData[\"Config.DoorSetting.CONNECT.ServerMode\"] == 1) {\r\n    vm.screenSaverTypeItems.push({ key: 0, label: vm.$t(\"SDMC\") });\r\n    vm.screenSaverTypeItems.push({ key: 2, label: vm.$t(\"SDMCLocalPictures\") });\r\n  }\r\n  vm.screenSaverTypeItems.push({ key: 1, label: vm.$t(\"LocalPictures\") });\r\n  vm.screenSaverTypeItems.push({ key: 6, label: vm.$t(\"Clock\") });\r\n  if (vm.apiData.data.hasAkFace != \"\") {\r\n    if (vm.apiData.configData[\"Config.DoorSetting.CONNECT.ServerMode\"] == 1) {\r\n      vm.screenSaverTypeItems.push({ key: 3, label: vm.$t(\"SDMCVideos\") });\r\n      vm.screenSaverTypeItems.push({ key: 5, label: vm.$t(\"SDMCLocalVideos\") });\r\n    }\r\n    vm.screenSaverTypeItems.push({ key: 4, label: vm.$t(\"LocalVideos\") });\r\n  }\r\n  //wallpaper files\r\n  vm.wallpaperFileItemsCall = [];\r\n  vm.wallpaperFileItems = [];\r\n  let wallpeperDefaultFiles = vm.apiData.data.wallpaperDefaultFiles.split(\"\\n\");\r\n  for (let i = 0; i < wallpeperDefaultFiles.length; i++) {\r\n    let item = {\r\n      key: vm.apiData.data.wallpaperPath + \"default/\" + wallpeperDefaultFiles[i],\r\n      label: wallpeperDefaultFiles[i],\r\n    };\r\n    if (wallpeperDefaultFiles[i] != \"\") {\r\n      vm.wallpaperFileItems.push(item);\r\n      if (!(wallpeperDefaultFiles[i] == \"1.jpg\" || wallpeperDefaultFiles[i] == \"4.jpg\")) {\r\n        vm.wallpaperFileItemsCall.push(item);\r\n      } \r\n    } \r\n  }\r\n  let wallpeperFiles = vm.apiData.data.wallpaperFiles.split(\"\\n\");\r\n  for (let i = 0; i < wallpeperFiles.length; i++) {\r\n    if (wallpeperFiles[i] != \"\" && \r\n      (checkFileFormat(wallpeperFiles[i], \".PNG\", 4) ||\r\n          checkFileFormat(wallpeperFiles[i], \".JPG\", 4) ||\r\n          checkFileFormat(wallpeperFiles[i], \".JPEG\", 5))) {\r\n      let item = {\r\n        key: vm.apiData.data.wallpaperPath + wallpeperFiles[i],\r\n        label: wallpeperFiles[i],\r\n      };\r\n      vm.wallpaperFileItems.push(item);\r\n      vm.wallpaperFileItemsCall.push(item);\r\n    }\r\n  }\r\n}\r\n\r\nfunction createPageData(vm) {\r\n  vm.data = {\r\n    getDataSuccess: true,\r\n    breadCrumb: {\r\n      firstTitle: vm.$t(\"Phone\"),\r\n      secondTitle: vm.$t(\"DisplaySetting\"),\r\n    },\r\n    onSubmit: function () {\r\n      if (!checkCommitData(vm)) {\r\n        return;\r\n      }\r\n      getCommitData(vm);\r\n      submitData(vm);\r\n    },\r\n    onCancel: function () {\r\n      vm.data.cancelLoading = true;\r\n      getData(vm);\r\n    },\r\n    submitLoading: false,\r\n    cancelLoading: false,\r\n    contents: [],\r\n  };\r\n\r\n  createSelectItems(vm);\r\n\r\n  vm.data.contents.push(createThemeContent(vm));\r\n  vm.data.contents.push(createHomepageContent(vm));\r\n  vm.data.contents.push(createMorepageContent(vm));\r\n  vm.data.contents.push(createScreenSaverContent(vm));\r\n  vm.data.contents.push(createWallpapaerContent(vm));\r\n  vm.data.contents.push(createBootLogoContent(vm));\r\n}\r\n\r\nfunction createThemeContent(vm) {\r\n  let content = {\r\n    key: \"themeSetting\",\r\n    title: vm.$t(\"ThemeLabel\"),\r\n    titleDescription: vm.$t(\"ThemeSettingDesc\"),\r\n    items: [\r\n      {\r\n        title: vm.$t(\"ThemeLabel\"),\r\n        type: \"select\",\r\n        key: \"Config.Settings.DISPLAYSTYLE.IdleStyle\",\r\n        value: vm.apiData.configData[\"Config.Settings.DISPLAYSTYLE.IdleStyle\"] == \"\" ? 4 :\r\n          vm.apiData.configData[\"Config.Settings.DISPLAYSTYLE.IdleStyle\"],\r\n        selectItems: [\r\n          { key: 4, label: \"Default\" },\r\n          { key: 5, label: \"Call List\" },\r\n        ],\r\n        description: vm.$t(\"ThemeSettingDesc\"),\r\n      },\r\n    ],\r\n  };\r\n  return content;\r\n}\r\n\r\nfunction createBootLogoContent(vm) {\r\n  let content = {\r\n    key: \"bootLogo\",\r\n    title: vm.$t(\"BootLogo\"),\r\n    titleDescription: vm.$t(\"BootLogoDesc\"),\r\n    items: [\r\n      {\r\n        title: vm.$t(\"BootLogo\"),\r\n        type: \"file-input\",\r\n        key: \"bootLogoUpload\",\r\n        acceptFileType: \".zip,.png\",\r\n        modalTitle: vm.$t(\"BootLogoFormat1280\"),\r\n        loading: false,\r\n        value: {\r\n          fileData: {},\r\n          fileName: vm.$t(\"UpgradeFilePath\"),\r\n        },\r\n        importBtnName: vm.$t(\"Import\"),\r\n        modalConfirmName: vm.$t(\"Upload\"),\r\n        imgResolutionWidth: 1280,\r\n        imgResolutionHeight: 800,\r\n        uploadFunction: function () {\r\n          uploadFile(vm, \"bootLogo\", \"bootLogoUpload\");\r\n        },\r\n        isShowExport: true,\r\n        exportBtnName: vm.$t(\"Reset\"),\r\n        exportBtnIcon: \"iconreset\",\r\n        onExport: function () {\r\n          onDelFile(vm, \"\", \"bootLogo\", \"bootLogoUpload\");\r\n        },\r\n        description: vm.$t(\"BootLogoDesc\"),\r\n      },\r\n    ],\r\n  };\r\n  return content;\r\n}\r\n\r\nfunction createWallpapaerContent(vm) {\r\n  let content = {\r\n    key: \"wallpaper\",\r\n    title: vm.$t(\"Wallpaper\"),\r\n    titleDescription: vm.$t(\"WallpaperDesc\"),\r\n    items: [\r\n      {\r\n        title: vm.$t(\"Wallpaper\"),\r\n        type: \"file-input\",\r\n        key: \"wallpaperUpload\",\r\n        acceptFileType: \".jpg,.jpeg,.png\",\r\n        modalTitle: vm.$t(\"WallpaperFormat1280\"),\r\n        loading: false,\r\n        value: {\r\n          fileData: {},\r\n          fileName: vm.$t(\"UpgradeFilePath\"),\r\n        },\r\n        importBtnName: vm.$t(\"Import\"),\r\n        modalConfirmName: vm.$t(\"Upload\"),\r\n        imgResolutionWidth: 1280,\r\n        imgResolutionHeight: 800,\r\n        uploadFunction: function () {\r\n          uploadFile(vm, \"wallpaper\", \"wallpaperUpload\");\r\n        },\r\n        description: vm.$t(\"WallpaperDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"WallpaperFiles\"),\r\n        type: \"select\",\r\n        key: \"Config.Settings.LOGO.Wallpaper\",\r\n        value: vm.apiData.configData[\"Config.Settings.LOGO.Wallpaper\"],\r\n        selectItems: vm.wallpaperFileItems,\r\n        showBtn: true,\r\n        onDel: function (value) {\r\n          if (value != \"\") {\r\n            onDelFile(vm, value, \"wallpaper\", \"wallpaperDel\");\r\n          }\r\n        },\r\n        loading: false,\r\n        delDisabled: false,\r\n        description: vm.$t(\"WallpaperFileDesc\"),\r\n      },\r\n    ],\r\n  };\r\n  return content;\r\n}\r\n\r\nfunction createScreenSaverContent(vm) {\r\n  let content = {\r\n    key: \"screenSaver\",\r\n    title: vm.$t(\"ScreenSaverSetting\"),\r\n    titleDescription: vm.$t(\"ScreenSettingDesc\"),\r\n    items: [\r\n      {\r\n        title: vm.$t(\"ScreenSaverPictures\"),\r\n        type: \"file-input\",\r\n        key: \"screenSaverPicture\",\r\n        acceptFileType: \".jpg,.png,.jpeg\",\r\n        modalTitle: vm.$t(\"ScreenSaverFormat\"),\r\n        loading: false,\r\n        value: {\r\n          fileData: {},\r\n          fileName: vm.$t(\"UpgradeFilePath\"),\r\n        },\r\n        importBtnName: vm.$t(\"Import\"),\r\n        modalConfirmName: vm.$t(\"Upload\"),\r\n        uploadFunction: function () {\r\n          uploadFile(vm, \"screenSaver\", \"screenSaverPicture\");\r\n        },\r\n        maxSize: 2 * 1024 * 1024,\r\n        description: vm.$t(\"ScreenPictureDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"ScreenSaverVideos\"),\r\n        isHide: vm.apiData.data.hasAkFace == \"\",\r\n        type: \"file-input\",\r\n        key: \"screenSaverVideo\",\r\n        acceptFileType: \".mp4,.wmv,.avi\",\r\n        modalTitle: vm.$t(\"ScreenSaverVideoFormat\"),\r\n        loading: false,\r\n        value: {\r\n          fileData: {},\r\n          fileName: vm.$t(\"UpgradeFilePath\"),\r\n        },\r\n        importBtnName: vm.$t(\"Import\"),\r\n        modalConfirmName: vm.$t(\"Upload\"),\r\n        uploadFunction: function () {\r\n          uploadFile(vm, \"screenSaver\", \"screenSaverVideo\");\r\n        },\r\n        maxSize: 500 * 1024 * 1024,\r\n        description: vm.$t(\"ScreenVideoDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"PictureFiles\"),\r\n        type: \"select\",\r\n        key: \"pictureFile\",\r\n        value: \r\n          vm.screenSaverPictureItems.length == 0\r\n            ? \"\"\r\n            : vm.screenSaverPictureItems[0].key,\r\n        selectItems: vm.screenSaverPictureItems,\r\n        showBtn: true,\r\n        onDel: function (value) {\r\n          if (value != \"\") {\r\n            onDelFile(vm, value, \"screenSaver\", \"pictureFile\");\r\n          }\r\n        },\r\n        loading: false,\r\n        delDisabled: vm.screenSaverPictureItems.length <= 2,\r\n        description: vm.$t(\"PictureFileDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"VideoFiles\"),\r\n        isHide: vm.apiData.data.hasAkFace == \"\",\r\n        type: \"select\",\r\n        key: \"videoFile\",\r\n        value:\r\n          vm.screenSaverVideoItems.length == 0\r\n            ? \"\"\r\n            : vm.screenSaverVideoItems[0].key,\r\n        selectItems: vm.screenSaverVideoItems,\r\n        showBtn: true,\r\n        onDel: function (value) {\r\n          if (value != \"\") {\r\n            onDelFile(vm, value, \"screenSaver\", \"videoFile\");\r\n          }\r\n        },\r\n        loading: false,\r\n        delDisabled: vm.screenSaverVideoItems.length == 0,\r\n        description: vm.$t(\"VideoFileDesc\"),\r\n      },\r\n      {\r\n        title: vm.$t(\"ScreenSaverType\"),\r\n        type: \"select\",\r\n        key: \"Config.Settings.SCREENSAVER.ScreesaverType\",\r\n        value:\r\n          vm.apiData.configData[\"Config.Settings.SCREENSAVER.ScreesaverType\"],\r\n        selectItems: vm.screenSaverTypeItems,\r\n        description: vm.$t(\"ScreenSaverTypeDesc\"),\r\n      },\r\n    ],\r\n  };\r\n  return content;\r\n}\r\n\r\nfunction createMorepageContent(vm) {\r\n  //table data\r\n  let tableData = [];\r\n  for (let i = 0; i < vm.apiData.data.page2Num; i++) {\r\n    let item = {\r\n      key: i,\r\n      area: vm.$t(\"Area\") + (i + 1),\r\n      type: {\r\n        value:\r\n          vm.apiData.configData[\r\n            \"Config.Indoor.PAGE2AREA\" + (i + 1) + \".DisplayType\"\r\n          ],\r\n        isWarn: false,\r\n        warnLabel: vm.$t(\"PleaseCheckMultiplicity\"),\r\n      },\r\n      value: {\r\n        value:\r\n          vm.apiData.configData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".Value\"],\r\n        isWarn: false,\r\n        warnLabel: vm.$t(\"WarnInvaildEmptyError\"),\r\n        disabled: true,\r\n        itemType: \"input\",\r\n      },\r\n      label: {\r\n        value:\r\n          vm.apiData.configData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".LABEL\"],\r\n        isWarn: false,\r\n        warnLabel: \"\",\r\n        disabled: false,\r\n      },\r\n      icon: {\r\n        fileData: {},\r\n        // fileName: vm.$t(\"UpgradeFilePath\"),\r\n        fileName: vm.apiData.configData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".ICON\"] == \"\" ? vm.$t(\"UpgradeFilePath\"): vm.apiData.configData[\"Config.Indoor.PAGE2AREA\" + (i + 1) + \".ICON\"],\r\n        isShow: true,\r\n      },\r\n    };\r\n    tableData.push(item);\r\n  }\r\n  //content\r\n  let content = {\r\n    key: \"morepage\",\r\n    title: vm.$t(\"Page2Display\"),\r\n    titleDescription: vm.$t(\"MorePageDisplayDesc\"),\r\n    showExample: true,\r\n    imgName: \"more_page_default.png\",\r\n    items: [\r\n      {\r\n        type: \"table\",\r\n        key: \"morepage\",\r\n        tableData: tableData,\r\n        tableColumns: [\r\n          {\r\n            type: \"label\",\r\n            title: vm.$t(\"Area\"),\r\n            dataIndex: \"area\",\r\n            scopedSlots: { customRender: \"area\" },\r\n            align: \"center\",\r\n            width: \"11%\",\r\n          },\r\n          {\r\n            type: \"select\",\r\n            title: vm.$t(\"Type\"),\r\n            dataIndex: \"type\",\r\n            scopedSlots: { customRender: \"type\" },\r\n            selectItems: vm.type2Items,\r\n            align: \"center\",\r\n            width: \"18%\",\r\n          },\r\n          {\r\n            type: \"input\",\r\n            title: vm.$t(\"Value\"),\r\n            dataIndex: \"value\",\r\n            scopedSlots: { customRender: \"value\" },\r\n            align: \"center\",\r\n            width: \"18%\",\r\n            maxLength: 127,\r\n            selectItems: vm.appSelectItems,\r\n          },\r\n          {\r\n            type: \"input\",\r\n            title: vm.$t(\"Label\"),\r\n            dataIndex: \"label\",\r\n            scopedSlots: { customRender: \"label\" },\r\n            align: \"center\",\r\n            width: \"18%\",\r\n            maxLength: 127,\r\n          },\r\n          {\r\n            type: \"file-input\",\r\n            title: vm.$t(\"IconLabel\") + \"(\" + vm.$t(\"MaxIconSize\") + \":100*100)\",\r\n            dataIndex: \"icon\",\r\n            scopedSlots: { customRender: \"icon\" },\r\n            align: \"center\",\r\n            width: \"35%\",\r\n            btnName: vm.$t(\"DeleteLabel\"),\r\n            acceptFileType: \".jpg,.png,.jpeg\",\r\n            upload: function (fileData, index) {\r\n              return uploadIcon(fileData, index, vm);\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n  };\r\n  return content;\r\n}\r\n\r\nfunction createHomepageContent(vm) {\r\n  //data\r\n  let tableData = [];\r\n  for (let i = 0; i < vm.apiData.data.page1Num; i++) {\r\n    let item = {\r\n      key: i,\r\n      area: vm.$t(\"Area\") + (i + 1),\r\n      type: {\r\n        value:\r\n          vm.apiData.configData[\r\n            \"Config.Indoor.PAGE1AREA\" + (i + 1) + \".DisplayType\"\r\n          ],\r\n        isWarn: false,\r\n        warnLabel: vm.$t(\"PleaseCheckMultiplicity\"),\r\n      },\r\n      value: {\r\n        value:\r\n          vm.apiData.configData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".Value\"],\r\n        isWarn: false,\r\n        warnLabel: vm.$t(\"WarnInvaildEmptyError\"),\r\n        disabled: true,\r\n        itemType: \"input\",\r\n      },\r\n      label: {\r\n        value:\r\n          vm.apiData.configData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".LABEL\"],\r\n        isWarn: false,\r\n        warnLabel: \"\",\r\n        disabled: false,\r\n      },\r\n      icon: {\r\n        fileData: {},\r\n        fileName: vm.$t(\"UpgradeFilePath\"),\r\n        fileName: vm.apiData.configData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".ICON\"] == \"\" ? vm.$t(\"UpgradeFilePath\"): vm.apiData.configData[\"Config.Indoor.PAGE1AREA\" + (i + 1) + \".ICON\"],\r\n        isShow: true,\r\n      },\r\n    };\r\n    tableData.push(item);\r\n  }\r\n  //content\r\n  let content = {\r\n    key: \"homepage\",\r\n    title: vm.$t(\"Page1Display\"),\r\n    titleDescription: vm.$t(\"HomePageDisplayDesc\"),\r\n    showExample: true,\r\n    imgName: \"home_page_default.png\",\r\n    items: [\r\n      {\r\n        type: \"table\",\r\n        key: \"homepage\",\r\n        tableData: tableData,\r\n        tableColumns: [\r\n          {\r\n            type: \"label\",\r\n            title: vm.$t(\"Area\"),\r\n            dataIndex: \"area\",\r\n            scopedSlots: { customRender: \"area\" },\r\n            align: \"center\",\r\n            width: \"11%\",\r\n          },\r\n          {\r\n            type: \"select\",\r\n            title: vm.$t(\"Type\"),\r\n            dataIndex: \"type\",\r\n            scopedSlots: { customRender: \"type\" },\r\n            selectItems: vm.typeItems,\r\n            align: \"center\",\r\n            width: \"18%\",\r\n          },\r\n          {\r\n            type: \"input\",\r\n            title: vm.$t(\"Value\"),\r\n            dataIndex: \"value\",\r\n            scopedSlots: { customRender: \"value\" },\r\n            align: \"center\",\r\n            width: \"18%\",\r\n            maxLength: 127,\r\n            selectItems: vm.appSelectItems,\r\n          },\r\n          {\r\n            type: \"input\",\r\n            title: vm.$t(\"Label\"),\r\n            dataIndex: \"label\",\r\n            scopedSlots: { customRender: \"label\" },\r\n            align: \"center\",\r\n            width: \"18%\",\r\n            maxLength: 127,\r\n          },\r\n          {\r\n            type: \"file-input\",\r\n            title: vm.$t(\"IconLabel\") + \"(\" + vm.$t(\"MaxIconSize\") + \":100*100)\",\r\n            dataIndex: \"icon\",\r\n            scopedSlots: { customRender: \"icon\" },\r\n            align: \"center\",\r\n            width: \"35%\",\r\n            btnName: vm.$t(\"DeleteLabel\"),\r\n            acceptFileType: \".jpg,.png,.jpeg\",\r\n            upload: function (fileData, index) {\r\n              return uploadIcon(fileData, index, vm);\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n  };\r\n  return content;\r\n}\r\n\r\nfunction uploadIcon(fileData, index, vm) {\r\n  let fileName = fileData.name;\r\n  if (fileName == \"\" || fileName == vm.$t(\"UpgradeFilePath\")) {\r\n    showErrorInfo(vm, vm.$t(\"FileEmptyWarning\"));\r\n    return;\r\n  }\r\n\r\n  //确认图片分辨率\r\n  var reader = new FileReader();\r\n  reader.readAsDataURL(fileData);\r\n  reader.onload = function () {\r\n    var img = new Image();\r\n    img.src = reader.result;\r\n    img.onload = function () {\r\n      //分辨率超出\r\n      if (img.width > 100 || img.height > 100) {\r\n        showErrorInfo(vm, vm.$t(\"ImageResolutionErr\"));\r\n        let item = getItemByKey(vm.data, \"homepage\", \"homepage\");\r\n        item.tableData[index].icon = {\r\n          fileData: {},\r\n          fileName: vm.$t(\"UpgradeFilePath\"),\r\n        };\r\n        return;\r\n      }\r\n      //正常上传\r\n      const upData = new FormData();\r\n      upData.append(\"file\", fileData);\r\n      axios\r\n        .post(\"api/phoneDisplaySetting/upload?type=areaIcon\", upData, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        })\r\n        .then((res) => {});\r\n    };\r\n    img.onerror = function () {\r\n      //图片加载错误\r\n      showErrorInfo(vm, vm.$t(\"FileFormatWarning\"));\r\n      let item = getItemByKey(vm.data, \"homepage\", \"homepage\");\r\n      item.tableData[index].icon = {\r\n        fileData: {},\r\n        fileName: vm.$t(\"UpgradeFilePath\"),\r\n      };\r\n    };\r\n  };\r\n}\r\n\r\nfunction uploadFile(vm, contentKey, itemKey) {\r\n  let item = getItemByKey(vm.data, contentKey, itemKey);\r\n  let fileName = item.value.fileName;\r\n  if (fileName == \"\" || fileName == vm.$t(\"UpgradeFilePath\")) {\r\n    showErrorInfo(vm, vm.$t(\"FileEmptyWarning\"));\r\n    return;\r\n  }\r\n  let confirmText = vm.$t(\"ImportWallpaperWarning\");\r\n  if (contentKey == \"screenSaver\") {\r\n    confirmText = vm.$t(\"ImportScreenSaverWarning\");\r\n  } else if (contentKey == \"bootLogo\") {\r\n    confirmText = vm.$t(\"UploadLogoWarning\");\r\n  }\r\n  item.visible = true;\r\n  if (confirm(confirmText)) {\r\n    //上传\r\n    item.loading = true;\r\n    const upData = new FormData();\r\n    upData.append(\"file\", item.value.fileData);\r\n    let apiUrl = \"api/phoneDisplaySetting/upload?type=\" + itemKey;\r\n    if (itemKey == \"bootLogoUpload\") {\r\n      apiUrl +=\r\n        \"&width=\" +\r\n        item.value.fileData.width +\r\n        \"&height=\" +\r\n        item.value.fileData.height;\r\n    }\r\n    axios\r\n      .post(apiUrl, upData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      })\r\n      .then((res) => {\r\n        if (res.data.retcode == -1) {\r\n          showErrorInfo(vm, vm.$t(\"FileUploadFailedWarning\"));\r\n        } else if (res.data.retcode == 0) {\r\n          getData(vm);\r\n          showRequestSuccess(vm, vm.$t(\"UploadFileFinished\"));\r\n          item.visible = false;\r\n          item.value.fileName = vm.$t(\"UpgradeFilePath\");\r\n          item.value.fileData = {};\r\n        }\r\n        item.loading = false;\r\n      });\r\n  }\r\n}\r\n\r\nfunction onDelFile(vm, value, contentKey, itemKey) {\r\n  let realItemKey =\r\n    itemKey == \"wallpaperDel\" ? \"Config.Settings.LOGO.Wallpaper\" : itemKey;\r\n  let requestData = {\r\n    target: \"phoneDisplaySetting\",\r\n    action: \"del\",\r\n    data: {\r\n      fileName: value,\r\n      type: itemKey,\r\n    },\r\n  };\r\n  if (itemKey == \"bootLogoUpload\") {\r\n    if (!confirm(vm.$t(\"DeleteLogoConfirm\"))) {\r\n      return;\r\n    }\r\n  } else {\r\n    if (!confirm(vm.$t(\"DeleteSelectedConfirm\"))) {\r\n      return;\r\n    }\r\n  }\r\n  getItemByKey(vm.data, contentKey, realItemKey).loading = true;\r\n  vm.$axios.post(\"api\", requestData).then((response) => {\r\n    getItemByKey(vm.data, contentKey, realItemKey).loading = false;\r\n    getData(vm);\r\n    showRequestSuccess(vm);\r\n  });\r\n}\r\n</script>"]}]}