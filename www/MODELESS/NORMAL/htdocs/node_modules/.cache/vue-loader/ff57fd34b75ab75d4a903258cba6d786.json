{"remainingRequest":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\UpgradeAdvanced.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\src\\views\\UpgradeAdvanced.vue","mtime":1625716251138},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\babel-loader\\lib\\index.js","mtime":1624613260275},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624613261239},{"path":"E:\\workspace\\resources\\www\\MODELESS\\NORMAL\\htdocs\\node_modules\\vue-loader\\lib\\index.js","mtime":1624613274496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ29tbW9uUGFnZSBmcm9tICJAL2NvbXBvbmVudHMvQ29tbW9uUGFnZS52dWUiOw0KaW1wb3J0IHsNCiAgc2hvd1JlcXVlc3RTdWNjZXNzLA0KICBkZWVwQ2xvbmUsDQogIGdldEluZGV4QnlLZXksDQogIGdldEl0ZW1CeUtleSwNCiAgY2hlY2tSYW5nZU9mTnVtYmVyLA0KICBub3RDb250YWluSW52YWxpZCwNCiAgaXNIb3VyLA0KICBpc01pbnV0ZU9yU2VjLA0KICBjaGVja0ZpbGVTaXplLA0KfSBmcm9tICJAL2pzL2NvbW1vbi5qcyI7DQppbXBvcnQgeyBjaGVja0ZpbGVGb3JtYXQsIHNob3dFcnJvckluZm8gfSBmcm9tICIuLi9qcy9jb21tb24iOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBDb21tb25QYWdlLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBjaGFuZ2VkQ2ZnRGF0YToge30sDQogICAgICBzdWJtaXRDZmdEYXRhOiB7fSwNCiAgICAgIHN1Ym1pdERhdGE6IHt9LA0KICAgICAgYXBpRGF0YToge30sDQogICAgICBkYXRhOiB7DQogICAgICAgIGdldERhdGFTdWNjZXNzOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICBzdGF0ZURhdGE6IHt9LA0KICAgICAgaW50ZXJPYmo6IE9iamVjdCwNCiAgICAgIGRoY3BPcHRpb25JdGVtczogWw0KICAgICAgICB7IGtleTogMSwgbGFiZWw6IHRoaXMuJHQoIkN1c3RvbU9wdGlvbiIpIH0sDQogICAgICAgIHsga2V5OiAyLCBsYWJlbDogdGhpcy4kdCgiT3B0aW9uNDMiKSB9LA0KICAgICAgICB7IGtleTogNCwgbGFiZWw6IHRoaXMuJHQoIk9wdGlvbjY2IikgfSwNCiAgICAgIF0sDQogICAgICBzY2hlZHVsZVdlZWtJdGVtczogW10sDQogICAgICBzY2hlZHVsZVNvbWVEYXlJdGVtczogW10sDQogICAgICBzb21lRGF5T2ZXZWVrOiBbXSwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGdldERhdGEodGhpcyk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBvbkNvbW1vblBhZ2VEYXRhQ2hhbmdlOiBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgIC8vREhDUCBPcHRpb24gRW5hYmxlDQogICAgICBpZiAoZXZlbnQuaXRlbUtleSA9PSAiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uRW5hYmxlIikgew0KICAgICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICAgICAgICB0aGlzLmRhdGEsDQogICAgICAgICAgImRoY3BPcHRpb24iLA0KICAgICAgICAgICJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5FbmFibGUiDQogICAgICAgICk7DQogICAgICAgIGl0ZW0udmFsdWUgPSBldmVudC5uZXdWYWw7DQogICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBnZXREaGNwT3B0aW9uVmFsdWUoZXZlbnQubmV3VmFsKTsNCiAgICAgIH0NCiAgICAgIC8vTW9kZQ0KICAgICAgZWxzZSBpZiAoZXZlbnQuaXRlbUtleSA9PSAiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIikgew0KICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOw0KICAgICAgICBvbkNoZWNrU2NoZWR1bGVBdmFpbCh0aGlzKTsNCiAgICAgIH0NCiAgICAgIC8vU29tZURheQ0KICAgICAgZWxzZSBpZiAoZXZlbnQuaXRlbUtleSA9PSAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuRGF5T2ZXZWVrIikgew0KICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOw0KICAgICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICAgICAgICB0aGlzLmRhdGEsDQogICAgICAgICAgImF1dG9tYXRpY0F1dG9wIiwNCiAgICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuU29tZURheU9mV2VlayINCiAgICAgICAgKTsNCiAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbCA9PSA4KSB7DQogICAgICAgICAgaXRlbS5pc1Nob3cgPSB0cnVlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGl0ZW0uaXNTaG93ID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgIGV2ZW50Lml0ZW1LZXkgPT0gIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiDQogICAgICApIHsNCiAgICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgICAgICAgdGhpcy5kYXRhLA0KICAgICAgICAgICJhdXRvbWF0aWNBdXRvcCIsDQogICAgICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiDQogICAgICAgICk7DQogICAgICAgIGl0ZW0udmFsdWUgPSBldmVudC5uZXdWYWw7DQogICAgICAgIHZhciBzb21lRGF5VmFsdWUgPSAiIjsNCiAgICAgICAgZm9yICh2YXIgaSBpbiBldmVudC5uZXdWYWwpIHsNCiAgICAgICAgICBzb21lRGF5VmFsdWUgPSBzb21lRGF5VmFsdWUgKyBldmVudC5uZXdWYWxbaV0gKyAiLCI7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IHNvbWVEYXlWYWx1ZS5zdWJzdHJpbmcoDQogICAgICAgICAgMCwNCiAgICAgICAgICBzb21lRGF5VmFsdWUubGVuZ3RoIC0gMQ0KICAgICAgICApOw0KICAgICAgfSBlbHNlIGlmIChldmVudC5pdGVtS2V5ID09ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfTU9ERS5Nb2RlIikgew0KICAgICAgICB0aGlzLmNoYW5nZWRDZmdEYXRhW2V2ZW50Lml0ZW1LZXldID0gZXZlbnQubmV3VmFsOw0KICAgICAgICBvbkNoZWNrUmVib290U2NoZWR1bGVBdmFpbCh0aGlzKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7DQogICAgICB9DQogICAgfSwNCiAgfSwNCn07DQoNCnZhciBOb3RHZXRSZXNwb25zZSA9IDA7DQp2YXIgTm90R2V0UmVzcG9uc2VOdW0gPSAwOw0KdmFyIElzQWxyZWFkeVJlYm9vdCA9IDA7DQoNCmZ1bmN0aW9uIGdldERoY3BPcHRpb25WYWx1ZSh2YWx1ZSkgew0KICB2YXIgYm94ZXMgPSAwOw0KICBmb3IgKHZhciBpbmRleCBpbiB2YWx1ZSkgew0KICAgIGJveGVzID0gYm94ZXMgfCB2YWx1ZVtpbmRleF07DQogIH0NCiAgcmV0dXJuIGJveGVzOw0KfQ0KDQpmdW5jdGlvbiBnZXREYXRhKHZtKSB7DQogIHZtLiRheGlvcy5nZXQoImFwaS91cGdyYWRlQWR2YW5jZWQvaW5mbyIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgaWYocmVzcG9uc2UuZGF0YS5yZXRjb2RlID09IC0xKXsNCiAgICAgIHZtLmRhdGE9IHsNCiAgICAgICAgc2hvd05vUGVybWlzc2lvbjogdHJ1ZSwNCiAgICAgIH07DQogICAgICByZXR1cm47DQogICAgfQ0KICAgIHZtLmdldERhdGFTdWNjZXNzID0gdHJ1ZTsNCiAgICB2bS5hcGlEYXRhID0gcmVzcG9uc2UuZGF0YTsNCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YSA9IGRlZXBDbG9uZShyZXNwb25zZS5kYXRhLmNvbmZpZ0RhdGEpOw0KICAgIHZtLnN0YXRlRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsNCg0KICAgIC8vc2NoZWR1bGVXZWVrSXRlbXPotYvlgLwNCiAgICB2bS5zY2hlZHVsZVdlZWtJdGVtcyA9IFtdOw0KICAgIGxldCB3ZWVrSXRlbSA9IHsga2V5OiAiMCIsIGxhYmVsOiB2bS4kdCgiRXZlcnlEYXkiKSB9Ow0KICAgIHZtLnNjaGVkdWxlV2Vla0l0ZW1zLnB1c2god2Vla0l0ZW0pOw0KICAgIHZtLnNjaGVkdWxlV2Vla0l0ZW1zID0gZ2V0V2Vla0l0ZW1zKA0KICAgICAgdm0uc2NoZWR1bGVXZWVrSXRlbXMsDQogICAgICB2bS4kdCgiQWxsV2Vla0RheXMiKQ0KICAgICk7DQogICAgd2Vla0l0ZW0gPSB7IGtleTogIjgiLCBsYWJlbDogdm0uJHQoIlNvbWVEYXkiKSB9Ow0KICAgIHZtLnNjaGVkdWxlV2Vla0l0ZW1zLnB1c2god2Vla0l0ZW0pOw0KDQogICAgLy9zY2hlZHVsZVNvbWRheUl0ZW1z6LWL5YC8DQogICAgdm0uc2NoZWR1bGVTb21lRGF5SXRlbXMgPSBbXTsNCiAgICB2bS5zY2hlZHVsZVNvbWVEYXlJdGVtcyA9IGdldFdlZWtJdGVtcygNCiAgICAgIHZtLnNjaGVkdWxlU29tZURheUl0ZW1zLA0KICAgICAgdm0uJHQoIkFsbFdlZWtEYXlzIikNCiAgICApOw0KDQogICAgLy9zb21lRGF5T2ZXZWVr6LWL5YC8DQogICAgdm0uc29tZURheU9mV2VlayA9IHZtLmNoYW5nZWRDZmdEYXRhWw0KICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiDQogICAgXS5zcGxpdCgiLCIpOw0KDQogICAgY3JlYXRlUGFnZURhdGEodm0pOw0KICAgIHZtLmRhdGEuZ2V0RGF0YVN1Y2Nlc3MgPSB0cnVlOw0KDQogICAgLy9kaGNwT3B0aW9uDQogICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgICB2bS5kYXRhLA0KICAgICAgImRoY3BPcHRpb24iLA0KICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkVuYWJsZSINCiAgICApOw0KICAgIGl0ZW0udmFsdWUgPSBbXTsNCiAgICB2YXIgZGhjcE9wdGlvbkVuYWJsZSA9DQogICAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uRW5hYmxlIl07DQogICAgZm9yICh2YXIgaW5kZXggaW4gdm0uZGhjcE9wdGlvbkl0ZW1zKSB7DQogICAgICBpZiAodm0uZGhjcE9wdGlvbkl0ZW1zW2luZGV4XS5rZXkgJiBkaGNwT3B0aW9uRW5hYmxlKSB7DQogICAgICAgIGl0ZW0udmFsdWUucHVzaCh2bS5kaGNwT3B0aW9uSXRlbXNbaW5kZXhdLmtleSk7DQogICAgICB9DQogICAgfQ0KICAgIElzQWxyZWFkeVJlYm9vdCA9IDA7DQoNCiAgICAvLyBBdXRvbWF0aWMgQXV0b3ANCiAgICBvbkNoZWNrU2NoZWR1bGVBdmFpbCh2bSk7DQogICAgb25DaGVja1JlYm9vdFNjaGVkdWxlQXZhaWwodm0pOw0KDQogICAgZ2V0QWN1dG9QU3RhdHVzKHZtKTsNCiAgfSk7DQp9DQoNCmZ1bmN0aW9uIHN1Ym1pdERhdGEodm0pIHsNCiAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsNCg0KICBsZXQgcmVxdWVzdERhdGEgPSB7DQogICAgdGFyZ2V0OiAidXBncmFkZUFkdmFuY2VkIiwNCiAgICBhY3Rpb246ICJzZXQiLA0KICAgIGNvbmZpZ0RhdGE6IHZtLnN1Ym1pdENmZ0RhdGEsDQogICAgZGF0YTogdm0uc3VibWl0RGF0YSwNCiAgfTsNCiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgcmVzcG9uc2UpIHsNCiAgICAgIHNob3dSZXF1ZXN0U3VjY2Vzcyh2bSk7DQogICAgfQ0KICAgIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOw0KICB9KTsNCg0KICB2bS5zdWJtaXREYXRhID0ge307DQp9DQoNCmZ1bmN0aW9uIGdldENvbW1pdERhdGEodm0pIHsNCiAgdm0uc3VibWl0Q2ZnRGF0YSA9IHt9Ow0KICBmb3IgKHZhciBjaGFuZ2VkS2V5IGluIHZtLmNoYW5nZWRDZmdEYXRhKSB7DQogICAgaWYgKHZtLmFwaURhdGEuY29uZmlnRGF0YVtjaGFuZ2VkS2V5XSAhPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XSkgew0KICAgICAgdm0uc3VibWl0Q2ZnRGF0YVtjaGFuZ2VkS2V5XSA9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldOw0KICAgIH0NCiAgfQ0KfQ0KDQpmdW5jdGlvbiBnZXRXZWVrSXRlbXMoaXRlbXMsIHZhbHVlKSB7DQogIHZhciBEYXlPZldlZWsgPSB2YWx1ZS5zcGxpdCgiJiIpOw0KICBmb3IgKHZhciBpID0gMTsgaSA8IDc7IGkrKykgew0KICAgIGxldCB3ZWVrSXRlbSA9IHsga2V5OiBpLnRvU3RyaW5nKCksIGxhYmVsOiBEYXlPZldlZWtbaV0gfTsNCiAgICBpdGVtcy5wdXNoKHdlZWtJdGVtKTsNCiAgfQ0KICBsZXQgd2Vla0l0ZW0gPSB7IGtleTogIjciLCBsYWJlbDogRGF5T2ZXZWVrWzBdIH07DQogIGl0ZW1zLnB1c2god2Vla0l0ZW0pOw0KICByZXR1cm4gaXRlbXM7DQp9DQoNCi8vIEFVVE9QX1NUQVRFX1NVQ0NFU1MgPSAwLA0KLy8gQVVUT1BfU1RBVEVfRkFJTEVELCAxDQovLyBBVVRPUF9TVEFURV9DSEVDS19ST01fRkFJTEVELCAyDQovLyBBVVRPUF9TVEFURV9VUEdSQURJTkcsIDMNCi8vIFRJTUVPVVQgNA0KLy8gRklOSVNIRUQgNQ0KLy8gVEFMS0lORyAtMQ0KLy8gV0FJVElORyAtMg0KZnVuY3Rpb24gZ2V0QWN1dG9QU3RhdHVzKHZtKSB7DQogIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiLTEiKSB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICByZXNldFRvTm9ybWFsUGFnZSh2bSk7DQogICAgfSwgNjUwMCk7DQogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjAiKSB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICByZXNldFRvTm9ybWFsUGFnZSh2bSk7DQogICAgfSwgNjUwMCk7DQogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjEiKSB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICByZXNldFRvTm9ybWFsUGFnZSh2bSk7DQogICAgfSwgNjUwMCk7DQogICAgdmFyIHRtcCA9IHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1JlYXNvbi5zcGxpdCgiOyIpOw0KICAgIHZhciB0bXBMZW4gPSB0bXAubGVuZ3RoOw0KICAgIHZhciB0bXBTaG93ID0gIlJlYXNvbjogIjsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRtcExlbiAtIDE7IGkrKykgew0KICAgICAgaWYgKHRtcFtpXSA9PSAidW5kZWZpbmVkIikgew0KICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICAgIHRtcFNob3cgKz0gdm0uJHQoIkF1dG9QRmFpbGVkUmVhc29uQXJyIilbdG1wW2ldXTsNCiAgICB9DQogICAgc2hvd0Vycm9ySW5mbyh2bSwgdG1wU2hvdyk7DQogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjMiKSB7DQogICAgcmVTdGFydENoZWNrQXV0b1Aodm0pOw0KICAgIHZtLmludGVyT2JqID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgTG9uZ0NoZWNrU3RhdHVzKHZtKTsNCiAgICB9LCA0MDAwKTsNCiAgfSBlbHNlIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiLTIiKSB7DQogICAgcmVTdGFydENoZWNrQXV0b1Aodm0pOw0KICAgIHZtLmludGVyT2JqID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgTG9uZ0NoZWNrU3RhdHVzKHZtKTsNCiAgICB9LCA0MDAwKTsNCiAgfSBlbHNlIHsNCiAgICByZXNldFRvTm9ybWFsUGFnZSh2bSk7DQogIH0NCn0NCg0KZnVuY3Rpb24gTG9uZ0NoZWNrU3RhdHVzKHZtKSB7DQogIGlmICgxID09IE5vdEdldFJlc3BvbnNlKSB7DQogICAgew0KICAgICAgc3RhdHVzQ2hlY2sodm0pOw0KICAgICAgTm90R2V0UmVzcG9uc2VOdW0gPSAwOw0KICAgICAgTm90R2V0UmVzcG9uc2UgPSAwOw0KICAgIH0NCiAgfSBlbHNlIHsNCiAgICBOb3RHZXRSZXNwb25zZU51bSsrOw0KICAgIGlmIChOb3RHZXRSZXNwb25zZU51bSA+PSAzKSB7DQogICAgICBOb3RHZXRSZXNwb25zZSA9IDE7DQogICAgfQ0KICB9DQp9DQoNCmZ1bmN0aW9uIHJlc2V0Tm90R2V0UmVzcG9uc2Uodm0pIHsNCiAgY2xlYXJJbnRlcnZhbCh2bS5pbnRlck9iaik7DQogIHZtLmludGVyT2JqID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgIExvbmdDaGVja1N0YXR1cyh2bSk7DQogIH0sIDQwMDApOw0KICBOb3RHZXRSZXNwb25zZSA9IDA7DQogIE5vdEdldFJlc3BvbnNlTnVtID0gMDsNCn0NCg0KZnVuY3Rpb24gcmVTdGFydENoZWNrQXV0b1Aodm0pIHsNCiAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgc3RhdHVzQ2hlY2sodm0pOw0KICB9LCAzMDAwKTsNCn0NCg0KZnVuY3Rpb24gc3RhdHVzQ2hlY2sodm0pIHsNCiAgZ2V0U3RhdHVlRGF0YSh2bSk7DQp9DQoNCmZ1bmN0aW9uIG9uU3RzQWN0T2ZBdXRvUCh2bSkgew0KICBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjIiKSB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICBnZXREYXRhKHZtKTsNCiAgICB9LCA2NTAwKTsNCiAgfSBlbHNlIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiMSIpIHsNCiAgICBjbGVhckludGVydmFsKHZtLmludGVyT2JqKTsNCiAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgIHZhciB0bXAgPSB2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dSZWFzb24uc3BsaXQoIjsiKTsNCiAgICAgIHZhciB0bXBMZW4gPSB0bXAubGVuZ3RoOw0KICAgICAgdmFyIHRtcFNob3cgPSAiUmVhc29uOiAiOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0bXBMZW4gLSAxOyBpKyspIHsNCiAgICAgICAgaWYgKHRtcFtpXSA9PSAidW5kZWZpbmVkIikgew0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICAgIHRtcFNob3cgKz0gdm0uJHQoIkF1dG9QRmFpbGVkUmVhc29uQXJyIilbdG1wW2ldXTsNCiAgICAgIH0NCiAgICAgIHNob3dFcnJvckluZm8odm0sIHRtcFNob3cpOw0KICAgICAgZ2V0RGF0YSh2bSk7DQogICAgfSwgNjUwMCk7DQogICAgcmV0dXJuICJOb3RHb09uIjsNCiAgfSBlbHNlIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiMyIpIHsNCiAgfSBlbHNlIGlmICh2bS5zdGF0ZURhdGEuU3RhdGUuQXV0b3BOb3dTdGF0ZSA9PSAiLTIiKSB7DQogIH0gZWxzZSBpZiAodm0uc3RhdGVEYXRhLlN0YXRlLkF1dG9wTm93U3RhdGUgPT0gIjQiKSB7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiVGltZU91dFdhcm5pbmciKSk7DQogICAgICBnZXREYXRhKHZtKTsNCiAgICB9LCA2NTAwKTsNCiAgICByZXR1cm4gIk5vdEdvT24iOw0KICB9IGVsc2UgaWYgKHZtLnN0YXRlRGF0YS5TdGF0ZS5BdXRvcE5vd1N0YXRlID09ICI1Iikgew0KICAgIGlmICgiMSIgPT0gSXNBbHJlYWR5UmVib290KSB7DQogICAgICByZXR1cm4gIk5vdEdvT24iOw0KICAgIH0NCiAgICBJc0FscmVhZHlSZWJvb3QgPSAiMSI7DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJBVVRPUEZpbmlzaGVkTm90aWNlIikpOw0KICAgICAgZ2V0RGF0YSh2bSk7DQogICAgfSwgNzAwMCk7DQogIH0NCn0NCg0KZnVuY3Rpb24gZ2V0U3RhdHVlRGF0YSh2bSkgew0KICB2bS4kcm9vdC5wcm9jZXNzaW5nVmlzaWJsZSA9IHRydWU7DQogIHZtLiRheGlvcy5nZXQoImFwaS91cGdyYWRlQWR2YW5jZWQvaW5mbz9BdXRvcE5vdz0xIikudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICB2bS5zdGF0ZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7DQogICAgcmVzZXROb3RHZXRSZXNwb25zZSh2bSk7DQogICAgdmFyIHRoaXNSZXMgPSBvblN0c0FjdE9mQXV0b1Aodm0pOw0KICAgIGlmICgiTm90R29PbiIgPT0gdGhpc1Jlcykgew0KICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICByZVN0YXJ0Q2hlY2tBdXRvUCh2bSk7DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiByZXNldFRvTm9ybWFsUGFnZSh2bSkgew0KICBjbGVhckludGVydmFsKHZtLmludGVyT2JqKTsNCiAgdm0uJHJvb3QucHJvY2Vzc2luZ1Zpc2libGUgPSBmYWxzZTsNCn0NCg0KZnVuY3Rpb24gb25BdXRvUENvbmZpcm0odm0pIHsNCiAgZ2V0Q29tbWl0RGF0YSh2bSk7DQogIGlmICh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIl0gPT0gMCkgew0KICAgIGFsZXJ0KHZtLiR0KCJBVVRPUERpc2FibGVkV2FybmluZyIpKTsNCiAgICByZXR1cm47DQogIH0NCiAgaWYgKCFjaGVja0NvbW1pdERhdGEodm0pKSB7DQogICAgcmV0dXJuOw0KICB9DQogIGlmIChjb25maXJtKHZtLiR0KCJTYXZlQW5kQXV0b1BDb25maXJtIikpKSB7DQogICAgdm0uc3VibWl0RGF0YSA9IHsgQVVUT1BOb3c6ICIxIiB9Ow0KICAgIHN1Ym1pdERhdGEodm0pOw0KICAgIHZtLiRyb290LnByb2Nlc3NpbmdWaXNpYmxlID0gdHJ1ZTsNCiAgICB2bS4kYXhpb3MuZ2V0KCJhcGkvdXBncmFkZUFkdmFuY2VkL2luZm8/QXV0b3BOb3c9MSIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICB2bS5zdGF0ZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7DQogICAgICBnZXRBY3V0b1BTdGF0dXModm0pOw0KICAgIH0pOw0KICB9DQp9DQoNCmZ1bmN0aW9uIG9uQ2hlY2tTY2hlZHVsZUF2YWlsKHZtKSB7DQogIHZhciBzdHMgPSB0cnVlOw0KICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICB2bS5kYXRhLA0KICAgICJhdXRvbWF0aWNBdXRvcCIsDQogICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLlNvbWVEYXlPZldlZWsiDQogICk7DQogIGlmICgNCiAgICB2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uTU9ERS5Nb2RlIl0gPT0gMiB8fA0KICAgIHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5NT0RFLk1vZGUiXSA9PSAzDQogICkgew0KICAgIHN0cyA9IGZhbHNlOw0KICAgIGlmICh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuRGF5T2ZXZWVrIl0gPT0gOCkgew0KICAgICAgaXRlbS5pc1Nob3cgPSB0cnVlOw0KICAgIH0NCiAgfSBlbHNlIHsNCiAgICBpdGVtLmlzU2hvdyA9IGZhbHNlOw0KICB9DQogIGxldCBpdGVtMSA9IGdldEl0ZW1CeUtleSgNCiAgICB2bS5kYXRhLA0KICAgICJhdXRvbWF0aWNBdXRvcCIsDQogICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkRheU9mV2VlayINCiAgKTsNCiAgbGV0IGl0ZW0yID0gZ2V0SXRlbUJ5S2V5KA0KICAgIHZtLmRhdGEsDQogICAgImF1dG9tYXRpY0F1dG9wIiwNCiAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuSG91ck9mRGF5Ig0KICApOw0KICBsZXQgaXRlbTMgPSBnZXRJdGVtQnlLZXkoDQogICAgdm0uZGF0YSwNCiAgICAiYXV0b21hdGljQXV0b3AiLA0KICAgICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiDQogICk7DQogIGl0ZW0xLmRpc2FibGVkID0gc3RzOw0KICBpdGVtMi5kaXNhYmxlZCA9IHN0czsNCiAgaXRlbTMuZGlzYWJsZWQgPSBzdHM7DQp9DQoNCmZ1bmN0aW9uIG9uQ2hlY2tSZWJvb3RTY2hlZHVsZUF2YWlsKHZtKSB7DQogIHZhciBzdHMgPSB0cnVlOw0KICBpZiAodm0uY2hhbmdlZENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9NT0RFLk1vZGUiXSA9PSAxKSB7DQogICAgc3RzID0gZmFsc2U7DQogIH0NCiAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgdm0uZGF0YSwNCiAgICAicmVib290U2NoZWR1bGUiLA0KICAgICJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfU0NIRURVTEUuRGF5T2ZXZWVrIg0KICApOw0KICBpdGVtLmRpc2FibGVkID0gc3RzOw0KICBpdGVtID0gZ2V0SXRlbUJ5S2V5KA0KICAgIHZtLmRhdGEsDQogICAgInJlYm9vdFNjaGVkdWxlIiwNCiAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSINCiAgKTsNCiAgaXRlbS5kaXNhYmxlZCA9IHN0czsNCn0NCg0KZnVuY3Rpb24gb25FeHBvcnQodm0sIHR5cGUpIHsNCiAgbGV0IHJlcXVlc3REYXRhID0gew0KICAgIHRhcmdldDogInVwZ3JhZGVBZHZhbmNlZCIsDQogICAgYWN0aW9uOiAiZXhwb3J0IiwNCiAgICBkYXRhOiB7DQogICAgICB0eXBlOiB0eXBlLA0KICAgIH0sDQogIH07DQogIHZtLiRheGlvcy5wb3N0KCJhcGkiLCByZXF1ZXN0RGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJFeHBvcnRTdWNjZXNzIikpOw0KICAgIGxldCBhZGRyZXNzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmFkZHJlc3M7DQogICAgd2luZG93Lm9wZW4oYWRkcmVzcyk7DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiBvbkNsZWFyTUQ1KHZtKSB7DQogIGxldCByZXF1ZXN0RGF0YSA9IHsNCiAgICB0YXJnZXQ6ICJ1cGdyYWRlQWR2YW5jZWQiLA0KICAgIGFjdGlvbjogInNldCIsDQogICAgZGF0YTogew0KICAgICAgQ2xlYXJNRDU6ICIxIiwNCiAgICB9LA0KICB9Ow0KICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtLCB2bS4kdCgiQ2xlYXJTdWNjZXNzIikpOw0KICB9KTsNCn0NCg0KZnVuY3Rpb24gb25JbXBvcnQodm0pIHsNCiAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkodm0uZGF0YSwgIm90aGVycyIsICJpbXBvcnRDb25maWdGaWxlIik7DQogIGxldCBmaWxlTmFtZSA9IGl0ZW0udmFsdWUuZmlsZU5hbWU7DQogIHZhciBmaWxlVXBMaW1pdCA9IDEwMjQ7IC8vMU1CDQogIHZhciBmaWxlTG93ZXJMaW1pdCA9IDA7DQogIGlmIChmaWxlTmFtZSA9PSAiIiB8fCBmaWxlTmFtZSA9PSB2bS4kdCgiVXBncmFkZUZpbGVQYXRoIikpIHsNCiAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiRmlsZUVtcHR5V2FybmluZyIpKTsNCiAgICByZXR1cm47DQogIH0NCiAgaWYgKGZpbGVOYW1lLmxlbmd0aCA+PSAxMjcpIHsNCiAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiV2FybmluZ0ZpbGVOYW1lVG9vTG9uZyIpKTsNCiAgICByZXR1cm47DQogIH0NCiAgaWYgKA0KICAgICEoDQogICAgICBjaGVja0ZpbGVGb3JtYXQoZmlsZU5hbWUsICIuVEdaIiwgNCkgfHwNCiAgICAgIGNoZWNrRmlsZUZvcm1hdChmaWxlTmFtZSwgIi5DT05GIiwgNSkgfHwNCiAgICAgIGNoZWNrRmlsZUZvcm1hdChmaWxlTmFtZSwgIi5DRkciLCA0KQ0KICAgICkNCiAgKSB7DQogICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkZpbGVGb3JtYXRXYXJuaW5nIikpOw0KICAgIHJldHVybjsNCiAgfQ0KICB2YXIgRmlsZVNpemVGbGFnID0gY2hlY2tGaWxlU2l6ZSgNCiAgICBpdGVtLnZhbHVlLmZpbGVEYXRhLA0KICAgIGZpbGVVcExpbWl0LA0KICAgIGZpbGVMb3dlckxpbWl0DQogICk7DQogIGlmIChGaWxlU2l6ZUZsYWcgPT0gIi0xIikgew0KICAgIHNob3dFcnJvckluZm8odm0sIHZtLiR0KCJGaWxlTm90RXhpc3RXYXJuaW5nIikpOw0KICAgIHJldHVybjsNCiAgfQ0KICBpZiAoRmlsZVNpemVGbGFnID09ICItMiIpIHsNCiAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiVXBsb2FkaW5nRmlsZVRvb0xhcmdlV2FybmluZyIpKTsNCiAgICByZXR1cm47DQogIH0NCiAgaWYgKEZpbGVTaXplRmxhZyA9PSAiLTMiKSB7DQogICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkZpbGVGb3JtYXRXYXJuaW5nIikpOw0KICAgIHJldHVybjsNCiAgfQ0KICB2bS4kY29uZmlybSh7DQogICAgY29udGVudDogdm0uJHQoIkltcG9ydENvbmZpZ1JlYm9vdEhpbnQiKSwNCiAgICBvbk9rKCkgew0KICAgICAgLy/kuIrkvKANCiAgICAgIGl0ZW0ubG9hZGluZyA9IHRydWU7DQogICAgICBjb25zdCB1cERhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgIHVwRGF0YS5hcHBlbmQoImZpbGUiLCBpdGVtLnZhbHVlLmZpbGVEYXRhKTsNCiAgICAgIGF4aW9zDQogICAgICAgIC5wb3N0KCJhcGkvdXBncmFkZUFkdmFuY2VkL3VwbG9hZCIsIHVwRGF0YSwgew0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIsDQogICAgICAgICAgfSwNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YS5yZXRjb2RlID09IC0xKSB7DQogICAgICAgICAgICBzaG93RXJyb3JJbmZvKHZtLCB2bS4kdCgiQ29uZmlnVXBsb2FkRmFpbGVkIikpOw0KICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEucmV0Y29kZSA9PSAtMikgew0KICAgICAgICAgICAgc2hvd0Vycm9ySW5mbyh2bSwgdm0uJHQoIkNvbmZpZ25zdGFsbEZhaWxlZCIpKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLnJldGNvZGUgPT0gMCkgew0KICAgICAgICAgICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtLCB2bS4kdCgiQ29uZmlnSW5zdGFsbFN1Y2Nlc3MiKSk7DQogICAgICAgICAgICBpdGVtLnZhbHVlLmZpbGVOYW1lID0gdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpOw0KICAgICAgICAgICAgaXRlbS52YWx1ZS5maWxlRGF0YSA9IHt9Ow0KICAgICAgICAgIH0NCiAgICAgICAgICBpdGVtLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgfSk7DQogICAgICByZXR1cm47DQogICAgfSwNCiAgICBvbkNhbmNlbCgpIHsNCiAgICAgIHJldHVybjsNCiAgICB9LA0KICB9KTsNCn0NCg0KZnVuY3Rpb24gY2hlY2tDb21taXREYXRhKHZtKSB7DQogIGxldCBzdWNjZXNzID0gdHJ1ZTsNCiAgLy9ESENQQ3VzdG9tT3B0aW9u5qCh6aqMDQogIGlmICgNCiAgICAidW5kZWZpbmVkIiAhPQ0KICAgIHR5cGVvZiB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdDQogICkgew0KICAgIGlmICgNCiAgICAgICFjaGVja1JhbmdlT2ZOdW1iZXIoDQogICAgICAgIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkN1c3RvbUlkIl0sDQogICAgICAgIDEyOCwNCiAgICAgICAgMjU0DQogICAgICApICYmDQogICAgICB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdICE9ICIiDQogICAgKSB7DQogICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICAgICAgdm0uZGF0YSwNCiAgICAgICAgImRoY3BPcHRpb24iLA0KICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uREhDUF9PUFRJT04uQ3VzdG9tSWQiDQogICAgICApOw0KICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KDQogIC8vU2VydmVyVXNlck5hbWXmoKHpqowNCiAgaWYgKA0KICAgICJ1bmRlZmluZWQiICE9DQogICAgdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuVXNlck5hbWUiXQ0KICApIHsNCiAgICBpZiAoDQogICAgICAhbm90Q29udGFpbkludmFsaWQoDQogICAgICAgIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuVXNlck5hbWUiXQ0KICAgICAgKQ0KICAgICkgew0KICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgICAgIHZtLmRhdGEsDQogICAgICAgICJtYW51YWxBdXRvcCIsDQogICAgICAgICJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlVzZXJOYW1lIg0KICAgICAgKTsNCiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsNCiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICB9DQogIH0NCg0KICAvL1NlcnZlclBhc3N3b3Jk5qCh6aqMDQogIGlmICgNCiAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Qd2QiXQ0KICApIHsNCiAgICBpZiAoDQogICAgICAhbm90Q29udGFpbkludmFsaWQodm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Qd2QiXSkNCiAgICApIHsNCiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KA0KICAgICAgICB2bS5kYXRhLA0KICAgICAgICAibWFudWFsQXV0b3AiLA0KICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Qd2QiDQogICAgICApOw0KICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KDQogIC8vU2VydmVyQ29tbW9uQUVTS2V55qCh6aqMDQogIGlmICgNCiAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2Il0NCiAgKSB7DQogICAgaWYgKA0KICAgICAgIW5vdENvbnRhaW5JbnZhbGlkKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiJdKQ0KICAgICkgew0KICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgICAgIHZtLmRhdGEsDQogICAgICAgICJtYW51YWxBdXRvcCIsDQogICAgICAgICJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTYiDQogICAgICApOw0KICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KDQogIC8vU2VydmVyTUFDQUVTS2V55qCh6aqMDQogIGlmICgNCiAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2TWFjIl0NCiAgKSB7DQogICAgaWYgKA0KICAgICAgIW5vdENvbnRhaW5JbnZhbGlkKHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNk1hYyJdKQ0KICAgICkgew0KICAgICAgbGV0IGl0ZW0gPSBnZXRJdGVtQnlLZXkoDQogICAgICAgIHZtLmRhdGEsDQogICAgICAgICJtYW51YWxBdXRvcCIsDQogICAgICAgICJDb25maWcuQXV0b3Byb3Zpc2lvbi5BRVMuS2V5MTZNYWMiDQogICAgICApOw0KICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KDQogIC8vaG91cuWSjG1pbnV0ZeagoemqjA0KICBpZiAoDQogICAgInVuZGVmaW5lZCIgIT0NCiAgICB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuSG91ck9mRGF5Il0NCiAgKSB7DQogICAgaWYgKA0KICAgICAgIWlzSG91cih2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiXSkgfHwNCiAgICAgIDAgPT0gdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuSG91ck9mRGF5Il0ubGVuZ3RoDQogICAgKSB7DQogICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICAgICAgdm0uZGF0YSwNCiAgICAgICAgImF1dG9tYXRpY0F1dG9wIiwNCiAgICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLkhvdXJPZkRheSINCiAgICAgICk7DQogICAgICBpdGVtLmlzV2FybiA9IHRydWU7DQogICAgICBzdWNjZXNzID0gZmFsc2U7DQogICAgfQ0KICB9DQoNCiAgaWYgKA0KICAgICJ1bmRlZmluZWQiICE9DQogICAgdHlwZW9mIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLk1pbnV0ZU9mSG91ciJdDQogICkgew0KICAgIGlmICgNCiAgICAgICFpc01pbnV0ZU9yU2VjKA0KICAgICAgICB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiXQ0KICAgICAgKSB8fA0KICAgICAgMCA9PSB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiXS5sZW5ndGgNCiAgICApIHsNCiAgICAgIGxldCBpdGVtID0gZ2V0SXRlbUJ5S2V5KA0KICAgICAgICB2bS5kYXRhLA0KICAgICAgICAiYXV0b21hdGljQXV0b3AiLA0KICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuTWludXRlT2ZIb3VyIg0KICAgICAgKTsNCiAgICAgIGl0ZW0uaXNXYXJuID0gdHJ1ZTsNCiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsNCiAgICB9DQogIH0NCg0KICBpZiAoDQogICAgInVuZGVmaW5lZCIgIT0NCiAgICB0eXBlb2Ygdm0uc3VibWl0Q2ZnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSJdDQogICkgew0KICAgIGlmICgNCiAgICAgICFpc0hvdXIoDQogICAgICAgIHZtLnN1Ym1pdENmZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiXQ0KICAgICAgKSB8fA0KICAgICAgMCA9PQ0KICAgICAgICB2bS5zdWJtaXRDZmdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfU0NIRURVTEUuSG91ck9mRGF5Il0NCiAgICAgICAgICAubGVuZ3RoDQogICAgKSB7DQogICAgICBsZXQgaXRlbSA9IGdldEl0ZW1CeUtleSgNCiAgICAgICAgdm0uZGF0YSwNCiAgICAgICAgInJlYm9vdFNjaGVkdWxlIiwNCiAgICAgICAgIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiDQogICAgICApOw0KICAgICAgaXRlbS5pc1dhcm4gPSB0cnVlOw0KICAgICAgc3VjY2VzcyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KDQogIHJldHVybiBzdWNjZXNzOw0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVQYWdlRGF0YSh2bSkgew0KICB2bS5kYXRhID0gew0KICAgIC8vIGdldERhdGFTdWNjZXNzOiB0cnVlLA0KICAgIGJyZWFkQ3J1bWI6IHsNCiAgICAgIGZpcnN0VGl0bGU6IHZtLiR0KCJVcGdyYWRlIiksDQogICAgICBzZWNvbmRUaXRsZTogdm0uJHQoIkFkdmFuY2UiKSwNCiAgICB9LA0KICAgIG9uU3VibWl0OiBmdW5jdGlvbiAoKSB7DQogICAgICBnZXRDb21taXREYXRhKHZtKTsNCiAgICAgIGlmICghY2hlY2tDb21taXREYXRhKHZtKSkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBzdWJtaXREYXRhKHZtKTsNCiAgICB9LA0KICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiAoKSB7DQogICAgICB2bS5kYXRhLmNhbmNlbExvYWRpbmcgPSB0cnVlOw0KICAgICAgZ2V0RGF0YSh2bSk7DQogICAgfSwNCiAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZSwNCiAgICBjYW5jZWxMb2FkaW5nOiBmYWxzZSwNCiAgICBjb250ZW50czogW10sDQogIH07DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVQbnBPcHRpb25Db250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVEaGNwT3B0aW9uQ29udGVudCh2bSkpOw0KICB2bS5kYXRhLmNvbnRlbnRzLnB1c2goY3JlYXRlTWFudWFsQXV0b3BDb250ZW50KHZtKSk7DQogIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVBdXRvbWF0aWNBdXRvcENvbnRlbnQodm0pKTsNCiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZVJlYm9vdFNjaGVkdWxlQ29udGVudCh2bSkpOw0KICBpZiAodm0uJHJvb3QuaGlkZGVuQXJyLmlzU2hvd1VwZ3JhZGVPdGhlcnMgPT0gMSkgew0KICAgIHZtLmRhdGEuY29udGVudHMucHVzaChjcmVhdGVPdGhlcnNDb250ZW50KHZtKSk7DQogIH0NCn0NCg0KZnVuY3Rpb24gY3JlYXRlUG5wT3B0aW9uQ29udGVudCh2bSkgew0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJwbnBPcHRpb24iLA0KICAgIHRpdGxlOiB2bS4kdCgiUE5QT3B0aW9uIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIlBOUE9wdGlvbkRlc2MiKSwNCiAgICBpdGVtczogWw0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlBOUENvbmZpZyIpLA0KICAgICAgICB0eXBlOiAiY2hlY2tib3giLA0KICAgICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5QTlAuRW5hYmxlIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uUE5QLkVuYWJsZSJdLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIlBOUE9wdGlvbkRlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0ZURoY3BPcHRpb25Db250ZW50KHZtKSB7DQogIGxldCBjb250ZW50ID0gew0KICAgIGtleTogImRoY3BPcHRpb24iLA0KICAgIHRpdGxlOiB2bS4kdCgiREhDUE9wdGlvbiIpLA0KICAgIHRpdGxlRGVzY3JpcHRpb246IHZtLiR0KCJESENQT3B0aW9uRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiQ3VzdG9tT3B0aW9uIiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIHNob3dIaW50OiB0cnVlLA0KICAgICAgICBoaW50Q29udGVudDogdm0uJHQoIigxMjh+MjU0KSIpLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJDdXN0b21PcHRpb25SYW5nZUVycm9yIiksDQogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkN1c3RvbUlkIiwNCiAgICAgICAgdmFsdWU6DQogICAgICAgICAgdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5ESENQX09QVElPTi5DdXN0b21JZCJdLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkN1c3RvbU9wdGlvbkRlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiT3B0aW9uRW5hYmxlIiksDQogICAgICAgIHR5cGU6ICJtdWx0aXBsZS1jaGVja2JveCIsDQogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkRIQ1BfT1BUSU9OLkVuYWJsZSIsDQogICAgICAgIHZhbHVlOiBbXSwNCiAgICAgICAgY2hlY2tib3hJdGVtczogdm0uZGhjcE9wdGlvbkl0ZW1zLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkRIQ1BPcHRpb25FbmFibGVEZXNjIiksDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVNYW51YWxBdXRvcENvbnRlbnQodm0pIHsNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAibWFudWFsQXV0b3AiLA0KICAgIHRpdGxlOiB2bS4kdCgiTWFudWFsQXV0b3AiKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiTWFudWFsQXV0b3BEZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJVUkwiKSwNCiAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAgbWF4TGVuZ3RoOiAxMjcsDQogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuVXJsIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5VcmwiXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBdXRvcFVSTERlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiVXNlck5hbWUiKSwNCiAgICAgICAgdHlwZTogImlucHV0IiwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiUGxlYXNlQ2hlY2tBbGFybVN1Ym1pdERhdGEiKSwNCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Vc2VyTmFtZSIsDQogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkdFTkVSQUwuVXNlck5hbWUiXSwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBdXRvcFVzZXJuYW1lRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJQYXNzd29yZExhYmVsIiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGlucHV0VHlwZTogInBhc3N3b3JkIiwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiUGxlYXNlQ2hlY2tBbGFybVN1Ym1pdERhdGEiKSwNCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uR0VORVJBTC5Qd2QiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5HRU5FUkFMLlB3ZCJdLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkF1dG9wUGFzc3dvcmREZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIkNvbW1vbkFFU0tleSIpLA0KICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICBpbnB1dFR5cGU6ICJwYXNzd29yZCIsDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlBsZWFzZUNoZWNrQWxhcm1TdWJtaXREYXRhIiksDQogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiIsDQogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLkFFUy5LZXkxNiJdLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkNvbW1vbkFFU0tleURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiTUFDQUVTS2V5IiksDQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIGlucHV0VHlwZTogInBhc3N3b3JkIiwNCiAgICAgICAgaXNXYXJuOiBmYWxzZSwNCiAgICAgICAgd2FybkxhYmVsOiB2bS4kdCgiUGxlYXNlQ2hlY2tBbGFybVN1Ym1pdERhdGEiKSwNCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2TWFjIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uQUVTLktleTE2TWFjIl0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQUVTS2V5RGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdHlwZTogImJ1dHRvbiIsDQogICAgICAgIGtleTogIkF1dG9QQ29uZmlybUJ0biIsDQogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBvbkF1dG9QQ29uZmlybSh2bSk7DQogICAgICAgIH0sDQogICAgICAgIGlzU2hvd1BvcG92ZXI6IGZhbHNlLA0KICAgICAgICBidXR0b25OYW1lOiB2bS4kdCgiQXV0b1BOb3ciKSwNCiAgICAgICAgYnV0dG9uSWNvbjogImljb25hdXRvUCIsDQogICAgICB9LA0KICAgIF0sDQogIH07DQogIHJldHVybiBjb250ZW50Ow0KfQ0KDQpmdW5jdGlvbiBjcmVhdGVBdXRvbWF0aWNBdXRvcENvbnRlbnQodm0pIHsNCiAgbGV0IGNvbnRlbnQgPSB7DQogICAga2V5OiAiYXV0b21hdGljQXV0b3AiLA0KICAgIHRpdGxlOiB2bS4kdCgiQXV0b21hdGljQXV0b3AiKSwNCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b21hdGljQXV0b3BEZXNjIiksDQogICAgaXRlbXM6IFsNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJNb2RlIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5NT0RFLk1vZGUiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5NT0RFLk1vZGUiXSwNCiAgICAgICAgc2VsZWN0SXRlbXM6IFsNCiAgICAgICAgICB7IGtleTogMCwgbGFiZWw6IHZtLiR0KCJEaXNhYmxlZCIpIH0sDQogICAgICAgICAgeyBrZXk6IDEsIGxhYmVsOiB2bS4kdCgiUG93ZXJPbiIpIH0sDQogICAgICAgICAgeyBrZXk6IDIsIGxhYmVsOiB2bS4kdCgiUmVwZWF0ZWRseSIpIH0sDQogICAgICAgICAgeyBrZXk6IDMsIGxhYmVsOiB2bS4kdCgiUG93ZXJPbiIpICsgdm0uJHQoIlJlcGVhdGVkbHkiKSB9LA0KICAgICAgICAgIHsga2V5OiA0LCBsYWJlbDogdm0uJHQoIlJlcGVhdGVkbHlCeUhvdXIiKSB9LA0KICAgICAgICBdLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkF1dG9wTW9kZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiU2NoZWR1bGUiKSwNCiAgICAgICAgdHlwZTogInNlbGVjdCIsDQogICAgICAgIGRpc2FibGVkOiBmYWxzZSwNCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuRGF5T2ZXZWVrIiwNCiAgICAgICAgdmFsdWU6IHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuRGF5T2ZXZWVrIl0sDQogICAgICAgIHNlbGVjdEl0ZW1zOiB2bS5zY2hlZHVsZVdlZWtJdGVtcywNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBdXRvcFNjaGVkdWxlRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdHlwZTogIm11bHRpcGxlLWNoZWNrYm94IiwNCiAgICAgICAga2V5OiAiQ29uZmlnLkF1dG9wcm92aXNpb24uU0NIRURVTEUuU29tZURheU9mV2VlayIsDQogICAgICAgIGlzU2hvdzogZmFsc2UsDQogICAgICAgIGlzU2hvd1BvcG92ZXI6IGZhbHNlLA0KICAgICAgICB2YWx1ZTogdm0uc29tZURheU9mV2VlaywNCiAgICAgICAgY2hlY2tib3hJdGVtczogdm0uc2NoZWR1bGVTb21lRGF5SXRlbXMsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0eXBlOiAiaW5wdXQiLA0KICAgICAgICBzaG93SGludDogdHJ1ZSwNCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLA0KICAgICAgICBpc1dhcm46IGZhbHNlLA0KICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJTY2hlZHVsZUhvdXJSYW5nZUVycm9yIiksDQogICAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiKDB+MjNIb3VyKSIpLA0KICAgICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5Ib3VyT2ZEYXkiXSwNCiAgICAgICAgc2hvd0Rlc2NyaXB0aW9uOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIHNob3dIaW50OiB0cnVlLA0KICAgICAgICBkaXNhYmxlZDogZmFsc2UsDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICAgIGhpbnRDb250ZW50OiB2bS4kdCgiKDB+NTlNaW4pIiksDQogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlNjaGVkdWxlTWludXRlUmFuZ2VFcnJvciIpLA0KICAgICAgICBrZXk6ICJDb25maWcuQXV0b3Byb3Zpc2lvbi5TQ0hFRFVMRS5NaW51dGVPZkhvdXIiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlNDSEVEVUxFLk1pbnV0ZU9mSG91ciJdLA0KICAgICAgICBzaG93RGVzY3JpcHRpb246IGZhbHNlLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJFeHBvcnRBdXRvcFRlbXBsYXRlIiksDQogICAgICAgIHR5cGU6ICJidXR0b24iLA0KICAgICAgICBrZXk6ICJFeHBvcnRBdXRvcEJ0biIsDQogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBvbkV4cG9ydCh2bSwgInRlbXBsYXRlIik7DQogICAgICAgIH0sDQogICAgICAgIGlzU2hvd1BvcG92ZXI6IHRydWUsDQogICAgICAgIGJ1dHRvbk5hbWU6IHZtLiR0KCJFeHBvcnQiKSwNCiAgICAgICAgYnV0dG9uSWNvbjogImljb25leHBvcnQiLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkV4cG9ydEF1dG9wVGVtRGVzYyIpLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGl0bGU6IHZtLiR0KCJDbGVhck1ENSIpLA0KICAgICAgICB0eXBlOiAiYnV0dG9uIiwNCiAgICAgICAga2V5OiAiQ2xlYXJNRDVCdG4iLA0KICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgb25DbGVhck1ENSh2bSk7DQogICAgICAgIH0sDQogICAgICAgIGlzU2hvd1BvcG92ZXI6IHRydWUsDQogICAgICAgIGJ1dHRvbk5hbWU6IHZtLiR0KCJDbGVhciIpLA0KICAgICAgICBidXR0b25JY29uOiAiaWNvbmNsZWFyIiwNCiAgICAgICAgZGVzY3JpcHRpb246IHZtLiR0KCJBdXRvcENsZWFyTUQ1RGVzYyIpLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlUmVib290U2NoZWR1bGVDb250ZW50KHZtKSB7DQogIGxldCBjb250ZW50ID0gew0KICAgIGtleTogInJlYm9vdFNjaGVkdWxlIiwNCiAgICB0aXRsZTogdm0uJHQoIlJlYm9vdFNjaGVkdWxlIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIlJlYm9vdFNjaGVkdWxlRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiU3dpdGNoIiksDQogICAgICAgIHR5cGU6ICJjaGVja2JveCIsDQogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9NT0RFLk1vZGUiLA0KICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuQXV0b3Byb3Zpc2lvbi5SRUJPT1RfTU9ERS5Nb2RlIl0sDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b3BTd2l0Y2hEZXNjIiksDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0aXRsZTogdm0uJHQoIlNjaGVkdWxlIiksDQogICAgICAgIHR5cGU6ICJzZWxlY3QiLA0KICAgICAgICBkaXNhYmxlZDogZmFsc2UsDQogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5EYXlPZldlZWsiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkRheU9mV2VlayINCiAgICAgICAgICBdLA0KICAgICAgICBzZWxlY3RJdGVtczogdm0uc2NoZWR1bGVXZWVrSXRlbXMsDQogICAgICAgIGRlc2NyaXB0aW9uOiB2bS4kdCgiQXV0b3BSZWJvb3RTY2hlZHVsZURlc2MiKSwNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIHR5cGU6ICJpbnB1dCIsDQogICAgICAgIHNob3dIaW50OiB0cnVlLA0KICAgICAgICBkaXNhYmxlZDogZmFsc2UsDQogICAgICAgIGlzV2FybjogZmFsc2UsDQogICAgICAgIHdhcm5MYWJlbDogdm0uJHQoIlNjaGVkdWxlSG91clJhbmdlRXJyb3IiKSwNCiAgICAgICAgaGludENvbnRlbnQ6IHZtLiR0KCIoMH4yM0hvdXIpIiksDQogICAgICAgIGtleTogIkNvbmZpZy5BdXRvcHJvdmlzaW9uLlJFQk9PVF9TQ0hFRFVMRS5Ib3VyT2ZEYXkiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbDQogICAgICAgICAgICAiQ29uZmlnLkF1dG9wcm92aXNpb24uUkVCT09UX1NDSEVEVUxFLkhvdXJPZkRheSINCiAgICAgICAgICBdLA0KICAgICAgICBzaG93RGVzY3JpcHRpb246IGZhbHNlLA0KICAgICAgfSwNCiAgICBdLA0KICB9Ow0KICByZXR1cm4gY29udGVudDsNCn0NCg0KZnVuY3Rpb24gY3JlYXRlT3RoZXJzQ29udGVudCh2bSkgew0KICBsZXQgY29udGVudCA9IHsNCiAgICBrZXk6ICJvdGhlcnMiLA0KICAgIHRpdGxlOiB2bS4kdCgiT3RoZXJzIiksDQogICAgdGl0bGVEZXNjcmlwdGlvbjogdm0uJHQoIkF1dG9wT3RoZXJzRGVzYyIpLA0KICAgIGl0ZW1zOiBbDQogICAgICB7DQogICAgICAgIHRpdGxlOiB2bS4kdCgiQ29uZmlnRmlsZSIpLA0KICAgICAgICB0eXBlOiAiZmlsZS1pbnB1dCIsDQogICAgICAgIGtleTogImltcG9ydENvbmZpZ0ZpbGUiLA0KICAgICAgICBhY2NlcHRGaWxlVHlwZTogIi50Z3osLmNvbmYsLmNmZyIsDQogICAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgICB2YWx1ZTogew0KICAgICAgICAgIGZpbGVEYXRhOiB7fSwNCiAgICAgICAgICBmaWxlTmFtZTogdm0uJHQoIlVwZ3JhZGVGaWxlUGF0aCIpLA0KICAgICAgICB9LA0KICAgICAgICBtb2RhbFRpdGxlOiB2bS4kdCgiQXV0b3BGaWxlSGludCIpLA0KICAgICAgICBpbXBvcnRCdG5OYW1lOiB2bS4kdCgiSW1wb3J0IiksDQogICAgICAgIGV4cG9ydEJ0bk5hbWU6IHZtLiR0KCJFeHBvcnQiKSwNCiAgICAgICAgbW9kYWxDb25maXJtTmFtZTogdm0uJHQoIkltcG9ydCIpLA0KICAgICAgICB1cGxvYWRGdW5jdGlvbjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIG9uSW1wb3J0KHZtKTsNCiAgICAgICAgfSwNCiAgICAgICAgaXNTaG93RXhwb3J0OiB0cnVlLA0KICAgICAgICBvbkV4cG9ydDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIG9uRXhwb3J0KHZtLCAiY29uZmlnIik7DQogICAgICAgIH0sDQogICAgICAgIHNob3dIaW50OiB0cnVlLA0KICAgICAgICBoaW50Q29udGVudDogIigiICsgdm0uJHQoIkVuY3J5cHRlZCIpICsgIikiLA0KICAgICAgICBkZXNjcmlwdGlvbjogdm0uJHQoIkF1dG9wQ29uZmlnRmlsZURlc2MiKSwNCiAgICAgIH0sDQogICAgXSwNCiAgfTsNCiAgcmV0dXJuIGNvbnRlbnQ7DQp9DQo="},null]}