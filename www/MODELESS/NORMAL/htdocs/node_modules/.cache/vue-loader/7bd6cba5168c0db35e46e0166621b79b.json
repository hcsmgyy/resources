{"remainingRequest":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/ContactsCallLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/src/views/ContactsCallLog.vue","mtime":1600155105014},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/babel-loader/lib/index.js","mtime":1600155105338},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/cache-loader/dist/cjs.js","mtime":1600155105894},{"path":"/workspace3/minjie.chen/gitlab-work/advance-indoor/resources/www/MODELESS/NORMAL/htdocs/node_modules/vue-loader/lib/index.js","mtime":1600155105414}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBDb21tb25QYWdlIGZyb20gIkAvY29tcG9uZW50cy9Db21tb25QYWdlLnZ1ZSI7CmltcG9ydCB7CiAgc2hvd1JlcXVlc3RTdWNjZXNzLAogIGRlZXBDbG9uZSwKICBpc0FuSW50ZXJnZXIsCiAgZ2V0SXRlbUJ5S2V5LAogIGRhdGVGdHQsCiAgZm9ybWF0QU1QTSwKICBvbldlYkhhbmd1cCwKfSBmcm9tICJAL2pzL2NvbW1vbi5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ29tbW9uUGFnZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VkQ2ZnRGF0YToge30sCiAgICAgIHN1Ym1pdENmZ0RhdGE6IHt9LAogICAgICBhcGlEYXRhOiB7fSwKICAgICAgZGF0YTogewogICAgICAgIGdldERhdGFTdWNjZXNzOiBmYWxzZSwKICAgICAgfSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgZ2V0RGF0YSh0aGlzKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ29tbW9uUGFnZURhdGFDaGFuZ2U6IGZ1bmN0aW9uIChldmVudCkgewogICAgICBzZXRDaGFuZ2VkRGF0YSh0aGlzLCBldmVudCk7CiAgICAgIC8vdGhpcy5jaGFuZ2VkQ2ZnRGF0YVtldmVudC5pdGVtS2V5XSA9IGV2ZW50Lm5ld1ZhbDsKICAgIH0sCiAgfSwKfTsKCmZ1bmN0aW9uIHNldENoYW5nZWREYXRhKHZtLCBldmVudCkgewogIGlmIChldmVudC5jb250ZW50S2V5ID09ICJjYWxsbG9nIikgewogICAgaWYgKGV2ZW50Lml0ZW1LZXkgPT0gImNhbGxIaXN0b3J5VHlwZSIpIHsKICAgICAgZ2V0Q2FsbExvZ3NUYWJsZURhdGEodm0sIDEpOwogICAgfSBlbHNlIHsKICAgICAgdm0uY2hhbmdlZENmZ0RhdGFbZXZlbnQuaXRlbUtleV0gPSBldmVudC5uZXdWYWw7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBzdWJtaXREYXRhKHZtKSB7CiAgdm0uZGF0YS5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKCiAgbGV0IHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVDYWxsTG9nIiwKICAgIGFjdGlvbjogInNldCIsCiAgICBjb25maWdEYXRhOiB2bS5zdWJtaXRDZmdEYXRhLAogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtKTsKICAgIHZtLmRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogIH0pOwp9CgpmdW5jdGlvbiBnZXREYXRhKHZtKSB7CiAgdm0uJGF4aW9zLmdldCgiYXBpL3Bob25lQ2FsbExvZy9pbmZvIikudGhlbigocmVzcG9uc2UpID0+IHsKICAgIHZtLmdldERhdGFTdWNjZXNzID0gdHJ1ZTsKICAgIHZtLmFwaURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgdm0uY2hhbmdlZENmZ0RhdGEgPSBkZWVwQ2xvbmUocmVzcG9uc2UuZGF0YS5jb25maWdEYXRhKTsKICAgIGNyZWF0ZVBhZ2VEYXRhKHZtKTsKICB9KTsKfQoKZnVuY3Rpb24gZ2V0Q29tbWl0RGF0YSh2bSkgewogIHZtLnN1Ym1pdENmZ0RhdGEgPSB7fTsKICBmb3IgKHZhciBjaGFuZ2VkS2V5IGluIHZtLmNoYW5nZWRDZmdEYXRhKSB7CiAgICBpZiAodm0uYXBpRGF0YS5jb25maWdEYXRhW2NoYW5nZWRLZXldICE9IHZtLmNoYW5nZWRDZmdEYXRhW2NoYW5nZWRLZXldKSB7CiAgICAgIHZtLnN1Ym1pdENmZ0RhdGFbY2hhbmdlZEtleV0gPSB2bS5jaGFuZ2VkQ2ZnRGF0YVtjaGFuZ2VkS2V5XTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGNoZWNrQ29tbWl0RGF0YSh2bSkgewogIHJldHVybiBjaGVja0NhbGxMb2codm0pOwp9CmZ1bmN0aW9uIGNoZWNrQ2FsbExvZyh2bSkgewogIGxldCBzdWNjZXNzID0gdHJ1ZTsKICBsZXQgdXBwZXJMaW1pdCA9IGdldEl0ZW1CeUtleSgKICAgIHZtLmRhdGEsCiAgICAiY2FsbGxvZyIsCiAgICAiQ29uZmlnLlNldHRpbmdzLkNhcHR1cmUuVXBwZXJMaW1pdCIKICApOwogIGlmICh2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLlNldHRpbmdzLkNhcHR1cmUuVXBwZXJMaW1pdCJdID09ICIiKSB7CiAgICB1cHBlckxpbWl0LmlzV2FybiA9IHRydWU7CiAgICB1cHBlckxpbWl0Lndhcm5MYWJlbCA9IHZtLiR0KCJVcHBlckxpbWl0V2FybmluZyIpOwogICAgc3VjY2VzcyA9IGZhbHNlOwogIH0KICBpZiAoIWlzQW5JbnRlcmdlcih2bS5jaGFuZ2VkQ2ZnRGF0YVsiQ29uZmlnLlNldHRpbmdzLkNhcHR1cmUuVXBwZXJMaW1pdCJdKSkgewogICAgdXBwZXJMaW1pdC5pc1dhcm4gPSB0cnVlOwogICAgdXBwZXJMaW1pdC53YXJuTGFiZWwgPSB2bS4kdCgiVmFsdWVNdXN0QmVOdW1iZXIiKTsKICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICB9IGVsc2UgewogICAgaWYgKHZtLmNoYW5nZWRDZmdEYXRhWyJDb25maWcuU2V0dGluZ3MuQ2FwdHVyZS5VcHBlckxpbWl0Il0gPD0gMCkgewogICAgICB1cHBlckxpbWl0LmlzV2FybiA9IHRydWU7CiAgICAgIHVwcGVyTGltaXQud2FybkxhYmVsID0gdm0uJHQoIlZhbHVlR3JlYXRlcjBJbmZvIik7CiAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgIH0KICB9CiAgcmV0dXJuIHN1Y2Nlc3M7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVBhZ2VEYXRhKHZtKSB7CiAgdm0uZGF0YSA9IHsKICAgIGdldERhdGFTdWNjZXNzOiB0cnVlLAogICAgYnJlYWRDcnVtYjogewogICAgICBmaXJzdFRpdGxlOiB2bS4kdCgiQ29udGFjdHMiKSwKICAgICAgc2Vjb25kVGl0bGU6IHZtLiR0KCJDYWxsTG9nIiksCiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFjaGVja0NvbW1pdERhdGEodm0pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGdldENvbW1pdERhdGEodm0pOwogICAgICBzdWJtaXREYXRhKHZtKTsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gKCkgewogICAgICB2bS5kYXRhLmNhbmNlbExvYWRpbmcgPSB0cnVlOwogICAgICBnZXREYXRhKHZtKTsKICAgIH0sCiAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZSwKICAgIGNhbmNlbExvYWRpbmc6IGZhbHNlLAogICAgY29udGVudHM6IFtdLAogIH07CiAgdm0uZGF0YS5jb250ZW50cy5wdXNoKGNyZWF0ZUNhbGxMb2dDb250ZW50KHZtKSk7CiAgZ2V0Q2FsbExvZ3NUYWJsZURhdGEodm0sIDEpOwp9CgpmdW5jdGlvbiBjcmVhdGVDYWxsTG9nQ29udGVudCh2bSkgewogIC8vY2FsbCBsb2cgdHlwZSBpdGVtcwogIGxldCBjYWxsTG9nVHlwZUl0ZW1zID0gWwogICAgeyBrZXk6IDAsIGxhYmVsOiB2bS4kdCgiQWxsIikgfSwKICAgIHsga2V5OiAxLCBsYWJlbDogdm0uJHQoIkRpYWxlZCIpIH0sCiAgICB7IGtleTogMiwgbGFiZWw6IHZtLiR0KCJSZWNlaXZlZCIpIH0sCiAgICB7IGtleTogMywgbGFiZWw6IHZtLiR0KCJNaXNzZWQiKSB9LAogICAgeyBrZXk6IDQsIGxhYmVsOiB2bS4kdCgiRm9yd2FyZGVkIikgfSwKICBdOwogIC8vY2FwdHVyZSBkZWxheSBpdGVtcwogIGxldCBjYXB0dXJlRGVsYXlJdGVtcyA9IFtdOwogIGZvciAobGV0IGkgPSAwOyBpIDw9IDEwOyBpKyspIHsKICAgIGNhcHR1cmVEZWxheUl0ZW1zLnB1c2goeyBrZXk6IGksIGxhYmVsOiBpICsgIiAiICsgdm0uJHQoIlNlY29uZCIpIH0pOwogIH0KICAvL3RhYmxlIGZvb3RlcgogIGxldCB0YWJsZUZvb3RlckRhdGEgPSB7CiAgICBvbkRlbGV0ZTogZnVuY3Rpb24gKCkgewogICAgICBvbkRlbGV0ZUxvZyh2bSwgInNlbGVjdCIpOwogICAgfSwKICAgIG9uRGVsZXRlQWxsOiBmdW5jdGlvbiAoKSB7CiAgICAgIG9uRGVsZXRlTG9nKHZtLCAiYWxsIik7CiAgICB9LAogICAgb25QYWdlQ2hhbmdlOiBmdW5jdGlvbiAocGFnZSkgewogICAgICBnZXRDYWxsTG9nc1RhYmxlRGF0YSh2bSwgcGFnZSk7CiAgICB9LAogICAgc3VtOiAwLAogICAgcGFnZU51bWJlcjogMTUsCiAgICBjdXJQYWdlOiAwLAogICAgZGVsZXRlRGlzYWJsZWQ6IHRydWUsCiAgICBkZWxldGVBbGxEaXNhYmxlZDogZmFsc2UsCiAgfTsKICAvL2NvbnRlbnQKICBsZXQgY29udGVudCA9IHsKICAgIGtleTogImNhbGxsb2ciLAogICAgdGl0bGU6IHZtLiR0KCJDYWxsTG9nIiksCiAgICB0aXRsZURlc2NyaXB0aW9uOiB2bS4kdCgiQ2FsbExvZyIpLAogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIHRpdGxlOiB2bS4kdCgiQ2FwdHVyZURlbGF5IiksCiAgICAgICAgdHlwZTogInNlbGVjdCIsCiAgICAgICAga2V5OiAiQ29uZmlnLlNldHRpbmdzLkNhcHR1cmUuRGVsYXkiLAogICAgICAgIHZhbHVlOiB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5DYXB0dXJlLkRlbGF5Il0sCiAgICAgICAgc2VsZWN0SXRlbXM6IGNhcHR1cmVEZWxheUl0ZW1zLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJVcHBlckxpbWl0IiksCiAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICBrZXk6ICJDb25maWcuU2V0dGluZ3MuQ2FwdHVyZS5VcHBlckxpbWl0IiwKICAgICAgICB2YWx1ZTogdm0uYXBpRGF0YS5jb25maWdEYXRhWyJDb25maWcuU2V0dGluZ3MuQ2FwdHVyZS5VcHBlckxpbWl0Il0sCiAgICAgICAgaXNXYXJuOiBmYWxzZSwKICAgICAgICB3YXJuTGFiZWw6IHZtLiR0KCJVcHBlckxpbWl0V2FybmluZyIpLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6IHZtLiR0KCJDYWxsSGlzdG9yeSIpLAogICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgIHNob3dDYWxsTG9nQnRuOiB0cnVlLAogICAgICAgIGtleTogImNhbGxIaXN0b3J5VHlwZSIsCiAgICAgICAgdmFsdWU6ICIwIiwKICAgICAgICBzZWxlY3RJdGVtczogY2FsbExvZ1R5cGVJdGVtcywKICAgICAgICBvbkhhbmd1cDogZnVuY3Rpb24gKCkgewogICAgICAgICAgb25XZWJIYW5ndXAodm0pOwogICAgICAgIH0sCiAgICAgICAgb25FeHBvcnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIG9uRXhwb3J0KHZtKTsKICAgICAgICB9LAogICAgICB9LAogICAgICB7CiAgICAgICAgdHlwZTogInRhYmxlIiwKICAgICAgICBrZXk6ICJjYWxsbG9nIiwKICAgICAgICBzaG93Rm9vdGVyOiB0cnVlLAogICAgICAgIHNob3dSb3dTZWxlY3Rpb246IHRydWUsCiAgICAgICAgc2VsZWN0ZWRSb3dLZXlzOiBbXSwKICAgICAgICB0YWJsZUZvb3RlckRhdGE6IHRhYmxlRm9vdGVyRGF0YSwKICAgICAgICB0YWJsZURhdGE6IFtdLAogICAgICAgIHRhYmxlQ29sdW1uczogWwogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAibGFiZWwiLAogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkluZGV4IiksCiAgICAgICAgICAgIGRhdGFJbmRleDogImluZGV4IiwKICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiaW5kZXgiIH0sCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICAgICAgd2lkdGg6ICIxMCUiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJUeXBlIiksCiAgICAgICAgICAgIGRhdGFJbmRleDogInR5cGUiLAogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJ0eXBlIiB9LAogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgICAgIHdpZHRoOiAiMTAlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHR5cGU6ICJsYWJlbCIsCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiRGF0ZUxhYmVsIiksCiAgICAgICAgICAgIGRhdGFJbmRleDogImRhdGUiLAogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJkYXRlIiB9LAogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgICAgIHdpZHRoOiAiMTAlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHR5cGU6ICJsYWJlbCIsCiAgICAgICAgICAgIHRpdGxlOiB2bS4kdCgiVGltZSIpLAogICAgICAgICAgICBkYXRhSW5kZXg6ICJ0aW1lIiwKICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAidGltZSIgfSwKICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgICAgICB3aWR0aDogIjEwJSIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAibGFiZWwiLAogICAgICAgICAgICB0aXRsZTogdm0uJHQoIkxvY2FsSWRlbnRpdHkiKSwKICAgICAgICAgICAgZGF0YUluZGV4OiAiaWRlbnRpdHkiLAogICAgICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICJpZGVudGl0eSIgfSwKICAgICAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgICAgICB3aWR0aDogIjIwJSIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAibGFiZWwiLAogICAgICAgICAgICB0aXRsZTogdm0uJHQoIk5hbWUiKSwKICAgICAgICAgICAgZGF0YUluZGV4OiAibmFtZSIsCiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogIm5hbWUiIH0sCiAgICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICAgICAgd2lkdGg6ICIyMCUiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdHlwZTogImxhYmVsIiwKICAgICAgICAgICAgdGl0bGU6IHZtLiR0KCJudW1iZXIiKSwKICAgICAgICAgICAgZGF0YUluZGV4OiAibnVtYmVyIiwKICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAibnVtYmVyIiB9LAogICAgICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgICAgIHdpZHRoOiAiMjAlIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIF0sCiAgfTsKICByZXR1cm4gY29udGVudDsKfQoKZnVuY3Rpb24gZ2V0Q2FsbExvZ3NUYWJsZURhdGEodm0sIHBhZ2UpIHsKICB2YXIgZGF0ZUZvcm1hdCA9ICJ5eXl5LU1NLWRkIjsKICBsZXQgYXBpRGF0ZUZvcm1hdCA9CiAgICB2bS5hcGlEYXRhLmNvbmZpZ0RhdGFbIkNvbmZpZy5TZXR0aW5ncy5EQVRFVElNRS5EYXRlRm9ybWF0Il07CiAgaWYgKGFwaURhdGVGb3JtYXQgPT0gIjAiKSB7CiAgICBkYXRlRm9ybWF0ID0gInl5eXktTU0tZGQiOwogIH0gZWxzZSBpZiAoYXBpRGF0ZUZvcm1hdCA9PSAiMSIpIHsKICAgIGRhdGVGb3JtYXQgPSAieXl5eS9NTS9kZCI7CiAgfSBlbHNlIGlmIChhcGlEYXRlRm9ybWF0ID09ICIyIikgewogICAgZGF0ZUZvcm1hdCA9ICJkZC1NTS15eXl5IjsKICB9IGVsc2UgaWYgKGFwaURhdGVGb3JtYXQgPT0gIjMiKSB7CiAgICBkYXRlRm9ybWF0ID0gImRkL01NL3l5eXkiOwogIH0gZWxzZSBpZiAoYXBpRGF0ZUZvcm1hdCA9PSAiNiIpIHsKICAgIGRhdGVGb3JtYXQgPSAiTU0tZGQteXl5eSI7CiAgfSBlbHNlIGlmIChhcGlEYXRlRm9ybWF0ID09ICI3IikgewogICAgZGF0ZUZvcm1hdCA9ICJNTS9kZC95eXl5IjsKICB9CgogIHZtLiRheGlvcwogICAgLmdldCgKICAgICAgImFwaS9waG9uZUNhbGxMb2cvZ2V0P3BhZ2U9IiArCiAgICAgICAgcGFnZSArCiAgICAgICAgIiZ0eXBlPSIgKwogICAgICAgIGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY2FsbGxvZyIsICJjYWxsSGlzdG9yeVR5cGUiKS52YWx1ZQogICAgKQogICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgIGxldCB0YWJsZURhdGEgPSBbXTsKICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgIHZhciB0eXBlcyA9IG5ldyBBcnJheSgKICAgICAgICB2bS4kdCgiQWxsIiksCiAgICAgICAgdm0uJHQoIkRpYWxlZCIpLAogICAgICAgIHZtLiR0KCJSZWNlaXZlZCIpLAogICAgICAgIHZtLiR0KCJNaXNzZWQiKSwKICAgICAgICB2bS4kdCgiRm9yd2FyZGVkIikKICAgICAgKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmNhbGxMb2dMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGl0ZW0gPSB7CiAgICAgICAgICBrZXk6IGRhdGEuY2FsbExvZ0xpc3RbaV0uaWQsCiAgICAgICAgICBpbmRleDogaSArIDEsCiAgICAgICAgICB0eXBlOiB0eXBlc1tkYXRhLmNhbGxMb2dMaXN0W2ldLnR5cGVdLAogICAgICAgICAgZGF0ZTogZGF0ZUZ0dChkYXRlRm9ybWF0LCBuZXcgRGF0ZShkYXRhLmNhbGxMb2dMaXN0W2ldLmRhdGUpKSwKICAgICAgICAgIHRpbWU6CiAgICAgICAgICAgIHZtLmFwaURhdGEuY29uZmlnRGF0YVsiQ29uZmlnLlNldHRpbmdzLkRBVEVUSU1FLlRpbWVGb3JtYXQiXSA9PSAiMCIKICAgICAgICAgICAgICA/IGZvcm1hdEFNUE0oCiAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKAogICAgICAgICAgICAgICAgICAgIGRhdGEuY2FsbExvZ0xpc3RbaV0uZGF0ZSArICIgIiArIGRhdGEuY2FsbExvZ0xpc3RbaV0udGltZQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgOiBkYXRhLmNhbGxMb2dMaXN0W2ldLnRpbWUsCiAgICAgICAgICBpZGVudGl0eTogZGF0YS5jYWxsTG9nTGlzdFtpXS5pZGVudGl0eSwKICAgICAgICAgIG5hbWU6IGRhdGEuY2FsbExvZ0xpc3RbaV0ubmFtZSwKICAgICAgICAgIG51bWJlcjogZGF0YS5jYWxsTG9nTGlzdFtpXS5udW1iZXIsCiAgICAgICAgfTsKICAgICAgICB0YWJsZURhdGEucHVzaChpdGVtKTsKICAgICAgfQogICAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNhbGxsb2ciLCAiY2FsbGxvZyIpLnRhYmxlRGF0YSA9IHRhYmxlRGF0YTsKICAgICAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjYWxsbG9nIiwgImNhbGxsb2ciKS50YWJsZUZvb3RlckRhdGEuc3VtID0KICAgICAgICBkYXRhLnN1bTsKICAgICAgZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjYWxsbG9nIiwgImNhbGxsb2ciKS50YWJsZUZvb3RlckRhdGEucGFnZU51bWJlciA9CiAgICAgICAgZGF0YS5wYWdlTnVtOwogICAgICBnZXRJdGVtQnlLZXkoCiAgICAgICAgdm0uZGF0YSwKICAgICAgICAiY2FsbGxvZyIsCiAgICAgICAgImNhbGxsb2ciCiAgICAgICkudGFibGVGb290ZXJEYXRhLmN1clBhZ2UgPSBwYWdlOwogICAgICBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNhbGxsb2ciLCAiY2FsbGxvZyIpLnNlbGVjdGVkUm93S2V5cyA9IFtdOwogICAgfSk7Cn0KZnVuY3Rpb24gb25EZWxldGVMb2codm0sIHR5cGUpIHsKICBpZiAoCiAgICAhY29uZmlybSgKICAgICAgdHlwZSA9PSAiYWxsIiA/IHZtLiR0KCJEZWxldGVBbGxDb25maXJtIikgOiB2bS4kdCgiRGVsZXRlU2VsZWN0ZWRDb25maXJtIikKICAgICkKICApIHsKICAgIHJldHVybjsKICB9CiAgbGV0IHNlbGVjdGVkUm93S2V5cyA9IGdldEl0ZW1CeUtleSh2bS5kYXRhLCAiY2FsbGxvZyIsICJjYWxsbG9nIikKICAgIC5zZWxlY3RlZFJvd0tleXM7CiAgbGV0IHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVDYWxsTG9nIiwKICAgIGFjdGlvbjogImRlbCIsCiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IHR5cGUsCiAgICAgIGlkczogc2VsZWN0ZWRSb3dLZXlzLAogICAgICBsb2dUeXBlOiBnZXRJdGVtQnlLZXkodm0uZGF0YSwgImNhbGxsb2ciLCAiY2FsbEhpc3RvcnlUeXBlIikudmFsdWUsCiAgICB9LAogIH07CiAgdm0uJGF4aW9zLnBvc3QoImFwaSIsIHJlcXVlc3REYXRhKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgc2hvd1JlcXVlc3RTdWNjZXNzKHZtLCB2bS4kdCgiQ2FsbExvZ0RlbGV0ZVN1Y2Nlc3MiKSk7CiAgICBsZXQgdGFibGVGb290ZXJEYXRhID0gZ2V0SXRlbUJ5S2V5KHZtLmRhdGEsICJjYWxsbG9nIiwgImNhbGxsb2ciKQogICAgICAudGFibGVGb290ZXJEYXRhOwogICAgaWYgKHR5cGUgIT0gImFsbCIpIHsKICAgICAgbGV0IHN1bVBhZ2UgPSBNYXRoLmNlaWwoCiAgICAgICAgKHRhYmxlRm9vdGVyRGF0YS5zdW0gLSBzZWxlY3RlZFJvd0tleXMubGVuZ3RoKSAvCiAgICAgICAgICB0YWJsZUZvb3RlckRhdGEucGFnZU51bWJlcgogICAgICApOwogICAgICBzdW1QYWdlID0gc3VtUGFnZSA9PSAwID8gMSA6IHN1bVBhZ2U7CiAgICAgIGxldCBwYWdlID0KICAgICAgICB0YWJsZUZvb3RlckRhdGEuY3VyUGFnZSA+PSBzdW1QYWdlID8gc3VtUGFnZSA6IHRhYmxlRm9vdGVyRGF0YS5jdXJQYWdlOwogICAgICBnZXRDYWxsTG9nc1RhYmxlRGF0YSh2bSwgcGFnZSk7CiAgICB9IGVsc2UgewogICAgICBnZXRDYWxsTG9nc1RhYmxlRGF0YSh2bSwgMSk7CiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIG9uRXhwb3J0KHZtKSB7CiAgbGV0IHJlcXVlc3REYXRhID0gewogICAgdGFyZ2V0OiAicGhvbmVDYWxsTG9nIiwKICAgIGFjdGlvbjogImV4cG9ydCIsCiAgfTsKICB2bS4kYXhpb3MucG9zdCgiYXBpIiwgcmVxdWVzdERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBzaG93UmVxdWVzdFN1Y2Nlc3Modm0sIHZtLiR0KCJFeHBvcnRTdWNjZXNzIikpOwogICAgbGV0IGFkZHJlc3MgPSByZXNwb25zZS5kYXRhLmRhdGEuYWRkcmVzczsKICAgIHdpbmRvdy5vcGVuKGFkZHJlc3MpOwogIH0pOwp9Cg=="},{"version":3,"sources":["ContactsCallLog.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ContactsCallLog.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <CommonPage :data=\"data\" @onDataChange=\"onCommonPageDataChange($event)\"></CommonPage>\n</template>\n\n<script>\nimport CommonPage from \"@/components/CommonPage.vue\";\nimport {\n  showRequestSuccess,\n  deepClone,\n  isAnInterger,\n  getItemByKey,\n  dateFtt,\n  formatAMPM,\n  onWebHangup,\n} from \"@/js/common.js\";\n\nexport default {\n  components: {\n    CommonPage,\n  },\n  data() {\n    return {\n      changedCfgData: {},\n      submitCfgData: {},\n      apiData: {},\n      data: {\n        getDataSuccess: false,\n      },\n    };\n  },\n  created() {\n    getData(this);\n  },\n  methods: {\n    onCommonPageDataChange: function (event) {\n      setChangedData(this, event);\n      //this.changedCfgData[event.itemKey] = event.newVal;\n    },\n  },\n};\n\nfunction setChangedData(vm, event) {\n  if (event.contentKey == \"calllog\") {\n    if (event.itemKey == \"callHistoryType\") {\n      getCallLogsTableData(vm, 1);\n    } else {\n      vm.changedCfgData[event.itemKey] = event.newVal;\n    }\n  }\n}\n\nfunction submitData(vm) {\n  vm.data.submitLoading = true;\n\n  let requestData = {\n    target: \"phoneCallLog\",\n    action: \"set\",\n    configData: vm.submitCfgData,\n  };\n  vm.$axios.post(\"api\", requestData).then((response) => {\n    showRequestSuccess(vm);\n    vm.data.submitLoading = false;\n  });\n}\n\nfunction getData(vm) {\n  vm.$axios.get(\"api/phoneCallLog/info\").then((response) => {\n    vm.getDataSuccess = true;\n    vm.apiData = response.data;\n    vm.changedCfgData = deepClone(response.data.configData);\n    createPageData(vm);\n  });\n}\n\nfunction getCommitData(vm) {\n  vm.submitCfgData = {};\n  for (var changedKey in vm.changedCfgData) {\n    if (vm.apiData.configData[changedKey] != vm.changedCfgData[changedKey]) {\n      vm.submitCfgData[changedKey] = vm.changedCfgData[changedKey];\n    }\n  }\n}\n\nfunction checkCommitData(vm) {\n  return checkCallLog(vm);\n}\nfunction checkCallLog(vm) {\n  let success = true;\n  let upperLimit = getItemByKey(\n    vm.data,\n    \"calllog\",\n    \"Config.Settings.Capture.UpperLimit\"\n  );\n  if (vm.changedCfgData[\"Config.Settings.Capture.UpperLimit\"] == \"\") {\n    upperLimit.isWarn = true;\n    upperLimit.warnLabel = vm.$t(\"UpperLimitWarning\");\n    success = false;\n  }\n  if (!isAnInterger(vm.changedCfgData[\"Config.Settings.Capture.UpperLimit\"])) {\n    upperLimit.isWarn = true;\n    upperLimit.warnLabel = vm.$t(\"ValueMustBeNumber\");\n    success = false;\n  } else {\n    if (vm.changedCfgData[\"Config.Settings.Capture.UpperLimit\"] <= 0) {\n      upperLimit.isWarn = true;\n      upperLimit.warnLabel = vm.$t(\"ValueGreater0Info\");\n      success = false;\n    }\n  }\n  return success;\n}\n\nfunction createPageData(vm) {\n  vm.data = {\n    getDataSuccess: true,\n    breadCrumb: {\n      firstTitle: vm.$t(\"Contacts\"),\n      secondTitle: vm.$t(\"CallLog\"),\n    },\n    onSubmit: function () {\n      if (!checkCommitData(vm)) {\n        return;\n      }\n      getCommitData(vm);\n      submitData(vm);\n    },\n    onCancel: function () {\n      vm.data.cancelLoading = true;\n      getData(vm);\n    },\n    submitLoading: false,\n    cancelLoading: false,\n    contents: [],\n  };\n  vm.data.contents.push(createCallLogContent(vm));\n  getCallLogsTableData(vm, 1);\n}\n\nfunction createCallLogContent(vm) {\n  //call log type items\n  let callLogTypeItems = [\n    { key: 0, label: vm.$t(\"All\") },\n    { key: 1, label: vm.$t(\"Dialed\") },\n    { key: 2, label: vm.$t(\"Received\") },\n    { key: 3, label: vm.$t(\"Missed\") },\n    { key: 4, label: vm.$t(\"Forwarded\") },\n  ];\n  //capture delay items\n  let captureDelayItems = [];\n  for (let i = 0; i <= 10; i++) {\n    captureDelayItems.push({ key: i, label: i + \" \" + vm.$t(\"Second\") });\n  }\n  //table footer\n  let tableFooterData = {\n    onDelete: function () {\n      onDeleteLog(vm, \"select\");\n    },\n    onDeleteAll: function () {\n      onDeleteLog(vm, \"all\");\n    },\n    onPageChange: function (page) {\n      getCallLogsTableData(vm, page);\n    },\n    sum: 0,\n    pageNumber: 15,\n    curPage: 0,\n    deleteDisabled: true,\n    deleteAllDisabled: false,\n  };\n  //content\n  let content = {\n    key: \"calllog\",\n    title: vm.$t(\"CallLog\"),\n    titleDescription: vm.$t(\"CallLog\"),\n    items: [\n      {\n        title: vm.$t(\"CaptureDelay\"),\n        type: \"select\",\n        key: \"Config.Settings.Capture.Delay\",\n        value: vm.apiData.configData[\"Config.Settings.Capture.Delay\"],\n        selectItems: captureDelayItems,\n      },\n      {\n        title: vm.$t(\"UpperLimit\"),\n        type: \"input\",\n        key: \"Config.Settings.Capture.UpperLimit\",\n        value: vm.apiData.configData[\"Config.Settings.Capture.UpperLimit\"],\n        isWarn: false,\n        warnLabel: vm.$t(\"UpperLimitWarning\"),\n      },\n      {\n        title: vm.$t(\"CallHistory\"),\n        type: \"select\",\n        showCallLogBtn: true,\n        key: \"callHistoryType\",\n        value: \"0\",\n        selectItems: callLogTypeItems,\n        onHangup: function () {\n          onWebHangup(vm);\n        },\n        onExport: function () {\n          onExport(vm);\n        },\n      },\n      {\n        type: \"table\",\n        key: \"calllog\",\n        showFooter: true,\n        showRowSelection: true,\n        selectedRowKeys: [],\n        tableFooterData: tableFooterData,\n        tableData: [],\n        tableColumns: [\n          {\n            type: \"label\",\n            title: vm.$t(\"Index\"),\n            dataIndex: \"index\",\n            scopedSlots: { customRender: \"index\" },\n            align: \"center\",\n            width: \"10%\",\n          },\n          {\n            type: \"label\",\n            title: vm.$t(\"Type\"),\n            dataIndex: \"type\",\n            scopedSlots: { customRender: \"type\" },\n            align: \"center\",\n            width: \"10%\",\n          },\n          {\n            type: \"label\",\n            title: vm.$t(\"DateLabel\"),\n            dataIndex: \"date\",\n            scopedSlots: { customRender: \"date\" },\n            align: \"center\",\n            width: \"10%\",\n          },\n          {\n            type: \"label\",\n            title: vm.$t(\"Time\"),\n            dataIndex: \"time\",\n            scopedSlots: { customRender: \"time\" },\n            align: \"center\",\n            width: \"10%\",\n          },\n          {\n            type: \"label\",\n            title: vm.$t(\"LocalIdentity\"),\n            dataIndex: \"identity\",\n            scopedSlots: { customRender: \"identity\" },\n            align: \"center\",\n            width: \"20%\",\n          },\n          {\n            type: \"label\",\n            title: vm.$t(\"Name\"),\n            dataIndex: \"name\",\n            scopedSlots: { customRender: \"name\" },\n            align: \"center\",\n            width: \"20%\",\n          },\n          {\n            type: \"label\",\n            title: vm.$t(\"number\"),\n            dataIndex: \"number\",\n            scopedSlots: { customRender: \"number\" },\n            align: \"center\",\n            width: \"20%\",\n          },\n        ],\n      },\n    ],\n  };\n  return content;\n}\n\nfunction getCallLogsTableData(vm, page) {\n  var dateFormat = \"yyyy-MM-dd\";\n  let apiDateFormat =\n    vm.apiData.configData[\"Config.Settings.DATETIME.DateFormat\"];\n  if (apiDateFormat == \"0\") {\n    dateFormat = \"yyyy-MM-dd\";\n  } else if (apiDateFormat == \"1\") {\n    dateFormat = \"yyyy/MM/dd\";\n  } else if (apiDateFormat == \"2\") {\n    dateFormat = \"dd-MM-yyyy\";\n  } else if (apiDateFormat == \"3\") {\n    dateFormat = \"dd/MM/yyyy\";\n  } else if (apiDateFormat == \"6\") {\n    dateFormat = \"MM-dd-yyyy\";\n  } else if (apiDateFormat == \"7\") {\n    dateFormat = \"MM/dd/yyyy\";\n  }\n\n  vm.$axios\n    .get(\n      \"api/phoneCallLog/get?page=\" +\n        page +\n        \"&type=\" +\n        getItemByKey(vm.data, \"calllog\", \"callHistoryType\").value\n    )\n    .then((response) => {\n      let tableData = [];\n      let data = response.data.data;\n      var types = new Array(\n        vm.$t(\"All\"),\n        vm.$t(\"Dialed\"),\n        vm.$t(\"Received\"),\n        vm.$t(\"Missed\"),\n        vm.$t(\"Forwarded\")\n      );\n      for (let i = 0; i < data.callLogList.length; i++) {\n        let item = {\n          key: data.callLogList[i].id,\n          index: i + 1,\n          type: types[data.callLogList[i].type],\n          date: dateFtt(dateFormat, new Date(data.callLogList[i].date)),\n          time:\n            vm.apiData.configData[\"Config.Settings.DATETIME.TimeFormat\"] == \"0\"\n              ? formatAMPM(\n                  new Date(\n                    data.callLogList[i].date + \" \" + data.callLogList[i].time\n                  )\n                )\n              : data.callLogList[i].time,\n          identity: data.callLogList[i].identity,\n          name: data.callLogList[i].name,\n          number: data.callLogList[i].number,\n        };\n        tableData.push(item);\n      }\n      getItemByKey(vm.data, \"calllog\", \"calllog\").tableData = tableData;\n      getItemByKey(vm.data, \"calllog\", \"calllog\").tableFooterData.sum =\n        data.sum;\n      getItemByKey(vm.data, \"calllog\", \"calllog\").tableFooterData.pageNumber =\n        data.pageNum;\n      getItemByKey(\n        vm.data,\n        \"calllog\",\n        \"calllog\"\n      ).tableFooterData.curPage = page;\n      getItemByKey(vm.data, \"calllog\", \"calllog\").selectedRowKeys = [];\n    });\n}\nfunction onDeleteLog(vm, type) {\n  if (\n    !confirm(\n      type == \"all\" ? vm.$t(\"DeleteAllConfirm\") : vm.$t(\"DeleteSelectedConfirm\")\n    )\n  ) {\n    return;\n  }\n  let selectedRowKeys = getItemByKey(vm.data, \"calllog\", \"calllog\")\n    .selectedRowKeys;\n  let requestData = {\n    target: \"phoneCallLog\",\n    action: \"del\",\n    data: {\n      type: type,\n      ids: selectedRowKeys,\n      logType: getItemByKey(vm.data, \"calllog\", \"callHistoryType\").value,\n    },\n  };\n  vm.$axios.post(\"api\", requestData).then((response) => {\n    showRequestSuccess(vm, vm.$t(\"CallLogDeleteSuccess\"));\n    let tableFooterData = getItemByKey(vm.data, \"calllog\", \"calllog\")\n      .tableFooterData;\n    if (type != \"all\") {\n      let sumPage = Math.ceil(\n        (tableFooterData.sum - selectedRowKeys.length) /\n          tableFooterData.pageNumber\n      );\n      sumPage = sumPage == 0 ? 1 : sumPage;\n      let page =\n        tableFooterData.curPage >= sumPage ? sumPage : tableFooterData.curPage;\n      getCallLogsTableData(vm, page);\n    } else {\n      getCallLogsTableData(vm, 1);\n    }\n  });\n}\n\nfunction onExport(vm) {\n  let requestData = {\n    target: \"phoneCallLog\",\n    action: \"export\",\n  };\n  vm.$axios.post(\"api\", requestData).then((response) => {\n    showRequestSuccess(vm, vm.$t(\"ExportSuccess\"));\n    let address = response.data.data.address;\n    window.open(address);\n  });\n}\n</script>"]}]}